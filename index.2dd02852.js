!function(){function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(e){return e&&e.__esModule?e.default:e}var i={},r={},o=t.parcelRequire4f35;function a(e,t,n,i,r,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,r)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function s(e){a(o,i,r,s,l,"next",e)}function l(e){a(o,i,r,s,l,"throw",e)}s(void 0)}))}}null==o&&((o=function(e){if(e in i)return i[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequire4f35=o),o.register("2XGuX",(function(t,n){var i,r;e(t.exports,"register",(function(){return i}),(function(e){return i=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var o={};i=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},r=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("2iWfN",(function(e,t){e.exports=o("fU3bn")})),o.register("fU3bn",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0});var n,i=(n=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}},function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e});function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),n=arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"YYYY. MM. DD. ";r(this,e),this._now=t,this.isGMT=i,this.dateFormat=o,this.isGMT&&(this._now=this.toDate(this._now).getTime()),this.format={a_few_seconds_ago:"a few seconds ago",seconds_ago:"seconds ago",a_minute_ago:"a minute ago",minutes_ago:"minutes ago",an_hour_ago:"an hour ago",hours_ago:"hours ago",a_day_ago:"a day ago",days_ago:"days ago",a_month_ago:"a month ago",months_ago:"months ago",a_year_ago:"a year ago",years_ago:"years ago"},this.extend(this.format,n)}return i(e,[{key:"extend",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}},{key:"getDateFormat",value:function(e,t,n,i,r,o){var a=this.dateFormat;return-1===this.dateFormat.indexOf("YYYY")&&(e=e.toString().substring(2,4)),a=a.replace("YYYY",e).replace("YY",e).replace("MM",t).replace("DD",n),i&&r&&o&&(a=a+" "+i+":"+r+":"+o),a}},{key:"setDateFormat",value:function(e){this.dateFormat=e}},{key:"toDate",value:function(e){return this.toGMTDate(e,!0)}},{key:"toGMTDate",value:function(e,t){var n=new Date,i=n.getTimezoneOffset();if(!e)return n;t&&(i=0);var r=e.split("T"),o=r[0].split("-"),a=r[1].split(":");return new Date(o[0],parseInt(o[1],10)-1,o[2],a[0],parseInt(a[1],10)-i,a[2].split(".")[0])}},{key:"getNow",value:function(){return new Date(this._now)}},{key:"getNowMilisecond",value:function(){return this._now}},{key:"setNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:+new Date;return this._now=e,this._now}},{key:"calculate",value:function(e){var t=Math.abs(this._now-e)/1e3,n=Math.floor(t/31536e3),i=Math.floor(t/2592e3),r=Math.floor(t/86400),o=Math.floor(t/3600)%24,a=Math.floor(t/60)%60,s=Math.floor(t%60);return n>1?""+n+this.format.years_ago:n>0?""+this.format.a_year_ago:i>1?""+i+this.format.months_ago:i>0?""+this.format.a_month_ago:r>1?""+r+this.format.days_ago:r>0?""+this.format.a_day_ago:o>1?""+o+this.format.hours_ago:o>0?""+this.format.an_hour_ago:a>1?""+a+this.format.minutes_ago:a>0?""+this.format.a_minute_ago:s>20&&this.format.seconds_ago?""+s+this.format.seconds_ago:s>0?""+this.format.a_few_seconds_ago:""}},{key:"_format",value:function(e,t){var n=e.getFullYear(),i=("0"+(e.getMonth()+1)).slice(-2),r=("0"+e.getDate()).slice(-2),o=("0"+e.getHours()).slice(-2),a=("0"+e.getMinutes()).slice(-2),s=("0"+e.getSeconds()).slice(-2);return t?this.getDateFormat(n,i,r):this.getDateFormat(n,i,r,o,a,s)}},{key:"diffDate",value:function(e,t){return e&&t?Math.abs(t.getTime()-e.getTime())/1e3:0}},{key:"printUntil",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"month",n=arguments[2],i=this.printFull(e,!1,!0),r=this.getNow(),o=this.diffDate(i,r),a=Math.floor(o/31536e3),s=Math.floor(o/2592e3),l=Math.floor(o/86400);return a>0&&"year"==t||s>0&&"month"==t||l>0&&"day"==t?this._format(new Date(i),n):this.calculate(new Date(i))}},{key:"printOnlyDate",value:function(e){return this.printFull(e,!0)}},{key:"printFull",value:function(e,t,n){var i,r=new Date,o=void 0,a=r.getTimezoneOffset();if(!e)return r;if(-1==e.indexOf("T"))return this._format(new Date(e));i=(e=e.split("T"))[0].split("-"),o=e[1].split(":");var s=i[0],l=parseInt(i[1],10)-1,u=i[2],c=o[0],d=parseInt(o[1],10)-a,h=o[2].split(".")[0],f=new Date(s,l,u,c,d,h);return n?f:this._format(f,t)}},{key:"print",value:function(e){return e?this.calculate(e):""}}]),e}();e.exports.default=o})),o.register("fIIbJ",(function(t,n){e(t.exports,"Emitter",(function(){return o("iwZD2").Emitter})),e(t.exports,"MarkerSeverity",(function(){return o("iwZD2").MarkerSeverity})),e(t.exports,"Range",(function(){return o("iwZD2").Range})),e(t.exports,"Uri",(function(){return o("iwZD2").Uri})),e(t.exports,"editor",(function(){return o("iwZD2").editor})),e(t.exports,"languages",(function(){return o("iwZD2").languages})),o("iwZD2")})),o.register("kqerF",(function(e,t){e.exports=Promise.all([o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("4WnXQ")),o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("kTJgk"))]).then((function(){return o("i3Eso")}))})),o.register("bVs8P",(function(e,t){"use strict";var n=o("glOrQ");e.exports=n((function(e){return new Promise((function(t,n){var i=document.getElementsByTagName("script");if([].concat(i).some((function(t){return t.src===e})))t();else{var r=document.createElement("link");r.href=e,r.rel="preload",r.as="script",document.head.appendChild(r);var o=document.createElement("script");o.async=!0,o.type="text/javascript",o.src=e,o.onerror=function(t){var i=new TypeError("Failed to fetch dynamically imported module: ".concat(e,". Error: ").concat(t.message));o.onerror=o.onload=null,o.remove(),n(i)},o.onload=function(){o.onerror=o.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(o)}}))}))})),o.register("glOrQ",(function(e,t){"use strict";var n={},i={},r={};function o(e){switch(e){case"preload":return i;case"prefetch":return r;default:return n}}e.exports=function(e,t){return function(n){var i=o(t);return i[n]?i[n]:i[n]=e.apply(null,arguments).catch((function(e){throw delete i[n],e}))}}})),o.register("g8aXv",(function(t,n){var i;e(t.exports,"getBundleURL",(function(){return i}),(function(e){return i=e}));var r={};function o(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}i=function(e){var t=r[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return o(e[2])}return"/"}(),r[e]=t),t}})),o.register("kURPe",(function(e,t){"use strict";var n=o("glOrQ");e.exports=n((function(e){return new Promise((function(t,n){var i=document.getElementsByTagName("link");if([].concat(i).some((function(t){return t.href===e&&t.rel.indexOf("stylesheet")>-1})))t();else{var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=function(e){r.onerror=r.onload=null,r.remove(),n(e)},r.onload=function(){r.onerror=r.onload=null,t()},document.getElementsByTagName("head")[0].appendChild(r)}}))}))})),o.register("1nYeY",(function(t,n){e(t.exports,"Emitter",(function(){return o("iwZD2").Emitter})),e(t.exports,"MarkerSeverity",(function(){return o("iwZD2").MarkerSeverity})),e(t.exports,"Range",(function(){return o("iwZD2").Range})),e(t.exports,"Uri",(function(){return o("iwZD2").Uri})),e(t.exports,"editor",(function(){return o("iwZD2").editor})),e(t.exports,"languages",(function(){return o("iwZD2").languages})),o("iwZD2")})),o.register("2lYpW",(function(e,t){e.exports=Promise.all([o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("kYK4z")),o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("g51Ba"))]).then((function(){return o("5s5V8")}))})),o.register("fuv5B",(function(t,n){e(t.exports,"Emitter",(function(){return o("iwZD2").Emitter})),e(t.exports,"Range",(function(){return o("iwZD2").Range})),e(t.exports,"Uri",(function(){return o("iwZD2").Uri})),e(t.exports,"editor",(function(){return o("iwZD2").editor})),e(t.exports,"languages",(function(){return o("iwZD2").languages})),o("iwZD2")})),o.register("57lVJ",(function(e,t){e.exports=Promise.all([o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("3Xiih")),o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("44e5f"))]).then((function(){return o("dhSGL")}))})),o.register("aLm5l",(function(t,n){e(t.exports,"languages",(function(){return o("iwZD2").languages})),o("iwZD2")})),o.register("gKoIW",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("4hvhB")).then((function(){return o("6rsUB")}))})),o.register("c8Tml",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("cZJ6C")).then((function(){return o("fwmZo")}))})),o.register("ira0M",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("fRAeW")).then((function(){return o("4Z5Sw")}))})),o.register("5gQgc",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("h4kur")).then((function(){return o("ktiZa")}))})),o.register("5Zmxm",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("6xp3O")).then((function(){return o("2ceQ6")}))})),o.register("4qFlJ",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("12ZJn")).then((function(){return o("1CbPc")}))})),o.register("7W89P",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("lsObN")).then((function(){return o("43zYK")}))})),o.register("8n96n",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("gtEYP")).then((function(){return o("jU7BD")}))})),o.register("AFKBL",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("OemLw")).then((function(){return o("7nKCN")}))})),o.register("c8TLh",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("bO9f2")).then((function(){return o("75299")}))})),o.register("lMEps",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jmH25")).then((function(){return o("byhPh")}))})),o.register("16xiS",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("hQOzL")).then((function(){return o("fDL0S")}))})),o.register("62Y46",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("gyZh5")).then((function(){return o("1rEfO")}))})),o.register("1TZyM",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("4jzkd")).then((function(){return o("jzS8s")}))})),o.register("bFYCC",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("61KG4")).then((function(){return o("13bRQ")}))})),o.register("2KY0m",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("ilr5l")).then((function(){return o("kBHMd")}))})),o.register("9omWI",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("fCFNW")).then((function(){return o("fojKu")}))})),o.register("aYFpF",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("ifndp")).then((function(){return o("go23R")}))})),o.register("9mmoX",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("6Ak3q")).then((function(){return o("5pyM0")}))})),o.register("9TiOf",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("ieOHg"))]).then((function(){return o("gldQN")}))})),o.register("bpOSs",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("17IMQ")).then((function(){return o("39YhW")}))})),o.register("hefkO",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("aU3ow"))]).then((function(){return o("aaOpX")}))})),o.register("7SpMH",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("aRFpb")).then((function(){return o("89r27")}))})),o.register("cV8Ng",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("2t8Bp")).then((function(){return o("edgNZ")}))})),o.register("d8bUH",(function(e,t){e.exports=Promise.all([o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("9qDn5")),o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jd1fY"))]).then((function(){return o("dimP8")}))})),o.register("cjuRI",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("dmT0j")).then((function(){return o("m8swl")}))})),o.register("kxH7w",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("kgQ3B")).then((function(){return o("aAR7J")}))})),o.register("xlG7j",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("54dEo")).then((function(){return o("cYAxO")}))})),o.register("3ePY1",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("gWs6I")).then((function(){return o("51FZ4")}))})),o.register("2hHBe",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("7NHvq")).then((function(){return o("5uczW")}))})),o.register("3XKzg",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("eVrZ2"))]).then((function(){return o("1wTnr")}))})),o.register("f0ab0",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("3NyNC")).then((function(){return o("1BBmG")}))})),o.register("eGczV",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("exPsv")).then((function(){return o("3Ybb9")}))})),o.register("64L6c",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("646Wu")).then((function(){return o("5nFV7")}))})),o.register("hayCP",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("kP5SB")).then((function(){return o("b9nFS")}))})),o.register("yQI5X",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jUbUu")).then((function(){return o("8TIre")}))})),o.register("fF6kJ",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("BceZI")).then((function(){return o("4xg8V")}))})),o.register("f3L1A",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("cUAgp")).then((function(){return o("doyOM")}))})),o.register("2jpmF",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("6Dlq6")).then((function(){return o("8ZV1q")}))})),o.register("jgZYh",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("4DGGz")).then((function(){return o("iEfs1")}))})),o.register("cSgll",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("cf2Kf")).then((function(){return o("4plWV")}))})),o.register("h9jex",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("5iIpq")).then((function(){return o("3UQoW")}))})),o.register("kkI62",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("imezb")).then((function(){return o("1bwKV")}))})),o.register("22Zxw",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("1xUFf")).then((function(){return o("8BRJP")}))})),o.register("adpwj",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("6xK4V")).then((function(){return o("Km3yu")}))})),o.register("kT0f0",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("1rvLb")).then((function(){return o("ivi1Y")}))})),o.register("gkpZY",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("lVdDf"))]).then((function(){return o("aYhof")}))})),o.register("jTtOA",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("4gsSY")).then((function(){return o("hd5Zy")}))})),o.register("hP9ac",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("h7MNC")).then((function(){return o("7MKI2")}))})),o.register("eHj9x",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jGJtp"))]).then((function(){return o("eCgTS")}))})),o.register("ifiDF",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("e6FfY")).then((function(){return o("dcUrV")}))})),o.register("3yM5B",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("78H66")).then((function(){return o("60U4X")}))})),o.register("k7wWw",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("eEmJk")).then((function(){return o("6zxmF")}))})),o.register("kZzvv",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("6hz7K")).then((function(){return o("ieib3")}))})),o.register("1iXDZ",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("7lmtX")).then((function(){return o("eT4QJ")}))})),o.register("7dKvn",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("ighcv")).then((function(){return o("iKUj2")}))})),o.register("bDnUf",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("eg2v3")).then((function(){return o("geBzg")}))})),o.register("lKVfc",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("7KgRR")).then((function(){return o("eJmyE")}))})),o.register("7VHCx",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("iBp4t")).then((function(){return o("7vLIk")}))})),o.register("NIQHv",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("aOfJM")).then((function(){return o("hkNAR")}))})),o.register("3DW8O",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("a81I0")).then((function(){return o("3W77h")}))})),o.register("8JxNq",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("gT0OL")).then((function(){return o("h6f8r")}))})),o.register("9tOXT",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("52YSb")).then((function(){return o("gKLx5")}))})),o.register("bJYx9",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jhiBY")).then((function(){return o("3h2I0")}))})),o.register("hJC5E",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("kwdVf")).then((function(){return o("9222s")}))})),o.register("gEzl3",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("lUmNn")).then((function(){return o("e8lWl")}))})),o.register("i5VOW",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("i20xl")).then((function(){return o("7J44s")}))})),o.register("acSqT",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("aTXB0")).then((function(){return o("hZIdW")}))})),o.register("8peJN",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("8bIxr")).then((function(){return o("dHinl")}))})),o.register("9bvwy",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("9qDn5"))]).then((function(){return o("7UIX8")}))})),o.register("hJug7",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("7avaK")).then((function(){return o("iQDQH")}))})),o.register("gqdPL",(function(e,t){e.exports=Promise.all([o("kURPe")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("jiDEu")),o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("e5cle"))]).then((function(){return o("eFZZ7")}))})),o.register("dECh2",(function(e,t){e.exports=o("bVs8P")(o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("a8hfu")).then((function(){return o("lQr82")}))})),o.register("ftI7v",(function(e,t){var n,i=o("dCPLc"),r="object"==typeof Reflect?Reflect:null,a=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};n=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function l(){l.init.call(this)}e.exports=l,e.exports.once=function(e,t){return new Promise((function(n,i){var r=function(n){e.removeListener(t,o),i(n)},o=function(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))};y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,n)}(e,r,{once:!0})}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var u=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":(0,i.default)(e)))}function d(e){return void 0===e._maxListeners?l.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,o,a,s;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=i?[n,a]:[a,n]:i?a.unshift(n):a.push(n),(r=d(e))>0&&a.length>r&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function g(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function v(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":(0,i.default)(e)));e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},l.prototype.getMaxListeners=function(){return d(this)},l.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)a(l,this,t);else{var u=l.length,c=m(l,u);for(n=0;n<u;++n)a(c[n],this,t)}return!0},l.prototype.addListener=function(e,t){return h(this,e,t,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(e,t){return h(this,e,t,!0)},l.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},l.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},l.prototype.removeListener=function(e,t){var n,i,r,o,a;if(c(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},l.prototype.listeners=function(e){return g(this,e,!0)},l.prototype.rawListeners=function(e){return g(this,e,!1)},l.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},l.prototype.listenerCount=v,l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}})),o.register("hUsYa",(function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}})),o.register("lxR10",(function(e,n){"use strict";var i,r=o("d2KzW");e.exports=E,E.ReadableState=S;o("ftI7v").EventEmitter;var a=function(e,t){return e.listeners(t).length},s=o("iZfNb"),l=o("dwjmx").Buffer,u=t.Uint8Array||function(){};var c,d=o("7Epwj");c=d&&d.debuglog?d.debuglog("stream"):function(){};var h,f,p,g=o("iFFtH"),v=o("8pVWK"),m=o("2UDLe").getHighWaterMark,y=o("e9d3r").codes,b=y.ERR_INVALID_ARG_TYPE,_=y.ERR_STREAM_PUSH_AFTER_EOF,w=y.ERR_METHOD_NOT_IMPLEMENTED,k=y.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;o("hUsYa")(E,s);var C=v.errorOrDestroy,x=["error","close","destroy","pause","resume"];function S(e,t,n){i=i||o("4W48e"),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",n),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(h||(h=o("78kac").StringDecoder),this.decoder=new h(e.encoding),this.encoding=e.encoding)}function E(e){if(i=i||o("4W48e"),!(this instanceof E))return new E(e);var t=this instanceof i;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function D(e,t,n,i,r){c("readableAddChunk",t);var o,a=e._readableState;if(null===t)a.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,L(e)))}(e,a);else if(r||(o=function(e,t){var n;i=t,l.isBuffer(i)||i instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var i;return n}(a,t)),o)C(e,o);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),i)a.endEmitted?C(e,new k):A(e,a,t,!0);else if(a.ended)C(e,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?A(e,a,t,!1):M(e,a)):A(e,a,t,!1)}else i||(a.reading=!1,M(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function A(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),M(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=v.destroy,E.prototype._undestroy=v.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=l.from(e,t),t=""),n=!0),D(this,e,t,!1,n)},E.prototype.unshift=function(e){return D(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){h||(h=o("78kac").StringDecoder);var t=new h(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(L,e))}function L(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function M(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){c("readable nexttick read 0"),e.read(0)}function F(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function H(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function j(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(z,t,e))}function z(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function W(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}E.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):T(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&j(this),null;var i,r=t.needReadable;return c("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",r=!0),t.ended||t.reading?c("reading or ended",r=!1):r&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(i=e>0?H(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==i&&this.emit("data",i),i},E.prototype._read=function(e){C(this,new w("_read()"))},E.prototype.pipe=function(e,t){var n=function(e,t){c("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())},i=function(){c("onend"),e.end()},o=function(){c("cleanup"),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",g),e.removeListener("error",m),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",d),h.removeListener("data",s),v=!0,!f.awaitDrain||e._writableState&&!e._writableState.needDrain||g()},s=function(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===f.pipesCount&&f.pipes===e||f.pipesCount>1&&-1!==W(f.pipes,e))&&!v&&(c("false write response, pause",f.awaitDrain),f.awaitDrain++),h.pause())},l=function(){e.removeListener("finish",u),d()},u=function(){c("onfinish"),e.removeListener("close",l),d()},d=function(){c("unpipe"),h.unpipe(e)},h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,c("pipe count=%d opts=%j",f.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:d;f.endEmitted?r.nextTick(p):h.once("end",p),e.on("unpipe",n);var g=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,B(e))}}(h);e.on("drain",g);var v=!1;function m(t){c("onerror",t),d(),e.removeListener("error",m),0===a(e,"error")&&C(e,t)}return h.on("data",s),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",l),e.once("finish",u),e.emit("pipe",h),f.flowing||(c("pipe resume"),h.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=W(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},E.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?T(this):i.reading||r.nextTick(O,this))),n},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(P,this),n},E.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(P,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(F,e,t))}(this,e)),e.paused=!1,this},E.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){(c("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<x.length;o++)e.on(x[o],this.emit.bind(this,x[o]));return this._read=function(t){c("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=o("gX6xj")),f(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=H,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===p&&(p=o("eQ33h")),p(E,e,t)})})),o.register("iZfNb",(function(e,t){e.exports=o("ftI7v").EventEmitter})),o.register("7Epwj",(function(e,t){})),o.register("iFFtH",(function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=o("dwjmx").Buffer,s=o("7Epwj").inspect,l=s&&s.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,o,u;return t=e,o=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,i,r=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=r,i=s,a.prototype.copy.call(t,n,i),s+=o.data.length,o=o.next;return r}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,o=e>r.length?r.length:e;if(o===r.length?i+=r:i+=r.slice(0,e),0==(e-=o)){o===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,o=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,o),0==(e-=o)){o===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(o));break}++i}return this.length-=i,t}},{key:l,value:function(e,t){return s(this,function(e){for(var t=arguments,r=function(r){var o=null!=t[r]?t[r]:{};r%2?n(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))},o=1;o<arguments.length;o++)r(o);return e}({},t,{depth:0,customInspect:!1}))}}],o&&r(t.prototype,o),u&&r(t,u),e}()})),o.register("8pVWK",(function(e,t){"use strict";var n=o("d2KzW");function i(e,t){a(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var o=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?o._writableState?o._writableState.errorEmitted?n.nextTick(r,o):(o._writableState.errorEmitted=!0,n.nextTick(i,o,e)):n.nextTick(i,o,e):t?(n.nextTick(r,o),t(e)):n.nextTick(r,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}})),o.register("2UDLe",(function(e,t){"use strict";var n=o("e9d3r").codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,i,r){var o=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,i);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(r?i:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}})),o.register("e9d3r",(function(t,n){e(t.exports,"codes",(function(){return i}),(function(e){return i=e}));var i,r=o("dCPLc");var a={};function s(e,t,n){n||(n=Error);var i=function(e){var n,i,r=function(n,i,r){return e.call(this,function(e,n,i){return"string"==typeof t?t:t(e,n,i)}(n,i,r))||this};return i=e,(n=r).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,r}(n);i.prototype.name=n.name,i.prototype.code=e,a[e]=i}function l(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}s("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,o,a,s;if("string"==typeof t&&(o="not ",t.substr(!a||a<0?0:+a,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(l(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(l(t,"type"))}return s+=". Received type ".concat(void 0===n?"undefined":(0,r.default)(n))}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i=a})),o.register("4W48e",(function(e,t){"use strict";var n=o("d2KzW"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var r=o("lxR10"),a=o("elmi8");o("hUsYa")(c,r);for(var s=i(a.prototype),l=0;l<s.length;l++){var u=s[l];c.prototype[u]||(c.prototype[u]=a.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})})),o.register("elmi8",(function(e,n){"use strict";var i,r=o("d2KzW");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=E,E.WritableState=S;var s={deprecate:o("9shk1")},l=o("iZfNb"),u=o("dwjmx").Buffer,c=t.Uint8Array||function(){};var d,h=o("8pVWK"),f=o("2UDLe").getHighWaterMark,p=o("e9d3r").codes,g=p.ERR_INVALID_ARG_TYPE,v=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_MULTIPLE_CALLBACK,y=p.ERR_STREAM_CANNOT_PIPE,b=p.ERR_STREAM_DESTROYED,_=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,k=p.ERR_UNKNOWN_ENCODING,C=h.errorOrDestroy;function x(){}function S(e,t,n){i=i||o("4W48e"),e=e||{},"boolean"!=typeof n&&(n=t instanceof i),this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",n),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(L,e,t),e._writableState.errorEmitted=!0,C(e,i)):(o(i),e._writableState.errorEmitted=!0,C(e,i),L(e,t))}(e,n,i,t,o);else{var a=R(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||I(e,n),i?r.nextTick(A,e,n,a,o):A(e,n,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function E(e){var t=this instanceof(i=i||o("4W48e"));if(!t&&!d.call(E,this))return new E(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function D(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function A(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),L(e,t)}function I(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,D(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback;if(D(e,t,!1,t.objectMode?1:u.length,u,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&C(e,n),t.prefinished=!0,e.emit("prefinish"),L(e,t)}))}function L(e,t){var n=R(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}o("hUsYa")(E,l),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===E&&(e&&e._writableState instanceof S)}})):d=function(e){return e instanceof this},E.prototype.pipe=function(){C(this,new y)},E.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,s=!o.objectMode&&(i=e,u.isBuffer(i)||i instanceof c);return s&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=x),o.ending?function(e,t){var n=new w;C(e,n),r.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var o;return null===n?o=new _:"string"==typeof n||t.objectMode||(o=new g("chunk",["string","Buffer"],n)),!o||(C(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,n,i,r,o){if(!n){var a=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n));return t}(t,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else D(e,t,!1,s,i,r,o);return l}(this,o,s,e,t,n)),a},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new k(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,n){n(new v("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,L(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(e,t){t(e)}})),o.register("9shk1",(function(e,n){function i(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}})),o.register("78kac",(function(t,n){var i;e(t.exports,"StringDecoder",(function(){return i}),(function(e){return i=e}));var r=o("dxLrO").Buffer,a=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=d,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function h(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}i=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=l(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=l(t[i]))>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=l(t[i]))>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}})),o.register("dxLrO",(function(e,t){var n=o("dwjmx"),i=n.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(r(n,e.exports),e.exports.Buffer=a),a.prototype=Object.create(i.prototype),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}})),o.register("gX6xj",(function(e,t){"use strict";var n,i=o("d2KzW");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=o("1GeXN"),s=Symbol("lastResolve"),l=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),d=Symbol("lastPromise"),h=Symbol("handlePromise"),f=Symbol("stream");function p(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var n=e[f].read();null!==n&&(e[d]=null,e[s]=null,e[l]=null,t(p(n,!1)))}}function v(e){i.nextTick(g,e)}var m=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((r(n={get stream(){return this[f]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[u]?n(e[u]):t(p(void 0,!0))}))}));var n,r=this[d];if(r)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[c]?n(p(void 0,!0)):t[h](n,i)}),i)}}(r,this));else{var o=this[f].read();if(null!==o)return Promise.resolve(p(o,!1));n=new Promise(this[h])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),r(n,"return",(function(){var e=this;return new Promise((function(t,n){e[f].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),n),m);e.exports=function(e){var t,n=Object.create(y,(r(t={},f,{value:e,writable:!0}),r(t,s,{value:null,writable:!0}),r(t,l,{value:null,writable:!0}),r(t,u,{value:null,writable:!0}),r(t,c,{value:e._readableState.endEmitted,writable:!0}),r(t,h,{value:function(e,t){var i=n[f].read();i?(n[d]=null,n[s]=null,n[l]=null,e(p(i,!1))):(n[s]=e,n[l]=t)},writable:!0}),t));return n[d]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[l];return null!==t&&(n[d]=null,n[s]=null,n[l]=null,t(e)),void(n[u]=e)}var i=n[s];null!==i&&(n[d]=null,n[s]=null,n[l]=null,i(p(void 0,!0))),n[c]=!0})),e.on("readable",v.bind(null,n)),n}})),o.register("1GeXN",(function(e,t){"use strict";var n=o("e9d3r").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){s=!1,u=!0,a||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,s||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},g=function(){t.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",l),t.on("close",l)):(t.on("complete",c),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",c),!1!==r.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}})),o.register("eQ33h",(function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}})),o.register("9zyIf",(function(e,t){"use strict";e.exports=c;var n=o("e9d3r").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,r=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=o("4W48e");function u(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}o("hUsYa")(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new i("_transform()"))},c.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}})),o.register("6TTNj",(function(e,t){"use strict";e.exports=i;var n=o("9zyIf");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}o("hUsYa")(i,n),i.prototype._transform=function(e,t,n){n(null,e)}})),o.register("EeWXC",(function(e,t){"use strict";var n;var i=o("e9d3r").codes,r=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e,t,i,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=o("1GeXN")),n(e,{readable:t,writable:i},(function(e){if(e)return r(e);s=!0,r()}));var l=!1;return function(t){if(!s&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new a("pipe"))}}function u(e){e()}function c(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,o=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new r("streams");var a=t.map((function(e,n){var r=n<t.length-1;return l(e,r,n>0,(function(e){i||(i=e),e&&a.forEach(u),r||(a.forEach(u),o(i))}))}));return t.reduce(c)}})),o.register("eY08H",(function(e,t){"use strict";var n=o("d2KzW");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var r,a,s=o("7MpJE").codes,l=s.ERR_AMBIGUOUS_ARGUMENT,u=s.ERR_INVALID_ARG_TYPE,c=s.ERR_INVALID_ARG_VALUE,d=s.ERR_INVALID_RETURN_VALUE,h=s.ERR_MISSING_ARGS,f=o("2VukV"),p=o("drhEA").inspect,g=o("drhEA").types,v=g.isPromise,m=g.isRegExp,y=Object.assign?Object.assign:o("iZ6B0").assign,b=Object.is?Object.is:o("cYRie");new Map;function _(){var e=o("2qyIQ");r=e.isDeepEqual,a=e.isDeepStrictEqual}var w=!1,k=e.exports=E,C={};function x(e){if(e.message instanceof Error)throw e.message;throw new f(e)}function S(e,t,n,i){if(!n){var r=!1;if(0===t)r=!0,i="No value argument passed to `assert.ok()`";else if(i instanceof Error)throw i;var o=new f({actual:n,expected:!0,message:i,operator:"==",stackStartFn:e});throw o.generatedMessage=r,o}}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];S.apply(void 0,[E,t.length].concat(t))}k.fail=function e(t,i,r,o,a){var s,l=arguments.length;if(0===l)s="Failed";else if(1===l)r=t,t=void 0;else{if(!1===w){w=!0;var u=n.emitWarning?n.emitWarning:console.warn.bind(console);u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===l&&(o="!=")}if(r instanceof Error)throw r;var c={actual:t,expected:i,operator:void 0===o?"fail":o,stackStartFn:a||e};void 0!==r&&(c.message=r);var d=new f(c);throw s&&(d.message=s,d.generatedMessage=!0),d},k.AssertionError=f,k.ok=E,k.equal=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");t!=n&&x({actual:t,expected:n,message:i,operator:"==",stackStartFn:e})},k.notEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");t==n&&x({actual:t,expected:n,message:i,operator:"!=",stackStartFn:e})},k.deepEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");void 0===r&&_(),r(t,n)||x({actual:t,expected:n,message:i,operator:"deepEqual",stackStartFn:e})},k.notDeepEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");void 0===r&&_(),r(t,n)&&x({actual:t,expected:n,message:i,operator:"notDeepEqual",stackStartFn:e})},k.deepStrictEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");void 0===r&&_(),a(t,n)||x({actual:t,expected:n,message:i,operator:"deepStrictEqual",stackStartFn:e})},k.notDeepStrictEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");void 0===r&&_();a(t,n)&&x({actual:t,expected:n,message:i,operator:"notDeepStrictEqual",stackStartFn:e})},k.strictEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");b(t,n)||x({actual:t,expected:n,message:i,operator:"strictEqual",stackStartFn:e})},k.notStrictEqual=function e(t,n,i){if(arguments.length<2)throw new h("actual","expected");b(t,n)&&x({actual:t,expected:n,message:i,operator:"notStrictEqual",stackStartFn:e})};var D=function e(t,n,i){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==i&&"string"==typeof i[e]&&m(t[e])&&t[e].test(i[e])?r[e]=i[e]:r[e]=t[e])}))};function A(e,t,n,i,r,o){if(!(n in e)||!a(e[n],t[n])){if(!i){var s=new D(e,r),l=new D(t,r,e),u=new f({actual:s,expected:l,operator:"deepStrictEqual",stackStartFn:o});throw u.actual=e,u.expected=t,u.operator=o.name,u}x({actual:e,expected:t,message:i,operator:o.name,stackStartFn:o})}}function I(e,t,n,o){if("function"!=typeof t){if(m(t))return t.test(e);if(2===arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==i(e)||null===e){var a=new f({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:o});throw a.operator=o.name,a}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new c("error",t,"may not be an empty object");return void 0===r&&_(),s.forEach((function(i){"string"==typeof e[i]&&m(t[i])&&t[i].test(e[i])||A(e,t,i,n,s,o)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function R(e){if("function"!=typeof e)throw new u("fn","Function",e);try{e()}catch(e){return e}return C}function T(e){return v(e)||null!==e&&"object"===i(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function L(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!T(t=e()))throw new d("instance of Promise","promiseFn",t)}else{if(!T(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return C})).catch((function(e){return e}))}))}function M(e,t,n,r){if("string"==typeof n){if(4===arguments.length)throw new u("error",["Object","Error","Function","RegExp"],n);if("object"===i(t)&&null!==t){if(t.message===n)throw new l("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new l("error/message",'The error "'.concat(t,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==i(n)&&"function"!=typeof n)throw new u("error",["Object","Error","Function","RegExp"],n);if(t===C){var o="";n&&n.name&&(o+=" (".concat(n.name,")")),o+=r?": ".concat(r):".";var a="rejects"===e.name?"rejection":"exception";x({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(a).concat(o),stackStartFn:e})}if(n&&!I(t,n,r,e))throw t}function N(e,t,n,i){if(t!==C){if("string"==typeof n&&(i=n,n=void 0),!n||I(t,n)){var r=i?": ".concat(i):".",o="doesNotReject"===e.name?"rejection":"exception";x({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(o).concat(r,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];S.apply(void 0,[P,t.length].concat(t))}k.throws=function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];M.apply(void 0,[e,R(t)].concat(i))},k.rejects=function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return L(t).then((function(t){return M.apply(void 0,[e,t].concat(i))}))},k.doesNotThrow=function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];N.apply(void 0,[e,R(t)].concat(i))},k.doesNotReject=function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return L(t).then((function(t){return N.apply(void 0,[e,t].concat(i))}))},k.ifError=function e(t){if(null!=t){var n="ifError got unwanted exception: ";"object"===i(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=p(t);var r=new f({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),o=t.stack;if("string"==typeof o){var a=o.split("\n");a.shift();for(var s=r.stack.split("\n"),l=0;l<a.length;l++){var u=s.indexOf(a[l]);if(-1!==u){s=s.slice(0,u);break}}r.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw r}},k.strict=y(P,k,{equal:k.strictEqual,deepEqual:k.deepStrictEqual,notEqual:k.notStrictEqual,notDeepEqual:k.notDeepStrictEqual}),k.strict.strict=k.strict})),o.register("7MpJE",(function(t,n){var i;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}e(t.exports,"codes",(function(){return i}),(function(e){return i=e}));var u,c,d={};function h(e,t,n){n||(n=Error);var i=function(n){function i(n,r,o){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l=a(this,s(i).call(this,function(e,n,i){return"string"==typeof t?t:t(e,n,i)}(n,r,o))),l.code=e,l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,n),i}(n);d[e]=i}function f(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}h("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),h("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,a,s,l;if(void 0===u&&(u=o("eY08H")),u("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(a="not ",t.substr(!s||s<0?0:+s,a.length)===a)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))l="The ".concat(e," ").concat(i," ").concat(f(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(f(t,"type"))}return l+=". Received type ".concat(r(n))}),TypeError),h("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=o("drhEA"));var i=c.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(i)}),TypeError,RangeError),h("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),h("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===u&&(u=o("eY08H")),u(t.length>0,"At least one arg needs to be specified");var i="The ",r=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),r){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,r-1).join(", "),i+=", and ".concat(t[r-1]," arguments")}return"".concat(i," must be specified")}),TypeError),i=d})),o.register("drhEA",(function(e,t){var n=o("dCPLc"),i=o("d2KzW"),r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},a=/%[sdj%]/g;e.exports.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,r=i.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=r)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return e}})),s=i[n];n<r;s=i[++n])m(s)||!k(s)?o+=" "+s:o+=" "+u(s);return o},e.exports.deprecate=function(t,n){if(void 0!==i&&!0===i.noDeprecation)return t;if(void 0===i)return function(){return e.exports.deprecate(t,n).apply(this,arguments)};var r=!1;return function(){if(!r){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),r=!0}return t.apply(this,arguments)}};var s={},l=/^$/;function u(t,n){var i={seen:[],stylize:d};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(n)?i.showHidden=n:n&&e.exports._extend(i,n),_(i.showHidden)&&(i.showHidden=!1),_(i.depth)&&(i.depth=2),_(i.colors)&&(i.colors=!1),_(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),h(i,t,i.depth)}function c(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function d(e,t){return e}function h(t,n,i){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.exports.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,t);return b(r)||(r=h(t,r,i)),r}var o=function(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),x(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(S(n)){var l=n.name?": "+n.name:"";return t.stylize("[Function"+l+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return t.stylize(Date.prototype.toString.call(n),"date");if(x(n))return f(n)}var u,c="",d=!1,k=["{","}"];(g(n)&&(d=!0,k=["[","]"]),S(n))&&(c=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(c=" "+RegExp.prototype.toString.call(n)),C(n)&&(c=" "+Date.prototype.toUTCString.call(n)),x(n)&&(c=" "+f(n)),0!==a.length||d&&0!=n.length?i<0?w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=d?function(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)R(t,String(a))?o.push(p(e,t,n,i,String(a),!0)):o.push("");return r.forEach((function(r){r.match(/^\d+$/)||o.push(p(e,t,n,i,r,!0))})),o}(t,n,i,s,a):a.map((function(e){return p(t,n,i,s,e,d)})),t.seen.pop(),function(e,t,n){var i=0;return e.reduce((function(e,t){i++;if(t.indexOf("\n")>=0)i++;return e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,c,k)):k[0]+c+k[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,i,r,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),R(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(l.value)<0?(s=m(n)?h(e,l.value,null):h(e,l.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),_(a)){if(o&&r.match(/^\d+$/))return s;(a=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return void 0===e}function w(e){return k(e)&&"[object RegExp]"===E(e)}function k(e){return"object"==typeof e&&null!==e}function C(e){return k(e)&&"[object Date]"===E(e)}function x(e){return k(e)&&("[object Error]"===E(e)||e instanceof Error)}function S(e){return"function"==typeof e}function E(e){return Object.prototype.toString.call(e)}function D(e){return e<10?"0"+e.toString(10):e.toString(10)}e.exports.debuglog=function(t){if(t=t.toUpperCase(),!s[t])if(l.test(t)){var n=i.pid;s[t]=function(){var i=e.exports.format.apply(e.exports,arguments);console.error("%s %d: %s",t,n,i)}}else s[t]=function(){};return s[t]},e.exports.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.exports.types=o("bq51g"),e.exports.isArray=g,e.exports.isBoolean=v,e.exports.isNull=m,e.exports.isNullOrUndefined=function(e){return null==e},e.exports.isNumber=y,e.exports.isString=b,e.exports.isSymbol=function(e){return"symbol"===(void 0===e?"undefined":(0,n.default)(e))},e.exports.isUndefined=_,e.exports.isRegExp=w,e.exports.types.isRegExp=w,e.exports.isObject=k,e.exports.isDate=C,e.exports.types.isDate=C,e.exports.isError=x,e.exports.types.isNativeError=x,e.exports.isFunction=S,e.exports.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===(void 0===e?"undefined":(0,n.default)(e))||void 0===e},e.exports.isBuffer=o("fhoYn");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date,t=[D(e.getHours()),D(e.getMinutes()),D(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports.log=function(){console.log("%s - %s",I(),e.exports.format.apply(e.exports,arguments))},e.exports.inherits=o("hUsYa"),e.exports._extend=function(e,t){if(!t||!k(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}e.exports.promisify=function(e){var t=function(){for(var t,n,i=new Promise((function(e,i){t=e,n=i})),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push((function(e,i){e?n(e):t(i)}));try{e.apply(this,r)}catch(e){n(e)}return i};if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){if("function"!=typeof(t=e[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},e.exports.promisify.custom=T,e.exports.callbackify=function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return r.apply(o,arguments)};e.apply(this,t).then((function(e){i.nextTick(a.bind(null,null,e))}),(function(e){i.nextTick(L.bind(null,e,a))}))};if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}})),o.register("bq51g",(function(e,t){"use strict";var n=o("e7FTp"),i=o("f2gXy"),r=o("koOmY"),a=o("lPuUX");function s(e){return e.call.bind(e)}var l="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,c=s(Object.prototype.toString),d=s(Number.prototype.valueOf),h=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(l)var p=s(BigInt.prototype.valueOf);if(u)var g=s(Symbol.prototype.valueOf);function v(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function m(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function b(e){return"[object WeakMap]"===c(e)}function _(e){return"[object WeakSet]"===c(e)}function w(e){return"[object ArrayBuffer]"===c(e)}function k(e){return"undefined"!=typeof ArrayBuffer&&(w.working?w(e):e instanceof ArrayBuffer)}function C(e){return"[object DataView]"===c(e)}function x(e){return"undefined"!=typeof DataView&&(C.working?C(e):e instanceof DataView)}e.exports.isArgumentsObject=n,e.exports.isGeneratorFunction=i,e.exports.isTypedArray=a,e.exports.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.exports.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||x(e)},e.exports.isUint8Array=function(e){return"Uint8Array"===r(e)},e.exports.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===r(e)},e.exports.isUint16Array=function(e){return"Uint16Array"===r(e)},e.exports.isUint32Array=function(e){return"Uint32Array"===r(e)},e.exports.isInt8Array=function(e){return"Int8Array"===r(e)},e.exports.isInt16Array=function(e){return"Int16Array"===r(e)},e.exports.isInt32Array=function(e){return"Int32Array"===r(e)},e.exports.isFloat32Array=function(e){return"Float32Array"===r(e)},e.exports.isFloat64Array=function(e){return"Float64Array"===r(e)},e.exports.isBigInt64Array=function(e){return"BigInt64Array"===r(e)},e.exports.isBigUint64Array=function(e){return"BigUint64Array"===r(e)},m.working="undefined"!=typeof Map&&m(new Map),e.exports.isMap=function(e){return"undefined"!=typeof Map&&(m.working?m(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),e.exports.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.exports.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},_.working="undefined"!=typeof WeakSet&&_(new WeakSet),e.exports.isWeakSet=function(e){return _(e)},w.working="undefined"!=typeof ArrayBuffer&&w(new ArrayBuffer),e.exports.isArrayBuffer=k,C.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&C(new DataView(new ArrayBuffer(1),0,1)),e.exports.isDataView=x;var S="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===c(e)}function D(e){return void 0!==S&&(void 0===E.working&&(E.working=E(new S)),E.working?E(e):e instanceof S)}function A(e){return v(e,d)}function I(e){return v(e,h)}function R(e){return v(e,f)}function T(e){return l&&v(e,p)}function L(e){return u&&v(e,g)}e.exports.isSharedArrayBuffer=D,e.exports.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},e.exports.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},e.exports.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},e.exports.isGeneratorObject=function(e){return"[object Generator]"===c(e)},e.exports.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},e.exports.isNumberObject=A,e.exports.isStringObject=I,e.exports.isBooleanObject=R,e.exports.isBigIntObject=T,e.exports.isSymbolObject=L,e.exports.isBoxedPrimitive=function(e){return A(e)||I(e)||R(e)||T(e)||L(e)},e.exports.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(k(e)||D(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e.exports,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))})),o.register("e7FTp",(function(e,t){"use strict";var n=o("hYtMm")(),i=o("2LnEP")("Object.prototype.toString"),r=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!r(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return r(arguments)}();r.isLegacyArguments=a,e.exports=s?r:a})),o.register("hYtMm",(function(e,t){"use strict";var n=o("a9pkh");e.exports=function(){return n()&&!!Symbol.toStringTag}})),o.register("a9pkh",(function(e,t){var n=o("dCPLc");e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"===(0,n.default)(Symbol.iterator))return!0;var e={},t=Symbol("test"),i=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}})),o.register("2LnEP",(function(e,t){"use strict";var n=o("8mnws"),i=o("bMDJ3"),r=i(n("String.prototype.indexOf"));e.exports=function(e,t){var o=n(e,!!t);return"function"==typeof o&&r(e,".prototype.")>-1?i(o):o}})),o.register("8mnws",(function(e,t){"use strict";var n,i=SyntaxError,r=Function,a=TypeError,s=function(e){try{return r('"use strict"; return ('+e+").constructor;")()}catch(e){}},l=Object.getOwnPropertyDescriptor;if(l)try{l({},"")}catch(e){l=null}var u=function(){throw new a},c=l?function(){try{return u}catch(e){try{return l(arguments,"callee").get}catch(e){return u}}}():u,d=o("eHWH0")(),h=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?n:h(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":d?h([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?h(h([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?h((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?h((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?h(""[Symbol.iterator]()):n,"%Symbol%":d?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":c,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},v=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var r=e("%AsyncGenerator%");r&&(n=h(r.prototype))}return g[t]=n,n},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=o("dbayq"),b=o("j96mo"),_=y.call(Function.call,Array.prototype.concat),w=y.call(Function.apply,Array.prototype.splice),k=y.call(Function.call,String.prototype.replace),C=y.call(Function.call,String.prototype.slice),x=y.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,D=function(e){var t=C(e,0,1),n=C(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return k(e,S,(function(e,t,n,i){r[r.length]=n?k(i,E,"$1"):t||e})),r},A=function(e,t){var n,r=e;if(b(m,r)&&(r="%"+(n=m[r])[0]+"%"),b(g,r)){var o=g[r];if(o===f&&(o=v(r)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===x(/^%?[^%]*%?$/g,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=D(e),r=n.length>0?n[0]:"",o=A("%"+r+"%",t),s=o.name,u=o.value,c=!1,d=o.alias;d&&(r=d[0],w(n,_([0,1],d)));for(var h=1,f=!0;h<n.length;h+=1){var p=n[h],v=C(p,0,1),m=C(p,-1);if(('"'===v||"'"===v||"`"===v||'"'===m||"'"===m||"`"===m)&&v!==m)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(c=!0),b(g,s="%"+(r+="."+p)+"%"))u=g[s];else if(null!=u){if(!(p in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(l&&h+1>=n.length){var y=l(u,p);u=(f=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[p]}else f=b(u,p),u=u[p];f&&!c&&(g[s]=u)}}return u}})),o.register("eHWH0",(function(e,t){var n=o("dCPLc"),i="undefined"!=typeof Symbol&&Symbol,r=o("a9pkh");e.exports=function(){return"function"==typeof i&&("function"==typeof Symbol&&("symbol"===(0,n.default)(i("foo"))&&("symbol"===(0,n.default)(Symbol("bar"))&&r())))}})),o.register("dbayq",(function(e,t){"use strict";var n=o("lMBGf");e.exports=Function.prototype.bind||n})),o.register("lMBGf",(function(e,t){"use strict";var n="Function.prototype.bind called on incompatible ",i=Array.prototype.slice,r=Object.prototype.toString,o="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||r.call(t)!==o)throw new TypeError(n+t);for(var a,s=i.call(arguments,1),l=function(){if(this instanceof a){var n=t.apply(this,s.concat(i.call(arguments)));return Object(n)===n?n:this}return t.apply(e,s.concat(i.call(arguments)))},u=Math.max(0,t.length-s.length),c=[],d=0;d<u;d++)c.push("$"+d);if(a=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),t.prototype){var h=function(){};h.prototype=t.prototype,a.prototype=new h,h.prototype=null}return a}})),o.register("j96mo",(function(e,t){"use strict";var n=o("dbayq");e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)})),o.register("bMDJ3",(function(e,t){"use strict";var n=o("dbayq"),i=o("8mnws"),r=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||n.call(a,r),l=i("%Object.getOwnPropertyDescriptor%",!0),u=i("%Object.defineProperty%",!0),c=i("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);if(l&&u){var i=l(t,"length");i.configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(n,r,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d})),o.register("f2gXy",(function(e,t){"use strict";var n,i=Object.prototype.toString,r=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=o("hYtMm")(),l=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(r.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!l)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&l(t)}return l(e)===n}})),o.register("koOmY",(function(e,n){"use strict";var i=o("322Sm"),r=o("b9ij8"),a=o("2LnEP"),s=a("Object.prototype.toString"),l=o("hYtMm")(),u="undefined"==typeof globalThis?t:globalThis,c=r(),d=a("String.prototype.slice"),h={},f=o("g5Ze0"),p=Object.getPrototypeOf;l&&f&&p&&i(c,(function(e){if("function"==typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var n=p(t),i=f(n,Symbol.toStringTag);if(!i){var r=p(n);i=f(r,Symbol.toStringTag)}h[e]=i.get}}}));var g=o("lPuUX");e.exports=function(e){return!!g(e)&&(l&&Symbol.toStringTag in e?function(e){var t=!1;return i(h,(function(n,i){if(!t)try{var r=n.call(e);r===i&&(t=r)}catch(e){}})),t}(e):d(s(e),8,-1))}})),o.register("322Sm",(function(e,t){"use strict";var n=o("g7oeb"),i=Object.prototype.toString,r=Object.prototype.hasOwnProperty,a=function(e,t,n){for(var i=0,o=e.length;i<o;i++)r.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},s=function(e,t,n){for(var i=0,r=e.length;i<r;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},l=function(e,t,n){for(var i in e)r.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))};e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===i.call(e)?a(e,t,o):"string"==typeof e?s(e,t,o):l(e,t,o)}})),o.register("g7oeb",(function(e,t){"use strict";var n,i,r=Function.prototype.toString,o="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof o&&"function"==typeof Object.defineProperty)try{n=Object.defineProperty({},"length",{get:function(){throw i}}),i={},o((function(){throw 42}),null,n)}catch(e){e!==i&&(o=null)}else o=null;var a=/^\s*class\b/,s=function(e){try{var t=r.call(e);return a.test(t)}catch(e){return!1}},l=Object.prototype.toString,u="function"==typeof Symbol&&!!Symbol.toStringTag,c="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=o?function(e){if(e===c)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{o(e,null,n)}catch(e){if(e!==i)return!1}return!s(e)}:function(e){if(e===c)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(u)return function(e){try{return!s(e)&&(r.call(e),!0)}catch(e){return!1}}(e);if(s(e))return!1;var t=l.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}})),o.register("b9ij8",(function(e,n){"use strict";var i=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],r="undefined"==typeof globalThis?t:globalThis;e.exports=function(){for(var e=[],t=0;t<i.length;t++)"function"==typeof r[i[t]]&&(e[e.length]=i[t]);return e}})),o.register("g5Ze0",(function(e,t){"use strict";var n=o("8mnws")("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n})),o.register("lPuUX",(function(e,n){"use strict";var i=o("322Sm"),r=o("b9ij8"),a=o("2LnEP"),s=a("Object.prototype.toString"),l=o("hYtMm")(),u="undefined"==typeof globalThis?t:globalThis,c=r(),d=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},h=a("String.prototype.slice"),f={},p=o("g5Ze0"),g=Object.getPrototypeOf;l&&p&&g&&i(c,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=g(t),i=p(n,Symbol.toStringTag);if(!i){var r=g(n);i=p(r,Symbol.toStringTag)}f[e]=i.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l||!(Symbol.toStringTag in e)){var t=h(s(e),8,-1);return d(c,t)>-1}return!!p&&function(e){var t=!1;return i(f,(function(n,i){if(!t)try{t=n.call(e)===i}catch(e){}})),t}(e)}})),o.register("fhoYn",(function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}})),o.register("2VukV",(function(e,t){"use strict";var n=o("d2KzW");function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){var n,i=function(){return c(e,arguments,h(this).constructor)};if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),d(i,e)},l(e)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,n){return c=u()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&d(r,n.prototype),r},c.apply(null,arguments)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=o("drhEA").inspect,g=o("7MpJE").codes.ERR_INVALID_ARG_TYPE;function v(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var m="",y="",b="",_="",w={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function k(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function C(e){return p(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function x(e,t,i){var r="",o="",a=0,s="",l=!1,u=C(e),c=u.split("\n"),d=C(t).split("\n"),h=0,p="";if("strictEqual"===i&&"object"===f(e)&&"object"===f(t)&&null!==e&&null!==t&&(i="strictEqualObject"),1===c.length&&1===d.length&&c[0]!==d[0]){var g=c[0].length+d[0].length;if(g<=10){if(!("object"===f(e)&&null!==e||"object"===f(t)&&null!==t||0===e&&0===t))return"".concat(w[i],"\n\n")+"".concat(c[0]," !== ").concat(d[0],"\n")}else if("strictEqualObject"!==i){if(g<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;c[0][h]===d[0][h];)h++;h>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",h),"^"),h=0)}}}for(var k=c[c.length-1],x=d[d.length-1];k===x&&(h++<2?s="\n  ".concat(k).concat(s):r=k,c.pop(),d.pop(),0!==c.length&&0!==d.length);)k=c[c.length-1],x=d[d.length-1];var S=Math.max(c.length,d.length);if(0===S){var E=u.split("\n");if(E.length>30)for(E[26]="".concat(m,"...").concat(_);E.length>27;)E.pop();return"".concat(w.notIdentical,"\n\n").concat(E.join("\n"),"\n")}h>3&&(s="\n".concat(m,"...").concat(_).concat(s),l=!0),""!==r&&(s="\n  ".concat(r).concat(s),r="");var D=0,A=w[i]+"\n".concat(y,"+ actual").concat(_," ").concat(b,"- expected").concat(_),I=" ".concat(m,"...").concat(_," Lines skipped");for(h=0;h<S;h++){var R=h-a;if(c.length<h+1)R>1&&h>2&&(R>4?(o+="\n".concat(m,"...").concat(_),l=!0):R>3&&(o+="\n  ".concat(d[h-2]),D++),o+="\n  ".concat(d[h-1]),D++),a=h,r+="\n".concat(b,"-").concat(_," ").concat(d[h]),D++;else if(d.length<h+1)R>1&&h>2&&(R>4?(o+="\n".concat(m,"...").concat(_),l=!0):R>3&&(o+="\n  ".concat(c[h-2]),D++),o+="\n  ".concat(c[h-1]),D++),a=h,o+="\n".concat(y,"+").concat(_," ").concat(c[h]),D++;else{var T=d[h],L=c[h],M=L!==T&&(!v(L,",")||L.slice(0,-1)!==T);M&&v(T,",")&&T.slice(0,-1)===L&&(M=!1,L+=","),M?(R>1&&h>2&&(R>4?(o+="\n".concat(m,"...").concat(_),l=!0):R>3&&(o+="\n  ".concat(c[h-2]),D++),o+="\n  ".concat(c[h-1]),D++),a=h,o+="\n".concat(y,"+").concat(_," ").concat(L),r+="\n".concat(b,"-").concat(_," ").concat(T),D+=2):(o+=r,r="",1!==R&&0!==h||(o+="\n  ".concat(L),D++))}if(D>20&&h<S-2)return"".concat(A).concat(I,"\n").concat(o,"\n").concat(m,"...").concat(_).concat(r,"\n")+"".concat(m,"...").concat(_)}return"".concat(A).concat(l?I:"","\n").concat(o).concat(r).concat(s).concat(p)}var S=function(e){function t(e){var i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==f(e)||null===e)throw new g("options","Object",e);var r=e.message,o=e.operator,l=e.stackStartFn,u=e.actual,c=e.expected,d=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=r)i=a(this,h(t).call(this,String(r)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(m="[34m",y="[32m",_="[39m",b="[31m"):(m="",y="",_="",b="")),"object"===f(u)&&null!==u&&"object"===f(c)&&null!==c&&"stack"in u&&u instanceof Error&&"stack"in c&&c instanceof Error&&(u=k(u),c=k(c)),"deepStrictEqual"===o||"strictEqual"===o)i=a(this,h(t).call(this,x(u,c,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var p=w[o],v=C(u).split("\n");if("notStrictEqual"===o&&"object"===f(u)&&null!==u&&(p=w.notStrictEqualObject),v.length>30)for(v[26]="".concat(m,"...").concat(_);v.length>27;)v.pop();i=1===v.length?a(this,h(t).call(this,"".concat(p," ").concat(v[0]))):a(this,h(t).call(this,"".concat(p,"\n\n").concat(v.join("\n"),"\n")))}else{var S=C(u),E="",D=w[o];"notDeepEqual"===o||"notEqual"===o?(S="".concat(w[o],"\n\n").concat(S)).length>1024&&(S="".concat(S.slice(0,1021),"...")):(E="".concat(C(c)),S.length>512&&(S="".concat(S.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===o||"equal"===o?S="".concat(D,"\n\n").concat(S,"\n\nshould equal\n\n"):E=" ".concat(o," ").concat(E)),i=a(this,h(t).call(this,"".concat(S).concat(E)))}return Error.stackTraceLimit=d,i.generatedMessage=!r,Object.defineProperty(s(i),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),i.code="ERR_ASSERTION",i.actual=u,i.expected=c,i.operator=o,Error.captureStackTrace&&Error.captureStackTrace(s(i),l),i.stack,i.name="AssertionError",a(i)}var o,l,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),o=t,l=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(e,t){return p(this,function(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),o.forEach((function(t){i(e,t,r[t])}))},r=1;r<arguments.length;r++)n(r);return e}({},t,{customInspect:!1,depth:0}))}}],l&&r(o.prototype,l),u&&r(o,u),t}(l(Error));e.exports=S})),o.register("iZ6B0",(function(e,t){"use strict";function n(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o=Object.keys(Object(r)),a=0,s=o.length;a<s;a++){var l=o[a],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}e.exports={assign:n,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:n})}}})),o.register("cYRie",(function(e,t){"use strict";var n=o("7EzV7"),i=o("bMDJ3"),r=o("dlHk4"),a=o("7PpMz"),s=o("50n9u"),l=i(a(),Object);n(l,{getPolyfill:a,implementation:r,shim:s}),e.exports=l})),o.register("7EzV7",(function(e,t){var n=o("dCPLc"),i=o("bRfyK"),r="function"==typeof Symbol&&"symbol"===(0,n.default)(Symbol("foo")),a=Object.prototype.toString,s=Array.prototype.concat,l=Object.defineProperty,u=o("46jd3")(),c=l&&u,d=function(e,t,n,i){var r;(!(t in e)||"function"==typeof(r=i)&&"[object Function]"===a.call(r)&&i())&&(c?l(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},h=function(e,t){var n=arguments.length>2?arguments[2]:{},o=i(t);r&&(o=s.call(o,Object.getOwnPropertySymbols(t)));for(var a=0;a<o.length;a+=1)d(e,o[a],t[o[a]],n[o[a]])};h.supportsDescriptors=!!c,e.exports=h})),o.register("bRfyK",(function(e,t){"use strict";var n=Array.prototype.slice,i=o("3CCYK"),r=Object.keys,a=r?function(e){return r(e)}:o("3FiQH"),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(n.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a})),o.register("3CCYK",(function(e,t){"use strict";var n=Object.prototype.toString;e.exports=function(e){var t=n.call(e),i="[object Arguments]"===t;return i||(i="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),i}})),o.register("3FiQH",(function(e,t){"use strict";var n;if(!Object.keys){var i=Object.prototype.hasOwnProperty,r=Object.prototype.toString,a=o("3CCYK"),s=Object.prototype.propertyIsEnumerable,l=!s.call({toString:null},"toString"),u=s.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(e){var t=e.constructor;return t&&t.prototype===e},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!h["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{d(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();n=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===r.call(e),o=a(e),s=t&&"[object String]"===r.call(e),h=[];if(!t&&!n&&!o)throw new TypeError("Object.keys called on a non-object");var p=u&&n;if(s&&e.length>0&&!i.call(e,0))for(var g=0;g<e.length;++g)h.push(String(g));if(o&&e.length>0)for(var v=0;v<e.length;++v)h.push(String(v));else for(var m in e)p&&"prototype"===m||!i.call(e,m)||h.push(String(m));if(l)for(var y=function(e){if("undefined"==typeof window||!f)return d(e);try{return d(e)}catch(e){return!1}}(e),b=0;b<c.length;++b)y&&"constructor"===c[b]||!i.call(e,c[b])||h.push(c[b]);return h}}e.exports=n})),o.register("46jd3",(function(e,t){"use strict";var n=o("8mnws")("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i})),o.register("dlHk4",(function(e,t){"use strict";var n=function(e){return e!=e};e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!n(e)||!n(t))}})),o.register("7PpMz",(function(e,t){"use strict";var n=o("dlHk4");e.exports=function(){return"function"==typeof Object.is?Object.is:n}})),o.register("50n9u",(function(e,t){"use strict";var n=o("7PpMz"),i=o("7EzV7");e.exports=function(){var e=n();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}})),o.register("2qyIQ",(function(e,t){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var r=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},l=Object.is?Object.is:o("cYRie"),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:o("j4kTd");function d(e){return e.call.bind(e)}var h=d(Object.prototype.hasOwnProperty),f=d(Object.prototype.propertyIsEnumerable),p=d(Object.prototype.toString),g=o("drhEA").types,v=g.isAnyArrayBuffer,m=g.isArrayBufferView,y=g.isDate,b=g.isMap,_=g.isRegExp,w=g.isSet,k=g.isNativeError,C=g.isBoxedPrimitive,x=g.isNumberObject,S=g.isStringObject,E=g.isBooleanObject,D=g.isBigIntObject,A=g.isSymbolObject,I=g.isFloat32Array,R=g.isFloat64Array;function T(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function L(e){return Object.keys(e).filter(T).concat(u(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(e,t){if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0}function N(e,t,n,o){if(e===t)return 0!==e||(!n||l(e,t));if(n){if("object"!==i(e))return"number"==typeof e&&c(e)&&c(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var a,s,u,d,h=p(e);if(h!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var f=L(e),g=L(t);return f.length===g.length&&O(e,t,n,o,1,f)}if("[object Object]"===h&&(!b(e)&&b(t)||!w(e)&&w(t)))return!1;if(y(e)){if(!y(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(_(e)){if(!_(t)||(u=e,d=t,!(r?u.source===d.source&&u.flags===d.flags:RegExp.prototype.toString.call(u)===RegExp.prototype.toString.call(d))))return!1}else if(k(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(m(e)){if(n||!I(e)&&!R(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===M(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var T=L(e),N=L(t);return T.length===N.length&&O(e,t,n,o,0,T)}if(w(e))return!(!w(t)||e.size!==t.size)&&O(e,t,n,o,2);if(b(e))return!(!b(t)||e.size!==t.size)&&O(e,t,n,o,3);if(v(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==M(new Uint8Array(a),new Uint8Array(s)))return!1}else if(C(e)&&!function(e,t){return x(e)?x(t)&&l(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):S(e)?S(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):E(e)?E(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):D(e)?D(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):A(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return O(e,t,n,o,0)}function P(e,t){return t.filter((function(t){return f(e,t)}))}function O(e,t,n,i,r,o){if(5===arguments.length){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!h(t,o[s]))return!1;if(n&&5===arguments.length){var l=u(e);if(0!==l.length){var c=0;for(s=0;s<l.length;s++){var d=l[s];if(f(e,d)){if(!f(t,d))return!1;o.push(d),c++}else if(f(t,d))return!1}var p=u(t);if(l.length!==p.length&&P(t,p).length!==c)return!1}else{var g=u(t);if(0!==g.length&&0!==P(t,g).length)return!1}}if(0===o.length&&(0===r||1===r&&0===e.length||0===e.size))return!0;if(void 0===i)i={val1:new Map,val2:new Map,position:0};else{var v=i.val1.get(e);if(void 0!==v){var m=i.val2.get(t);if(void 0!==m)return v===m}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var y=W(e,t,n,o,i,r);return i.val1.delete(e),i.val2.delete(t),y}function F(e,t,n,i){for(var r=a(e),o=0;o<r.length;o++){var s=r[o];if(N(t,s,n,i))return e.delete(s),!0}return!1}function B(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(c(e))return!1}return!0}function H(e,t,n){var i=B(n);return null!=i?i:t.has(i)&&!e.has(i)}function j(e,t,n,i,r){var o=B(n);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!N(i,a,!1,r))&&(!e.has(o)&&N(i,a,!1,r))}function z(e,t,n,i,r,o){for(var s=a(e),l=0;l<s.length;l++){var u=s[l];if(N(n,u,r,o)&&N(i,t.get(u),r,o))return e.delete(u),!0}return!1}function W(e,t,r,o,l,u){var c=0;if(2===u){if(!function(e,t,n,r){for(var o=null,s=a(e),l=0;l<s.length;l++){var u=s[l];if("object"===i(u)&&null!==u)null===o&&(o=new Set),o.add(u);else if(!t.has(u)){if(n)return!1;if(!H(e,t,u))return!1;null===o&&(o=new Set),o.add(u)}}if(null!==o){for(var c=a(t),d=0;d<c.length;d++){var h=c[d];if("object"===i(h)&&null!==h){if(!F(o,h,n,r))return!1}else if(!n&&!e.has(h)&&!F(o,h,n,r))return!1}return 0===o.size}return!0}(e,t,r,l))return!1}else if(3===u){if(!function(e,t,r,o){for(var a=null,l=s(e),u=0;u<l.length;u++){var c=n(l[u],2),d=c[0],h=c[1];if("object"===i(d)&&null!==d)null===a&&(a=new Set),a.add(d);else{var f=t.get(d);if(void 0===f&&!t.has(d)||!N(h,f,r,o)){if(r)return!1;if(!j(e,t,d,h,o))return!1;null===a&&(a=new Set),a.add(d)}}}if(null!==a){for(var p=s(t),g=0;g<p.length;g++){var v=n(p[g],2),m=(d=v[0],v[1]);if("object"===i(d)&&null!==d){if(!z(a,e,d,m,r,o))return!1}else if(!(r||e.has(d)&&N(e.get(d),m,!1,o)||z(a,e,d,m,!1,o)))return!1}return 0===a.size}return!0}(e,t,r,l))return!1}else if(1===u)for(;c<e.length;c++){if(!h(e,c)){if(h(t,c))return!1;for(var d=Object.keys(e);c<d.length;c++){var f=d[c];if(!h(t,f)||!N(e[f],t[f],r,l))return!1}return d.length===Object.keys(t).length}if(!h(t,c)||!N(e[c],t[c],r,l))return!1}for(c=0;c<o.length;c++){var p=o[c];if(!N(e[p],t[p],r,l))return!1}return!0}e.exports={isDeepEqual:function(e,t){return N(e,t,false)},isDeepStrictEqual:function(e,t){return N(e,t,true)}}})),o.register("j4kTd",(function(e,t){"use strict";var n=o("bMDJ3"),i=o("7EzV7"),r=o("6OwSu"),a=o("fwB2F"),s=o("azwN1"),l=n(a(),Number);i(l,{getPolyfill:a,implementation:r,shim:s}),e.exports=l})),o.register("6OwSu",(function(e,t){"use strict";e.exports=function(e){return e!=e}})),o.register("fwB2F",(function(e,t){"use strict";var n=o("6OwSu");e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:n}})),o.register("azwN1",(function(e,t){"use strict";var n=o("7EzV7"),i=o("fwB2F");e.exports=function(){var e=i();return n(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}})),o("2XGuX").register(JSON.parse('{"3aPN1":"index.2dd02852.js","kTJgk":"cssMode.853ae858.js","jiDEu":"index.62813297.css","4WnXQ":"cssMode.5d091d41.js","g51Ba":"jsonMode.5177186c.js","kYK4z":"jsonMode.b8ff8773.js","44e5f":"htmlMode.2e17c264.js","3Xiih":"htmlMode.ac6adcfa.js","4hvhB":"abap.72b1fcee.js","cZJ6C":"apex.503d8502.js","fRAeW":"azcli.8f8471c9.js","h4kur":"bat.cd79d8da.js","6xp3O":"bicep.95102251.js","12ZJn":"cameligo.e5e48dad.js","lsObN":"clojure.767f7ed8.js","gtEYP":"coffee.5e98c48d.js","OemLw":"cpp.36ac6cf6.js","bO9f2":"csharp.ca2868c0.js","jmH25":"csp.05ac9ce3.js","hQOzL":"css.018ab19a.js","gyZh5":"dart.e7eb7adf.js","4jzkd":"dockerfile.9e992ebc.js","61KG4":"ecl.786540b8.js","ilr5l":"elixir.a5d35280.js","fCFNW":"fsharp.0ec50c2f.js","ifndp":"go.d7ff9f88.js","6Ak3q":"graphql.5bc2c082.js","ieOHg":"handlebars.38a5f377.js","17IMQ":"hcl.b82847af.js","aU3ow":"html.944717ba.js","aRFpb":"ini.c14cc626.js","2t8Bp":"java.0c45ff1a.js","jd1fY":"javascript.be16451b.js","9qDn5":"typescript.57b6f1ae.js","dmT0j":"julia.a5aaa92f.js","kgQ3B":"kotlin.a3571e0f.js","54dEo":"less.44fedf62.js","gWs6I":"lexon.0c2136d6.js","7NHvq":"lua.5b69d686.js","eVrZ2":"liquid.46154235.js","3NyNC":"m3.dde760ec.js","exPsv":"markdown.e21f68e0.js","646Wu":"mips.10098388.js","kP5SB":"msdax.d6e25d00.js","jUbUu":"mysql.041ca645.js","BceZI":"objective-c.bbc71689.js","cUAgp":"pascal.1b20e6bb.js","6Dlq6":"pascaligo.a9df0b45.js","4DGGz":"perl.f13f3c4b.js","cf2Kf":"pgsql.9584c1ba.js","5iIpq":"php.df24f122.js","imezb":"postiats.3fcb4358.js","1xUFf":"powerquery.c3d4983b.js","6xK4V":"powershell.0fa7ce44.js","1rvLb":"pug.785f1964.js","lVdDf":"python.51062dc5.js","4gsSY":"qsharp.47d4e22e.js","h7MNC":"r.8e2ad112.js","jGJtp":"razor.41f184bf.js","e6FfY":"redis.c1de5a1e.js","78H66":"redshift.6e5e4b70.js","eEmJk":"restructuredtext.18e635fe.js","6hz7K":"ruby.ec90f0b6.js","7lmtX":"rust.19d29921.js","ighcv":"sb.910bd5bb.js","eg2v3":"scala.9e6db967.js","7KgRR":"scheme.9888cbc7.js","iBp4t":"scss.5562285b.js","aOfJM":"shell.c8bd5847.js","a81I0":"solidity.acdc03d6.js","gT0OL":"sophia.19116d2e.js","52YSb":"sparql.8105bf6e.js","jhiBY":"sql.a8b83fc7.js","kwdVf":"st.97058225.js","lUmNn":"swift.88a3fbc3.js","i20xl":"systemverilog.213cc350.js","aTXB0":"tcl.37e45551.js","8bIxr":"twig.9fe63209.js","7avaK":"vb.5a141ba5.js","e5cle":"xml.b9020c64.js","a8hfu":"yaml.9084c946.js","3neMN":"json.worker.90150739.js","1EOD5":"json.worker.f143eebf.js","4DnVG":"css.worker.e1acd0af.js","biOTi":"html.worker.1789cd82.js","d5ac6":"ts.worker.1f786373.js","hcdJV":"editor.worker.598267ed.js","adOQf":"index.4e637b8c.js"}'));var l=o("1JCPQ"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),f=(l=o("1JCPQ"),u=o("4JAgF"),c=o("9HoHC"),o("8WkQI")),p=(l=o("1JCPQ"),u=o("4JAgF"),c=o("9HoHC"),l=o("1JCPQ"),o("dCPLc")),g=function(){return g=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},g.apply(this,arguments)};function v(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:t,y=Object.keys,b=Array.isArray;function _(e,t){return"object"!=typeof t||y(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||m.Promise||(m.Promise=Promise);var w=Object.getPrototypeOf,k={}.hasOwnProperty;function C(e,t){return k.call(e,t)}function x(e,t){"function"==typeof t&&(t=t(w(e))),("undefined"==typeof Reflect?y:Reflect.ownKeys)(t).forEach((function(n){E(e,n,t[n])}))}var S=Object.defineProperty;function E(e,t,n,i){S(e,t,_(n&&C(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function D(e){return{from:function(t){return e.prototype=Object.create(t.prototype),E(e.prototype,"constructor",e),{extend:x.bind(null,e.prototype)}}}}var A=Object.getOwnPropertyDescriptor;function I(e,t){var n;return A(e,t)||(n=w(e))&&I(n,t)}var R=[].slice;function T(e,t,n){return R.call(e,t,n)}function L(e,t){return t(e)}function M(e){if(!e)throw new Error("Assertion Failed")}function N(e){m.setImmediate?setImmediate(e):setTimeout(e,0)}function P(e,t){return e.reduce((function(e,n,i){var r=t(n,i);return r&&(e[r[0]]=r[1]),e}),{})}function O(e,t){if(C(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],i=0,r=t.length;i<r;++i){var o=O(e,t[i]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return void 0===s?void 0:O(s,t.substr(a+1))}}function F(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){M("string"!=typeof n&&"length"in n);for(var i=0,r=t.length;i<r;++i)F(e,t[i],n[i])}else{var o=t.indexOf(".");if(-1!==o){var a=t.substr(0,o),s=t.substr(o+1);if(""===s)void 0===n?b(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n;else{var l=e[a];l&&C(e,a)||(l=e[a]={}),F(l,s,n)}}else void 0===n?b(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function B(e){var t={};for(var n in e)C(e,n)&&(t[n]=e[n]);return t}var H=[].concat;function j(e){return H.apply([],e)}var z="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(j([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return m[e]})),W=z.map((function(e){return m[e]}));P(z,(function(e){return[e,!0]}));var U=null;function V(e){U="undefined"!=typeof WeakMap&&new WeakMap;var t=K(e);return U=null,t}function K(e){if(!e||"object"!=typeof e)return e;var t=U&&U.get(e);if(t)return t;if(b(e)){t=[],U&&U.set(e,t);for(var n=0,i=e.length;n<i;++n)t.push(K(e[n]))}else if(W.indexOf(e.constructor)>=0)t=e;else{var r=w(e);for(var o in t=r===Object.prototype?{}:Object.create(r),U&&U.set(e,t),e)C(e,o)&&(t[o]=K(e[o]))}return t}var q={}.toString;function J(e){return q.call(e).slice(8,-1)}var X="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",G="symbol"===(void 0===X?"undefined":(0,p.default)(X))?function(e){var t;return null!=e&&(t=e[X])&&t.apply(e)}:function(){return null},Z={};function $(e){var t,n,i,r;if(1===arguments.length){if(b(e))return e.slice();if(this===Z&&"string"==typeof e)return[e];if(r=G(e)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Y="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},Q="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ee(e,t){Q=e,te=t}var te=function(){return!0},ne=!new Error("").stack;function ie(){if(ne)try{throw ie.arguments,new Error}catch(e){return e}return new Error}function re(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(te).map((function(e){return"\n"+e})).join("")):""}var oe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ae=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(oe),se={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function le(e,t){this._e=ie(),this.name=e,this.message=t}function ue(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function ce(e,t,n,i){this._e=ie(),this.failures=t,this.failedKeys=i,this.successCount=n,this.message=ue(e,t)}function de(e,t){this._e=ie(),this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=ue(e,t)}D(le).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+re(this._e,2))}},toString:function(){return this.name+": "+this.message}}),D(ce).from(le),D(de).from(le);var he=ae.reduce((function(e,t){return e[t]=t+"Error",e}),{}),fe=le,pe=ae.reduce((function(e,t){var n=function(e,n){this._e=ie(),this.name=i,e?"string"==typeof e?(this.message=e+(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=se[t]||i,this.inner=null)},i=t+"Error";return D(n).from(fe),e[t]=n,e}),{});pe.Syntax=SyntaxError,pe.Type=TypeError,pe.Range=RangeError;var ge=oe.reduce((function(e,t){return e[t+"Error"]=pe[t],e}),{});var ve=ae.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=pe[t]),e}),{});function me(){}function ye(e){return e}function be(e,t){return null==e||e===ye?t:function(n){return t(e(n))}}function _e(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function we(e,t){return e===me?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?_e(i,this.onsuccess):i),r&&(this.onerror=this.onerror?_e(r,this.onerror):r),void 0!==o?o:n}}function ke(e,t){return e===me?t:function(){e.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?_e(n,this.onsuccess):n),i&&(this.onerror=this.onerror?_e(i,this.onerror):i)}}function Ce(e,t){return e===me?t:function(n){var i=e.apply(this,arguments);_(n,i);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?_e(r,this.onsuccess):r),o&&(this.onerror=this.onerror?_e(o,this.onerror):o),void 0===i?void 0===a?void 0:a:_(i,a)}}function xe(e,t){return e===me?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Se(e,t){return e===me?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var i=this,r=arguments.length,o=new Array(r);r--;)o[r]=arguments[r];return n.then((function(){return t.apply(i,o)}))}return t.apply(this,arguments)}}ve.ModifyError=ce,ve.DexieError=le,ve.BulkError=de;var Ee={},De="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,w(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,w(t),e]}(),Ae=De[0],Ie=De[1],Re=De[2],Te=Ie&&Ie.then,Le=Ae&&Ae.constructor,Me=!!Re,Ne=!1,Pe=Re?function(){Re.then(rt)}:m.setImmediate?setImmediate.bind(null,rt):m.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){rt(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(rt,0)},Oe=function(e,t){Ke.push([e,t]),Be&&(Pe(),Be=!1)},Fe=!0,Be=!0,He=[],je=[],ze=null,We=ye,Ue={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:It,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{It(e[0],e[1])}catch(e){}}))}},Ve=Ue,Ke=[],qe=0,Je=[];function Xe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=me,this._lib=!1;var t=this._PSD=Ve;if(Q&&(this._stackHolder=ie(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==Ee)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ye(this,this._value))}this._state=null,this._value=null,++t.ref,$e(this,e)}var Ge={get:function(){var e=function(e,i){var r=this,o=!t.global&&(t!==Ve||n!==pt),a=o&&!yt(),s=new Xe((function(n,s){et(r,new Ze(Et(e,t,o,a),Et(i,t,o,a),n,s,t))}));return Q&&it(s,this),s},t=Ve,n=pt;return e.prototype=Ee,e},set:function(e){E(this,"then",e&&e.prototype===Ee?Ge:{get:function(){return e},set:Ge.set})}};function Ze(e,t,n,i,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=i,this.psd=r}function $e(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ot();t&&"function"==typeof t.then?$e(e,(function(e,n){t instanceof Xe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Qe(e)),n&&at()}}),Ye.bind(null,e))}catch(t){Ye(e,t)}}function Ye(e,t){if(je.push(t),null===e._state){var n=e._lib&&ot();t=We(t),e._state=!1,e._value=t,Q&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=I(t,"stack");t._promise=e,E(t,"stack",{get:function(){return Ne?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){He.some((function(t){return t._value===e._value}))||He.push(e)}(e),Qe(e),n&&at()}}function Qe(e){var t=e._listeners;e._listeners=[];for(var n=0,i=t.length;n<i;++n)et(e,t[n]);var r=e._PSD;--r.ref||r.finalize(),0===qe&&(++qe,Oe((function(){0==--qe&&st()}),[]))}function et(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++qe,Oe(tt,[n,e,t])}else e._listeners.push(t)}function tt(e,t,n){try{ze=t;var i,r=t._value;t._state?i=e(r):(je.length&&(je=[]),i=e(r),-1===je.indexOf(r)&&function(e){var t=He.length;for(;t;)if(He[--t]._value===e._value)return void He.splice(t,1)}(t)),n.resolve(i)}catch(e){n.reject(e)}finally{ze=null,0==--qe&&st(),--n.psd.ref||n.psd.finalize()}}function nt(e,t,n){if(t.length===n)return t;var i="";if(!1===e._state){var r,o,a=e._value;null!=a?(r=a.name||"Error",o=a.message||a,i=re(a,0)):(r=a,o=""),t.push(r+(o?": "+o:"")+i)}return Q&&((i=re(e._stackHolder,2))&&-1===t.indexOf(i)&&t.push(i),e._prev&&nt(e._prev,t,n)),t}function it(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function rt(){ot()&&at()}function ot(){var e=Fe;return Fe=!1,Be=!1,e}function at(){var e,t,n;do{for(;Ke.length>0;)for(e=Ke,Ke=[],n=e.length,t=0;t<n;++t){var i=e[t];i[0].apply(null,i[1])}}while(Ke.length>0);Fe=!0,Be=!0}function st(){var e=He;He=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Je.slice(0),n=t.length;n;)t[--n]()}function lt(e){return new Xe(Ee,!1,e)}function ut(e,t){var n=Ve;return function(){var i=ot(),r=Ve;try{return kt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{kt(r,!1),i&&at()}}}x(Xe.prototype,{then:Ge,_then:function(e,t){et(this,new Ze(null,null,e,t,Ve))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):lt(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):lt(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),lt(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Ne=!0;var e=nt(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ne=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Xe((function(i,r){var o=setTimeout((function(){return r(new pe.Timeout(t))}),e);n.then(i,r).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&E(Xe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ue.env=Ct(),x(Xe,{all:function(){var e=$.apply(null,arguments).map(bt);return new Xe((function(t,n){0===e.length&&t([]);var i=e.length;e.forEach((function(r,o){return Xe.resolve(r).then((function(n){e[o]=n,--i||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Xe)return e;if(e&&"function"==typeof e.then)return new Xe((function(t,n){e.then(t,n)}));var t=new Xe(Ee,!0,e);return it(t,ze),t},reject:lt,race:function(){var e=$.apply(null,arguments).map(bt);return new Xe((function(t,n){e.map((function(e){return Xe.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Ve},set:function(e){return Ve=e}},totalEchoes:{get:function(){return pt}},newPSD:vt,usePSD:xt,scheduler:{get:function(){return Oe},set:function(e){Oe=e}},rejectionMapper:{get:function(){return We},set:function(e){We=e}},follow:function(e,t){return new Xe((function(n,i){return vt((function(t,n){var i=Ve;i.unhandleds=[],i.onunhandled=n,i.finalize=_e((function(){var e=this;!function(e){function t(){e(),Je.splice(Je.indexOf(t),1)}Je.push(t),++qe,Oe((function(){0==--qe&&st()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),i.finalize),e()}),t,n,i)}))}}),Le&&(Le.allSettled&&E(Xe,"allSettled",(function(){var e=$.apply(null,arguments).map(bt);return new Xe((function(t){0===e.length&&t([]);var n=e.length,i=new Array(n);e.forEach((function(e,r){return Xe.resolve(e).then((function(e){return i[r]={status:"fulfilled",value:e}}),(function(e){return i[r]={status:"rejected",reason:e}})).then((function(){return--n||t(i)}))}))}))})),Le.any&&"undefined"!=typeof AggregateError&&E(Xe,"any",(function(){var e=$.apply(null,arguments).map(bt);return new Xe((function(t,n){0===e.length&&n(new AggregateError([]));var i=e.length,r=new Array(i);e.forEach((function(e,o){return Xe.resolve(e).then((function(e){return t(e)}),(function(e){r[o]=e,--i||n(new AggregateError(r))}))}))}))})));var ct={awaits:0,echoes:0,id:0},dt=0,ht=[],ft=0,pt=0,gt=0;function vt(e,t,n,i){var r=Ve,o=Object.create(r);o.parent=r,o.ref=0,o.global=!1,o.id=++gt;var a=Ue.env;o.env=Me?{Promise:Xe,PromiseProp:{value:Xe,configurable:!0,writable:!0},all:Xe.all,race:Xe.race,allSettled:Xe.allSettled,any:Xe.any,resolve:Xe.resolve,reject:Xe.reject,nthen:Dt(a.nthen,o),gthen:Dt(a.gthen,o)}:{},t&&_(o,t),++r.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=xt(o,e,n,i);return 0===o.ref&&o.finalize(),s}function mt(){return ct.id||(ct.id=++dt),++ct.awaits,ct.echoes+=100,ct.id}function yt(){return!!ct.awaits&&(0==--ct.awaits&&(ct.id=0),ct.echoes=100*ct.awaits,!0)}function bt(e){return ct.echoes&&e&&e.constructor===Le?(mt(),e.then((function(e){return yt(),e}),(function(e){return yt(),Rt(e)}))):e}function _t(e){++pt,ct.echoes&&0!=--ct.echoes||(ct.echoes=ct.id=0),ht.push(Ve),kt(e,!0)}function wt(){var e=ht[ht.length-1];ht.pop(),kt(e,!1)}function kt(e,t){var n=Ve;if((t?!ct.echoes||ft++&&e===Ve:!ft||--ft&&e===Ve)||St(t?_t.bind(null,e):wt),e!==Ve&&(Ve=e,n===Ue&&(Ue.env=Ct()),Me)){var i=Ue.env.Promise,r=e.env;Ie.then=r.nthen,i.prototype.then=r.gthen,(n.global||e.global)&&(Object.defineProperty(m,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function Ct(){var e=m.Promise;return Me?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(m,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Ie.then,gthen:e.prototype.then}:{}}function xt(e,t,n,i,r){var o=Ve;try{return kt(e,!0),t(n,i,r)}finally{kt(o,!1)}}function St(e){Te.call(Ae,e)}function Et(e,t,n,i){return"function"!=typeof e?e:function(){var r=Ve;n&&mt(),kt(t,!0);try{return e.apply(this,arguments)}finally{kt(r,!1),i&&St(yt)}}}function Dt(e,t){return function(n,i){return e.call(this,Et(n,t),Et(i,t))}}-1===(""+Te).indexOf("[native code]")&&(mt=yt=me);var At="unhandledrejection";function It(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var i,r={promise:t,reason:e};if(m.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(At,!0,!0),_(i,r)):m.CustomEvent&&_(i=new CustomEvent(At,{detail:r}),r),i&&m.dispatchEvent&&(dispatchEvent(i),!m.PromiseRejectionEvent&&m.onunhandledrejection))try{m.onunhandledrejection(i)}catch(e){}Q&&i&&!i.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var Rt=Xe.reject;function Tt(e,t,n,i){if(e.idbdb&&(e._state.openComplete||Ve.letThrough||e._vip)){var r=e._createTransaction(t,n,e._dbSchema);try{r.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===he.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return Tt(e,t,n,i)}))):Rt(r)}return r._promise(t,(function(e,t){return vt((function(){return Ve.trans=r,i(e,t,r)}))})).then((function(e){return r._completion.then((function(){return e}))}))}if(e._state.openComplete)return Rt(new pe.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Rt(new pe.DatabaseClosed);e.open().catch(me)}return e._state.dbReadyPromise.then((function(){return Tt(e,t,n,i)}))}var Lt="3.2.2",Mt=String.fromCharCode(65535),Nt=-1/0,Pt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ot="String expected.",Ft=[],Bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ht=Bt,jt=Bt,zt=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Wt="__dbnames",Ut="readonly",Vt="readwrite";function Kt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var qt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Jt(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=V(t))[e],t}}var Xt,Gt=((Xt=function(){}).prototype._trans=function(e,t,n){var i=function(e,n,i){if(!i.schema[o])throw new pe.NotFound("Table "+o+" not part of transaction");return t(i.idbtrans,i)},r=this._tx||Ve.trans,o=this.name,a=ot();try{return r&&r.db===this.db?r===Ve.trans?r._promise(e,i,n):vt((function(){return r._promise(e,i,n)}),{trans:r,transless:Ve.transless||Ve}):Tt(this.db,e,[this.name],i)}finally{a&&at()}},Xt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},Xt.prototype.where=function(e){var t=function(e,t){try{return 0===o.cmp(e,t)}catch(e){return!1}};if("string"==typeof e)return new this.db.WhereClause(this,e);if(b(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=y(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&n.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return n.indexOf(e)>=0}))}))[0];if(i&&this.db._maxKey!==Mt)return this.where(i.name).equals(i.keyPath.map((function(t){return e[t]})));!i&&Q&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var r=this.schema.idxByName,o=this.db._deps.indexedDB,a=n.reduce((function(n,i){var o=n[0],a=n[1],s=r[i],l=e[i];return[o||s,o||!s?Kt(a,s&&s.multi?function(e){var n=O(e,i);return b(n)&&n.some((function(e){return t(l,e)}))}:function(e){return t(l,O(e,i))}):a]}),[null,null]),s=a[0],l=a[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(l):i?this.filter(l):this.where(n).equals("")},Xt.prototype.filter=function(e){return this.toCollection().and(e)},Xt.prototype.count=function(e){return this.toCollection().count(e)},Xt.prototype.offset=function(e){return this.toCollection().offset(e)},Xt.prototype.limit=function(e){return this.toCollection().limit(e)},Xt.prototype.each=function(e){return this.toCollection().each(e)},Xt.prototype.toArray=function(e){return this.toCollection().toArray(e)},Xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Xt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,b(e)?"["+e.join("+")+"]":e))},Xt.prototype.reverse=function(){return this.toCollection().reverse()},Xt.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var i in t)if(C(t,i))try{n[i]=t[i]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},Xt.prototype.defineClass=function(){return this.mapToClass((function(e){_(this,e)}))},Xt.prototype.add=function(e,t){var n=this,i=this.schema.primKey,r=i.auto,o=i.keyPath,a=e;return o&&r&&(a=Jt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Xe.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{F(e,o,t)}catch(e){}return t}))},Xt.prototype.update=function(e,t){if("object"!=typeof e||b(e))return this.where(":id").equals(e).modify(t);var n=O(e,this.schema.primKey.keyPath);if(void 0===n)return Rt(new pe.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?y(t).forEach((function(n){F(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)},Xt.prototype.put=function(e,t){var n=this,i=this.schema.primKey,r=i.auto,o=i.keyPath,a=e;return o&&r&&(a=Jt(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Xe.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{F(e,o,t)}catch(e){}return t}))},Xt.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Xe.reject(e.failures[0]):void 0}))},Xt.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:qt})})).then((function(e){return e.numFailures?Xe.reject(e.failures[0]):void 0}))},Xt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},Xt.prototype.bulkAdd=function(e,t,n){var i=this,r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=i.schema.primKey,a=n.auto,s=n.keyPath;if(s&&r)throw new pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=s&&a?e.map(Jt(s)):e;return i.core.mutate({trans:t,type:"add",keys:r,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,r=e.lastResult,a=e.failures;if(0===t)return o?n:r;throw new de(i.name+".bulkAdd(): "+t+" of "+l+" operations failed",a)}))}))},Xt.prototype.bulkPut=function(e,t,n){var i=this,r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=i.schema.primKey,a=n.auto,s=n.keyPath;if(s&&r)throw new pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,u=s&&a?e.map(Jt(s)):e;return i.core.mutate({trans:t,type:"put",keys:r,values:u,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,r=e.lastResult,a=e.failures;if(0===t)return o?n:r;throw new de(i.name+".bulkPut(): "+t+" of "+l+" operations failed",a)}))}))},Xt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var i=e.numFailures,r=e.lastResult,o=e.failures;if(0===i)return r;throw new de(t.name+".bulkDelete(): "+i+" of "+n+" operations failed",o)}))},Xt);function Zt(e){var t=function(e,t,o){if("object"==typeof e)return n(e);t||(t=xe),o||(o=me);var a={subscribers:[],fire:o,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=t(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(t,o)}};return i[e]=r[e]=a,a},n=function(e){y(e).forEach((function(n){var i=e[n];if(b(i))t(n,e[n][0],e[n][1]);else{if("asap"!==i)throw new pe.InvalidArgument("Invalid event config");var r=t(n,ye,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){N((function(){e.apply(null,t)}))}))}))}}))},i={},r=function(t,n){if(n){for(var r=arguments.length,o=new Array(r-1);--r;)o[r-1]=arguments[r];return i[t].subscribe.apply(null,o),e}if("string"==typeof t)return i[t]};r.addEventType=t;for(var o=1,a=arguments.length;o<a;++o)t(arguments[o]);return r}function $t(e,t){return D(t).from({prototype:e}),t}function Yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Qt(e,t){e.filter=Kt(e.filter,t)}function en(e,t,n){var i=e.replayFilter;e.replayFilter=i?function(){return Kt(i(),t())}:t,e.justLimit=n&&!i}function tn(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new pe.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function nn(e,t,n){var i=tn(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:i,range:e.range}})}function rn(e,t,n,i){var r=e.replayFilter?Kt(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,i){if(!r||r(n,i,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var a=n.primaryKey,s=""+a;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(a)),C(o,s)||(o[s]=!0,t(e,n,i))}};return Promise.all([e.or._iterate(a,n),on(nn(e,i,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return on(nn(e,i,n),Kt(e.algorithm,r),t,!e.keysOnly&&e.valueMapper)}function on(e,t,n,i){var r=ut(i?function(e,t,r){return n(i(e),t,r)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=me}),(function(t){e.fail(t),n=me}))||r(e.value,e,(function(e){return n=e})),n()}))}))}function an(e,t){try{var n=sn(e),i=sn(t);if(n!==i)return"Array"===n?1:"Array"===i?-1:"binary"===n?1:"binary"===i?-1:"string"===n?1:"string"===i?-1:"Date"===n?1:"Date"!==i?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,i=t.length,r=n<i?n:i,o=0;o<r;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===i?0:n<i?-1:1}(ln(e),ln(t));case"Array":return function(e,t){for(var n=e.length,i=t.length,r=n<i?n:i,o=0;o<r;++o){var a=an(e[o],t[o]);if(0!==a)return a}return n===i?0:n<i?-1:1}(e,t)}}catch(e){}return NaN}function sn(e){var t=void 0===e?"undefined":(0,p.default)(e);if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";var n=J(e);return"ArrayBuffer"===n?"binary":n}function ln(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var un,cn=((un=function(){}).prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Rt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},un.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Rt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},un.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Kt(t.algorithm,e)},un.prototype._iterate=function(e,t){return rn(this._ctx,e,t,this._ctx.table.core)},un.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&_(n,e),t._ctx=n,t},un.prototype.raw=function(){return this._ctx.valueMapper=null,this},un.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return rn(t,e,n,t.table.core)}))},un.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,i=n.table.core;if(Yt(n,!0))return i.count({trans:e,query:{index:tn(n,i.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var r=0;return rn(n,(function(){return++r,!1}),e,i).then((function(){return r}))})).then(e)},un.prototype.sortBy=function(e,t){var n=function(e,t){var n=a(e,o),i=a(t,o);return n<i?-s:n>i?s:0},i=e.split(".").reverse(),r=i[0],o=i.length-1;function a(e,t){return t?a(e[i[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;return this.toArray((function(e){return e.sort(n)})).then(t)},un.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&Yt(n,!0)&&n.limit>0){var i=n.valueMapper,r=tn(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:r,range:n.range}}).then((function(e){var t=e.result;return i?t.map(i):t}))}var o=[];return rn(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},un.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Yt(t)?en(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):en(t,(function(){var t=e;return function(){return--t<0}}))),this},un.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),en(this._ctx,(function(){var t=e;return function(e,n,i){return--t<=0&&n(i),t>=0}}),!0),this},un.prototype.until=function(e,t){return Qt(this._ctx,(function(n,i,r){return!e(n.value)||(i(r),t)})),this},un.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},un.prototype.last=function(e){return this.reverse().first(e)},un.prototype.filter=function(e){var t,n;return Qt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Kt(t.isMatch,n),this},un.prototype.and=function(e){return this.filter(e)},un.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},un.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},un.prototype.desc=function(){return this.reverse()},un.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},un.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},un.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},un.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},un.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Yt(t,!0)&&t.limit>0)return this._read((function(e){var n=tn(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},un.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},un.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},un.prototype.lastKey=function(e){return this.reverse().firstKey(e)},un.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Qt(this._ctx,(function(e){var t=e.primaryKey.toString(),i=C(n,t);return n[t]=!0,!i})),this},un.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(i){var r;if("function"==typeof e)r=e;else{var o=y(e),a=o.length;r=function(t){for(var n=!1,i=0;i<a;++i){var r=o[i],s=e[r];O(t,r)!==s&&(F(t,r,s),n=!0)}return n}}var s=n.table.core,l=s.schema.primaryKey,u=l.outbound,c=l.extractKey,d=t.db._options.modifyChunkSize||200,h=[],f=0,p=[],g=function(e,t){var n=t.failures,i=t.numFailures;f+=e-i;for(var r=0,o=y(n);r<o.length;r++){var a=o[r];h.push(n[a])}};return t.clone().primaryKeys().then((function(t){var o=function(a){var l=Math.min(d,t.length-a);return s.getMany({trans:i,keys:t.slice(a,a+l),cache:"immutable"}).then((function(h){for(var f=[],p=[],v=u?[]:null,m=[],y=0;y<l;++y){var b=h[y],_={value:V(b),primKey:t[a+y]};!1!==r.call(_,_.value,_)&&(null==_.value?m.push(t[a+y]):u||0===an(c(b),c(_.value))?(p.push(_.value),u&&v.push(t[a+y])):(m.push(t[a+y]),f.push(_.value)))}var w=Yt(n)&&n.limit===1/0&&("function"!=typeof e||e===dn)&&{index:n.index,range:n.range};return Promise.resolve(f.length>0&&s.mutate({trans:i,type:"add",values:f}).then((function(e){for(var t in e.failures)m.splice(parseInt(t),1);g(f.length,e)}))).then((function(){return(p.length>0||w&&"object"==typeof e)&&s.mutate({trans:i,type:"put",keys:v,values:p,criteria:w,changeSpec:"function"!=typeof e&&e}).then((function(e){return g(p.length,e)}))})).then((function(){return(m.length>0||w&&e===dn)&&s.mutate({trans:i,type:"delete",keys:m,criteria:w}).then((function(e){return g(m.length,e)}))})).then((function(){return t.length>a+l&&o(a+d)}))}))};return o(0).then((function(){if(h.length>0)throw new ce("Error modifying one or more objects",h,f,p);return t.length}))}))}))},un.prototype.delete=function(){var e=this._ctx,t=e.range;return Yt(e)&&(e.isPrimKey&&!jt||3===t.type)?this._write((function(n){var i=e.table.core.schema.primaryKey,r=t;return e.table.core.count({trans:n,query:{index:i,range:r}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:r}).then((function(e){var n=e.failures;e.lastResult,e.results;var i=e.numFailures;if(i)throw new ce("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-i);return t-i}))}))})):this.modify(dn)},un),dn=function(e,t){return t.value=null};function hn(e,t){return e<t?-1:e===t?0:1}function fn(e,t){return e>t?-1:e===t?0:1}function pn(e,t,n){var i=e instanceof wn?new e.Collection(e):e;return i._ctx.error=n?new n(t):new TypeError(t),i}function gn(e){return new e.Collection(e,(function(){return bn("")})).limit(0)}function vn(e,t,n,i,r,o){for(var a=Math.min(e.length,i.length),s=-1,l=0;l<a;++l){var u=t[l];if(u!==i[l])return r(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):r(e[l],i[l])<0?e.substr(0,l)+i[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;r(e[l],u)<0&&(s=l)}return a<i.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+i[s]+n.substr(s+1)}function mn(e,t,n,i){var r,o,a,s,l,u,c,d=function(e){r=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),o=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),a="next"===e?hn:fn;var t=n.map((function(e){return{lower:o(e),upper:r(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),u=e,c="next"===e?"":i},h=n.length;if(!n.every((function(e){return"string"==typeof e})))return pn(e,Ot);d("next");var f=new e.Collection(e,(function(){return yn(s[0],l[h-1]+i)}));f._ondirectionchange=function(e){d(e)};var p=0;return f._addAlgorithm((function(e,n,i){var r=e.key;if("string"!=typeof r)return!1;var d=o(r);if(t(d,l,p))return!0;for(var f=null,g=p;g<h;++g){var v=vn(r,d,s[g],l[g],a,u);null===v&&null===f?p=g+1:(null===f||a(f,v)>0)&&(f=v)}return n(null!==f?function(){e.continue(f+c)}:i),!1})),f}function yn(e,t,n,i){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:i}}function bn(e){return{type:1,lower:e,upper:e}}var _n,wn=(_n=function(){},Object.defineProperty(_n.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),_n.prototype.between=function(e,t,n,i){n=!1!==n,i=!0===i;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||i)&&(!n||!i)?gn(this):new this.Collection(this,(function(){return yn(e,t,!n,!i)}))}catch(e){return pn(this,Pt)}},_n.prototype.equals=function(e){return null==e?pn(this,Pt):new this.Collection(this,(function(){return bn(e)}))},_n.prototype.above=function(e){return null==e?pn(this,Pt):new this.Collection(this,(function(){return yn(e,void 0,!0)}))},_n.prototype.aboveOrEqual=function(e){return null==e?pn(this,Pt):new this.Collection(this,(function(){return yn(e,void 0,!1)}))},_n.prototype.below=function(e){return null==e?pn(this,Pt):new this.Collection(this,(function(){return yn(void 0,e,!1,!0)}))},_n.prototype.belowOrEqual=function(e){return null==e?pn(this,Pt):new this.Collection(this,(function(){return yn(void 0,e)}))},_n.prototype.startsWith=function(e){return"string"!=typeof e?pn(this,Ot):this.between(e,e+Mt,!0,!0)},_n.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):mn(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Mt)},_n.prototype.equalsIgnoreCase=function(e){return mn(this,(function(e,t){return e===t[0]}),[e],"")},_n.prototype.anyOfIgnoreCase=function(){var e=$.apply(Z,arguments);return 0===e.length?gn(this):mn(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},_n.prototype.startsWithAnyOfIgnoreCase=function(){var e=$.apply(Z,arguments);return 0===e.length?gn(this):mn(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Mt)},_n.prototype.anyOf=function(){var e=this,t=$.apply(Z,arguments),n=this._cmp;try{t.sort(n)}catch(e){return pn(this,Pt)}if(0===t.length)return gn(this);var i=new this.Collection(this,(function(){return yn(t[0],t[t.length-1])}));i._ondirectionchange=function(i){n="next"===i?e._ascending:e._descending,t.sort(n)};var r=0;return i._addAlgorithm((function(e,i,o){for(var a=e.key;n(a,t[r])>0;)if(++r===t.length)return i(o),!1;return 0===n(a,t[r])||(i((function(){e.continue(t[r])})),!1)})),i},_n.prototype.notEqual=function(e){return this.inAnyRange([[Nt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},_n.prototype.noneOf=function(){var e=$.apply(Z,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return pn(this,Pt)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Nt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},_n.prototype.inAnyRange=function(e,t){var n=function(e,t){return h(e[0],t[0])},i=this,r=this._cmp,o=this._ascending,a=this._descending,s=this._min,l=this._max;if(0===e.length)return gn(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&o(e[0],e[1])<=0})))return pn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pe.InvalidArgument);var u,c=!t||!1!==t.includeLowers,d=t&&!0===t.includeUppers,h=o;try{u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&r(t[1],o[0])>0){o[0]=s(o[0],t[0]),o[1]=l(o[1],t[1]);break}}return n===i&&e.push(t),e}),[]),u.sort(n)}catch(e){return pn(this,Pt)}var f=0,p=d?function(e){return o(e,u[f][1])>0}:function(e){return o(e,u[f][1])>=0},g=c?function(e){return a(e,u[f][0])>0}:function(e){return a(e,u[f][0])>=0},v=p,m=new this.Collection(this,(function(){return yn(u[0][0],u[u.length-1][1],!c,!d)}));return m._ondirectionchange=function(e){"next"===e?(v=p,h=o):(v=g,h=a),u.sort(n)},m._addAlgorithm((function(e,t,n){for(var r=e.key;v(r);)if(++f===u.length)return t(n),!1;return!!function(e){return!p(e)&&!g(e)}(r)||(0===i._cmp(r,u[f][1])||0===i._cmp(r,u[f][0])||t((function(){h===o?e.continue(u[f][0]):e.continue(u[f][1])})),!1)})),m},_n.prototype.startsWithAnyOf=function(){var e=$.apply(Z,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?gn(this):this.inAnyRange(e.map((function(e){return[e,e+Mt]}))):pn(this,"startsWithAnyOf() only works with strings")},_n);function kn(e){return ut((function(t){return Cn(t),e(t.target.error),!1}))}function Cn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var xn,Sn="storagemutated",En="x-storagemutated-1",Dn=Zt(null,Sn),An=((xn=function(){}).prototype._lock=function(){return M(!Ve.global),++this._reculock,1!==this._reculock||Ve.global||(Ve.lockOwnerFor=this),this},xn.prototype._unlock=function(){if(M(!Ve.global),0==--this._reculock)for(Ve.global||(Ve.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{xt(e[1],e[0])}catch(e){}}return this},xn.prototype._locked=function(){return this._reculock&&Ve.lockOwnerFor!==this},xn.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,i=this.db._state.dbOpenError;if(M(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new pe.DatabaseClosed(i);case"MissingAPIError":throw new pe.MissingAPI(i.message,i);default:throw new pe.OpenFailed(i)}if(!this.active)throw new pe.TransactionInactive;return M(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ut((function(n){Cn(n),t._reject(e.error)})),e.onabort=ut((function(n){Cn(n),t.active&&t._reject(new pe.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=ut((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Dn.storagemutated.fire(e.mutatedParts)})),this},xn.prototype._promise=function(e,t,n){var i=this;if("readwrite"===e&&"readwrite"!==this.mode)return Rt(new pe.ReadOnly("Transaction is readonly"));if(!this.active)return Rt(new pe.TransactionInactive);if(this._locked())return new Xe((function(r,o){i._blockedFuncs.push([function(){i._promise(e,t,n).then(r,o)},Ve])}));if(n)return vt((function(){var e=new Xe((function(e,n){i._lock();var r=t(e,n,i);r&&r.then&&r.then(e,n)}));return e.finally((function(){return i._unlock()})),e._lib=!0,e}));var r=new Xe((function(e,n){var r=t(e,n,i);r&&r.then&&r.then(e,n)}));return r._lib=!0,r},xn.prototype._root=function(){return this.parent?this.parent._root():this},xn.prototype.waitFor=function(e){var t=this._root(),n=Xe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var i=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(i.get(-1/0).onsuccess=e)}()}var r=t._waitingFor;return new Xe((function(e,i){n.then((function(n){return t._waitingQueue.push(ut(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(ut(i.bind(null,e)))})).finally((function(){t._waitingFor===r&&(t._waitingFor=null)}))}))},xn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pe.Abort))},xn.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(C(t,e))return t[e];var n=this.schema[e];if(!n)throw new pe.NotFound("Table "+e+" not part of transaction");var i=new this.db.Table(e,n,this);return i.core=this.db.core.table(e),t[e]=i,i},xn);function In(e,t,n,i,r,o,a){return{name:e,keyPath:t,unique:n,multi:i,auto:r,compound:o,src:(n&&!a?"&":"")+(i?"*":"")+(r?"++":"")+Rn(t)}}function Rn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Tn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:P(n,(function(e){return[e.name,e]}))}}var Ln=function(e){try{return e.only([[]]),Ln=function(){return[[]]},[[]]}catch(e){return Ln=function(){return Mt},Mt}};function Mn(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return O(t,e)}}(e):function(t){return O(t,e)}}function Nn(e){return[].slice.call(e)}var Pn=0;function On(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function Fn(e,t,n){var i=function(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,i=e.upper,r=e.lowerOpen,o=e.upperOpen;return void 0===n?void 0===i?null:t.upperBound(i,!!o):void 0===i?t.lowerBound(n,!!r):t.bound(n,i,!!r,!!o)},r=function(e,t){var n=Nn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,i=b(t),r=null==t,o={},a={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:r,compound:i,keyPath:t,autoIncrement:n,unique:!0,extractKey:Mn(t)},indexes:Nn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,i=e.multiEntry,r=e.keyPath,a={name:t,compound:b(r),keyPath:r,unique:n,multiEntry:i,extractKey:Mn(r)};return o[On(r)]=a,a})),getIndexByKeyPath:function(e){return o[On(e)]}};return o[":id"]=a.primaryKey,null!=t&&(o[On(t)]=a.primaryKey),a}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=r.schema,a=r.hasGetAll,s=o.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(e){var n=e.trans,r=e.type,o=e.keys,a=e.values,s=e.range;return new Promise((function(e,l){e=ut(e);var u=n.objectStore(t),c=null==u.keyPath,d="put"===r||"add"===r;if(!d&&"delete"!==r&&"deleteRange"!==r)throw new Error("Invalid operation type: "+r);var h,f=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p=[],g=[],v=0,m=function(e){++v,Cn(e)};if("deleteRange"===r){if(4===s.type)return e({numFailures:v,failures:g,results:[],lastResult:void 0});3===s.type?p.push(h=u.clear()):p.push(h=u.delete(i(s)))}else{var y=d?c?[a,o]:[a,null]:[o,null],b=y[0],_=y[1];if(d)for(var w=0;w<f;++w)p.push(h=_&&void 0!==_[w]?u[r](b[w],_[w]):u[r](b[w])),h.onerror=m;else for(w=0;w<f;++w)p.push(h=u[r](b[w])),h.onerror=m}var k=function(t){var n=t.target.result;p.forEach((function(e,t){return null!=e.error&&(g[t]=e.error)})),e({numFailures:v,failures:g,results:"delete"===r?o:p.map((function(e){return e.result})),lastResult:n})};h.onerror=function(e){m(e),k(e)},h.onsuccess=k}))},getMany:function(e){var n=e.trans,i=e.keys;return new Promise((function(e,r){e=ut(e);for(var o,a=n.objectStore(t),s=i.length,l=new Array(s),u=0,c=0,d=function(t){var n=t.target;l[n._pos]=n.result,++c===u&&e(l)},h=kn(r),f=0;f<s;++f)null!=i[f]&&((o=a.get(i[f]))._pos=f,o.onsuccess=d,o.onerror=h,++u);0===u&&e(l)}))},get:function(e){var n=e.trans,i=e.key;return new Promise((function(e,r){e=ut(e);var o=n.objectStore(t).get(i);o.onsuccess=function(t){return e(t.target.result)},o.onerror=kn(r)}))},query:function(e){return function(n){return new Promise((function(r,o){r=ut(r);var a=n.trans,s=n.values,l=n.limit,u=n.query,c=l===1/0?void 0:l,d=u.index,h=u.range,f=a.objectStore(t),p=d.isPrimaryKey?f:f.index(d.name),g=i(h);if(0===l)return r({result:[]});if(e){var v=s?p.getAll(g,c):p.getAllKeys(g,c);v.onsuccess=function(e){return r({result:e.target.result})},v.onerror=kn(o)}else{var m=0,y=s||!("openKeyCursor"in p)?p.openCursor(g):p.openKeyCursor(g),b=[];y.onsuccess=function(e){var t=y.result;return t?(b.push(s?t.value:t.primaryKey),++m===l?r({result:b}):void t.continue()):r({result:b})},y.onerror=kn(o)}}))}}(a),openCursor:function(e){var n=e.trans,r=e.values,o=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=ut(e);var u=o.index,c=o.range,d=n.objectStore(t),h=u.isPrimaryKey?d:d.index(u.name),f=a?s?"prevunique":"prev":s?"nextunique":"next",p=r||!("openKeyCursor"in h)?h.openCursor(i(c),f):h.openKeyCursor(i(c),f);p.onerror=kn(l),p.onsuccess=ut((function(t){var i=p.result;if(i){i.___id=++Pn,i.done=!1;var r=i.continue.bind(i),o=i.continuePrimaryKey;o&&(o=o.bind(i));var a=i.advance.bind(i),s=function(){throw new Error("Cursor not stopped")};i.trans=n,i.stop=i.continue=i.continuePrimaryKey=i.advance=function(){throw new Error("Cursor not started")},i.fail=ut(l),i.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},i.start=function(e){var t=new Promise((function(e,t){e=ut(e),p.onerror=kn(t),i.fail=t,i.stop=function(t){i.stop=i.continue=i.continuePrimaryKey=i.advance=s,e(t)}})),n=function(){if(p.result)try{e()}catch(e){i.fail(e)}else i.done=!0,i.start=function(){throw new Error("Cursor behind last entry")},i.stop()};return p.onsuccess=ut((function(e){p.onsuccess=n,n()})),i.continue=r,i.continuePrimaryKey=o,i.advance=a,n(),t},e(i)}else e(null)}),l)}))},count:function(e){var n=e.query,r=e.trans,o=n.index,a=n.range;return new Promise((function(e,n){var s=r.objectStore(t),l=o.isPrimaryKey?s:s.index(o.name),u=i(a),c=u?l.count(u):l.count();c.onsuccess=ut((function(t){return e(t.target.result)})),c.onerror=kn(n)}))}}}(e)})),l={};return s.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '"+e+"' not found");return l[e]},MIN_KEY:-1/0,MAX_KEY:Ln(t),schema:o}}function Bn(e,t,n,i){var r=n.IDBKeyRange;n.indexedDB;var o=function(e,t){return t.reduce((function(e,t){var n=t.create;return g(g({},e),n(e))}),e)}(Fn(t,r,i),e.dbcore);return{dbcore:o}}function Hn(e,t){var n=e._novip,i=t.db,r=Bn(n._middlewares,i,n._deps,t);n.core=r.dbcore,n.tables.forEach((function(e){var t=e.name;n.core.schema.tables.some((function(e){return e.name===t}))&&(e.core=n.core.table(t),n[t]instanceof n.Table&&(n[t].core=e.core))}))}function jn(e,t,n,i){var r=e._novip;n.forEach((function(e){var n=i[e];t.forEach((function(t){var i=I(t,e);(!i||"value"in i&&void 0===i.value)&&(t===r.Transaction.prototype||t instanceof r.Transaction?E(t,e,{get:function(){return this.table(e)},set:function(t){S(this,e,{value:t,writable:!0,configurable:!0,enumerable:!0})}}):t[e]=new r.Table(e,n))}))}))}function zn(e,t){var n=e._novip;t.forEach((function(e){for(var t in e)e[t]instanceof n.Table&&delete e[t]}))}function Wn(e,t){return e._cfg.version-t._cfg.version}function Un(e,t,n,i){var r=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,r);o.create(n),o._completion.catch(i);var a=o._reject.bind(o),s=Ve.transless||Ve;vt((function(){Ve.trans=o,Ve.transless=s,0===t?(y(r).forEach((function(e){Kn(n,e,r[e].primKey,r[e].indexes)})),Hn(e,n),Xe.follow((function(){return e.on.populate.fire(o)})).catch(a)):function(e,t,n,i){var r=e._novip,o=[],a=r._versions,s=r._dbSchema=Jn(r,r.idbdb,i),l=!1;function u(){return o.length?Xe.resolve(o.shift()(n.idbtrans)).then(u):Xe.resolve()}return a.filter((function(e){return e._cfg.version>=t})).forEach((function(e){o.push((function(){var o=s,a=e._cfg.dbschema;Xn(r,o,i),Xn(r,a,i),s=r._dbSchema=a;var u=Vn(o,a);u.add.forEach((function(e){Kn(i,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((function(e){if(e.recreate)throw new pe.Upgrade("Not yet support for changing primary key");var t=i.objectStore(e.name);e.add.forEach((function(e){return qn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),qn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>t){Hn(r,i),n._memoizedTables={},l=!0;var d=B(a);u.del.forEach((function(e){d[e]=o[e]})),zn(r,[r.Transaction.prototype]),jn(r,[r.Transaction.prototype],y(d),d),n.schema=d;var h,f=Y(c);f&&mt();var p=Xe.follow((function(){if((h=c(n))&&f){var e=yt.bind(null,null);h.then(e,e)}}));return h&&"function"==typeof h.then?Xe.resolve(h):p.then((function(){return h}))}})),o.push((function(t){l&&Ht||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((function(n){return null==e[n]&&t.db.deleteObjectStore(n)}))}(e._cfg.dbschema,t);zn(r,[r.Transaction.prototype]),jn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),n.schema=r._dbSchema}))})),u().then((function(){var e,t;t=i,y(e=s).forEach((function(n){t.db.objectStoreNames.contains(n)||Kn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(a)}))}function Vn(e,t){var n,i={del:[],add:[],change:[]};for(n in e)t[n]||i.del.push(n);for(n in t){var r=e[n],o=t[n];if(r){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||r.primKey.auto!==o.primKey.auto&&!Bt)a.recreate=!0,i.change.push(a);else{var s=r.idxByName,l=o.idxByName,u=void 0;for(u in s)l[u]||a.del.push(u);for(u in l){var c=s[u],d=l[u];c?c.src!==d.src&&a.change.push(d):a.add.push(d)}(a.del.length>0||a.add.length>0||a.change.length>0)&&i.change.push(a)}}else i.add.push([n,o])}return i}function Kn(e,t,n,i){var r=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach((function(e){return qn(r,e)})),r}function qn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Jn(e,t,n){var i={};return T(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),r=t.keyPath,o=In(Rn(r),r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r,!0),a=[],s=0;s<t.indexNames.length;++s){var l=t.index(t.indexNames[s]);r=l.keyPath;var u=In(l.name,r,!!l.unique,!!l.multiEntry,!1,r&&"string"!=typeof r,!1);a.push(u)}i[e]=Tn(e,o,a)})),i}function Xn(e,t,n){for(var i=e._novip,r=n.db.objectStoreNames,o=0;o<r.length;++o){var a=r[o],s=n.objectStore(a);i._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,d="string"==typeof c?c:"["+T(c).join("+")+"]";if(t[a]){var h=t[a].idxByName[d];h&&(h.name=u,delete t[a].idxByName[d],t[a].idxByName[u]=h)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&m.WorkerGlobalScope&&m instanceof m.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}var Gn,Zn=((Gn=function(){}).prototype._parseStoresSpec=function(e,t){y(e).forEach((function(n){if(null!==e[n]){var i=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return In(n,i||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),b(i),0===t)})),r=i.shift();if(r.multi)throw new pe.Schema("Primary key cannot be multi-valued");i.forEach((function(e){if(e.auto)throw new pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new pe.Schema("Index must have a name and cannot be an empty string")})),t[n]=Tn(n,r,i)}}))},Gn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?_(this._cfg.storesSource,e):e;var n=t._versions,i={},r={};return n.forEach((function(e){_(i,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(i,r)})),t._dbSchema=r,zn(t,[t._allTables,t,t.Transaction.prototype]),jn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],y(r),r),t._storeNames=y(r),this},Gn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Se(this._cfg.contentUpgrade||me,e),this},Gn);function $n(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new ki(Wt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function Yn(e){return e&&"function"==typeof e.databases}function Qn(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!Yn(n)&&t!==Wt&&$n(n,i).delete(t).catch(me)}function ei(e){return vt((function(){return Ve.letThrough=!0,e()}))}function ti(e){var t=function(){if(n.openCanceller!==o)throw new pe.DatabaseClosed("db.open() was cancelled")},n=e._state,i=e._deps.indexedDB;if(n.isBeingOpened||e.idbdb)return n.dbReadyPromise.then((function(){return n.dbOpenError?Rt(n.dbOpenError):e}));Q&&(n.openCanceller._stackHolder=ie()),n.isBeingOpened=!0,n.dbOpenError=null,n.openComplete=!1;var r,o=n.openCanceller,a=n.dbReadyResolve,s=null,l=!1;return Xe.race([o,("undefined"==typeof navigator?Xe.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){var t=function(){return indexedDB.databases().finally(e)};r=setInterval(t,100),t()})).finally((function(){return clearInterval(r)})):Promise.resolve()).then((function(){return new Xe((function(r,o){if(t(),!i)throw new pe.MissingAPI;var a=e.name,u=n.autoSchema?i.open(a):i.open(a,Math.round(10*e.verno));if(!u)throw new pe.MissingAPI;u.onerror=kn(o),u.onblocked=ut(e._fireOnBlocked),u.onupgradeneeded=ut((function(t){if(s=u.transaction,n.autoSchema&&!e._options.allowEmptyDB){u.onerror=Cn,s.abort(),u.result.close();var r=i.deleteDatabase(a);r.onsuccess=r.onerror=ut((function(){o(new pe.NoSuchDatabase("Database "+a+" doesnt exist"))}))}else{s.onerror=kn(o);var c=t.oldVersion>Math.pow(2,62)?0:t.oldVersion;l=c<1,e._novip.idbdb=u.result,Un(e,c/10,s,o)}}),o),u.onsuccess=ut((function(){s=null;var t,i=e._novip.idbdb=u.result,o=T(i.objectStoreNames);if(o.length>0)try{var c=i.transaction(1===(t=o).length?t[0]:t,"readonly");n.autoSchema?function(e,t,n){var i=e._novip;i.verno=t.version/10;var r=i._dbSchema=Jn(0,t,n);i._storeNames=T(t.objectStoreNames,0),jn(i,[i._allTables],y(r),r)}(e,i,c):(Xn(e,e._dbSchema,c),function(e,t){var n=Vn(Jn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Hn(e,c)}catch(e){}Ft.push(e),i.onversionchange=ut((function(t){n.vcFired=!0,e.on("versionchange").fire(t)})),i.onclose=ut((function(t){e.on("close").fire(t)})),l&&function(e,t){var n=e.indexedDB,i=e.IDBKeyRange;!Yn(n)&&t!==Wt&&$n(n,i).put({name:t}).catch(me)}(e._deps,a),r()}),o)}))}))]).then((function(){return t(),n.onReadyBeingFired=[],Xe.resolve(ei((function(){return e.on.ready.fire(e.vip)}))).then((function t(){if(n.onReadyBeingFired.length>0){var i=n.onReadyBeingFired.reduce(Se,me);return n.onReadyBeingFired=[],Xe.resolve(ei((function(){return i(e.vip)}))).then(t)}}))})).finally((function(){n.onReadyBeingFired=null,n.isBeingOpened=!1})).then((function(){return e})).catch((function(t){n.dbOpenError=t;try{s&&s.abort()}catch(e){}return o===n.openCanceller&&e._close(),Rt(t)})).finally((function(){n.openComplete=!0,a()}))}function ni(e){var t=function(e){return function(t){var n=e(t),o=n.value;return n.done?o:o&&"function"==typeof o.then?o.then(i,r):b(o)?Promise.all(o).then(i,r):i(o)}},n=function(t){return e.next(t)},i=t(n),r=t((function(t){return e.throw(t)}));return t(n)()}function ii(e,t,n){var i=arguments.length;if(i<2)throw new pe.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];n=r.pop();var o=j(r);return[e,o,n]}function ri(e,t,n,i,r){return Xe.resolve().then((function(){var o=Ve.transless||Ve,a=e._createTransaction(t,n,e._dbSchema,i),s={trans:a,transless:o};if(i)a.idbtrans=i.idbtrans;else try{a.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===he.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((function(){return ri(e,t,n,null,r)}))):Rt(i)}var l,u=Y(r);u&&mt();var c=Xe.follow((function(){if(l=r.call(a,a))if(u){var e=yt.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=ni(l))}),s);return(l&&"function"==typeof l.then?Xe.resolve(l).then((function(e){return a.active?e:Rt(new pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):c.then((function(){return l}))).then((function(e){return i&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),Rt(e)}))}))}function oi(e,t,n){for(var i=b(e)?e.slice():[e],r=0;r<n;++r)i.push(t);return i}var ai={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return g(g({},e),{table:function(t){var n=function(t){var n,i,r=t.query.index;return r.isVirtual?g(g({},t),{query:{index:r,range:(n=t.query.range,i=r.keyTail,{type:1===n.type?2:n.type,lower:oi(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:oi(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):t},i=e.table(t),r=i.schema,o={},a=[];function s(e,t,n){var i=On(e),r=o[i]=o[i]||[],l=null==e?0:"string"==typeof e?1:e.length,u=t>0,c=g(g({},n),{isVirtual:u,keyTail:t,keyLength:l,extractKey:Mn(e),unique:!u&&n.unique});(r.push(c),c.isPrimaryKey||a.push(c),l>1)&&s(2===l?e[0]:e.slice(0,l-1),t+1,n);return r.sort((function(e,t){return e.keyTail-t.keyTail})),c}var l=s(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[l];for(var u=0,c=r.indexes;u<c.length;u++){var d=c[u];s(d.keyPath,0,d)}var h=g(g({},i),{schema:g(g({},r),{primaryKey:l,indexes:a,getIndexByKeyPath:function(e){var t=o[On(e)];return t&&t[0]}}),count:function(e){return i.count(n(e))},query:function(e){return i.query(n(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,a=r.isVirtual,s=r.keyLength;return a?i.openCursor(n(t)).then((function(n){return n&&function(n){var i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(oi(i,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}},continuePrimaryKey:{value:function(t,i){n.continuePrimaryKey(oi(t,e.MAX_KEY,o),i)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}});return i}(n)})):i.openCursor(t)}});return h}})}};function si(e,t,n,i){return n=n||{},i=i||"",y(e).forEach((function(r){if(C(t,r)){var o=e[r],a=t[r];if("object"==typeof o&&"object"==typeof a&&o&&a){var s=J(o);s!==J(a)?n[i+r]=t[r]:"Object"===s?si(o,a,n,i+r+"."):o!==a&&(n[i+r]=t[r])}else o!==a&&(n[i+r]=t[r])}else n[i+r]=void 0})),y(t).forEach((function(r){C(e,r)||(n[i+r]=t[r])})),n}var li={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return g(g({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey,r=g(g({},n),{mutate:function(e){var r=function(e){var t=Ve.trans,r=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(i,e);if(!r)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?g(g({},e),{keys:r}):g({},e)).type&&(e.values=v([],e.values,!0)),e.keys&&(e.keys=v([],e.keys,!0)),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,r).then((function(o){var a=r.map((function(n,r){var a=o[r],s={onerror:null,onsuccess:null};if("delete"===e.type)l.fire.call(s,n,a,t);else if("add"===e.type||void 0===a){var d=u.fire.call(s,n,e.values[r],t);null==n&&null!=d&&(n=d,e.keys[r]=n,i.outbound||F(e.values[r],i.keyPath,n))}else{var h=si(a,e.values[r]),f=c.fire.call(s,h,n,a,t);if(f){var p=e.values[r];Object.keys(f).forEach((function(e){C(p,e)?p[e]=f[e]:F(p,e,f[e])}))}}return s}));return n.mutate(e).then((function(t){for(var n=t.failures,i=t.results,s=t.numFailures,l=t.lastResult,u=0;u<r.length;++u){var c=i?i[u]:r[u],d=a[u];null==c?d.onerror&&d.onerror(n[u]):d.onsuccess&&d.onsuccess("put"===e.type&&o[u]?e.values[u]:c)}return{failures:n,results:i,numFailures:s,lastResult:l}})).catch((function(e){return a.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))},o=function(e){return d(e.trans,e.range,1e4)},a=Ve.trans,s=a.table(t).hook,l=s.deleting,u=s.creating,c=s.updating;switch(e.type){case"add":if(u.fire===me)break;return a._promise("readwrite",(function(){return r(e)}),!0);case"put":if(u.fire===me&&c.fire===me)break;return a._promise("readwrite",(function(){return r(e)}),!0);case"delete":if(l.fire===me)break;return a._promise("readwrite",(function(){return r(e)}),!0);case"deleteRange":if(l.fire===me)break;return a._promise("readwrite",(function(){return o(e)}),!0)}return n.mutate(e);function d(e,t,o){return n.query({trans:e,values:!1,query:{index:i,range:t},limit:o}).then((function(n){var i=n.result;return r({type:"delete",keys:i,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):i.length<o?{failures:[],numFailures:0,lastResult:void 0}:d(e,g(g({},t),{lower:i[i.length-1],lowerOpen:!0}),o)}))}))}}});return r}})}};function ui(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var i=[],r=0,o=0;r<t.keys.length&&o<e.length;++r)0===an(t.keys[r],e[o])&&(i.push(n?V(t.values[r]):t.values[r]),++o);return i.length===e.length?i:null}catch(e){return null}}var ci,di={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return g(g({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=ui(e.keys,e.trans._cache,"clone"===e.cache);return t?Xe.resolve(t):n.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?V(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function hi(e){return!("from"in e)}var fi=function(e,t){if(!this){var n=new fi;return e&&"d"in e&&_(n,e),n}_(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function pi(e,t,n){var i=an(t,n);if(!isNaN(i)){if(i>0)throw RangeError();if(hi(e))return _(e,{from:t,to:n,d:1});var r=e.l,o=e.r;if(an(n,e.from)<0)return r?pi(r,t,n):e.l={from:t,to:n,d:1,l:null,r:null},mi(e);if(an(t,e.to)>0)return o?pi(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},mi(e);an(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),an(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var a=!e.r;r&&!e.l&&gi(e,r),o&&a&&gi(e,o)}}function gi(e,t){hi(t)||function e(t,n){var i=n.from,r=n.to,o=n.l,a=n.r;pi(t,i,r),o&&e(t,o),a&&e(t,a)}(e,t)}function vi(e){var t=hi(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&an(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||an(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function mi(e){var t,n,i=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),r=i>1?"r":i<-1?"l":"";if(r){var o="r"===r?"l":"r",a=g({},e),s=e[r];e.from=s.from,e.to=s.to,e[r]=s[r],a[r]=s[o],e[o]=a,a.d=yi(a)}e.d=yi(e)}function yi(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}x(fi.prototype,((ci={add:function(e){return gi(this,e),this},addKey:function(e){return pi(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return pi(t,e,e)})),this}})[X]=function(){return vi(this)},ci));var bi={stack:"dbcore",level:0,create:function(e){var t=e.schema.name,n=new fi(e.MIN_KEY,e.MAX_KEY);return g(g({},e),{table:function(i){var r=e.table(i),o=r.schema,a=o.primaryKey,s=a.extractKey,l=a.outbound,u=g(g({},r),{mutate:function(e){var a=e.trans,s=a.mutatedParts||(a.mutatedParts={}),l=function(e){var n="idb://"+t+"/"+i+"/"+e;return s[n]||(s[n]=new fi)},u=l(""),c=l(":dels"),d=e.type,h="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[],f=h[0],p=h[1],g=e.trans._cache;return r.mutate(e).then((function(e){if(b(f)){"delete"!==d&&(f=e.results),u.addKeys(f);var t=ui(f,g);t||"add"===d||c.addKeys(f),(t||p)&&function(e,t,n,i){var r=function(t){var r=e(t.name||"");function o(e){return null!=e?t.extractKey(e):null}var a=function(e){return t.multiEntry&&b(e)?e.forEach((function(e){return r.addKey(e)})):r.addKey(e)};(n||i).forEach((function(e,t){var r=n&&o(n[t]),s=i&&o(i[t]);0!==an(r,s)&&(null!=r&&a(r),null!=s&&a(s))}))};t.indexes.forEach(r)}(l,o,t,p)}else if(f){var i={from:f.lower,to:f.upper};c.add(i),u.add(i)}else u.add(n),c.add(n),o.indexes.forEach((function(e){return l(e.name).add(n)}));return e}))}}),c=function(t){var n,i,r=t.query,o=r.index,a=r.range;return[o,new fi(null!==(n=a.lower)&&void 0!==n?n:e.MIN_KEY,null!==(i=a.upper)&&void 0!==i?i:e.MAX_KEY)]},d={get:function(e){return[a,new fi(e.key)]},getMany:function(e){return[a,(new fi).addKeys(e.keys)]},count:c,query:c,openCursor:c};return y(d).forEach((function(e){u[e]=function(o){var a=Ve.subscr;if(a){var u=function(e){var n="idb://"+t+"/"+i+"/"+e;return a[n]||(a[n]=new fi)},c=u(""),h=u(":dels"),f=d[e](o),p=f[0],v=f[1];if(u(p.name||"").add(v),!p.isPrimaryKey){if("count"!==e){var m="query"===e&&l&&o.values&&r.query(g(g({},o),{values:!1}));return r[e].apply(this,arguments).then((function(t){if("query"===e){if(l&&o.values)return m.then((function(e){var n=e.result;return c.addKeys(n),t}));var n=o.values?t.result.map(s):t.result;o.values?c.addKeys(n):h.addKeys(n)}else if("openCursor"===e){var i=t,r=o.values;return i&&Object.create(i,{key:{get:function(){return h.addKey(i.primaryKey),i.key}},primaryKey:{get:function(){var e=i.primaryKey;return h.addKey(e),e}},value:{get:function(){return r&&c.addKey(i.primaryKey),i.value}}})}return t}))}h.add(n)}}return r[e].apply(this,arguments)}})),u}})}};var _i,wi,ki=function(){function e(t,n){var i=this;this._middlewares={},this.verno=0;var r=e.dependencies;this._options=n=g({addons:e.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:me,dbReadyPromise:null,cancelOpen:me,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};s.dbReadyPromise=new Xe((function(e){s.dbReadyResolve=e})),s.openCanceller=new Xe((function(e,t){s.cancelOpen=t})),this._state=s,this.name=t,this.on=Zt(this,"populate","blocked","versionchange","close",{ready:[Se,me]}),this.on.ready.subscribe=L(this.on.ready.subscribe,(function(t){return function(n,r){e.vip((function(){var e=i._state;if(e.openComplete)e.dbOpenError||Xe.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var o=i;r||t((function e(){o.on.ready.unsubscribe(n),o.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(a=this,$t(cn.prototype,(function(e,t){this.db=a;var n=qt,i=null;if(t)try{n=t()}catch(e){i=e}var r=e._ctx,o=r.table,s=o.hook.reading.fire;this._ctx={table:o,index:r.index,isPrimKey:!r.index||o.schema.primKey.keyPath&&r.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:r.or,valueMapper:s!==ye?s:null}}))),this.Table=function(e){return $t(Gt.prototype,(function(t,n,i){this.db=e,this._tx=i,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Zt(null,{creating:[we,me],reading:[be,ye],updating:[Ce,me],deleting:[ke,me]})}))}(this),this.Transaction=function(e){return $t(An.prototype,(function(t,n,i,r,o){var a=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=i,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=Zt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Xe((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),Rt(e)}))}))}(this),this.Version=function(e){return $t(Zn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return $t(wn.prototype,(function(t,n,i){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:i};var r=e._deps.indexedDB;if(!r)throw new pe.MissingAPI;this._cmp=this._ascending=r.cmp.bind(r),this._descending=function(e,t){return r.cmp(t,e)},this._max=function(e,t){return r.cmp(e,t)>0?e:t},this._min=function(e,t){return r.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+i.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+i.name+"'. Closing db now to resume the delete request."),i.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+i.name+"') was blocked"):console.warn("Upgrade '"+i.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=Ln(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new i.Transaction(e,t,n,i._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){i.on("blocked").fire(e),Ft.filter((function(e){return e.name===i.name&&e!==i&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(ai),this.use(li),this.use(bi),this.use(di),this.vip=Object.create(this,{_vip:{value:!0}}),o.forEach((function(e){return e(i)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new pe.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(Wn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Ve.letThrough||this._vip)?e():new Xe((function(e,n){if(t._state.openComplete)return n(new pe.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new pe.DatabaseClosed);t.open().catch(me)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,i=e.level,r=e.name;r&&this.unuse({stack:t,name:r});var o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:null==i?10:i,name:r}),o.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,i=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return i?e.create!==i:!!n&&e.name!==n}))),this},e.prototype.open=function(){return ti(this)},e.prototype._close=function(){var e=this._state,t=Ft.indexOf(this);if(t>=0&&Ft.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Xe((function(t){e.dbReadyResolve=t})),e.openCanceller=new Xe((function(t,n){e.cancelOpen=n}))},e.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new pe.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Xe((function(i,r){var o=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=ut((function(){Qn(e._deps,e.name),i()})),t.onerror=kn(r),t.onblocked=e._fireOnBlocked};if(t)throw new pe.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return y(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=ii.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var i=this,r=Ve.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){var t=e instanceof i.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===Ut)o=Ut;else{if("rw"!=e&&e!=Vt)throw new pe.InvalidArgument("Invalid transaction mode: "+e);o=Vt}if(r){if(r.mode===Ut&&o===Vt){if(!s)throw new pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach((function(e){if(r&&-1===r.storeNames.indexOf(e)){if(!s)throw new pe.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),s&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,(function(t,n){n(e)})):Rt(e)}var l=ri.bind(null,this,o,a,r,n);return r?r._promise(o,l,"lock"):Ve.trans?xt(Ve.transless,(function(){return i._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!C(this._allTables,e))throw new pe.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),Ci="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable",xi=((_i=function(e){this._subscribe=e}).prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},_i.prototype[Ci]=function(){return this},_i);function Si(e,t){return y(t).forEach((function(n){gi(e[n]||(e[n]=new fi),t[n])})),e}try{wi={indexedDB:m.indexedDB||m.mozIndexedDB||m.webkitIndexedDB||m.msIndexedDB,IDBKeyRange:m.IDBKeyRange||m.webkitIDBKeyRange}}catch(e){wi={indexedDB:null,IDBKeyRange:null}}var Ei=ki;function Di(e){var t=Ai;try{Ai=!0,Dn.storagemutated.fire(e)}finally{Ai=t}}x(Ei,g(g({},ve),{delete:function(e){return new Ei(e,{addons:[]}).delete()},exists:function(e){return new Ei(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return function(e){var t=e.indexedDB,n=e.IDBKeyRange;return Yn(t)?Promise.resolve(t.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==Wt}))})):$n(t,n).toCollection().primaryKeys()}(Ei.dependencies).then(e)}catch(e){return Rt(new pe.MissingAPI)}},defineClass:function(){return function(e){_(this,e)}},ignoreTransaction:function(e){return Ve.trans?xt(Ve.transless,e):e()},vip:ei,async:function(e){return function(){try{var t=ni(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Xe.resolve(t)}catch(e){return Rt(e)}}},spawn:function(e,t,n){try{var i=ni(e.apply(n,t||[]));return i&&"function"==typeof i.then?i:Xe.resolve(i)}catch(e){return Rt(e)}},currentTransaction:{get:function(){return Ve.trans||null}},waitFor:function(e,t){var n=Xe.resolve("function"==typeof e?Ei.ignoreTransaction(e):e).timeout(t||6e4);return Ve.trans?Ve.trans.waitFor(n):n},Promise:Xe,debug:{get:function(){return Q},set:function(e){ee(e,"dexie"===e?function(){return!0}:zt)}},derive:D,extend:_,props:x,override:L,Events:Zt,on:Dn,liveQuery:function(e){return new xi((function(t){var n=function(){return y(a).some((function(e){return o[e]&&function(e,t){var n=vi(t),i=n.next();if(i.done)return!1;for(var r=i.value,o=vi(e),a=o.next(r.from),s=a.value;!i.done&&!a.done;){if(an(s.from,r.to)<=0&&an(s.to,r.from)>=0)return!0;an(r.from,s.from)<0?r=(i=n.next(s.from)).value:s=(a=o.next(r.from)).value}return!1}(o[e],a[e])}))},i=Y(e),r=!1,o={},a={},s={get closed(){return r},unsubscribe:function(){r=!0,Dn.storagemutated.unsubscribe(c)}};t.start&&t.start(s);var l=!1,u=!1,c=function(e){Si(o,e),n()&&d()},d=function(){if(!l&&!r){o={};var h={},f=function(t){i&&mt();var n=function(){return vt(e,{subscr:t,trans:null})},r=Ve.trans?xt(Ve.transless,n):n();return i&&r.then(yt,yt),r}(h);u||(Dn(Sn,c),u=!0),l=!0,Promise.resolve(f).then((function(e){l=!1,r||(n()?d():(o={},a=h,t.next&&t.next(e)))}),(function(e){l=!1,t.error&&t.error(e),s.unsubscribe()}))}};return d(),s}))},extendObservabilitySet:Si,getByKeyPath:O,setByKeyPath:F,delByKeyPath:function(e,t){"string"==typeof t?F(e,t,void 0):"length"in t&&[].map.call(t,(function(t){F(e,t,void 0)}))},shallowClone:B,deepClone:V,getObjectDiff:si,cmp:an,asap:N,minKey:Nt,addons:[],connections:Ft,errnames:he,dependencies:wi,semVer:Lt,version:Lt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),Ei.maxKey=Ln(Ei.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Dn(Sn,(function(e){var t;Ai||(Bt?(t=document.createEvent("CustomEvent")).initCustomEvent(En,!0,!0,e):t=new CustomEvent(En,{detail:e}),Ai=!0,dispatchEvent(t),Ai=!1)})),addEventListener(En,(function(e){var t=e.detail;Ai||Di(t)})));var Ai=!1;if("undefined"!=typeof BroadcastChannel){var Ii=new BroadcastChannel(En);Dn(Sn,(function(e){Ai||Ii.postMessage(e)})),Ii.onmessage=function(e){e.data&&Di(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Dn(Sn,(function(e){try{Ai||("undefined"!=typeof localStorage&&localStorage.setItem(En,JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&v([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach((function(t){return t.postMessage({type:En,changedParts:e})})))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(function(e){if(e.key===En){var t=JSON.parse(e.newValue);t&&Di(t.changedParts)}}));var Ri=self.document&&navigator.serviceWorker;Ri&&Ri.addEventListener("message",(function(e){var t=e.data;t&&t.type===En&&Di(t.changedParts)}))}Xe.rejectionMapper=function(e,t){if(!e||e instanceof le||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ge[e.name])return e;var n=new ge[e.name](t||e.message,e);return"stack"in e&&E(n,"stack",{get:function(){return this.inner.stack}}),n},ee(Q,zt);var Ti=function(){"use strict";function e(){(0,u.default)(this,e),this.db=new ki("LiveEditor"),this.db.version(1).stores({data:"\n            &id,\n            timestamp,\n            meta"})}return(0,c.default)(e,[{key:"getAll",value:function(){return this.db.data.orderBy("timestamp").desc().toArray()}},{key:"maybeInit",value:function(e){var t=this;return s(n(l).mark((function i(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.length>8)){n.next=5;break}return n.next=3,t.exists(e);case 3:n.sent||t.put(e,{title:""});case 5:case"end":return n.stop()}}),i)})))()}},{key:"exists",value:function(e){var t=this;return s(n(l).mark((function i(){var r;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.db.data.get(e);case 2:return r=n.sent,n.abrupt("return",!!r);case 4:case"end":return n.stop()}}),i)})))()}},{key:"put",value:function(e,t){e.length>8&&this.db.data.put({id:e,timestamp:Date.now(),meta:t})}},{key:"drop",value:function(e){this.db.data.delete(e)}}]),e}(),Li=function(){"use strict";function e(t,n){(0,u.default)(this,e),(0,f.default)(this,"params",{}),this.index=new Ti,this.params=t}return(0,c.default)(e,[{key:"setTitle",value:function(e){document.title=e}},{key:"init",value:function(){}},{key:"getHtml",value:function(e){return s(n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&(e.innerHTML="");case 1:case"end":return t.stop()}}),t)})))()}}]),e}(),Mi=o("2iWfN"),Ni="card-container",Pi=new(n(Mi))((new Date).getTime());function Oi(e){var t,n,i,r,o,a,s,l,u,c;return' \n          <div class="col-12 p-2 col-sm-6 col-md-6 col-lg-4 col-xl-3" style="height: inherit">\n\n            <div class="card shadow bg-body rounded">\n            \n              <div class="card-body"style="margin-bottom: -26px">\n                <div class="d-flex justify-content-between">\n                  <h6 class="h6 text-truncate" style="margin-right: 10px">\n                    '.concat((null===(t=e.meta)||void 0===t?void 0:t.title)?null===(n=e.meta)||void 0===n?void 0:n.title:"Untitled",'\n                  </h6>\n                  <button type="button" class="btn btn-close btn-sm" aria-label="Delete" onclick="window.LIA.delete(\'').concat(e.id,'\')"></button>\n                </div>\n              </div>\n              <hr>\n              <div class="card-body pt-0" style="height: 12rem; overflow: auto">\n                <img src="').concat(null===(i=e.meta)||void 0===i?void 0:i.logo,'"\n                  style="width:100%"\n                ').concat((null===(r=e.meta)||void 0===r?void 0:r.logo)?"":'hidden="true"',' >\n              \n                <p class="mb-0"><small>').concat((null===(o=e.meta)||void 0===o||null===(a=o.macro)||void 0===a?void 0:a.comment)||"","</small></p>\n\n                <hr ").concat((null===(s=e.meta)||void 0===s||null===(l=s.macro)||void 0===l?void 0:l.comment)?"":'hidden="true"','>\n                <p class="mb-0 text-muted"><small>ID: ').concat(e.id,'</small></p>\n              </div>\n\n              <div class="row m-1">\n              <p class="col-9 card-text my-2 text-truncate"><small class="text-muted">[v ').concat(e.meta.version,"] - ").concat((u=e.timestamp,c=new Date(u),Pi.print(c)),'</small></p>\n                <div class="col gap-2 d-sm-flex justify-content-end p-1">\n                  <a href="./?/edit/').concat(e.id,'" class="btn btn-primary btn-sm">Edit</a>\n                </div>\n              </div>\n            </div>\n          </div>\n')}var Fi,Bi=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this,e)).setTitle("Index"),r}return(0,c.default)(i,[{key:"init",value:function(){var e=this;return s(n(l).mark((function t(){var i,r,o;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=document.getElementById(Ni))){t.next=6;break}return t.next=4,e.index.getAll();case 4:r=t.sent,i.innerHTML=r.map((function(e){return Oi(e)})).join("");case 6:o=e.index,window.LIA.delete=function(e){o.drop(e),window.indexedDB.deleteDatabase(e),window.location=window.location};case 8:case"end":return t.stop()}}),t)})))()}},{key:"body",value:function(){return'\n    <div\n      class="container mx-0 px-0 pb-5"\n      style="max-width: 100vw !important; height:100%; overflow: scroll"\n      >\n      <div\n        id="'.concat(Ni,'"\n        class="row row-cols-1 row-cols-md-3 row-cols-lg-4 g-8 m-5"\n        \n      >\n      </div>\n    </div>\n    ')}},{key:"navigation",value:function(){return'\n      <nav class="navbar navbar-expand-lg navbar-light bg-light">\n        <div class="container-fluid">\n          <a class="navbar-brand" href="./" data-link>\n            Lia[Index]\n          </a>\n\n          <a class="navbar-brand" href="./examples.html">\n            Lia[Examples]\n          </a>\n            \n          <a type="button" class="btn btn-primary" href="./?/edit">\n            New note\n          </a>\n        </div>\n      </nav>'}},{key:"getHtml",value:function(e){var t=this;return s(n(l).mark((function i(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.innerHTML=t.navigation()+t.body(),t.init();case 2:case"end":return n.stop()}}),i)})))()}}]),i}(Li),Hi=o("aPYZr"),ji=(u=o("4JAgF"),c=o("9HoHC"),f=o("8WkQI"),d=o("gNsil"),o("bw73z"));h=o("8rJSp"),l=o("1JCPQ");Fi=JSON.parse('{"responsiveVoiceKey":"blVZszUw","github":{"clientId":"Iv1.89702ef804cbd52e","clientSecret":"e43c7f3963acaa0e54f62e6a94d15d5eb0dee9d5"}}');Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),f=o("8WkQI");var zi=o("aPvD2"),Wi=o("aBvOn");d=o("gNsil"),f=o("8WkQI");function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){(0,f.default)(e,t,n[t])}))}return e}function Vi(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Ki=o("dVhHy"),qi=o("caN7I"),Ji=(h=o("8rJSp"),l=o("1JCPQ"),u=o("4JAgF"),c=o("9HoHC"),qi=o("caN7I"),Ki=o("dVhHy"),function(){return new Map}),Xi=function(e){var t=Ji();return e.forEach((function(e,n){t.set(n,e)})),t},Gi=function(e,t,n){var i=e.get(t);return void 0===i&&e.set(t,i=n()),i},Zi=function(){return new Set},$i=function(e){return e[e.length-1]},Yi=function(e,t){for(var n=0;n<t.length;n++)e.push(t[n])},Qi=Array.from,er=(Array.isArray,function(){"use strict";function e(){(0,u.default)(this,e),this._observers=Ji()}return(0,c.default)(e,[{key:"on",value:function(e,t){Gi(this._observers,e,Zi).add(t)}},{key:"once",value:function(e,t){var n=this,i=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];n.off(e,i),t.apply(void 0,(0,qi.default)(o))};this.on(e,i)}},{key:"off",value:function(e,t){var n=this._observers.get(e);void 0!==n&&(n.delete(t),0===n.size&&this._observers.delete(e))}},{key:"emit",value:function(e,t){return Qi((this._observers.get(e)||Ji()).values()).forEach((function(e){return e.apply(void 0,(0,qi.default)(t))}))}},{key:"destroy",value:function(){this._observers=Ji()}}]),e}()),tr=Math.floor,nr=(Math.ceil,Math.abs),ir=(Math.imul,Math.round,Math.log10),rr=(Math.log2,Math.log,Math.sqrt,function(e,t){return e<t?e:t}),or=function(e,t){return e>t?e:t},ar=(Number.isNaN,Math.pow,Math.sign,function(e){return 0!==e?e<0:1/e<0}),sr=(u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),p=o("dCPLc"),h=o("8rJSp"),String.fromCharCode),lr=(String.fromCodePoint,/^\s*/g),ur=/([A-Z])/g,cr=function(e,t){return function(e){return e.replace(lr,"")}(e.replace(ur,(function(e){return"".concat(t).concat(function(e){return e.toLowerCase()}(e))})))},dr="undefined"!=typeof TextEncoder?new TextEncoder:null,hr=dr?function(e){return dr.encode(e)}:function(e){for(var t=unescape(encodeURIComponent(e)),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.codePointAt(r);return i},fr="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});fr&&1===fr.decode(new Uint8Array).length&&(fr=null);Ki=o("dVhHy");var pr=function(e){return void 0===e?null:e},gr=(u=o("4JAgF"),c=o("9HoHC"),new(function(){"use strict";function e(){(0,u.default)(this,e),this.map=new Map}return(0,c.default)(e,[{key:"setItem",value:function(e,t){this.map.set(e,t)}},{key:"getItem",value:function(e){return this.map.get(e)}}]),e}())),vr=!0;try{"undefined"!=typeof localStorage&&(gr=localStorage,vr=!1)}catch(e){}var mr,yr,br,_r,wr=gr,kr=o("d2KzW"),Cr=void 0!==kr&&kr.release&&/node|io\.js/.test(kr.release.name),xr="undefined"!=typeof window&&!Cr,Sr=("undefined"!=typeof navigator&&/Mac/.test(navigator.platform),[]),Er=function(){if(void 0===mr)if(Cr){mr=Ji();for(var e=kr.argv,t=null,n=0;n<e.length;n++){var i=e[n];"-"===i[0]?(null!==t&&mr.set(t,""),t=i):null!==t?(mr.set(t,i),t=null):Sr.push(i)}null!==t&&mr.set(t,"")}else"object"==typeof location?(mr=Ji(),(location.search||"?").slice(1).split("&").forEach((function(e){if(0!==e.length){var t=(0,Ki.default)(e.split("="),2),n=t[0],i=t[1];mr.set("--".concat(cr(n,"-")),i),mr.set("-".concat(cr(n,"-")),i)}}))):mr=Ji();return mr},Dr=function(e){return pr(Cr?kr.env[e.toUpperCase()]:wr.getItem(e))},Ar=(yr="production",function(e){return Er().has(e)}("--"+yr)||Dr(yr),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),64),Ir=128,Rr=127,Tr=2147483647,Lr=Number.MAX_SAFE_INTEGER,Mr=(Number.MIN_SAFE_INTEGER,Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&tr(e)===e}),Nr=(Number.isNaN,Number.parseInt,function e(t){"use strict";(0,u.default)(this,e),this.arr=t,this.pos=0}),Pr=function(e){return new Nr(e)},Or=function(e){return e.pos!==e.arr.length},Fr=function(e,t){var n=Qr(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},Br=function(e){return Fr(e,jr(e))},Hr=function(e){return e.arr[e.pos++]},jr=function(e){for(var t=0,n=1;;){var i=e.arr[e.pos++];if(t+=(i&Rr)*n,n*=128,i<Ir)return t;if(t>Lr)throw new Error("Integer out of range!")}},zr=function(e){var t=e.arr[e.pos++],n=63&t,i=64,r=(t&Ar)>0?-1:1;if(0==(t&Ir))return r*n;for(;;){if(n+=((t=e.arr[e.pos++])&Rr)*i,i*=128,t<Ir)return r*n;if(n>Lr)throw new Error("Integer out of range!")}},Wr=fr?function(e){return fr.decode(Br(e))}:function(e){var t=jr(e);if(0===t)return"";var n=String.fromCodePoint(Hr(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(Hr(e));else for(;t>0;){var i=t<1e4?t:1e4,r=e.arr.subarray(e.pos,e.pos+i);e.pos+=i,n+=String.fromCodePoint.apply(null,r),t-=i}return decodeURIComponent(escape(n))},Ur=function(e,t){var n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Vr=[function(e){},function(e){return null},zr,function(e){return Ur(e,4).getFloat32(0,!1)},function(e){return Ur(e,8).getFloat64(0,!1)},function(e){return Ur(e,8).getBigInt64(0,!1)},function(e){return!1},function(e){return!0},Wr,function(e){for(var t=jr(e),n={},i=0;i<t;i++){n[Wr(e)]=Kr(e)}return n},function(e){for(var t=jr(e),n=[],i=0;i<t;i++)n.push(Kr(e));return n},Br],Kr=function(e){return Vr[127-Hr(e)](e)},qr=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,e)).reader=i,r.s=null,r.count=0,r}return(0,c.default)(n,[{key:"read",value:function(){return 0===this.count&&(this.s=this.reader(this),Or(this)?this.count=jr(this)+1:this.count=-1),this.count--,this.s}}]),n}(Nr),Jr=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this,e)).s=0,i.count=0,i}return(0,c.default)(n,[{key:"read",value:function(){if(0===this.count){this.s=zr(this);var e=ar(this.s);this.count=1,e&&(this.s=-this.s,this.count=jr(this)+2)}return this.count--,this.s}}]),n}(Nr),Xr=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this,e)).s=0,i.count=0,i.diff=0,i}return(0,c.default)(n,[{key:"read",value:function(){if(0===this.count){var e=zr(this),t=1&e;this.diff=tr(e/2),this.count=1,t&&(this.count=jr(this)+2)}return this.s+=this.diff,this.count--,this.s}}]),n}(Nr),Gr=function(){"use strict";function e(t){(0,u.default)(this,e),this.decoder=new Jr(t),this.str=Wr(this.decoder),this.spos=0}return(0,c.default)(e,[{key:"read",value:function(){var e=this.spos+this.decoder.read(),t=this.str.slice(this.spos,e);return this.spos=e,t}}]),e}(),Zr=o("dwjmx"),$r=Zr.Buffer,Yr=function(e){return new Uint8Array(e)},Qr=function(e,t,n){return new Uint8Array(e,t,n)},eo=xr?function(e){for(var t="",n=0;n<e.byteLength;n++)t+=sr(e[n]);return btoa(t)}:function(e){return $r.from(e.buffer,e.byteOffset,e.byteLength).toString("base64")},to=xr?function(e){for(var t=atob(e),n=Yr(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}:function(e){var t=$r.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},no=function e(){"use strict";(0,u.default)(this,e),this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]},io=function(){return new no},ro=function(e){for(var t=new Uint8Array(function(e){for(var t=e.cpos,n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t}(e)),n=0,i=0;i<e.bufs.length;i++){var r=e.bufs[i];t.set(r,n),n+=r.length}return t.set(Qr(e.cbuf.buffer,0,e.cpos),n),t},oo=function(e,t){var n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*n),e.cpos=0),e.cbuf[e.cpos++]=t},ao=oo,so=function(e,t){for(;t>Rr;)oo(e,Ir|Rr&t),t=tr(t/128);oo(e,Rr&t)},lo=function(e,t){var n=ar(t);for(n&&(t=-t),oo(e,(t>63?Ir:0)|(n?Ar:0)|63&t),t=tr(t/64);t>0;)oo(e,(t>Rr?Ir:0)|Rr&t),t=tr(t/128)},uo=new Uint8Array(3e4),co=uo.length/3,ho=dr?function(e,t){if(t.length<co){var n=dr.encodeInto(t,uo).written||0;so(e,n);for(var i=0;i<n;i++)oo(e,uo[i])}else po(e,hr(t))}:function(e,t){var n=unescape(encodeURIComponent(t)),i=n.length;so(e,i);for(var r=0;r<i;r++)oo(e,n.codePointAt(r))},fo=function(e,t){var n=e.cbuf.length,i=e.cpos,r=rr(n-i,t.length),o=t.length-r;e.cbuf.set(t.subarray(0,r),i),e.cpos+=r,o>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(or(2*n,o)),e.cbuf.set(t.subarray(r)),e.cpos=o)},po=function(e,t){so(e,t.byteLength),fo(e,t)},go=function(e,t){!function(e,t){var n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(Qr(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(2*or(n,t)),e.cpos=0)}(e,t);var n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},vo=new DataView(new ArrayBuffer(4)),mo=function(e,t){switch(void 0===t?"undefined":(0,p.default)(t)){case"string":oo(e,119),ho(e,t);break;case"number":Mr(t)&&nr(t)<=Tr?(oo(e,125),lo(e,t)):(a=t,vo.setFloat32(0,a),vo.getFloat32(0)===a?(oo(e,124),function(e,t){go(e,4).setFloat32(0,t,!1)}(e,t)):(oo(e,123),function(e,t){go(e,8).setFloat64(0,t,!1)}(e,t)));break;case"bigint":oo(e,122),function(e,t){go(e,8).setBigInt64(0,t,!1)}(e,t);break;case"object":if(null===t)oo(e,126);else if(t instanceof Array){oo(e,117),so(e,t.length);for(var n=0;n<t.length;n++)mo(e,t[n])}else if(t instanceof Uint8Array)oo(e,116),po(e,t);else{oo(e,118);var i=Object.keys(t);so(e,i.length);for(var r=0;r<i.length;r++){var o=i[r];ho(e,o),mo(e,t[o])}}break;case"boolean":oo(e,t?120:121);break;default:oo(e,127)}var a},yo=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).w=e,i.s=null,i.count=0,i}return(0,c.default)(n,[{key:"write",value:function(e){this.s===e?this.count++:(this.count>0&&so(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}]),n}(no),bo=function(e){e.count>0&&(lo(e.encoder,1===e.count?e.s:-e.s),e.count>1&&so(e.encoder,e.count-2))},_o=function(){"use strict";function e(){(0,u.default)(this,e),this.encoder=new no,this.s=0,this.count=0}return(0,c.default)(e,[{key:"write",value:function(e){this.s===e?this.count++:(bo(this),this.count=1,this.s=e)}},{key:"toUint8Array",value:function(){return bo(this),ro(this.encoder)}}]),e}(),wo=function(e){if(e.count>0){var t=2*e.diff+(1===e.count?0:1);lo(e.encoder,t),e.count>1&&so(e.encoder,e.count-2)}},ko=function(){"use strict";function e(){(0,u.default)(this,e),this.encoder=new no,this.s=0,this.count=0,this.diff=0}return(0,c.default)(e,[{key:"write",value:function(e){this.diff===e-this.s?(this.s=e,this.count++):(wo(this),this.count=1,this.diff=e-this.s,this.s=e)}},{key:"toUint8Array",value:function(){return wo(this),ro(this.encoder)}}]),e}(),Co=function(){"use strict";function e(){(0,u.default)(this,e),this.sarr=[],this.s="",this.lensE=new _o}return(0,c.default)(e,[{key:"write",value:function(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}},{key:"toUint8Array",value:function(){var e=new no;return this.sarr.push(this.s),this.s="",ho(e,this.sarr.join("")),fo(e,this.lensE.toUint8Array()),ro(e)}}]),e}(),xo=("undefined"==typeof window||void 0!==window.performance&&window.performance,"undefined"==typeof crypto?null:crypto),So=null!==xo?function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t);return xo.getRandomValues(n),t}:function(e){for(var t=new ArrayBuffer(e),n=new Uint8Array(t),i=0;i<e;i++)n[i]=Math.ceil(4294967295*Math.random()>>>0);return t},Eo=Math.random,Do=function(){return new Uint32Array(So(4))[0]},Ao=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(e){return(e^Do()&15>>e/4).toString(16)}))},Io=Date.now,Ro=function(e){return new Promise(e)},To=function(e){return Promise.resolve(e)},Lo=function(e){return new Error(e)},Mo=function(){throw Lo("Method unimplemented")},No=function(){throw Lo("Unexpected case")},Po=(qi=o("caN7I"),Object.assign,Object.keys),Oo=function(e){return Po(e).length},Fo=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Bo=function(e,t){return e===t||Oo(e)===Oo(t)&&function(e,t){for(var n in e)if(!t(e[n],n))return!1;return!0}(e,(function(e,n){return(void 0!==e||Fo(t,n))&&t[n]===e}))},Ho=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{for(var i;n<e.length;n++)(i=e)[n].apply(i,(0,qi.default)(t))}finally{n<e.length&&Ho(e,t,n+1)}},jo=function(){},zo=function(e,t){if(null==e||null==t)return function(e,t){return e===t}(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break;case Set:if(e.size!==t.size)return!1;var i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(!t.has(l))return!1}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}break;case Map:if(e.size!==t.size)return!1;var u=!0,c=!1,d=void 0;try{for(var h,f=e.keys()[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;if(!t.has(p)||!zo(e.get(p),t.get(p)))return!1}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}break;case Object:if(Oo(e)!==Oo(t))return!1;for(var g in e)if(!Fo(e,g)||!zo(e[g],t[g]))return!1;break;case Array:if(e.length!==t.length)return!1;for(var v=0;v<e.length;v++)if(!zo(e[v],t[v]))return!1;break;default:return!1}return!0},Wo=(u=o("4JAgF"),c=o("9HoHC"),f=o("8WkQI"),qi=o("caN7I"),p=o("dCPLc"),p=o("dCPLc"),Symbol),Uo=(u=o("4JAgF"),function e(t,n){"use strict";(0,u.default)(this,e),this.left=t,this.right=n}),Vo=function(e,t){return new Uo(e,t)},Ko="undefined"!=typeof document?document:{},qo=("undefined"!=typeof DOMParser&&new DOMParser,function(e){return function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=(0,Ki.default)(a.value,2),u=l[0],c=l[1];n.push(t(c,u))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,(function(e,t){return"".concat(t,":").concat(e,";")})).join("")}),Jo=(Ko.ELEMENT_NODE,Ko.TEXT_NODE,Ko.CDATA_SECTION_NODE,Ko.COMMENT_NODE,Ko.DOCUMENT_NODE,Ko.DOCUMENT_TYPE_NODE,Ko.DOCUMENT_FRAGMENT_NODE,JSON.stringify,JSON.parse,u=o("4JAgF"),c=o("9HoHC"),function(e){return function(){"use strict";function t(e){(0,u.default)(this,t),this._=e}return(0,c.default)(t,[{key:"destroy",value:function(){e(this._)}}]),t}()}),Xo=(Jo(clearTimeout),Jo(clearInterval),Jo((function(e){return"undefined"!=typeof requestAnimationFrame&&cancelAnimationFrame(e)})),Jo((function(e){return"undefined"!=typeof cancelIdleCallback&&cancelIdleCallback(e)})),Wo()),Go=Wo(),Zo=Wo(),$o=Wo(),Yo=Wo(),Qo=Wo(),ea=Wo(),ta=Wo(),na=Wo(),ia=(br={},(0,f.default)(br,Xo,Vo("font-weight","bold")),(0,f.default)(br,Go,Vo("font-weight","normal")),(0,f.default)(br,Zo,Vo("color","blue")),(0,f.default)(br,Yo,Vo("color","green")),(0,f.default)(br,$o,Vo("color","grey")),(0,f.default)(br,Qo,Vo("color","red")),(0,f.default)(br,ea,Vo("color","purple")),(0,f.default)(br,ta,Vo("color","orange")),(0,f.default)(br,na,Vo("color","black")),br),ra=(_r={},(0,f.default)(_r,Xo,"[1m"),(0,f.default)(_r,Go,"[2m"),(0,f.default)(_r,Zo,"[34m"),(0,f.default)(_r,Yo,"[32m"),(0,f.default)(_r,$o,"[37m"),(0,f.default)(_r,Qo,"[31m"),(0,f.default)(_r,ea,"[35m"),(0,f.default)(_r,ta,"[38;5;208m"),(0,f.default)(_r,na,"[0m"),_r),oa=Cr?function(e){for(var t=[],n=[],i=0;i<e.length;i++){var r=e[i],o=ra[r];if(void 0!==o)t.push(o);else{if(r.constructor!==String&&r.constructor!==Number)break;t.push(r)}}for(i>0&&(t.push("[0m"),n.push(t.join("")));i<e.length;i++){var a=e[i];a instanceof Symbol||n.push(a)}return n}:function(e){for(var t=[],n=[],i=Ji(),r=[],o=0;o<e.length;o++){var a=e[o],s=ia[a];if(void 0!==s)i.set(s.left,s.right);else{if(a.constructor!==String&&a.constructor!==Number)break;var l=qo(i);o>0||l.length>0?(t.push("%c"+a),n.push(l)):t.push(a)}}for(o>0&&(r=n).unshift(t.join(""));o<e.length;o++){var u=e[o];u instanceof Symbol||r.push(u)}return r},aa=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i;(i=console).log.apply(i,(0,qi.default)(oa(t))),sa.forEach((function(e){return e.print(t)}))},sa=new Set,la=[Yo,ea,ta,Zo],ua=0,ca=Io(),da=(f=o("8WkQI"),function(e){var t;return t={},(0,f.default)(t,Symbol.iterator,(function(){return this})),(0,f.default)(t,"next",e),t}),ha=function(e,t){return da((function(){var n=e.next(),i=n.done,r=n.value;return{done:i,value:i?void 0:t(r)}}))},fa=n(l).mark(Ts),pa=function e(t,n){"use strict";(0,u.default)(this,e),this.clock=t,this.len=n},ga=function e(){"use strict";(0,u.default)(this,e),this.clients=new Map},va=function(e,t,n){return t.clients.forEach((function(t,i){for(var r=e.doc.store.clients.get(i),o=0;o<t.length;o++){var a=t[o];ks(e,r,a.clock,a.len,n)}}))},ma=function(e,t){var n=e.clients.get(t.client);return void 0!==n&&null!==function(e,t){for(var n=0,i=e.length-1;n<=i;){var r=tr((n+i)/2),o=e[r],a=o.clock;if(a<=t){if(t<a+o.len)return r;n=r+1}else i=r-1}return null}(n,t.clock)},ya=function(e){e.clients.forEach((function(e){var t,n;for(e.sort((function(e,t){return e.clock-t.clock})),t=1,n=1;t<e.length;t++){var i=e[n-1],r=e[t];i.clock+i.len>=r.clock?i.len=or(i.len,r.clock+r.len-i.clock):(n<t&&(e[n]=r),n++)}e.length=n}))},ba=function(e){for(var t=function(t){e[t].clients.forEach((function(i,r){if(!n.clients.has(r)){for(var o=i.slice(),a=t+1;a<e.length;a++)Yi(o,e[a].clients.get(r)||[]);n.clients.set(r,o)}}))},n=new ga,i=0;i<e.length;i++)t(i);return ya(n),n},_a=function(e,t,n,i){Gi(e.clients,t,(function(){return[]})).push(new pa(n,i))},wa=function(){return new ga},ka=function(e){var t=wa();return e.clients.forEach((function(e,n){for(var i=[],r=0;r<e.length;r++){var o=e[r];if(o.deleted){var a=o.id.clock,s=o.length;if(r+1<e.length)for(var l=e[r+1];r+1<e.length&&l.deleted;l=e[1+ ++r])s+=l.length;i.push(new pa(a,s))}}i.length>0&&t.clients.set(n,i)})),t},Ca=function(e,t){so(e.restEncoder,t.clients.size),t.clients.forEach((function(t,n){e.resetDsCurVal(),so(e.restEncoder,n);var i=t.length;so(e.restEncoder,i);for(var r=0;r<i;r++){var o=t[r];e.writeDsClock(o.clock),e.writeDsLen(o.len)}}))},xa=function(e){for(var t=new ga,n=jr(e.restDecoder),i=0;i<n;i++){e.resetDsCurVal();var r=jr(e.restDecoder),o=jr(e.restDecoder);if(o>0)for(var a=Gi(t.clients,r,(function(){return[]})),s=0;s<o;s++)a.push(new pa(e.readDsClock(),e.readDsLen()))}return t},Sa=function(e,t,n){for(var i=new ga,r=jr(e.restDecoder),o=0;o<r;o++){e.resetDsCurVal();for(var a=jr(e.restDecoder),s=jr(e.restDecoder),l=n.clients.get(a)||[],u=gs(n,a),c=0;c<s;c++){var d=e.readDsClock(),h=d+e.readDsLen();if(d<u){u<h&&_a(i,a,u,h-u);var f=ms(l,d),p=l[f];for(!p.deleted&&p.id.clock<d&&(l.splice(f+1,0,ru(t,p,d-p.id.clock)),f++);f<l.length&&(p=l[f++]).id.clock<h;)p.deleted||(h<p.id.clock+p.length&&l.splice(f,0,ru(t,p,h-p.id.clock)),p.delete(t))}else _a(i,a,d,h-d)}}if(i.clients.size>0){var g=new Pa;return so(g.restEncoder,0),Ca(g,i),g.toUint8Array()}return null},Ea=Do,Da=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.guid,o=void 0===r?Ao():r,a=i.collectionid,s=void 0===a?null:a,l=i.gc,c=void 0===l||l,d=i.gcFilter,h=void 0===d?function(){return!0}:d,f=i.meta,p=void 0===f?null:f,g=i.autoLoad,v=void 0!==g&&g,m=i.shouldLoad,y=void 0===m||m;return(0,u.default)(this,n),(e=t.call(this)).gc=c,e.gcFilter=h,e.clientID=Ea(),e.guid=o,e.collectionid=s,e.share=new Map,e.store=new fs,e._transaction=null,e._transactionCleanups=[],e.subdocs=new Set,e._item=null,e.shouldLoad=y,e.autoLoad=v,e.meta=p,e.isLoaded=!1,e.whenLoaded=Ro((function(t){e.on("load",(function(){e.isLoaded=!0,t((0,Hi.default)(e))}))})),e}return(0,c.default)(n,[{key:"load",value:function(){var e=this,t=this._item;null===t||this.shouldLoad||Rs(t.parent.doc,(function(t){t.subdocsLoaded.add(e)}),null,!0),this.shouldLoad=!0}},{key:"getSubdocs",value:function(){return this.subdocs}},{key:"getSubdocGuids",value:function(){return new Set(Array.from(this.subdocs).map((function(e){return e.guid})))}},{key:"transact",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Rs(this,e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$s,n=this,i=Gi(this.share,e,(function(){var e=new t;return e._integrate(n,null),e})),r=i.constructor;if(t!==$s&&r!==t){if(r===$s){var o=new t;o._map=i._map,i._map.forEach((function(e){for(;null!==e;e=e.left)e.parent=o})),o._start=i._start;for(var a=o._start;null!==a;a=a.right)a.parent=o;return o._length=i._length,this.share.set(e,o),o._integrate(this,null),o}throw new Error("Type with the name ".concat(e," has already been defined with a different constructor"))}return i}},{key:"getArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,pl)}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Rl)}},{key:"getMap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,vl)}},{key:"getXmlFragment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.get(e,Ll)}},{key:"toJSON",value:function(){var e={};return this.share.forEach((function(t,n){e[n]=t.toJSON()})),e}},{key:"destroy",value:function(){var e=this;Qi(this.subdocs).forEach((function(e){return e.destroy()}));var t=this._item;if(null!==t){this._item=null;var i=t.content;i.doc=new n(Vi(Ui({guid:this.guid},i.opts),{shouldLoad:!1})),i.doc._item=t,Rs(t.parent.doc,(function(n){var r=i.doc;t.deleted||n.subdocsAdded.add(r),n.subdocsRemoved.add(e)}),null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),(0,zi.default)((0,Wi.default)(n.prototype),"destroy",this).call(this)}},{key:"on",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"on",this).call(this,e,t)}},{key:"off",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"off",this).call(this,e,t)}}]),n}(er),Aa=function(){"use strict";function e(t){(0,u.default)(this,e),this.restDecoder=t}return(0,c.default)(e,[{key:"resetDsCurVal",value:function(){}},{key:"readDsClock",value:function(){return jr(this.restDecoder)}},{key:"readDsLen",value:function(){return jr(this.restDecoder)}}]),e}(),Ia=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"readLeftID",value:function(){return ns(jr(this.restDecoder),jr(this.restDecoder))}},{key:"readRightID",value:function(){return ns(jr(this.restDecoder),jr(this.restDecoder))}},{key:"readClient",value:function(){return jr(this.restDecoder)}},{key:"readInfo",value:function(){return Hr(this.restDecoder)}},{key:"readString",value:function(){return Wr(this.restDecoder)}},{key:"readParentInfo",value:function(){return 1===jr(this.restDecoder)}},{key:"readTypeRef",value:function(){return jr(this.restDecoder)}},{key:"readLen",value:function(){return jr(this.restDecoder)}},{key:"readAny",value:function(){return Kr(this.restDecoder)}},{key:"readBuf",value:function(){return e=Br(this.restDecoder),(t=Yr(e.byteLength)).set(e),t;var e,t}},{key:"readJSON",value:function(){return JSON.parse(Wr(this.restDecoder))}},{key:"readKey",value:function(){return Wr(this.restDecoder)}}]),n}(Aa),Ra=function(){"use strict";function e(t){(0,u.default)(this,e),this.dsCurrVal=0,this.restDecoder=t}return(0,c.default)(e,[{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"readDsClock",value:function(){return this.dsCurrVal+=jr(this.restDecoder),this.dsCurrVal}},{key:"readDsLen",value:function(){var e=jr(this.restDecoder)+1;return this.dsCurrVal+=e,e}}]),e}(),Ta=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this,e)).keys=[],jr(e),i.keyClockDecoder=new Xr(Br(e)),i.clientDecoder=new Jr(Br(e)),i.leftClockDecoder=new Xr(Br(e)),i.rightClockDecoder=new Xr(Br(e)),i.infoDecoder=new qr(Br(e),Hr),i.stringDecoder=new Gr(Br(e)),i.parentInfoDecoder=new qr(Br(e),Hr),i.typeRefDecoder=new Jr(Br(e)),i.lenDecoder=new Jr(Br(e)),i}return(0,c.default)(n,[{key:"readLeftID",value:function(){return new es(this.clientDecoder.read(),this.leftClockDecoder.read())}},{key:"readRightID",value:function(){return new es(this.clientDecoder.read(),this.rightClockDecoder.read())}},{key:"readClient",value:function(){return this.clientDecoder.read()}},{key:"readInfo",value:function(){return this.infoDecoder.read()}},{key:"readString",value:function(){return this.stringDecoder.read()}},{key:"readParentInfo",value:function(){return 1===this.parentInfoDecoder.read()}},{key:"readTypeRef",value:function(){return this.typeRefDecoder.read()}},{key:"readLen",value:function(){return this.lenDecoder.read()}},{key:"readAny",value:function(){return Kr(this.restDecoder)}},{key:"readBuf",value:function(){return Br(this.restDecoder)}},{key:"readJSON",value:function(){return Kr(this.restDecoder)}},{key:"readKey",value:function(){var e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];var t=this.stringDecoder.read();return this.keys.push(t),t}}]),n}(Ra),La=function(){"use strict";function e(){(0,u.default)(this,e),this.restEncoder=io()}return(0,c.default)(e,[{key:"toUint8Array",value:function(){return ro(this.restEncoder)}},{key:"resetDsCurVal",value:function(){}},{key:"writeDsClock",value:function(e){so(this.restEncoder,e)}},{key:"writeDsLen",value:function(e){so(this.restEncoder,e)}}]),e}(),Ma=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"writeLeftID",value:function(e){so(this.restEncoder,e.client),so(this.restEncoder,e.clock)}},{key:"writeRightID",value:function(e){so(this.restEncoder,e.client),so(this.restEncoder,e.clock)}},{key:"writeClient",value:function(e){so(this.restEncoder,e)}},{key:"writeInfo",value:function(e){ao(this.restEncoder,e)}},{key:"writeString",value:function(e){ho(this.restEncoder,e)}},{key:"writeParentInfo",value:function(e){so(this.restEncoder,e?1:0)}},{key:"writeTypeRef",value:function(e){so(this.restEncoder,e)}},{key:"writeLen",value:function(e){so(this.restEncoder,e)}},{key:"writeAny",value:function(e){mo(this.restEncoder,e)}},{key:"writeBuf",value:function(e){po(this.restEncoder,e)}},{key:"writeJSON",value:function(e){ho(this.restEncoder,JSON.stringify(e))}},{key:"writeKey",value:function(e){ho(this.restEncoder,e)}}]),n}(La),Na=function(){"use strict";function e(){(0,u.default)(this,e),this.restEncoder=io(),this.dsCurrVal=0}return(0,c.default)(e,[{key:"toUint8Array",value:function(){return ro(this.restEncoder)}},{key:"resetDsCurVal",value:function(){this.dsCurrVal=0}},{key:"writeDsClock",value:function(e){var t=e-this.dsCurrVal;this.dsCurrVal=e,so(this.restEncoder,t)}},{key:"writeDsLen",value:function(e){0===e&&No(),so(this.restEncoder,e-1),this.dsCurrVal+=e}}]),e}(),Pa=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this)).keyMap=new Map,e.keyClock=0,e.keyClockEncoder=new ko,e.clientEncoder=new _o,e.leftClockEncoder=new ko,e.rightClockEncoder=new ko,e.infoEncoder=new yo(ao),e.stringEncoder=new Co,e.parentInfoEncoder=new yo(ao),e.typeRefEncoder=new _o,e.lenEncoder=new _o,e}return(0,c.default)(n,[{key:"toUint8Array",value:function(){var e=io();return so(e,0),po(e,this.keyClockEncoder.toUint8Array()),po(e,this.clientEncoder.toUint8Array()),po(e,this.leftClockEncoder.toUint8Array()),po(e,this.rightClockEncoder.toUint8Array()),po(e,ro(this.infoEncoder)),po(e,this.stringEncoder.toUint8Array()),po(e,ro(this.parentInfoEncoder)),po(e,this.typeRefEncoder.toUint8Array()),po(e,this.lenEncoder.toUint8Array()),fo(e,ro(this.restEncoder)),ro(e)}},{key:"writeLeftID",value:function(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}},{key:"writeRightID",value:function(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}},{key:"writeClient",value:function(e){this.clientEncoder.write(e)}},{key:"writeInfo",value:function(e){this.infoEncoder.write(e)}},{key:"writeString",value:function(e){this.stringEncoder.write(e)}},{key:"writeParentInfo",value:function(e){this.parentInfoEncoder.write(e?1:0)}},{key:"writeTypeRef",value:function(e){this.typeRefEncoder.write(e)}},{key:"writeLen",value:function(e){this.lenEncoder.write(e)}},{key:"writeAny",value:function(e){mo(this.restEncoder,e)}},{key:"writeBuf",value:function(e){po(this.restEncoder,e)}},{key:"writeJSON",value:function(e){mo(this.restEncoder,e)}},{key:"writeKey",value:function(e){var t=this.keyMap.get(e);void 0===t?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(t)}}]),n}(Na),Oa=function(e,t,n){var i=new Map;n.forEach((function(e,n){gs(t,n)>e&&i.set(n,e)})),ps(t).forEach((function(e,t){n.has(t)||i.set(t,0)})),so(e.restEncoder,i.size),Array.from(i.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(n){var i=(0,Ki.default)(n,2),r=i[0],o=i[1];!function(e,t,n,i){i=or(i,t[0].id.clock);var r=ms(t,i);so(e.restEncoder,t.length-r),e.writeClient(n),so(e.restEncoder,i);var o=t[r];o.write(e,i-o.id.clock);for(var a=r+1;a<t.length;a++)t[a].write(e,0)}(e,t.clients.get(r),r,o)}))},Fa=function(e,t){for(var n=Ji(),i=jr(e.restDecoder),r=0;r<i;r++){var o=jr(e.restDecoder),a=new Array(o),s=e.readClient(),l=jr(e.restDecoder);n.set(s,{i:0,refs:a});for(var u=0;u<o;u++){var c=e.readInfo();switch(31&c){case 0:var d=e.readLen();a[u]=new Bl(ns(s,l),d),l+=d;break;case 10:var h=jr(e.restDecoder);a[u]=new lu(ns(s,l),h),l+=h;break;default:var f=0==(192&c),p=new ou(ns(s,l),null,(c&Ir)===Ir?e.readLeftID():null,null,(c&Ar)===Ar?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&32==(32&c)?e.readString():null,au(e,c));a[u]=p,l+=p.length}}}return n},Ba=function(e,t,n){var i=[],r=Array.from(n.keys()).sort((function(e,t){return e-t}));if(0===r.length)return null;var o=function(){if(0===r.length)return null;for(var e=n.get(r[r.length-1]);e.refs.length===e.i;){if(r.pop(),!(r.length>0))return null;e=n.get(r[r.length-1])}return e},a=o();if(null===a&&0===i.length)return null;for(var s=new fs,l=new Map,u=function(e,t){var n=l.get(e);(null==n||n>t)&&l.set(e,t)},c=a.refs[a.i++],d=new Map,h=function(){var e=!0,t=!1,o=void 0;try{for(var a,l=function(e,t){var i=t.value,o=i.id.client,a=n.get(o);a?(a.i--,s.clients.set(o,a.refs.slice(a.i)),n.delete(o),a.i=0,a.refs=[]):s.clients.set(o,[i]),r=r.filter((function(e){return e!==o}))},u=i[Symbol.iterator]();!(e=(a=u.next()).done);e=!0)l(0,a)}catch(e){t=!0,o=e}finally{try{e||null==u.return||u.return()}finally{if(t)throw o}}i.length=0};;){if(c.constructor!==lu){var f=Gi(d,c.id.client,(function(){return gs(t,c.id.client)}))-c.id.clock;if(f<0)i.push(c),u(c.id.client,c.id.clock-1),h();else{var p=c.getMissing(e,t);if(null!==p){i.push(c);var g=n.get(p)||{refs:[],i:0};if(g.refs.length!==g.i){c=g.refs[g.i++];continue}u(p,gs(t,p)),h()}else(0===f||f<c.length)&&(c.integrate(e,f),d.set(c.id.client,c.id.clock+c.length))}}if(i.length>0)c=i.pop();else if(null!==a&&a.i<a.refs.length)c=a.refs[a.i++];else{if(null===(a=o()))break;c=a.refs[a.i++]}}if(s.clients.size>0){var v=new Pa;return Oa(v,s,new Map),so(v.restEncoder,0),{missing:l,update:v.toUint8Array()}}return null},Ha=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ta(e);return Rs(t,(function(e){e.local=!1;var t=!1,n=e.doc,r=n.store,o=Fa(i,n),a=Ba(e,r,o),s=r.pendingStructs;if(s){var l=!0,u=!1,c=void 0;try{for(var d,h=s.missing[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=(0,Ki.default)(d.value,2),p=f[0];if(f[1]<gs(r,p)){t=!0;break}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}if(a){var g=!0,v=!1,m=void 0;try{for(var y,b=a.missing[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var _=(0,Ki.default)(y.value,2),w=_[0],k=_[1],C=s.missing.get(w);(null==C||C>k)&&s.missing.set(w,k)}}catch(e){v=!0,m=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw m}}s.update=Os([s.update,a.update])}}else r.pendingStructs=a;var x=Sa(i,e,r);if(r.pendingDs){var S=new Ta(Pr(r.pendingDs));jr(S.restDecoder);var E=Sa(S,e,r);r.pendingDs=x&&E?Os([x,E]):x||E}else r.pendingDs=x;if(t){var D=r.pendingStructs.update;r.pendingStructs=null,ja(e.doc,D)}}),n,!1)},ja=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ta,r=Pr(t);Ha(r,e,n,new i(r))},za=function(e,t,n){return ja(e,t,n,Ia)},Wa=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;Oa(e,t.store,n),Ca(e,ka(t.store))},Ua=function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array([0]),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Pa,i=Ka(t);Wa(n,e,i);var r=[n.toUint8Array()];if(e.store.pendingDs&&r.push(e.store.pendingDs),e.store.pendingStructs&&r.push(Fs(e.store.pendingStructs.update,t)),r.length>1){if(n.constructor===Ma)return Ns(r.map((function(e,t){return 0===t?e:Ws(e)})));if(n.constructor===Pa)return Os(r)}return r[0]}(e,t,new Ma)},Va=function(e){for(var t=new Map,n=jr(e.restDecoder),i=0;i<n;i++){var r=jr(e.restDecoder),o=jr(e.restDecoder);t.set(r,o)}return t},Ka=function(e){return Va(new Aa(Pr(e)))},qa=function(e,t){return so(e.restEncoder,t.size),Array.from(t.entries()).sort((function(e,t){return t[0]-e[0]})).forEach((function(t){var n=(0,Ki.default)(t,2),i=n[0],r=n[1];so(e.restEncoder,i),so(e.restEncoder,r)})),e},Ja=function(e,t){return qa(e,ps(t.store))},Xa=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Na;return e instanceof Map?qa(t,e):Ja(t,e),t.toUint8Array()}(e,new La)},Ga=function e(){"use strict";(0,u.default)(this,e),this.l=[]},Za=function(){return new Ga},$a=function(e,t){return e.l.push(t)},Ya=function(e,t){var n=e.l,i=n.length;e.l=n.filter((function(e){return t!==e})),i===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Qa=function(e,t,n){return Ho(e.l,[t,n])},es=function e(t,n){"use strict";(0,u.default)(this,e),this.client=t,this.clock=n},ts=function(e,t){return e===t||null!==e&&null!==t&&e.client===t.client&&e.clock===t.clock},ns=function(e,t){return new es(e,t)},is=function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e.doc.share.entries()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=(0,Ki.default)(r.value,2),s=a[0];if(a[1]===e)return s}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}throw No()},rs=function e(t,n,i){"use strict";var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(0,u.default)(this,e),this.type=t,this.tname=n,this.item=i,this.assoc=r},os=function e(t,n){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,u.default)(this,e),this.type=t,this.index=n,this.assoc=i},as=function(e,t,n){var i=null,r=null;return null===e._item?r=is(e):i=ns(e._item.id.client,e._item.id.clock),new rs(i,r,t,n)},ss=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e._start;if(n<0){if(0===t)return as(e,null,n);t--}for(;null!==i;){if(!i.deleted&&i.countable){if(i.length>t)return as(e,ns(i.id.client,i.id.clock+t),n);t-=i.length}if(null===i.right&&n<0)return as(e,i.lastId,n);i=i.right}return as(e,null,n)},ls=function(e,t){var n=t.store,i=e.item,r=e.type,o=e.tname,a=e.assoc,s=null,l=0;if(null!==i){if(gs(n,i.client)<=i.clock)return null;var u=iu(n,i),c=u.item;if(!(c instanceof ou))return null;if(null===(s=c.parent)._item||!s._item.deleted){l=c.deleted||!c.countable?0:u.diff+(a>=0?0:1);for(var d=c.left;null!==d;)!d.deleted&&d.countable&&(l+=d.length),d=d.left}}else{if(null!==o)s=t.get(o);else{if(null===r)throw No();if(gs(n,r.client)<=r.clock)return null;var h=iu(n,r).item;if(!(h instanceof ou&&h.content instanceof nu))return null;s=h.content.type}l=a>=0?s._length:0}return function(e,t){return new os(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}(s,l,e.assoc)},us=function e(t,n){"use strict";(0,u.default)(this,e),this.ds=t,this.sv=n},cs=function(e,t){return new us(e,t)},ds=(cs(wa(),new Map),function(e,t){return void 0===t?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!ma(t.ds,e.id)}),hs=function(e,t){var n=Gi(e.meta,hs,Zi),i=e.doc.store;n.has(t)||(t.sv.forEach((function(t,n){t<gs(i,n)&&_s(e,ns(n,t))})),va(e,t.ds,(function(e){})),n.add(t))},fs=function e(){"use strict";(0,u.default)(this,e),this.clients=new Map,this.pendingStructs=null,this.pendingDs=null},ps=function(e){var t=new Map;return e.clients.forEach((function(e,n){var i=e[e.length-1];t.set(n,i.id.clock+i.length)})),t},gs=function(e,t){var n=e.clients.get(t);if(void 0===n)return 0;var i=n[n.length-1];return i.id.clock+i.length},vs=function(e,t){var n=e.clients.get(t.id.client);if(void 0===n)n=[],e.clients.set(t.id.client,n);else{var i=n[n.length-1];if(i.id.clock+i.length!==t.id.clock)throw No()}n.push(t)},ms=function(e,t){var n=0,i=e.length-1,r=e[i],o=r.id.clock;if(o===t)return i;for(var a=tr(t/(o+r.length-1)*i);n<=i;){if((o=(r=e[a]).id.clock)<=t){if(t<o+r.length)return a;n=a+1}else i=a-1;a=tr((n+i)/2)}throw No()},ys=function(e,t){var n=e.clients.get(t.client);return n[ms(n,t.clock)]},bs=function(e,t,n){var i=ms(t,n),r=t[i];return r.id.clock<n&&r instanceof ou?(t.splice(i+1,0,ru(e,r,n-r.id.clock)),i+1):i},_s=function(e,t){var n=e.doc.store.clients.get(t.client);return n[bs(e,n,t.clock)]},ws=function(e,t,n){var i=t.clients.get(n.client),r=ms(i,n.clock),o=i[r];return n.clock!==o.id.clock+o.length-1&&o.constructor!==Bl&&i.splice(r+1,0,ru(e,o,n.clock-o.id.clock+1)),o},ks=function(e,t,n,i,r){if(0!==i){var o,a=n+i,s=bs(e,t,n);do{a<(o=t[s++]).id.clock+o.length&&bs(e,t,a),r(o)}while(s<t.length&&t[s].id.clock<a)}},Cs=function e(t,n,i){"use strict";(0,u.default)(this,e),this.doc=t,this.deleteSet=new ga,this.beforeState=ps(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=i,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set},xs=function(e,t){return!(0===t.deleteSet.clients.size&&!function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=(0,Ki.default)(o.value,2),l=s[0];if(t(s[1],l))return!0}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return!1}(t.afterState,(function(e,n){return t.beforeState.get(n)!==e})))&&(ya(t.deleteSet),function(e,t){Oa(e,t.doc.store,t.beforeState)}(e,t),Ca(e,t.deleteSet),!0)},Ss=function(e,t,n){var i=t._item;(null===i||i.id.clock<(e.beforeState.get(i.id.client)||0)&&!i.deleted)&&Gi(e.changed,t,Zi).add(n)},Es=function(e,t){var n=e[t-1],i=e[t];n.deleted===i.deleted&&n.constructor===i.constructor&&n.mergeWith(i)&&(e.splice(t,1),i instanceof ou&&null!==i.parentSub&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,n))},Ds=function(e,t,n){var i=!0,r=!1,o=void 0;try{for(var a,s=e.clients.entries()[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)for(var l=(0,Ki.default)(a.value,2),u=l[0],c=l[1],d=t.clients.get(u),h=c.length-1;h>=0;h--)for(var f=c[h],p=f.clock+f.len,g=ms(d,f.clock),v=d[g];g<d.length&&v.id.clock<p;v=d[++g]){var m=d[g];if(f.clock+f.len<=m.id.clock)break;m instanceof ou&&m.deleted&&!m.keep&&n(m)&&m.gc(t,!1)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}},As=function(e,t){e.clients.forEach((function(e,n){for(var i=t.clients.get(n),r=e.length-1;r>=0;r--)for(var o=e[r],a=rr(i.length-1,1+ms(i,o.clock+o.len-1)),s=i[a];a>0&&s.id.clock>=o.clock;s=i[--a])Es(i,a)}))},Is=function(e,t){if(t<e.length){var n=e[t],i=n.doc,r=i.store,o=n.deleteSet,a=n._mergeStructs;try{ya(o),n.afterState=ps(n.doc.store),i._transaction=null,i.emit("beforeObserverCalls",[n,i]);var s=[];n.changed.forEach((function(e,t){return s.push((function(){null!==t._item&&t._item.deleted||t._callObserver(n,e)}))})),s.push((function(){n.changedParentTypes.forEach((function(e,t){return s.push((function(){null!==t._item&&t._item.deleted||((e=e.filter((function(e){return null===e.target._item||!e.target._item.deleted}))).forEach((function(e){e.currentTarget=t})),e.sort((function(e,t){return e.path.length-t.path.length})),Qa(t._dEH,e,n))}))})),s.push((function(){return i.emit("afterTransaction",[n,i])}))})),Ho(s,[])}finally{i.gc&&Ds(o,r,i.gcFilter),As(o,r),n.afterState.forEach((function(e,t){var i=n.beforeState.get(t)||0;if(i!==e)for(var o=r.clients.get(t),a=or(ms(o,i),1),s=o.length-1;s>=a;s--)Es(o,s)}));for(var l=0;l<a.length;l++){var u=a[l].id,c=u.client,d=u.clock,h=r.clients.get(c),f=ms(h,d);f+1<h.length&&Es(h,f+1),f>0&&Es(h,f)}if(n.local||n.afterState.get(i.clientID)===n.beforeState.get(i.clientID)||(aa(ta,Xo,"[yjs] ",Go,Qo,"Changed the client-id because another client seems to be using it."),i.clientID=Ea()),i.emit("afterTransactionCleanup",[n,i]),i._observers.has("update")){var p=new Ma;xs(p,n)&&i.emit("update",[p.toUint8Array(),n.origin,i,n])}if(i._observers.has("updateV2")){var g=new Pa;xs(g,n)&&i.emit("updateV2",[g.toUint8Array(),n.origin,i,n])}var v=n.subdocsAdded,m=n.subdocsLoaded,y=n.subdocsRemoved;(v.size>0||y.size>0||m.size>0)&&(v.forEach((function(e){e.clientID=i.clientID,null==e.collectionid&&(e.collectionid=i.collectionid),i.subdocs.add(e)})),y.forEach((function(e){return i.subdocs.delete(e)})),i.emit("subdocs",[{loaded:m,added:v,removed:y},i,n]),y.forEach((function(e){return e.destroy()}))),e.length<=t+1?(i._transactionCleanups=[],i.emit("afterAllTransactions",[i,e])):Is(e,t+1)}}},Rs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=e._transactionCleanups,o=!1;null===e._transaction&&(o=!0,e._transaction=new Cs(e,n,i),r.push(e._transaction),1===r.length&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{o&&r[0]===e._transaction&&Is(r,0)}};function Ts(e){var t,i,r,o,a,s,u,c,d,h,f;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=jr(e.restDecoder),i=0;case 2:if(!(i<t)){n.next=34;break}r=jr(e.restDecoder),o=e.readClient(),a=jr(e.restDecoder),s=0;case 7:if(!(s<r)){n.next=31;break}if(10!==(u=e.readInfo())){n.next=16;break}return c=jr(e.restDecoder),n.next=13,new lu(ns(o,a),c);case 13:a+=c,n.next=28;break;case 16:if(0==(31&u)){n.next=24;break}return d=0==(192&u),h=new ou(ns(o,a),null,(u&Ir)===Ir?e.readLeftID():null,null,(u&Ar)===Ar?e.readRightID():null,d?e.readParentInfo()?e.readString():e.readLeftID():null,d&&32==(32&u)?e.readString():null,au(e,u)),n.next=21,h;case 21:a+=h.length,n.next=28;break;case 24:return f=e.readLen(),n.next=27,new Bl(ns(o,a),f);case 27:a+=f;case 28:s++,n.next=7;break;case 31:i++,n.next=2;break;case 34:case"end":return n.stop()}}),fa)}var Ls=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.gen=Ts(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}return(0,c.default)(e,[{key:"next",value:function(){do{this.curr=this.gen.next().value||null}while(this.filterSkips&&null!==this.curr&&this.curr.constructor===lu);return this.curr}}]),e}(),Ms=function e(t){"use strict";(0,u.default)(this,e),this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]},Ns=function(e){return Os(e,Ia,Ma)},Ps=function(e,t){if(e.constructor===Bl){var n=e.id,i=n.client,r=n.clock;return new Bl(ns(i,r+t),e.length-t)}if(e.constructor===lu){var o=e.id,a=o.client,s=o.clock;return new lu(ns(a,s+t),e.length-t)}var l=e,u=l.id,c=u.client,d=u.clock;return new ou(ns(c,d+t),null,ns(c,d+t-1),null,l.rightOrigin,l.parent,l.parentSub,l.content.splice(t))},Os=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ta,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pa;if(1===e.length)return e[0];for(var i=e.map((function(e){return new t(Pr(e))})),r=i.map((function(e){return new Ls(e,!0)})),o=null,a=new n,s=new Ms(a);(r=r.filter((function(e){return null!==e.curr}))).sort((function(e,t){if(e.curr.id.client===t.curr.id.client){var n=e.curr.id.clock-t.curr.id.clock;return 0===n?e.curr.constructor===t.curr.constructor?0:e.curr.constructor===lu?1:-1:n}return t.curr.id.client-e.curr.id.client})),0!==r.length;){var l=r[0],u=l.curr.id.client;if(null!==o){for(var c=l.curr,d=!1;null!==c&&c.id.clock+c.length<=o.struct.id.clock+o.struct.length&&c.id.client>=o.struct.id.client;)c=l.next(),d=!0;if(null===c||c.id.client!==u||d&&c.id.clock>o.struct.id.clock+o.struct.length)continue;if(u!==o.struct.id.client)Hs(s,o.struct,o.offset),o={struct:c,offset:0},l.next();else if(o.struct.id.clock+o.struct.length<c.id.clock)if(o.struct.constructor===lu)o.struct.length=c.id.clock+c.length-o.struct.id.clock;else{Hs(s,o.struct,o.offset);var h=c.id.clock-o.struct.id.clock-o.struct.length,f=new lu(ns(u,o.struct.id.clock+o.struct.length),h);o={struct:f,offset:0}}else{var p=o.struct.id.clock+o.struct.length-c.id.clock;p>0&&(o.struct.constructor===lu?o.struct.length-=p:c=Ps(c,p)),o.struct.mergeWith(c)||(Hs(s,o.struct,o.offset),o={struct:c,offset:0},l.next())}}else o={struct:l.curr,offset:0},l.next();for(var g=l.curr;null!==g&&g.id.client===u&&g.id.clock===o.struct.id.clock+o.struct.length&&g.constructor!==lu;g=l.next())Hs(s,o.struct,o.offset),o={struct:g,offset:0}}null!==o&&(Hs(s,o.struct,o.offset),o=null),js(s);var v=i.map((function(e){return xa(e)})),m=ba(v);return Ca(a,m),a.toUint8Array()},Fs=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ta,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pa,r=Ka(t),o=new i,a=new Ms(o),s=new n(Pr(e)),l=new Ls(s,!1);l.curr;){var u=l.curr,c=u.id.client,d=r.get(c)||0;if(l.curr.constructor!==lu)if(u.id.clock+u.length>d)for(Hs(a,u,or(d-u.id.clock,0)),l.next();l.curr&&l.curr.id.client===c;)Hs(a,l.curr,0),l.next();else for(;l.curr&&l.curr.id.client===c&&l.curr.id.clock+l.curr.length<=d;)l.next();else l.next()}js(a);var h=xa(s);return Ca(o,h),o.toUint8Array()},Bs=function(e){e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:ro(e.encoder.restEncoder)}),e.encoder.restEncoder=io(),e.written=0)},Hs=function(e,t,n){e.written>0&&e.currClient!==t.id.client&&Bs(e),0===e.written&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),so(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},js=function(e){Bs(e);var t=e.encoder.restEncoder;so(t,e.clientStructs.length);for(var n=0;n<e.clientStructs.length;n++){var i=e.clientStructs[n];so(t,i.written),fo(t,i.restEncoder)}},zs=function(e,t,n){for(var i=new t(Pr(e)),r=new Ls(i,!1),o=new n,a=new Ms(o),s=r.curr;null!==s;s=r.next())Hs(a,s,0);js(a);var l=xa(i);return Ca(o,l),o.toUint8Array()},Ws=function(e){return zs(e,Ta,Ma)},Us=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null}return(0,c.default)(e,[{key:"path",get:function(){return Vs(this.currentTarget,this.target)}},{key:"deletes",value:function(e){return ma(this.transaction.deleteSet,e.id)}},{key:"keys",get:function(){var e=this;if(null===this._keys){var t=new Map,n=this.target;this.transaction.changed.get(n).forEach((function(i){if(null!==i){var r,o,a=n._map.get(i);if(e.adds(a)){for(var s=a.left;null!==s&&e.adds(s);)s=s.left;if(e.deletes(a)){if(null===s||!e.deletes(s))return;r="delete",o=$i(s.content.getContent())}else null!==s&&e.deletes(s)?(r="update",o=$i(s.content.getContent())):(r="add",o=void 0)}else{if(!e.deletes(a))return;r="delete",o=$i(a.content.getContent())}t.set(i,{action:r,oldValue:o})}})),this._keys=t}return this._keys}},{key:"delta",get:function(){return this.changes.delta}},{key:"adds",value:function(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}},{key:"changes",get:function(){var e=this._changes;if(null===e){var t=this.target,n=Zi(),i=Zi(),r=[];if(e={added:n,deleted:i,delta:r,keys:this.keys},this.transaction.changed.get(t).has(null)){for(var o=null,a=function(){o&&r.push(o)},s=t._start;null!==s;s=s.right)s.deleted?this.deletes(s)&&!this.adds(s)&&(null!==o&&void 0!==o.delete||(a(),o={delete:0}),o.delete+=s.length,i.add(s)):this.adds(s)?(null!==o&&void 0!==o.insert||(a(),o={insert:[]}),o.insert=o.insert.concat(s.content.getContent()),n.add(s)):(null!==o&&void 0!==o.retain||(a(),o={retain:0}),o.retain+=s.length);null!==o&&void 0===o.retain&&a()}this._changes=e}return e}}]),e}(),Vs=function(e,t){for(var n=[];null!==t._item&&t!==e;){if(null!==t._item.parentSub)n.unshift(t._item.parentSub);else{for(var i=0,r=t._item.parent._start;r!==t._item&&null!==r;)r.deleted||i++,r=r.right;n.unshift(i)}t=t._item.parent}return n},Ks=0,qs=function e(t,n){"use strict";(0,u.default)(this,e),t.marker=!0,this.p=t,this.index=n,this.timestamp=Ks++},Js=function(e,t,n){e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Ks++},Xs=function(e,t){if(null===e._start||0===t||null===e._searchMarker)return null;var n=0===e._searchMarker.length?null:e._searchMarker.reduce((function(e,n){return nr(t-e.index)<nr(t-n.index)?e:n})),i=e._start,r=0;for(null!==n&&(i=n.p,r=n.index,function(e){e.timestamp=Ks++}(n));null!==i.right&&r<t;){if(!i.deleted&&i.countable){if(t<r+i.length)break;r+=i.length}i=i.right}for(;null!==i.left&&r>t;)!(i=i.left).deleted&&i.countable&&(r-=i.length);for(;null!==i.left&&i.left.id.client===i.id.client&&i.left.id.clock+i.left.length===i.id.clock;)!(i=i.left).deleted&&i.countable&&(r-=i.length);return null!==n&&nr(n.index-r)<i.parent.length/80?(Js(n,i,r),n):function(e,t,n){if(e.length>=80){var i=e.reduce((function(e,t){return e.timestamp<t.timestamp?e:t}));return Js(i,t,n),i}var r=new qs(t,n);return e.push(r),r}(e._searchMarker,i,r)},Gs=function(e,t,n){for(var i=e.length-1;i>=0;i--){var r=e[i];if(n>0){var o=r.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)(o=o.left)&&!o.deleted&&o.countable&&(r.index-=o.length);if(null===o||!0===o.marker){e.splice(i,1);continue}r.p=o,o.marker=!0}(t<r.index||n>0&&t===r.index)&&(r.index=or(t,r.index+n))}},Zs=function(e,t,n){for(var i=e,r=t.changedParentTypes;Gi(r,e,(function(){return[]})).push(n),null!==e._item;)e=e._item.parent;Qa(i._eH,n,t)},$s=function(){"use strict";function e(){(0,u.default)(this,e),this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Za(),this._dEH=Za(),this._searchMarker=null}return(0,c.default)(e,[{key:"parent",get:function(){return this._item?this._item.parent:null}},{key:"_integrate",value:function(e,t){this.doc=e,this._item=t}},{key:"_copy",value:function(){throw Mo()}},{key:"clone",value:function(){throw Mo()}},{key:"_write",value:function(e){}},{key:"_first",get:function(){for(var e=this._start;null!==e&&e.deleted;)e=e.right;return e}},{key:"_callObserver",value:function(e,t){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}},{key:"observe",value:function(e){$a(this._eH,e)}},{key:"observeDeep",value:function(e){$a(this._dEH,e)}},{key:"unobserve",value:function(e){Ya(this._eH,e)}},{key:"unobserveDeep",value:function(e){Ya(this._dEH,e)}},{key:"toJSON",value:function(){}}]),e}(),Ys=function(e,t,n){t<0&&(t=e._length+t),n<0&&(n=e._length+n);for(var i=n-t,r=[],o=e._start;null!==o&&i>0;){if(o.countable&&!o.deleted){var a=o.content.getContent();if(a.length<=t)t-=a.length;else{for(var s=t;s<a.length&&i>0;s++)r.push(a[s]),i--;t=0}}o=o.right}return r},Qs=function(e){for(var t=[],n=e._start;null!==n;){if(n.countable&&!n.deleted)for(var i=n.content.getContent(),r=0;r<i.length;r++)t.push(i[r]);n=n.right}return t},el=function(e,t){for(var n=0,i=e._start;null!==i;){if(i.countable&&!i.deleted)for(var r=i.content.getContent(),o=0;o<r.length;o++)t(r[o],n++,e);i=i.right}},tl=function(e,t){var n=[];return el(e,(function(i,r){n.push(t(i,r,e))})),n},nl=function(e,t){var n=Xs(e,t),i=e._start;for(null!==n&&(i=n.p,t-=n.index);null!==i;i=i.right)if(!i.deleted&&i.countable){if(t<i.length)return i.content.getContent()[t];t-=i.length}},il=function(e,t,n,i){var r=n,o=e.doc,a=o.clientID,s=o.store,l=null===n?t._start:n.right,u=[],c=function(){u.length>0&&((r=new ou(ns(a,gs(s,a)),r,r&&r.lastId,l,l&&l.id,t,null,new ql(u))).integrate(e,0),u=[])};i.forEach((function(n){if(null===n)u.push(n);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:u.push(n);break;default:switch(c(),n.constructor){case Uint8Array:case ArrayBuffer:(r=new ou(ns(a,gs(s,a)),r,r&&r.lastId,l,l&&l.id,t,null,new Hl(new Uint8Array(n)))).integrate(e,0);break;case Da:(r=new ou(ns(a,gs(s,a)),r,r&&r.lastId,l,l&&l.id,t,null,new Wl(n))).integrate(e,0);break;default:if(!(n instanceof $s))throw new Error("Unexpected content type in insert operation");(r=new ou(ns(a,gs(s,a)),r,r&&r.lastId,l,l&&l.id,t,null,new nu(n))).integrate(e,0)}}})),c()},rl=Lo("Length exceeded!"),ol=function(e,t,n,i){if(n>t._length)throw rl;if(0===n)return t._searchMarker&&Gs(t._searchMarker,n,i.length),il(e,t,null,i);var r=n,o=Xs(t,n),a=t._start;for(null!==o&&(a=o.p,0===(n-=o.index)&&(n+=(a=a.prev)&&a.countable&&!a.deleted?a.length:0));null!==a;a=a.right)if(!a.deleted&&a.countable){if(n<=a.length){n<a.length&&_s(e,ns(a.id.client,a.id.clock+n));break}n-=a.length}return t._searchMarker&&Gs(t._searchMarker,r,i.length),il(e,t,a,i)},al=function(e,t,n,i){if(0!==i){var r=n,o=i,a=Xs(t,n),s=t._start;for(null!==a&&(s=a.p,n-=a.index);null!==s&&n>0;s=s.right)!s.deleted&&s.countable&&(n<s.length&&_s(e,ns(s.id.client,s.id.clock+n)),n-=s.length);for(;i>0&&null!==s;)s.deleted||(i<s.length&&_s(e,ns(s.id.client,s.id.clock+i)),s.delete(e),i-=s.length),s=s.right;if(i>0)throw rl;t._searchMarker&&Gs(t._searchMarker,r,-o+i)}},sl=function(e,t,n){var i=t._map.get(n);void 0!==i&&i.delete(e)},ll=function(e,t,n,i){var r,o=t._map.get(n)||null,a=e.doc,s=a.clientID;if(null==i)r=new ql([i]);else switch(i.constructor){case Number:case Object:case Boolean:case Array:case String:r=new ql([i]);break;case Uint8Array:r=new Hl(i);break;case Da:r=new Wl(i);break;default:if(!(i instanceof $s))throw new Error("Unexpected content type");r=new nu(i)}new ou(ns(s,gs(a.store,s)),o,o&&o.lastId,null,null,t,n,r).integrate(e,0)},ul=function(e,t){var n=e._map.get(t);return void 0===n||n.deleted?void 0:n.content.getContent()[n.length-1]},cl=function(e){var t={};return e._map.forEach((function(e,n){e.deleted||(t[n]=e.content.getContent()[e.length-1])})),t},dl=function(e,t){var n=e._map.get(t);return void 0!==n&&!n.deleted},hl=function(e){return t=e.entries(),n=function(e){return!e[1].deleted},da((function(){var e;do{e=t.next()}while(!e.done&&!n(e.value));return e}));var t,n},fl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,e,i))._transaction=i,r}return n}(Us),pl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this))._prelimContent=[],e._searchMarker=[],e}return(0,c.default)(n,[{key:"_integrate",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.insert(0,this.toArray().map((function(e){return e instanceof $s?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"_callObserver",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"_callObserver",this).call(this,e,t),Zs(this,e,new fl(this,e))}},{key:"insert",value:function(e,t){var n,i=this;null!==this.doc?Rs(this.doc,(function(n){ol(n,i,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat((0,qi.default)(t)))}},{key:"push",value:function(e){var t,n=this;null!==this.doc?Rs(this.doc,(function(t){!function(e,t,n){var i=(t._searchMarker||[]).reduce((function(e,t){return t.index>e.index?t:e}),{index:0,p:t._start}).p;if(i)for(;i.right;)i=i.right;il(e,t,i,n)}(t,n,e)})):(t=this._prelimContent).push.apply(t,(0,qi.default)(e))}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;null!==this.doc?Rs(this.doc,(function(i){al(i,n,e,t)})):this._prelimContent.splice(e,t)}},{key:"get",value:function(e){return nl(this,e)}},{key:"toArray",value:function(){return Qs(this)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Ys(this,e,t)}},{key:"toJSON",value:function(){return this.map((function(e){return e instanceof $s?e.toJSON():e}))}},{key:"map",value:function(e){return tl(this,e)}},{key:"forEach",value:function(e){el(this,e)}},{key:Symbol.iterator,value:function(){return t=this._start,n=null,i=0,e={},(0,f.default)(e,Symbol.iterator,(function(){return this})),(0,f.default)(e,"next",(function(){if(null===n){for(;null!==t&&t.deleted;)t=t.right;if(null===t)return{done:!0,value:void 0};n=t.content.getContent(),i=0,t=t.right}var e=n[i++];return n.length<=i&&(n=null),{done:!1,value:e}})),e;var e,t,n,i}},{key:"_write",value:function(e){e.writeTypeRef(Gl)}}],[{key:"from",value:function(e){var t=new n;return t.push(e),t}}]),n}($s),gl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this,e,i)).keysChanged=r,o}return n}(Us),vl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._prelimContent=null,i._prelimContent=void 0===e?new Map:new Map(e),i}return(0,c.default)(n,[{key:"_integrate",value:function(e,t){var i=this;(0,zi.default)((0,Wi.default)(n.prototype),"_integrate",this).call(this,e,t),this._prelimContent.forEach((function(e,t){i.set(t,e)})),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return this.forEach((function(t,n){e.set(n,t instanceof $s?t.clone():t)})),e}},{key:"_callObserver",value:function(e,t){Zs(this,e,new gl(this,e,t))}},{key:"toJSON",value:function(){var e={};return this._map.forEach((function(t,n){if(!t.deleted){var i=t.content.getContent()[t.length-1];e[n]=i instanceof $s?i.toJSON():i}})),e}},{key:"size",get:function(){return(0,qi.default)(hl(this._map)).length}},{key:"keys",value:function(){return ha(hl(this._map),(function(e){return e[0]}))}},{key:"values",value:function(){return ha(hl(this._map),(function(e){return e[1].content.getContent()[e[1].length-1]}))}},{key:"entries",value:function(){return ha(hl(this._map),(function(e){return[e[0],e[1].content.getContent()[e[1].length-1]]}))}},{key:"forEach",value:function(e){var t=this;return this._map.forEach((function(n,i){n.deleted||e(n.content.getContent()[n.length-1],i,t)})),{}}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"delete",value:function(e){var t=this;null!==this.doc?Rs(this.doc,(function(n){sl(n,t,e)})):this._prelimContent.delete(e)}},{key:"set",value:function(e,t){var n=this;return null!==this.doc?Rs(this.doc,(function(i){ll(i,n,e,t)})):this._prelimContent.set(e,t),t}},{key:"get",value:function(e){return ul(this,e)}},{key:"has",value:function(e){return dl(this,e)}},{key:"clear",value:function(){var e=this;null!==this.doc?Rs(this.doc,(function(t){e.forEach((function(e,n,i){sl(t,i,n)}))})):this._prelimContent.clear()}},{key:"_write",value:function(e){e.writeTypeRef(Zl)}}]),n}($s),ml=function(e,t){return e===t||"object"==typeof e&&"object"==typeof t&&e&&t&&Bo(e,t)},yl=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.left=t,this.right=n,this.index=i,this.currentAttributes=r}return(0,c.default)(e,[{key:"forward",value:function(){if(null===this.right&&No(),this.right.content.constructor===Vl)this.right.deleted||kl(this.currentAttributes,this.right.content);else this.right.deleted||(this.index+=this.right.length);this.left=this.right,this.right=this.right.right}}]),e}(),bl=function(e,t,n){for(;null!==t.right&&n>0;){if(t.right.content.constructor===Vl)t.right.deleted||kl(t.currentAttributes,t.right.content);else t.right.deleted||(n<t.right.length&&_s(e,ns(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);t.left=t.right,t.right=t.right.right}return t},_l=function(e,t,n){var i=new Map,r=Xs(t,n);if(r){var o=new yl(r.p.left,r.p,r.index,i);return bl(e,o,n-r.index)}var a=new yl(null,t._start,0,i);return bl(e,a,n)},wl=function(e,t,n,i){for(;null!==n.right&&(!0===n.right.deleted||n.right.content.constructor===Vl&&ml(i.get(n.right.content.key),n.right.content.value));)n.right.deleted||i.delete(n.right.content.key),n.forward();var r=e.doc,o=r.clientID;i.forEach((function(i,a){var s=n.left,l=n.right,u=new ou(ns(o,gs(r.store,o)),s,s&&s.lastId,l,l&&l.id,t,null,new Vl(a,i));u.integrate(e,0),n.right=u,n.forward()}))},kl=function(e,t){var n=t.key,i=t.value;null===i?e.delete(n):e.set(n,i)},Cl=function(e,t){for(;null!==e.right&&(e.right.deleted||e.right.content.constructor===Vl&&ml(t[e.right.content.key]||null,e.right.content.value));)e.forward()},xl=function(e,t,n,i){var r=e.doc,o=r.clientID,a=new Map;for(var s in i){var l=i[s],u=n.currentAttributes.get(s)||null;if(!ml(u,l)){a.set(s,u);var c=n.left,d=n.right;n.right=new ou(ns(o,gs(r.store,o)),c,c&&c.lastId,d,d&&d.id,t,null,new Vl(s,l)),n.right.integrate(e,0),n.forward()}}return a},Sl=function(e,t,n,i,r){n.currentAttributes.forEach((function(e,t){void 0===r[t]&&(r[t]=null)}));var o=e.doc,a=o.clientID;Cl(n,r);var s=xl(e,t,n,r),l=i.constructor===String?new Jl(i):i instanceof $s?new nu(i):new Ul(i),u=n.left,c=n.right,d=n.index;t._searchMarker&&Gs(t._searchMarker,n.index,l.getLength()),(c=new ou(ns(a,gs(o.store,a)),u,u&&u.lastId,c,c&&c.id,t,null,l)).integrate(e,0),n.right=c,n.index=d,n.forward(),wl(e,t,n,s)},El=function(e,t,n,i,r){var o=e.doc,a=o.clientID;Cl(n,r);var s=xl(e,t,n,r);e:for(;null!==n.right&&(i>0||s.size>0&&(n.right.deleted||n.right.content.constructor===Vl));){if(!n.right.deleted)if(n.right.content.constructor===Vl){var l=n.right.content,u=l.key,c=l.value,d=r[u];if(void 0!==d){if(ml(d,c))s.delete(u);else{if(0===i)break e;s.set(u,c)}n.right.delete(e)}else n.currentAttributes.set(u,c)}else i<n.right.length&&_s(e,ns(n.right.id.client,n.right.id.clock+i)),i-=n.right.length;n.forward()}if(i>0){for(var h="";i>0;i--)h+="\n";n.right=new ou(ns(a,gs(o.store,a)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Jl(h)),n.right.integrate(e,0),n.forward()}wl(e,t,n,s)},Dl=function(e,t,n,i,r){for(var o=n,a=Xi(r);o&&(!o.countable||o.deleted);)o.deleted||o.content.constructor!==Vl||kl(a,o.content),o=o.right;for(var s=0,l=!1;t!==o;){if(n===t&&(l=!0),!t.deleted){var u=t.content;if(u.constructor===Vl){var c=u.key,d=u.value;(a.get(c)||null)===d&&(i.get(c)||null)!==d||(t.delete(e),s++,l||(r.get(c)||null)!==d||(i.get(c)||null)===d||r.delete(c))}}t=t.right}return s},Al=function(e,t,n){for(var i=n,r=Xi(t.currentAttributes),o=t.right;n>0&&null!==t.right;){if(!1===t.right.deleted)switch(t.right.content.constructor){case nu:case Ul:case Jl:n<t.right.length&&_s(e,ns(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e)}t.forward()}o&&Dl(e,o,t.right,r,t.currentAttributes);var a=(t.left||t.right).parent;return a._searchMarker&&Gs(a._searchMarker,t.index,-i+n),t},Il=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this,e,i)).childListChanged=!1,o.keysChanged=new Set,r.forEach((function(e){null===e?o.childListChanged=!0:o.keysChanged.add(e)})),o}return(0,c.default)(n,[{key:"changes",get:function(){if(null===this._changes){var e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}},{key:"delta",get:function(){var e=this;if(null===this._delta){var t=this.target.doc,n=[];Rs(t,(function(t){for(var i=new Map,r=new Map,o=e.target._start,a=null,s={},l="",u=0,c=0,d=function(){if(null!==a){var e;switch(a){case"delete":e={delete:c},c=0;break;case"insert":e={insert:l},i.size>0&&(e.attributes={},i.forEach((function(t,n){null!==t&&(e.attributes[n]=t)}))),l="";break;case"retain":if(e={retain:u},Object.keys(s).length>0)for(var t in e.attributes={},s)e.attributes[t]=s[t];u=0}n.push(e),a=null}};null!==o;){switch(o.content.constructor){case nu:case Ul:e.adds(o)?e.deletes(o)||(d(),a="insert",l=o.content.getContent()[0],d()):e.deletes(o)?("delete"!==a&&(d(),a="delete"),c+=1):o.deleted||("retain"!==a&&(d(),a="retain"),u+=1);break;case Jl:e.adds(o)?e.deletes(o)||("insert"!==a&&(d(),a="insert"),l+=o.content.str):e.deletes(o)?("delete"!==a&&(d(),a="delete"),c+=o.length):o.deleted||("retain"!==a&&(d(),a="retain"),u+=o.length);break;case Vl:var h=o.content,f=h.key,p=h.value;if(e.adds(o)){if(!e.deletes(o)){var g=i.get(f)||null;ml(g,p)?null!==p&&o.delete(t):("retain"===a&&d(),ml(p,r.get(f)||null)?delete s[f]:s[f]=p)}}else if(e.deletes(o)){r.set(f,p);var v=i.get(f)||null;ml(v,p)||("retain"===a&&d(),s[f]=v)}else if(!o.deleted){r.set(f,p);var m=s[f];void 0!==m&&(ml(m,p)?null!==m&&o.delete(t):("retain"===a&&d(),null===p?delete s[f]:s[f]=p))}o.deleted||("insert"===a&&d(),kl(i,o.content))}o=o.right}for(d();n.length>0;){var y=n[n.length-1];if(void 0===y.retain||void 0!==y.attributes)break;n.pop()}})),this._delta=n}return this._delta}}]),n}(Us),Rl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._pending=void 0!==e?[function(){return i.insert(0,e)}]:[],i._searchMarker=[],i}return(0,c.default)(n,[{key:"length",get:function(){return this._length}},{key:"_integrate",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"_integrate",this).call(this,e,t);try{this._pending.forEach((function(e){return e()}))}catch(e){console.error(e)}this._pending=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"_callObserver",value:function(e,t){var i=this;(0,zi.default)((0,Wi.default)(n.prototype),"_callObserver",this).call(this,e,t);var r=new Il(this,e,t),o=e.doc;if(Zs(this,e,r),!e.local){var a=!1,s=!0,l=!1,u=void 0;try{for(var c,d=e.afterState.entries()[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=(0,Ki.default)(c.value,2),f=h[0],p=h[1],g=e.beforeState.get(f)||0;if(p!==g&&(ks(e,o.store.clients.get(f),g,p,(function(e){e.deleted||e.content.constructor!==Vl||(a=!0)})),a))break}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}a||va(e,e.deleteSet,(function(e){e instanceof Bl||a||e.parent===i&&e.content.constructor===Vl&&(a=!0)})),Rs(o,(function(e){var t;a?(0,Rs((t=i).doc,(function(e){for(var n=t._start,i=t._start,r=Ji(),o=Xi(r);i;)!1===i.deleted&&(i.content.constructor===Vl?kl(o,i.content):(Dl(e,n,i,r,o),r=Xi(o),n=i)),i=i.right}))):va(e,e.deleteSet,(function(t){t instanceof Bl||t.parent===i&&function(e,t){for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;for(var n=new Set;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Vl){var i=t.content.key;n.has(i)?t.delete(e):n.add(i)}t=t.left}}(e,t)}))}))}}},{key:"toString",value:function(){for(var e="",t=this._start;null!==t;)!t.deleted&&t.countable&&t.content.constructor===Jl&&(e+=t.content.str),t=t.right;return e}},{key:"toJSON",value:function(){return this.toString()}},{key:"applyDelta",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sanitize,i=void 0===n||n,r=this;null!==this.doc?Rs(this.doc,(function(t){for(var n=new yl(null,r._start,0,new Map),o=0;o<e.length;o++){var a=e[o];if(void 0!==a.insert){var s=i||"string"!=typeof a.insert||o!==e.length-1||null!==n.right||"\n"!==a.insert.slice(-1)?a.insert:a.insert.slice(0,-1);("string"!=typeof s||s.length>0)&&Sl(t,r,n,s,a.attributes||{})}else void 0!==a.retain?El(t,r,n,a.retain,a.attributes||{}):void 0!==a.delete&&Al(t,n,a.delete)}})):this._pending.push((function(){return r.applyDelta(e)}))}},{key:"toDelta",value:function(e,t,n){var i=function(){if(s.length>0){var e={},t=!1;o.forEach((function(n,i){t=!0,e[i]=n}));var n={insert:s};t&&(n.attributes=e),r.push(n),s=""}},r=[],o=new Map,a=this.doc,s="",l=this._start;return Rs(a,(function(a){for(e&&hs(a,e),t&&hs(a,t);null!==l;){if(ds(l,e)||void 0!==t&&ds(l,t))switch(l.content.constructor){case Jl:var u=o.get("ychange");void 0===e||ds(l,e)?void 0===t||ds(l,t)?void 0!==u&&(i(),o.delete("ychange")):void 0!==u&&u.user===l.id.client&&"added"===u.state||(i(),o.set("ychange",n?n("added",l.id):{type:"added"})):void 0!==u&&u.user===l.id.client&&"removed"===u.state||(i(),o.set("ychange",n?n("removed",l.id):{type:"removed"})),s+=l.content.str;break;case nu:case Ul:i();var c={insert:l.content.getContent()[0]};if(o.size>0){var d={};c.attributes=d,o.forEach((function(e,t){d[t]=e}))}r.push(c);break;case Vl:ds(l,e)&&(i(),kl(o,l.content))}l=l.right}i()}),hs),r}},{key:"insert",value:function(e,t,n){var i=this;if(!(t.length<=0)){var r=this.doc;null!==r?Rs(r,(function(r){var o=_l(r,i,e);n||(n={},o.currentAttributes.forEach((function(e,t){n[t]=e}))),Sl(r,i,o,t,n)})):this._pending.push((function(){return i.insert(e,t,n)}))}}},{key:"insertEmbed",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this,r=this.doc;null!==r?Rs(r,(function(r){var o=_l(r,i,e);Sl(r,i,o,t,n)})):this._pending.push((function(){return i.insertEmbed(e,t,n)}))}},{key:"delete",value:function(e,t){var n=this;if(0!==t){var i=this.doc;null!==i?Rs(i,(function(i){Al(i,_l(i,n,e),t)})):this._pending.push((function(){return n.delete(e,t)}))}}},{key:"format",value:function(e,t,n){var i=this;if(0!==t){var r=this.doc;null!==r?Rs(r,(function(r){var o=_l(r,i,e);null!==o.right&&El(r,i,o,t,n)})):this._pending.push((function(){return i.format(e,t,n)}))}}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?Rs(this.doc,(function(n){sl(n,t,e)})):this._pending.push((function(){return t.removeAttribute(e)}))}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?Rs(this.doc,(function(i){ll(i,n,e,t)})):this._pending.push((function(){return n.setAttribute(e,t)}))}},{key:"getAttribute",value:function(e){return ul(this,e)}},{key:"getAttributes",value:function(e){return cl(this)}},{key:"_write",value:function(e){e.writeTypeRef($l)}}]),n}($s),Tl=function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};(0,u.default)(this,e),this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}return(0,c.default)(e,[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._currentNode,t=e&&e.content&&e.content.type;if(null!==e&&(!this._firstCall||e.deleted||!this._filter(t)))do{if(t=e.content.type,e.deleted||t.constructor!==Ml&&t.constructor!==Ll||null===t._start)for(;null!==e;){if(null!==e.right){e=e.right;break}e=e.parent===this._root?null:e.parent._item}else e=t._start}while(null!==e&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,null===e?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}]),e}(),Ll=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this))._prelimContent=[],e}return(0,c.default)(n,[{key:"firstChild",get:function(){var e=this._first;return e?e.content.getContent()[0]:null}},{key:"_integrate",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"_integrate",this).call(this,e,t),this.insert(0,this._prelimContent),this._prelimContent=null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.insert(0,this.toArray().map((function(e){return e instanceof $s?e.clone():e}))),e}},{key:"length",get:function(){return null===this._prelimContent?this._length:this._prelimContent.length}},{key:"createTreeWalker",value:function(e){return new Tl(this,e)}},{key:"querySelector",value:function(e){e=e.toUpperCase();var t=new Tl(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})).next();return t.done?null:t.value}},{key:"querySelectorAll",value:function(e){return e=e.toUpperCase(),Array.from(new Tl(this,(function(t){return t.nodeName&&t.nodeName.toUpperCase()===e})))}},{key:"_callObserver",value:function(e,t){Zs(this,e,new Nl(this,t,e))}},{key:"toString",value:function(){return tl(this,(function(e){return e.toString()})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=e.createDocumentFragment();return void 0!==n&&n._createAssociation(i,this),el(this,(function(r){i.insertBefore(r.toDOM(e,t,n),null)})),i}},{key:"insert",value:function(e,t){var n,i=this;null!==this.doc?Rs(this.doc,(function(n){ol(n,i,e,t)})):(n=this._prelimContent).splice.apply(n,[e,0].concat((0,qi.default)(t)))}},{key:"insertAfter",value:function(e,t){var n=this;if(null!==this.doc)Rs(this.doc,(function(i){var r=e&&e instanceof $s?e._item:e;il(i,n,r,t)}));else{var i,r=this._prelimContent,o=null===e?0:r.findIndex((function(t){return t===e}))+1;if(0===o&&null!==e)throw Lo("Reference item not found");(i=r).splice.apply(i,[o,0].concat((0,qi.default)(t)))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;null!==this.doc?Rs(this.doc,(function(i){al(i,n,e,t)})):this._prelimContent.splice(e,t)}},{key:"toArray",value:function(){return Qs(this)}},{key:"push",value:function(e){this.insert(this.length,e)}},{key:"unshift",value:function(e){this.insert(0,e)}},{key:"get",value:function(e){return nl(this,e)}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return Ys(this,e,t)}},{key:"forEach",value:function(e){el(this,e)}},{key:"_write",value:function(e){e.writeTypeRef(Ql)}}]),n}($s),Ml=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UNDEFINED";return(0,u.default)(this,n),(e=t.call(this)).nodeName=i,e._prelimAttrs=new Map,e}return(0,c.default)(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_integrate",value:function(e,t){var i=this;(0,zi.default)((0,Wi.default)(n.prototype),"_integrate",this).call(this,e,t),this._prelimAttrs.forEach((function(e,t){i.setAttribute(t,e)})),this._prelimAttrs=null}},{key:"_copy",value:function(){return new n(this.nodeName)}},{key:"clone",value:function(){var e=new n(this.nodeName),t=this.getAttributes();for(var i in t)e.setAttribute(i,t[i]);return e.insert(0,this.toArray().map((function(e){return e instanceof $s?e.clone():e}))),e}},{key:"toString",value:function(){var e=this.getAttributes(),t=[],i=[];for(var r in e)i.push(r);i.sort();for(var o=i.length,a=0;a<o;a++){var s=i[a];t.push(s+'="'+e[s]+'"')}var l=this.nodeName.toLocaleLowerCase(),u=t.length>0?" "+t.join(" "):"";return"<".concat(l).concat(u,">").concat((0,zi.default)((0,Wi.default)(n.prototype),"toString",this).call(this),"</").concat(l,">")}},{key:"removeAttribute",value:function(e){var t=this;null!==this.doc?Rs(this.doc,(function(n){sl(n,t,e)})):this._prelimAttrs.delete(e)}},{key:"setAttribute",value:function(e,t){var n=this;null!==this.doc?Rs(this.doc,(function(i){ll(i,n,e,t)})):this._prelimAttrs.set(e,t)}},{key:"getAttribute",value:function(e){return ul(this,e)}},{key:"hasAttribute",value:function(e){return dl(this,e)}},{key:"getAttributes",value:function(e){return cl(this)}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=e.createElement(this.nodeName),r=this.getAttributes();for(var o in r)i.setAttribute(o,r[o]);return el(this,(function(r){i.appendChild(r.toDOM(e,t,n))})),void 0!==n&&n._createAssociation(i,this),i}},{key:"_write",value:function(e){e.writeTypeRef(Yl),e.writeKey(this.nodeName)}}]),n}(Ll),Nl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this,e,r)).childListChanged=!1,o.attributesChanged=new Set,i.forEach((function(e){null===e?o.childListChanged=!0:o.attributesChanged.add(e)})),o}return n}(Us),Pl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).hookName=e,i}return(0,c.default)(n,[{key:"_copy",value:function(){return new n(this.hookName)}},{key:"clone",value:function(){var e=new n(this.hookName);return this.forEach((function(t,n){e.set(n,t)})),e}},{key:"toDOM",value:function(){arguments.length>0&&void 0!==arguments[0]||document;var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t[this.hookName];return(e=void 0!==i?i.createDom(this):document.createElement(this.hookName)).setAttribute("data-yjs-hook",this.hookName),void 0!==n&&n._createAssociation(e,this),e}},{key:"_write",value:function(e){e.writeTypeRef(eu),e.writeKey(this.hookName)}}]),n}(vl),Ol=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"nextSibling",get:function(){var e=this._item?this._item.next:null;return e?e.content.type:null}},{key:"prevSibling",get:function(){var e=this._item?this._item.prev:null;return e?e.content.type:null}},{key:"_copy",value:function(){return new n}},{key:"clone",value:function(){var e=new n;return e.applyDelta(this.toDelta()),e}},{key:"toDOM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>2?arguments[2]:void 0,n=e.createTextNode(this.toString());return void 0!==t&&t._createAssociation(n,this),n}},{key:"toString",value:function(){return this.toDelta().map((function(e){var t=function(t){var i=[];for(var r in e.attributes[t])i.push({key:r,value:e.attributes[t][r]});i.sort((function(e,t){return e.key<t.key?-1:1})),n.push({nodeName:t,attrs:i})},n=[];for(var i in e.attributes)t(i);n.sort((function(e,t){return e.nodeName<t.nodeName?-1:1}));for(var r="",o=0;o<n.length;o++){var a=n[o];r+="<".concat(a.nodeName);for(var s=0;s<a.attrs.length;s++){var l=a.attrs[s];r+=" ".concat(l.key,'="').concat(l.value,'"')}r+=">"}r+=e.insert;for(var u=n.length-1;u>=0;u--)r+="</".concat(n[u].nodeName,">");return r})).join("")}},{key:"toJSON",value:function(){return this.toString()}},{key:"_write",value:function(e){e.writeTypeRef(tu)}}]),n}(Rl),Fl=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.id=t,this.length=n}return(0,c.default)(e,[{key:"deleted",get:function(){throw Mo()}},{key:"mergeWith",value:function(e){return!1}},{key:"write",value:function(e,t,n){throw Mo()}},{key:"integrate",value:function(e,t){throw Mo()}}]),e}(),Bl=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){t>0&&(this.id.clock+=t,this.length-=t),vs(e.doc.store,this)}},{key:"write",value:function(e,t){e.writeInfo(0),e.writeLen(this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(Fl),Hl=function(){"use strict";function e(t){(0,u.default)(this,e),this.content=t}return(0,c.default)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.content]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.content)}},{key:"splice",value:function(e){throw Mo()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeBuf(this.content)}},{key:"getRef",value:function(){return 3}}]),e}(),jl=function(){"use strict";function e(t){(0,u.default)(this,e),this.len=t}return(0,c.default)(e,[{key:"getLength",value:function(){return this.len}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.len)}},{key:"splice",value:function(t){var n=new e(this.len-t);return this.len=t,n}},{key:"mergeWith",value:function(e){return this.len+=e.len,!0}},{key:"integrate",value:function(e,t){_a(e.deleteSet,t.id.client,t.id.clock,this.len),t.markDeleted()}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeLen(this.len-t)}},{key:"getRef",value:function(){return 1}}]),e}(),zl=function(e,t){return new Da(Vi(Ui({guid:e},t),{shouldLoad:t.shouldLoad||t.autoLoad||!1}))},Wl=function(){"use strict";function e(t){(0,u.default)(this,e),t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;var n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),null!==t.meta&&(n.meta=t.meta)}return(0,c.default)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.doc]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(zl(this.doc.guid,this.opts))}},{key:"splice",value:function(e){throw Mo()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.doc._item=t,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}},{key:"delete",value:function(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(this.doc.guid),e.writeAny(this.opts)}},{key:"getRef",value:function(){return 9}}]),e}(),Ul=function(){"use strict";function e(t){(0,u.default)(this,e),this.embed=t}return(0,c.default)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.embed]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.embed)}},{key:"splice",value:function(e){throw Mo()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeJSON(this.embed)}},{key:"getRef",value:function(){return 5}}]),e}(),Vl=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.key=t,this.value=n}return(0,c.default)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[]}},{key:"isCountable",value:function(){return!1}},{key:"copy",value:function(){return new e(this.key,this.value)}},{key:"splice",value:function(e){throw Mo()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){t.parent._searchMarker=null}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeKey(this.key),e.writeJSON(this.value)}},{key:"getRef",value:function(){return 6}}]),e}(),Kl=function(){"use strict";function e(t){(0,u.default)(this,e),this.arr=t}return(0,c.default)(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var i=t;i<n;i++){var r=this.arr[i];e.writeString(void 0===r?"undefined":JSON.stringify(r))}}},{key:"getRef",value:function(){return 2}}]),e}(),ql=function(){"use strict";function e(t){(0,u.default)(this,e),this.arr=t}return(0,c.default)(e,[{key:"getLength",value:function(){return this.arr.length}},{key:"getContent",value:function(){return this.arr}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.arr)}},{key:"splice",value:function(t){var n=new e(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}},{key:"mergeWith",value:function(e){return this.arr=this.arr.concat(e.arr),!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){var n=this.arr.length;e.writeLen(n-t);for(var i=t;i<n;i++){var r=this.arr[i];e.writeAny(r)}}},{key:"getRef",value:function(){return 8}}]),e}(),Jl=function(){"use strict";function e(t){(0,u.default)(this,e),this.str=t}return(0,c.default)(e,[{key:"getLength",value:function(){return this.str.length}},{key:"getContent",value:function(){return this.str.split("")}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.str)}},{key:"splice",value:function(t){var n=new e(this.str.slice(t));this.str=this.str.slice(0,t);var i=this.str.charCodeAt(t-1);return i>=55296&&i<=56319&&(this.str=this.str.slice(0,t-1)+"",n.str=""+n.str.slice(1)),n}},{key:"mergeWith",value:function(e){return this.str+=e.str,!0}},{key:"integrate",value:function(e,t){}},{key:"delete",value:function(e){}},{key:"gc",value:function(e){}},{key:"write",value:function(e,t){e.writeString(0===t?this.str:this.str.slice(t))}},{key:"getRef",value:function(){return 4}}]),e}(),Xl=[function(e){return new pl},function(e){return new vl},function(e){return new Rl},function(e){return new Ml(e.readKey())},function(e){return new Ll},function(e){return new Pl(e.readKey())},function(e){return new Ol}],Gl=0,Zl=1,$l=2,Yl=3,Ql=4,eu=5,tu=6,nu=function(){"use strict";function e(t){(0,u.default)(this,e),this.type=t}return(0,c.default)(e,[{key:"getLength",value:function(){return 1}},{key:"getContent",value:function(){return[this.type]}},{key:"isCountable",value:function(){return!0}},{key:"copy",value:function(){return new e(this.type._copy())}},{key:"splice",value:function(e){throw Mo()}},{key:"mergeWith",value:function(e){return!1}},{key:"integrate",value:function(e,t){this.type._integrate(e.doc,t)}},{key:"delete",value:function(e){for(var t=this.type._start;null!==t;)t.deleted?e._mergeStructs.push(t):t.delete(e),t=t.right;this.type._map.forEach((function(t){t.deleted?e._mergeStructs.push(t):t.delete(e)})),e.changed.delete(this.type)}},{key:"gc",value:function(e){for(var t=this.type._start;null!==t;)t.gc(e,!0),t=t.right;this.type._start=null,this.type._map.forEach((function(t){for(;null!==t;)t.gc(e,!0),t=t.left})),this.type._map=new Map}},{key:"write",value:function(e,t){this.type._write(e)}},{key:"getRef",value:function(){return 7}}]),e}(),iu=function(e,t){var n,i=t,r=0;do{r>0&&(i=ns(i.client,i.clock+r)),n=ys(e,i),r=i.clock-n.id.clock,i=n.redone}while(null!==i&&n instanceof ou);return{item:n,diff:r}},ru=function(e,t,n){var i=t.id,r=i.client,o=i.clock,a=new ou(ns(r,o+n),t,ns(r,o+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&a.markDeleted(),t.keep&&(a.keep=!0),null!==t.redone&&(a.redone=ns(t.redone.client,t.redone.clock+n)),t.right=a,null!==a.right&&(a.right.left=a),e._mergeStructs.push(a),null!==a.parentSub&&null===a.right&&a.parent._map.set(a.parentSub,a),t.length=n,a},ou=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o,a,s,l,c){var d;return(0,u.default)(this,n),(d=t.call(this,e,c.getLength())).origin=r,d.left=i,d.right=o,d.rightOrigin=a,d.parent=s,d.parentSub=l,d.redone=null,d.content=c,d.info=d.content.isCountable()?2:0,d}return(0,c.default)(n,[{key:"marker",get:function(){return(8&this.info)>0},set:function(e){(8&this.info)>0!==e&&(this.info^=8)}},{key:"keep",get:function(){return(1&this.info)>0},set:function(e){this.keep!==e&&(this.info^=1)}},{key:"countable",get:function(){return(2&this.info)>0}},{key:"deleted",get:function(){return(4&this.info)>0},set:function(e){this.deleted!==e&&(this.info^=4)}},{key:"markDeleted",value:function(){this.info|=4}},{key:"getMissing",value:function(e,t){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=gs(t,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=gs(t,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===es&&this.id.client!==this.parent.client&&this.parent.clock>=gs(t,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ws(e,t,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=_s(e,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===Bl||this.right&&this.right.constructor===Bl)&&(this.parent=null),this.parent){if(this.parent.constructor===es){var i=ys(t,this.parent);i.constructor===Bl?this.parent=null:this.parent=i.content.type}}else this.left&&this.left.constructor===n&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===n&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);return null}},{key:"integrate",value:function(e,t){if(t>0&&(this.id.clock+=t,this.left=ws(e,e.doc.store,ns(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(t),this.length-=t),this.parent){if(!this.left&&(!this.right||null!==this.right.left)||this.left&&this.left.right!==this.right){var n,i=this.left;if(null!==i)n=i.right;else if(null!==this.parentSub)for(n=this.parent._map.get(this.parentSub)||null;null!==n&&null!==n.left;)n=n.left;else n=this.parent._start;for(var r=new Set,o=new Set;null!==n&&n!==this.right;){if(o.add(n),r.add(n),ts(this.origin,n.origin)){if(n.id.client<this.id.client)i=n,r.clear();else if(ts(this.rightOrigin,n.rightOrigin))break}else{if(null===n.origin||!o.has(ys(e.doc.store,n.origin)))break;r.has(ys(e.doc.store,n.origin))||(i=n,r.clear())}n=n.right}this.left=i}if(null!==this.left){var a=this.left.right;this.right=a,this.left.right=this}else{var s;if(null!==this.parentSub)for(s=this.parent._map.get(this.parentSub)||null;null!==s&&null!==s.left;)s=s.left;else s=this.parent._start,this.parent._start=this;this.right=s}null!==this.right?this.right.left=this:null!==this.parentSub&&(this.parent._map.set(this.parentSub,this),null!==this.left&&this.left.delete(e)),null===this.parentSub&&this.countable&&!this.deleted&&(this.parent._length+=this.length),vs(e.doc.store,this),this.content.integrate(e,this),Ss(e,this.parent,this.parentSub),(null!==this.parent._item&&this.parent._item.deleted||null!==this.parentSub&&null!==this.right)&&this.delete(e)}else new Bl(this.id,this.length).integrate(e,0)}},{key:"next",get:function(){for(var e=this.right;null!==e&&e.deleted;)e=e.right;return e}},{key:"prev",get:function(){for(var e=this.left;null!==e&&e.deleted;)e=e.left;return e}},{key:"lastId",get:function(){return 1===this.length?this.id:ns(this.id.client,this.id.clock+this.length-1)}},{key:"mergeWith",value:function(e){var t=this;if(this.constructor===e.constructor&&ts(e.origin,this.lastId)&&this.right===e&&ts(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&null===this.redone&&null===e.redone&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){var n=this.parent._searchMarker;return n&&n.forEach((function(n){n.p===e&&(n.p=t,!t.deleted&&t.countable&&(n.index-=t.length))})),e.keep&&(this.keep=!0),this.right=e.right,null!==this.right&&(this.right.left=this),this.length+=e.length,!0}return!1}},{key:"delete",value:function(e){if(!this.deleted){var t=this.parent;this.countable&&null===this.parentSub&&(t._length-=this.length),this.markDeleted(),_a(e.deleteSet,this.id.client,this.id.clock,this.length),Ss(e,t,this.parentSub),this.content.delete(e)}}},{key:"gc",value:function(e,t){if(!this.deleted)throw No();this.content.gc(e),t?function(e,t,n){var i=e.clients.get(t.id.client);i[ms(i,t.id.clock)]=n}(e,this,new Bl(this.id,this.length)):this.content=new jl(this.length)}},{key:"write",value:function(e,t){var n=t>0?ns(this.id.client,this.id.clock+t-1):this.origin,i=this.rightOrigin,r=this.parentSub,o=31&this.content.getRef()|(null===n?0:Ir)|(null===i?0:Ar)|(null===r?0:32);if(e.writeInfo(o),null!==n&&e.writeLeftID(n),null!==i&&e.writeRightID(i),null===n&&null===i){var a=this.parent;if(void 0!==a._item){var s=a._item;if(null===s){var l=is(a);e.writeParentInfo(!0),e.writeString(l)}else e.writeParentInfo(!1),e.writeLeftID(s.id)}else a.constructor===String?(e.writeParentInfo(!0),e.writeString(a)):a.constructor===es?(e.writeParentInfo(!1),e.writeLeftID(a)):No();null!==r&&e.writeString(r)}this.content.write(e,t)}}]),n}(Fl),au=function(e,t){return su[31&t](e)},su=[function(){No()},function(e){return new jl(e.readLen())},function(e){for(var t=e.readLen(),n=[],i=0;i<t;i++){var r=e.readString();"undefined"===r?n.push(void 0):n.push(JSON.parse(r))}return new Kl(n)},function(e){return new Hl(e.readBuf())},function(e){return new Jl(e.readString())},function(e){return new Ul(e.readJSON())},function(e){return new Vl(e.readKey(),e.readJSON())},function(e){return new nu(Xl[e.readTypeRef()](e))},function(e){for(var t=e.readLen(),n=[],i=0;i<t;i++)n.push(e.readAny());return new ql(n)},function(e){return new Wl(zl(e.readString(),e.readAny()))},function(){No()}],lu=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"deleted",get:function(){return!0}},{key:"delete",value:function(){}},{key:"mergeWith",value:function(e){return this.constructor===e.constructor&&(this.length+=e.length,!0)}},{key:"integrate",value:function(e,t){No()}},{key:"write",value:function(e,t){e.writeInfo(10),so(e.restEncoder,this.length-t)}},{key:"getMissing",value:function(e,t){return null}}]),n}(Fl),uu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:{};!0===uu["__ $YJS$ __"]&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),uu["__ $YJS$ __"]=!0;Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),Ki=o("dVhHy");var cu,du,hu,fu=function(e){return Ro((function(t,n){e.onerror=function(e){return n(new Error(e.target.error))},e.onblocked=function(){return location.reload()},e.onsuccess=function(e){return t(e.target.result)}}))},pu=function(e){return fu(indexedDB.deleteDatabase(e))},gu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"readwrite",i=e.transaction(t,n);return t.map((function(e){return Cu(i,e)}))},vu=function(e,t){return fu(e.count(t))},mu=function(e,t){return fu(e.delete(t))},yu=function(e,t){return fu(e.add(t))},bu=function(e,t){return fu(e.getAll(t))},_u=function(e,t,n){var i=null;return ku(e,t,(function(e){return i=e,!1}),n).then((function(){return i}))},wu=function(e,t){return Ro((function(n,i){e.onerror=i,e.onsuccess=function(e){var i=e.target.result;if(null===i||!1===t(i))return n();i.continue()}}))},ku=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"next";return wu(e.openKeyCursor(t,i),(function(e){return n(e.key)}))},Cu=function(e,t){return e.objectStore(t)},xu=function(e,t){return IDBKeyRange.upperBound(e,t)},Su=function(){var e=!0;return function(t,n){if(e){e=!1;try{t()}finally{e=!0}}else void 0!==n&&n()}},Eu="custom",Du="updates",Au=function(e){var t,n,i=(0,Ki.default)(gu(e.db,[Du]),1)[0];return bu(i,(t=e._dbref,n=!1,IDBKeyRange.lowerBound(t,n))).then((function(t){return Rs(e.doc,(function(){t.forEach((function(t){return za(e.doc,t)}))}),e,!1)})).then((function(){return function(e){return _u(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,"prev")}(i).then((function(t){e._dbref=t+1}))})).then((function(){return vu(i).then((function(t){e._dbsize=t}))})).then((function(){return i}))},Iu=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this)).doc=i,r.name=e,r._mux=Su(),r._dbref=0,r._dbsize=0,r._destroyed=!1,r.db=null,r.synced=!1,r._db=function(e,t){return Ro((function(n,i){var r=indexedDB.open(e);r.onupgradeneeded=function(e){return t(e.target.result)},r.onerror=function(e){return i(Lo(e.target.error))},r.onblocked=function(){return location.reload()},r.onsuccess=function(e){var t=e.target.result;t.onversionchange=function(){t.close()},"undefined"!=typeof addEventListener&&addEventListener("unload",(function(){return t.close()})),n(t)}}))}(e,(function(e){return function(e,t){return t.forEach((function(t){return e.createObjectStore.apply(e,t)}))}(e,[["updates",{autoIncrement:!0}],["custom"]])})),r.whenSynced=r._db.then((function(e){r.db=e;var t=Ua(i);return Au(r).then((function(e){return yu(e,t)})).then((function(){return r._destroyed||(r.emit("synced",[(0,Hi.default)(r)]),r.synced=!0),(0,Hi.default)(r)}))})),r._storeTimeout=1e3,r._storeTimeoutId=null,r._storeUpdate=function(e,t){if(r.db&&t!==(0,Hi.default)(r)){var n=(0,Ki.default)(gu(r.db,[Du]),1)[0];yu(n,e),++r._dbsize>=500&&(null!==r._storeTimeoutId&&clearTimeout(r._storeTimeoutId),r._storeTimeoutId=setTimeout((function(){!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Au(e).then((function(n){(t||e._dbsize>=500)&&yu(n,Ua(e.doc)).then((function(){return mu(n,xu(e._dbref,!0))})).then((function(){return vu(n).then((function(t){e._dbsize=t}))}))}))}((0,Hi.default)(r),!1),r._storeTimeoutId=null}),r._storeTimeout))}},i.on("update",r._storeUpdate),r.destroy=r.destroy.bind((0,Hi.default)(r)),i.on("destroy",r.destroy),r}return(0,c.default)(n,[{key:"destroy",value:function(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then((function(e){e.close()}))}},{key:"clearData",value:function(){var e=this;return this.destroy().then((function(){pu(e.name)}))}},{key:"get",value:function(e){return this._db.then((function(t){return function(e,t){return fu(e.get(t))}((0,Ki.default)(gu(t,[Eu],"readonly"),1)[0],e)}))}},{key:"set",value:function(e,t){return this._db.then((function(n){return function(e,t,n){return fu(e.put(t,n))}((0,Ki.default)(gu(n,[Eu]),1)[0],t,e)}))}},{key:"del",value:function(e){return this._db.then((function(t){var n=(0,Ki.default)(gu(t,[Eu]),1)[0];return mu(n,e)}))}}]),n}(er),Ru=(Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),3e4),Tu=function(e){if(e.shouldConnect&&null===e.ws){var t=new WebSocket(e.url),n=e.binaryType,i=null;n&&(t.binaryType=n),e.ws=t,e.connecting=!0,e.connected=!1,t.onmessage=function(t){e.lastMessageReceived=Io();var n=t.data,r="string"==typeof n?JSON.parse(n):n;r&&"pong"===r.type&&(clearTimeout(i),i=setTimeout(o,15e3)),e.emit("message",[r,e])};var r=function(t){null!==e.ws&&(e.ws=null,e.connecting=!1,e.connected?(e.connected=!1,e.emit("disconnect",[{type:"disconnect",error:t},e])):e.unsuccessfulReconnects++,setTimeout(Tu,rr(1200*ir(e.unsuccessfulReconnects+1),2500),e)),clearTimeout(i)},o=function(){e.ws===t&&e.send({type:"ping"})};t.onclose=function(){return r(null)},t.onerror=function(e){return r(e)},t.onopen=function(){e.lastMessageReceived=Io(),e.connecting=!1,e.connected=!0,e.unsuccessfulReconnects=0,e.emit("connect",[{type:"connect"},e]),i=setTimeout(o,15e3)}}},Lu=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).binaryType;return(0,u.default)(this,n),(i=t.call(this)).url=e,i.ws=null,i.binaryType=r||null,i.connected=!1,i.connecting=!1,i.unsuccessfulReconnects=0,i.lastMessageReceived=0,i.shouldConnect=!0,i._checkInterval=setInterval((function(){i.connected&&Ru<Io()-i.lastMessageReceived&&i.ws.close()}),15e3),Tu((0,Hi.default)(i)),i}return(0,c.default)(n,[{key:"send",value:function(e){this.ws&&this.ws.send(JSON.stringify(e))}},{key:"destroy",value:function(){clearInterval(this._checkInterval),this.disconnect(),(0,zi.default)((0,Wi.default)(n.prototype),"destroy",this).call(this)}},{key:"disconnect",value:function(){this.shouldConnect=!1,null!==this.ws&&this.ws.close()}},{key:"connect",value:function(){this.shouldConnect=!0,this.connected||null!==this.ws||Tu(this)}}]),n}(er),Mu=(u=o("4JAgF"),c=o("9HoHC"),new Map),Nu="undefined"==typeof BroadcastChannel?function(){"use strict";function e(t){var n,i=this;(0,u.default)(this,e),this.room=t,this.onmessage=null,n=function(e){return e.key===t&&null!==i.onmessage&&i.onmessage({data:to(e.newValue||"")})},vr||addEventListener("storage",n)}return(0,c.default)(e,[{key:"postMessage",value:function(e){wr.setItem(this.room,eo(new Uint8Array(e)))}}]),e}():BroadcastChannel,Pu=function(e){return Gi(Mu,e,(function(){var t=new Set,n=new Nu(e);return n.onmessage=function(e){return t.forEach((function(t){return t(e.data,"broadcastchannel")}))},{bc:n,subs:t}}))},Ou={};u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),ji=o("bw73z"),qi=o("caN7I"),p=o("dCPLc"),h=o("8rJSp");cu=Math.floor,du=Math.abs,hu=Math.pow,Ou=function(){function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l=void 0;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return r(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}return e}()({1:[function(e,t,n){"use strict";var i=function(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]},r=function(e,t,n){return 3*(t+n)/4-n},o=function(e){var t,n,o=i(e),a=o[0],s=o[1],l=new d(r(e,a,s)),u=0,h=0<s?a-4:a;for(n=0;n<h;n+=4)t=c[e.charCodeAt(n)]<<18|c[e.charCodeAt(n+1)]<<12|c[e.charCodeAt(n+2)]<<6|c[e.charCodeAt(n+3)],l[u++]=255&t>>16,l[u++]=255&t>>8,l[u++]=255&t;return 2===s&&(t=c[e.charCodeAt(n)]<<2|c[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=c[e.charCodeAt(n)]<<10|c[e.charCodeAt(n+1)]<<4|c[e.charCodeAt(n+2)]>>2,l[u++]=255&t>>8,l[u++]=255&t),l},a=function(e){return u[63&e>>18]+u[63&e>>12]+u[63&e>>6]+u[63&e]},s=function(e,t,n){for(var i,r=[],o=t;o<n;o+=3)i=(16711680&e[o]<<16)+(65280&e[o+1]<<8)+(255&e[o+2]),r.push(a(i));return r.join("")},l=function(e){for(var t,n=e.length,i=n%3,r=[],o=16383,a=0,l=n-i;a<l;a+=o)r.push(s(e,a,a+o>l?l:a+o));return 1===i?(t=e[n-1],r.push(u[t>>2]+u[63&t<<4]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],r.push(u[t>>10]+u[63&t>>4]+u[63&t<<2]+"=")),r.join("")};n.byteLength=function(e){var t=i(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=o,n.fromByteArray=l;for(var u=[],c=[],d="undefined"==typeof Uint8Array?Array:Uint8Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,p=h.length;f<p;++f)u[f]=h[f],c[h.charCodeAt(f)]=f;c[45]=62,c[95]=63},{}],2:[function(){},{}],3:[function(e,t,n){(function(){(function(){"use strict";var t=function(e){if(2147483647<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=i.prototype,t},i=function(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return r(e,t,n)},r=function(e,t,n){if("string"==typeof e)return l(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":(0,p.default)(e)));if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return c(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return i.from(r,t,n);var o=d(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===e?"undefined":(0,p.default)(e)))},o=function(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('The value "'+e+'" is invalid for option "size"')},a=function(e,n,i){return o(e),0>=e||void 0===n?t(e):"string"==typeof i?t(e).fill(n,i):t(e).fill(n)},s=function(e){return o(e),t(0>e?0:0|h(e))},l=function(e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|f(e,n),o=t(r),a=o.write(e,n);return a!==r&&(o=o.slice(0,a)),o},u=function(e){for(var n=0>e.length?0:0|h(e.length),i=t(n),r=0;r<n;r+=1)i[r]=255&e[r];return i},c=function(e,t,n){if(0>t||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=i.prototype,r},d=function(e){if(i.isBuffer(e)){var n=0|h(e.length),r=t(n);return 0===r.length||e.copy(r,0,0,n),r}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0:"number"!=typeof e.length||K(e.length)?t(0):u(e)},h=function(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e},f=function(e,t){if(i.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===e?"undefined":(0,p.default)(e)));var n=e.length,r=2<arguments.length&&!0===arguments[2];if(!r&&0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(o)return r?-1:H(e).length;t=(""+t).toLowerCase(),o=!0}},g=function(e,t,n){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}},v=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i},m=function(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),K(n=+n)&&(n=o?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(0>n){if(!o)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")},y=function(e,t,n,i,r){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var a,s=1,l=e.length,u=t.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>e.length||2>t.length)return-1;s=2,l/=2,u/=2,n/=2}if(r){var c=-1;for(a=n;a<l;a++)if(o(e,a)!==o(t,-1===c?0:a-c))-1!==c&&(a-=a-c),c=-1;else if(-1===c&&(c=a),a-c+1===u)return c*s}else for(n+u>l&&(n=l-u),a=n;0<=a;a--){for(var d=!0,h=0;h<u;h++)if(o(e,a+h)!==o(t,h)){d=!1;break}if(d)return a}return-1},b=function(e,t,n,i){n=+n||0;var r=e.length-n;i?(i=+i)>r&&(i=r):i=r;var o=t.length;i>o/2&&(i=o/2);for(var a,s=0;s<i;++s){if(a=parseInt(t.substr(2*s,2),16),K(a))return s;e[n+s]=a}return s},_=function(e,t,n,i){return U(H(t,e.length-n),e,n,i)},w=function(e,t,n,i){return U(j(t),e,n,i)},k=function(e,t,n,i){return w(e,t,n,i)},C=function(e,t,n,i){return U(W(t),e,n,i)},x=function(e,t,n,i){return U(z(t,e.length-n),e,n,i)},S=function(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))},E=function(e,t,n){n=J(e.length,n);for(var i=[],r=t;r<n;){var o,a,s,l,u=e[r],c=null,d=239<u?4:223<u?3:191<u?2:1;r+d<=n&&(1===d?128>u&&(c=u):2===d?128==(192&(o=e[r+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l):3===d?(o=e[r+1],a=e[r+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(55296>l||57343<l)&&(c=l)):4===d&&(o=e[r+1],a=e[r+2],s=e[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&1114112>l&&(c=l))),null===c?(c=65533,d=1):65535<c&&(c-=65536,i.push(55296|1023&c>>>10),c=56320|1023&c),i.push(c),r+=d}return D(i)},D=function(e){var t=e.length;if(t<=4096)return q.apply(String,e);for(var n="",i=0;i<t;)n+=q.apply(String,e.slice(i,i+=4096));return n},A=function(e,t,n){var i="";n=J(e.length,n);for(var r=t;r<n;++r)i+=q(127&e[r]);return i},I=function(e,t,n){var i="";n=J(e.length,n);for(var r=t;r<n;++r)i+=q(e[r]);return i},R=function(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=B(e[o]);return r},T=function(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=q(i[o]+256*i[o+1]);return r},L=function(e,t,n){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")},M=function(e,t,n,r,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")},N=function(e,t,n,i){if(n+i>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")},P=function(e,t,n,i,r){return t=+t,n>>>=0,r||N(e,t,n,4,34028234663852886e22,-34028234663852886e22),G.write(e,t,n,i,23,4),n+4},O=function(e,t,n,i,r){return t=+t,n>>>=0,r||N(e,t,n,8,17976931348623157e292,-17976931348623157e292),G.write(e,t,n,i,52,8),n+8},F=function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(Z,"")).length)return"";for(;0!=e.length%4;)e+="=";return e},B=function(e){return 16>e?"0"+e.toString(16):e.toString(16)},H=function(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;a<i;++a){if(55295<(n=e.charCodeAt(a))&&57344>n){if(!r){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(a+1===i){-1<(t-=3)&&o.push(239,191,189);continue}r=n;continue}if(56320>n){-1<(t-=3)&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&-1<(t-=3)&&o.push(239,191,189);if(r=null,128>n){if(0>(t-=1))break;o.push(n)}else if(2048>n){if(0>(t-=2))break;o.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(t-=3))break;o.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(t-=4))break;o.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return o},j=function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t},z=function(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!(0>(t-=2));++a)i=(n=e.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i);return o},W=function(e){return X.toByteArray(F(e))},U=function(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r},V=function(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name},K=function(e){return e!=e},q=String.fromCharCode,J=Math.min,X=e("base64-js"),G=e("ieee754");n.Buffer=i,n.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},n.INSPECT_MAX_BYTES=50,n.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){return i.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){return i.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,n){return r(e,t,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,n){return a(e,t,n)},i.allocUnsafe=function(e){return s(e)},i.allocUnsafeSlow=function(e){return s(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==i.prototype},i.compare=function(e,t){if(V(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=J(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(V(a,Uint8Array)&&(a=i.from(a)),!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,o){if(V(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===e?"undefined":(0,p.default)(e)));if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),0>t||n>e.length||0>r||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),l=J(a,s),u=this.slice(r,o),c=e.slice(t,n),d=0;d<l;++d)if(u[d]!==c[d]){a=u[d],s=c[d];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},i.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),0<e.length&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(e,t){var n=this.length;0>(e=~~e)?0>(e+=n)&&(e=0):e>n&&(e=n),0>(t=void 0===t?n:~~t)?0>(t+=n)&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},i.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var i=this[e+--t],r=1;0<t&&(r*=256);)i+=this[e+--t]*r;return i},i.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i>=(r*=128)&&(i-=hu(2,8*t)),i},i.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||L(e,t,this.length);for(var i=t,r=1,o=this[e+--i];0<i&&(r*=256);)o+=this[e+--i]*r;return o>=(r*=128)&&(o-=hu(2,8*t)),o},i.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),G.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),G.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),G.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),G.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){var r=hu(2,8*n)-1;M(this,e,t,n,r,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=255&e/o;return t+n},i.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t>>>=0,n>>>=0,!i){var r=hu(2,8*n)-1;M(this,e,t,n,r,0)}var o=n-1,a=1;for(this[t+o]=255&e;0<=--o&&(a*=256);)this[t+o]=255&e/a;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=hu(2,8*n-1);M(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)0>e&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=255&(e/a>>0)-s;return t+n},i.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){var r=hu(2,8*n-1);M(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;0<=--o&&(a*=256);)0>e&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=255&(e/a>>0)-s;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||M(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return O(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return O(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(!i.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),0<r&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=o-1;0<=a;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return o},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var o=e.charCodeAt(0);("utf8"===r&&128>o||"latin1"===r)&&(e=o)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=i.isBuffer(e)?e:i.from(e,r),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%l]}return this};var Z=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(e,t,n){(function(i){(function(){var r,o=function(){var e;try{e=n.storage.getItem("debug")}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e};n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"===e||(i++,"%c"===e&&(r=i))})),e.splice(r,0,n)}},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(e){}},n.load=o,n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||function(){},t.exports=e("./common")(n),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":5,_process:12}],5:[function(e,t){t.exports=function(t){var n=function(e,t){var n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n},i=function(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")};function r(e){function t(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];if(t.enabled){var a=t,s=+new Date,l=s-(i||s);a.diff=l,a.prev=i,a.curr=s,i=s,n[0]=r.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return"%";u++;var i=r.formatters[t];if("function"==typeof i){var o=n[u];e=i.call(a,o),n.splice(u,1),u--}return e})),r.formatArgs.call(a,n),(a.log||r.log).apply(a,n)}}var i,o=null;return t.namespace=e,t.useColors=r.useColors(),t.color=r.selectColor(e),t.extend=n,t.destroy=r.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?r.enabled(e):o},set:function(e){o=e}}),"function"==typeof r.init&&r.init(t),t}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){var e=(0,qi.default)(r.names.map(i)).concat((0,qi.default)(r.skips.map(i).map((function(e){return"-"+e})))).join(",");return r.enable(""),e},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((function(e){r[e]=t[e]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return r.colors[du(t)%r.colors.length]},r.enable(r.load()),r}},{ms:11}],6:[function(e,t){"use strict";var n=function(e,t){for(var n in t)Object.defineProperty(e,n,{value:t[n],enumerable:!0,configurable:!0});return e};t.exports=function(e,t,i){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");i||(i={}),"object"==typeof t&&(i=t,t=""),t&&(i.code=t);try{return n(e,i)}catch(t){i.message=e.message,i.stack=e.stack;var r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(e)),n(new r,i)}}},{}],7:[function(e,t){"use strict";var n=function(e){console&&console.warn&&console.warn(e)},i=function(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+(void 0===e?"undefined":(0,p.default)(e)))},r=function(e){return void 0===e._maxListeners?v.defaultMaxListeners:e._maxListeners},o=function(e,t,o,a){var s,l,u;if(i(o),void 0===(l=e._events)?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,o.listener?o.listener:o),l=e._events),u=l[t]),void 0===u)u=l[t]=o,++e._eventsCount;else if("function"==typeof u?u=l[t]=a?[o,u]:[u,o]:a?u.unshift(o):u.push(o),0<(s=r(e))&&u.length>s&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,n(c)}return e},a=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)},s=function(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=a.bind(i);return r.listener=n,i.wrapFn=r,r},l=function(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?h(r):c(r,r.length)},u=function(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0},c=function(e,t){for(var n=Array(t),i=0;i<t;++i)n[i]=e[i];return n},d=function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()},h=function(e){for(var t=Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t},f=function(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)},g=function(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+(void 0===e?"undefined":(0,p.default)(e)));e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}};function v(){v.init.call(this)}var m,y="object"==typeof Reflect?Reflect:null,b=y&&"function"==typeof y.apply?y.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};m=y&&"function"==typeof y.ownKeys?y.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var _=Number.isNaN||function(e){return e!=e};t.exports=v,t.exports.once=function(e,t){return new Promise((function(n,i){var r=function(n){e.removeListener(t,o),i(n)},o=function(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))};g(e,t,o,{once:!0}),"error"!==t&&f(e,r,{once:!0})}))},v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var w=10;Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(e){if("number"!=typeof e||0>e||_(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");w=e}}),v.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||_(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},v.prototype.getMaxListeners=function(){return r(this)},v.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=r[e];if(void 0===s)return!1;if("function"==typeof s)b(s,this,t);else{var l=s.length,u=c(s,l);for(n=0;n<l;++n)b(u[n],this,t)}return!0},v.prototype.addListener=function(e,t){return o(this,e,t,!1)},v.prototype.on=v.prototype.addListener,v.prototype.prependListener=function(e,t){return o(this,e,t,!0)},v.prototype.once=function(e,t){return i(t),this.on(e,s(this,e,t)),this},v.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,s(this,e,t)),this},v.prototype.removeListener=function(e,t){var n,r,o,a,s;if(i(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;0<=a;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(0>o)return this;0===o?n.shift():d(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;0<=i;i--)this.removeListener(e,t[i]);return this},v.prototype.listeners=function(e){return l(this,e,!0)},v.prototype.rawListeners=function(e){return l(this,e,!1)},v.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):u.call(e,t)},v.prototype.listenerCount=u,v.prototype.eventNames=function(){return 0<this._eventsCount?m(this._events):[]}},{}],8:[function(e,t){t.exports=function(){if("undefined"==typeof globalThis)return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],9:[function(e,t,n){n.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+e[t+d],d+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;0<c;a=256*a+e[t+d],d+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=hu(2,i),o-=u}return(f?-1:1)*a*hu(2,o-i)},n.write=function(e,t,n,i,r,o){var a,s,l,u=Math.LN2,c=Math.log,d=8*o-r-1,h=(1<<d)-1,f=h>>1,p=23===r?hu(2,-24)-hu(2,-77):0,g=i?0:o-1,v=i?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=du(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=h):(a=cu(c(t)/u),1>t*(l=hu(2,-a))&&(a--,l*=2),2<=(t+=1<=a+f?p/l:p*hu(2,1-f))*l&&(a++,l/=2),a+f>=h?(s=0,a=h):1<=a+f?(s=(t*l-1)*hu(2,r),a+=f):(s=t*hu(2,f-1)*hu(2,r),a=0));8<=r;e[n+g]=255&s,g+=v,s/=256,r-=8);for(a=a<<r|s,d+=r;0<d;e[n+g]=255&a,g+=v,a/=256,d-=8);e[n+g-v]|=128*m}},{}],10:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],11:[function(e,t){var n=function(e){if(!(100<(e+="").length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();return"years"===i||"year"===i||"yrs"===i||"yr"===i||"y"===i?315576e5*n:"weeks"===i||"week"===i||"w"===i?6048e5*n:"days"===i||"day"===i||"d"===i?864e5*n:"hours"===i||"hour"===i||"hrs"===i||"hr"===i||"h"===i?36e5*n:"minutes"===i||"minute"===i||"mins"===i||"min"===i||"m"===i?6e4*n:"seconds"===i||"second"===i||"secs"===i||"sec"===i||"s"===i?1e3*n:"milliseconds"===i||"millisecond"===i||"msecs"===i||"msec"===i||"ms"===i?n:void 0}}},i=function(e){var t=du(e);return 864e5<=t?a(e/864e5)+"d":36e5<=t?a(e/36e5)+"h":6e4<=t?a(e/6e4)+"m":1e3<=t?a(e/1e3)+"s":e+"ms"},r=function(e){var t=du(e);return 864e5<=t?o(e,t,864e5,"day"):36e5<=t?o(e,t,36e5,"hour"):6e4<=t?o(e,t,6e4,"minute"):1e3<=t?o(e,t,1e3,"second"):e+" ms"},o=function(e,t,n,i){return a(e/n)+" "+i+(t>=1.5*n?"s":"")},a=Math.round;t.exports=function(e,t){t=t||{};var o=void 0===e?"undefined":(0,p.default)(e);if("string"==o&&0<e.length)return n(e);if("number"===o&&isFinite(e))return t.long?r(e):i(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],12:[function(e,t){var n,i,r=function(){throw new Error("setTimeout has not been defined")},o=function(){throw new Error("clearTimeout has not been defined")},a=function(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}},s=function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}},l=function(){g&&f&&(g=!1,f.length?p=f.concat(p):v=-1,p.length&&u())},u=function(){if(!g){var e=a(l);g=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,g=!1,s(e)}},c=function(e,t){this.fun=e,this.array=t},d=function(){},h=t.exports={};!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var f,p=[],g=!1,v=-1;h.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||g||a(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=d,h.addListener=d,h.once=d,h.off=d,h.removeListener=d,h.removeAllListeners=d,h.emit=d,h.prependListener=d,h.prependOnceListener=d,h.listeners=function(){return[]},h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],13:[function(e,n){(function(e){(function(){var t;n.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"==typeof window?e:window):function(e){return(t||(t=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))}}).call(this)}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],14:[function(e,n){(function(t,i){(function(){"use strict";var r=e("safe-buffer").Buffer,o=i.crypto||i.msCrypto;n.exports=o&&o.getRandomValues?function(e,n){if(e>4294967295)throw new RangeError("requested too many random bytes");var i=r.allocUnsafe(e);if(0<e)if(65536<e)for(var a=0;a<e;a+=65536)o.getRandomValues(i.slice(a,a+65536));else o.getRandomValues(i);return"function"==typeof n?t.nextTick((function(){n(null,i)})):i}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{_process:12,"safe-buffer":30}],15:[function(e,t){"use strict";var n=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},i=function(e,t,i){function r(e,n,i){return"string"==typeof t?t:t(e,n,i)}i||(i=Error);var o=function(e){function t(t,n,i){return e.call(this,r(t,n,i))||this}return n(t,e),t}(i);o.prototype.name=i.name,o.prototype.code=e,l[e]=o},r=function(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return e+""})),2<n?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")},o=function(e,t,n){return e.substr(!n||0>n?0:+n,t.length)===t},a=function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t},s=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)},l={};i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,l;if("string"==typeof t&&o(t,"not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be",a(e," argument"))l="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var u=s(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(r(t,"type"))}return l+=". Received type ".concat(void 0===n?"undefined":(0,p.default)(n))}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=l},{}],16:[function(e,t){(function(n){(function(){"use strict";var i=function(){this._writableState.ended||n.nextTick(r,this)},r=function(e){e.end()};function o(e){return this instanceof o?(s.call(this,e),l.call(this,e),this.allowHalfOpen=!0,void(e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i))))):new o(e)}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=o;var s=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(o,s);for(var u,c=a(l.prototype),d=0;d<c.length;d++)u=c[d],o.prototype[u]||(o.prototype[u]=l.prototype[u]);Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.exports=n;var i=e("./_stream_transform");e("inherits")(n,i),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,inherits:10}],18:[function(e,n){(function(t,i){(function(){"use strict";var r,o=function(e){return M.from(e)},a=function(e){return M.isBuffer(e)||e instanceof N},s=function(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))},l=function(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=z(this,t,"readableHighWaterMark",i),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!O&&(O=e("string_decoder/").StringDecoder),this.decoder=new O(t.encoding),this.encoding=t.encoding)},u=function(e,t,n,i,r){R("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,p(e,s);else if(r||(a=d(s,t)),a)J(e,a);else if(s.objectMode||t&&0<t.length)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===M.prototype||(t=o(t)),i)s.endEmitted?J(e,new q):c(e,s,t,!0);else if(s.ended)J(e,new V);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?c(e,s,t,!1):m(e,s)):c(e,s,t,!1)}else i||(s.reading=!1,m(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)},c=function(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),m(e,t)},d=function(e,t){var n;return a(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new U("chunk",["string","Buffer","Uint8Array"],t)),n},h=function(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e},f=function(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e==e?(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length},p=function(e,t){if(R("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?g(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,v(e)))}},g=function(e){var n=e._readableState;R("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(R("emitReadable",n.flowing),n.emittedReadable=!0,t.nextTick(v,e))},v=function(e){var t=e._readableState;R("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,x(e)},m=function(e,n){n.readingMore||(n.readingMore=!0,t.nextTick(y,e,n))},y=function(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(R("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1},b=function(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&T(e,"data")&&(t.flowing=!0,x(e))}},_=function(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()},w=function(e){R("readable nexttick read 0"),e.read(0)},k=function(e,n){n.resumeScheduled||(n.resumeScheduled=!0,t.nextTick(C,e,n))},C=function(e,t){R("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)},x=function(e){var t=e._readableState;for(R("flow",t.flowing);t.flowing&&null!==e.read(););},S=function(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n},E=function(e){var n=e._readableState;R("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,t.nextTick(D,n,e))},D=function(e,t){if(R("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}},A=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1};function I(t){if(r=r||e("./_stream_duplex"),!(this instanceof I))return new I(t);var n=this instanceof r;this._readableState=new l(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),L.call(this)}n.exports=I,I.ReadableState=l,e("events").EventEmitter;var R,T=function(e,t){return e.listeners(t).length},L=e("./internal/streams/stream"),M=e("buffer").Buffer,N=i.Uint8Array||function(){},P=e("util");R=P&&P.debuglog?P.debuglog("stream"):function(){};var O,F,B,H=e("./internal/streams/buffer_list"),j=e("./internal/streams/destroy"),z=e("./internal/streams/state").getHighWaterMark,W=e("../errors").codes,U=W.ERR_INVALID_ARG_TYPE,V=W.ERR_STREAM_PUSH_AFTER_EOF,K=W.ERR_METHOD_NOT_IMPLEMENTED,q=W.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(I,L);var J=j.errorOrDestroy,X=["error","close","destroy","pause","resume"];Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=j.destroy,I.prototype._undestroy=j.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=M.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},I.prototype.unshift=function(e){return u(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){O||(O=e("string_decoder/").StringDecoder);var n=new O(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=n.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this},I.prototype.read=function(e){R("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):g(this),null;if(0===(e=f(e,t))&&t.ended)return 0===t.length&&E(this),null;var i,r=t.needReadable;return R("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&R("length less than watermark",r=!0),t.ended||t.reading?R("reading or ended",r=!1):r&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=f(n,t))),null===(i=0<e?S(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==i&&this.emit("data",i),i},I.prototype._read=function(){J(this,new K("_read()"))},I.prototype.pipe=function(e,n){var i=function(e,t){R("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())},r=function(){R("onend"),e.end()},o=function(){R("cleanup"),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("drain",g),e.removeListener("error",d),e.removeListener("unpipe",i),h.removeListener("end",r),h.removeListener("end",c),h.removeListener("data",a),v=!0,f.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&g()},a=function(t){R("ondata");var n=e.write(t);R("dest.write",n),!1===n&&((1===f.pipesCount&&f.pipes===e||1<f.pipesCount&&-1!==A(f.pipes,e))&&!v&&(R("false write response, pause",f.awaitDrain),f.awaitDrain++),h.pause())},l=function(){e.removeListener("finish",u),c()},u=function(){R("onfinish"),e.removeListener("close",l),c()},c=function(){R("unpipe"),h.unpipe(e)};function d(t){R("onerror",t),c(),e.removeListener("error",d),0===T(e,"error")&&J(e,t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e)}f.pipesCount+=1,R("pipe count=%d opts=%j",f.pipesCount,n);var p=n&&!1===n.end||e===t.stdout||e===t.stderr?c:r;f.endEmitted?t.nextTick(p):h.once("end",p),e.on("unpipe",i);var g=b(h);e.on("drain",g);var v=!1;return h.on("data",a),s(e,"error",d),e.once("close",l),e.once("finish",u),e.emit("pipe",h),f.flowing||(R("pipe resume"),h.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<r;o++)i[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=A(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},I.prototype.on=function(e,n){var i=L.prototype.on.call(this,e,n),r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"==e&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,R("on readable",r.length,r.reading),r.length?g(this):!r.reading&&t.nextTick(w,this)),i},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,n){var i=L.prototype.removeListener.call(this,e,n);return"readable"===e&&t.nextTick(_,this),i},I.prototype.removeAllListeners=function(e){var n=L.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&t.nextTick(_,this),n},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!e.readableListening,k(this,e)),e.paused=!1,this},I.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(R("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){R("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||!(n.objectMode||r&&r.length)||t.push(r)||(i=!0,e.pause())})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<X.length;o++)e.on(X[o],this.emit.bind(this,X[o]));return this._read=function(t){R("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===F&&(F=e("./internal/streams/async_iterator")),F(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=S,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(t,n){return void 0===B&&(B=e("./internal/streams/from")),B(I,t,n)})}).call(this)}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(e,t){"use strict";var n=function(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new l);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)},i=function(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?r(this,null,null):this._flush((function(t,n){r(e,t,n)}))},r=function(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new c;if(e._transformState.transforming)throw new u;return e.push(null)};function o(e){return this instanceof o?(d.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),void this.on("prefinish",i)):new o(e)}t.exports=o;var a=e("../errors").codes,s=a.ERR_METHOD_NOT_IMPLEMENTED,l=a.ERR_MULTIPLE_CALLBACK,u=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,c=a.ERR_TRANSFORM_WITH_LENGTH_0,d=e("./_stream_duplex");e("inherits")(o,d),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){n(new s("_transform()"))},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},o.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(e,n){(function(t,i){(function(){"use strict";var r,o=function(e){var t=this;this.next=null,this.entry=null,this.finish=function(){E(t,e)}},a=function(e){return T.from(e)},s=function(e){return T.isBuffer(e)||e instanceof L},l=function(){},u=function(t,n,i){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=n instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=N(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){m(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)},c=function(e,n){var i=new W;V(e,i),t.nextTick(n,i)},d=function(e,n,i,r){var o;return null===i?o=new z:"string"!=typeof i&&!n.objectMode&&(o=new O("chunk",["string","Buffer"],i)),!o||(V(e,o),t.nextTick(r,o),!1)},h=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=T.from(t,n)),t},f=function(e,t,n,i,r,o){if(!n){var a=h(t,i,r);i!==a&&(n=!0,r="buffer",i=a)}var s=t.objectMode?1:i.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,s,i,r,o);return l},p=function(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new j("write")):n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1},g=function(e,n,i,r,o){--n.pendingcb,i?(t.nextTick(o,r),t.nextTick(x,e,n),e._writableState.errorEmitted=!0,V(e,r)):(o(r),e._writableState.errorEmitted=!0,V(e,r),x(e,n))},v=function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0},m=function(e,n){var i=e._writableState,r=i.sync,o=i.writecb;if("function"!=typeof o)throw new B;if(v(i),n)g(e,i,r,n,o);else{var a=w(i)||e.destroyed;a||i.corked||i.bufferProcessing||!i.bufferedRequest||_(e,i),r?t.nextTick(y,e,i,a,o):y(e,i,a,o)}},y=function(e,t,n,i){n||b(e,t),t.pendingcb--,i(),x(e,t)},b=function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))},_=function(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=Array(i),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,p(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback,h=t.objectMode?1:u.length;if(p(e,t,!1,h,u,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1},w=function(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing},k=function(e,t){e._final((function(n){t.pendingcb--,n&&V(e,n),t.prefinished=!0,e.emit("prefinish"),x(e,t)}))},C=function(e,n){n.prefinished||n.finalCalled||("function"!=typeof e._final||n.destroyed?(n.prefinished=!0,e.emit("prefinish")):(n.pendingcb++,n.finalCalled=!0,t.nextTick(k,e,n)))},x=function(e,t){var n=w(t);if(n&&(C(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n},S=function(e,n,i){n.ending=!0,x(e,n),i&&(n.finished?t.nextTick(i):e.once("finish",i)),n.ended=!0,e.writable=!1},E=function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e};function D(t){var n=this instanceof(r=r||e("./_stream_duplex"));return n||A.call(D,this)?(this._writableState=new u(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),void R.call(this)):new D(t)}n.exports=D,D.WritableState=u;var A,I={deprecate:e("util-deprecate")},R=e("./internal/streams/stream"),T=e("buffer").Buffer,L=i.Uint8Array||function(){},M=e("./internal/streams/destroy"),N=e("./internal/streams/state").getHighWaterMark,P=e("../errors").codes,O=P.ERR_INVALID_ARG_TYPE,F=P.ERR_METHOD_NOT_IMPLEMENTED,B=P.ERR_MULTIPLE_CALLBACK,H=P.ERR_STREAM_CANNOT_PIPE,j=P.ERR_STREAM_DESTROYED,z=P.ERR_STREAM_NULL_VALUES,W=P.ERR_STREAM_WRITE_AFTER_END,U=P.ERR_UNKNOWN_ENCODING,V=M.errorOrDestroy;e("inherits")(D,R),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:I.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(A=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(e){return!!A.call(this,e)||!(this!==D)&&e&&e._writableState instanceof u}})):A=function(e){return e instanceof this},D.prototype.pipe=function(){V(this,new H)},D.prototype.write=function(e,t,n){var i=this._writableState,r=!1,o=!i.objectMode&&s(e);return o&&!T.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":!t&&(t=i.defaultEncoding),"function"!=typeof n&&(n=l),i.ending?c(this,n):(o||d(this,i,e,n))&&(i.pendingcb++,r=f(this,i,o,e,t,n)),r},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&_(this,e))},D.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new U(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),D.prototype._write=function(e,t,n){n(new F("_write()"))},D.prototype._writev=null,D.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||S(this,i,n),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),D.prototype.destroy=M.destroy,D.prototype._undestroy=M.undestroy,D.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(e,t){(function(n){(function(){"use strict";var i,r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},o=function(e,t){return{value:e,done:t}},a=function(e){var t=e[c];if(null!==t){var n=e[v].read();null!==n&&(e[p]=null,e[c]=null,e[d]=null,t(o(n,!1)))}},s=function(e){n.nextTick(a,e)},l=function(e,t){return function(n,i){e.then((function(){return t[f]?void n(o(void 0,!0)):void t[g](n,i)}),i)}},u=e("./end-of-stream"),c=Symbol("lastResolve"),d=Symbol("lastReject"),h=Symbol("error"),f=Symbol("ended"),p=Symbol("lastPromise"),g=Symbol("handlePromise"),v=Symbol("stream"),m=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i={get stream(){return this[v]},next:function(){var e=this,t=this[h];if(null!==t)return Promise.reject(t);if(this[f])return Promise.resolve(o(void 0,!0));if(this[v].destroyed)return new Promise((function(t,i){n.nextTick((function(){e[h]?i(e[h]):t(o(void 0,!0))}))}));var i,r=this[p];if(r)i=new Promise(l(r,this));else{var a=this[v].read();if(null!==a)return Promise.resolve(o(a,!1));i=new Promise(this[g])}return this[p]=i,i}},r(i,Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var e=this;return new Promise((function(t,n){e[v].destroy(null,(function(e){return e?void n(e):void t(o(void 0,!0))}))}))})),i),m);t.exports=function(e){var t,n=Object.create(y,(r(t={},v,{value:e,writable:!0}),r(t,c,{value:null,writable:!0}),r(t,d,{value:null,writable:!0}),r(t,h,{value:null,writable:!0}),r(t,f,{value:e._readableState.endEmitted,writable:!0}),r(t,g,{value:function(e,t){var i=n[v].read();i?(n[p]=null,n[c]=null,n[d]=null,e(o(i,!1))):(n[c]=e,n[d]=t)},writable:!0}),t));return n[p]=null,u(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[d];return null!==t&&(n[p]=null,n[c]=null,n[d]=null,t(e)),void(n[h]=e)}var i=n[c];null!==i&&(n[p]=null,n[c]=null,n[d]=null,i(o(void 0,!0))),n[f]=!0})),e.on("readable",s.bind(null,n)),n}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":24,_process:12}],22:[function(e,t){"use strict";var n=function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n},i=function(e){for(var t,i=arguments,o=function(o,a){o=null==i[a]?{}:i[a],a%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})),t=o},a=1;a<arguments.length;a++)o(t,a);return e},r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=function(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)},s=function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e},l=function(e,t,n){u.prototype.copy.call(e,t,n)},u=e("buffer").Buffer,c=e("util").inspect,d=c&&c.custom||"inspect";t.exports=function(){function e(){o(this,e),this.head=null,this.tail=null,this.length=0}return s(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),n=this.head,i=0;n;)l(n.data,t,i),i+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,o=e>r.length?r.length:e;if(i+=o===r.length?r:r.slice(0,e),0==(e-=o)){o===r.length?(++n,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=r.slice(o));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,o=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,o),0==(e-=o)){o===r.length?(++i,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=r.slice(o));break}++i}return this.length-=i,t}},{key:d,value:function(e,t){return c(this,i({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:3,util:2}],23:[function(e,t){(function(e){(function(){"use strict";var n=function(e,t){r(e,t),i(e)},i=function(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")},r=function(e,t){e.emit("error",t)};t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(o?o(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(r,this,t)):e.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(i,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(i,a),o(t)):e.nextTick(i,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:12}],24:[function(e,t){"use strict";var n=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}},i=function(){},r=function(e){return e.setHeader&&"function"==typeof e.abort};function o(e,t,s){if("function"==typeof t)return o(e,null,t);t||(t={}),s=n(s||i);var l=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,c=function(){e.writable||h()},d=e._writableState&&e._writableState.finished,h=function(){u=!1,d=!0,l||s.call(e)},f=e._readableState&&e._readableState.endEmitted,p=function(){l=!1,f=!0,u||s.call(e)},g=function(t){s.call(e,t)},v=function(){var t;return l&&!f?(e._readableState&&e._readableState.ended||(t=new a),s.call(e,t)):u&&!d?(e._writableState&&e._writableState.ended||(t=new a),s.call(e,t)):void 0},m=function(){e.req.on("finish",h)};return r(e)?(e.on("complete",h),e.on("abort",v),e.req?m():e.on("request",m)):u&&!e._writableState&&(e.on("end",c),e.on("close",c)),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",g),e.on("close",v),function(){e.removeListener("complete",h),e.removeListener("abort",v),e.removeListener("request",m),e.req&&e.req.removeListener("finish",h),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",h),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",v)}}var a=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=o},{"../../../errors":15}],25:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(e,t){"use strict";var n,i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}},r=function(e){if(e)throw e},o=function(e){return e.setHeader&&"function"==typeof e.abort},a=function(t,r,a,s){s=i(s);var l=!1;t.on("close",(function(){l=!0})),void 0===n&&(n=e("./end-of-stream")),n(t,{readable:r,writable:a},(function(e){return e?s(e):(l=!0,void s())}));var u=!1;return function(e){if(!l)return u?void 0:(u=!0,o(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new h("pipe")))}},s=function(e){e()},l=function(e,t){return e.pipe(t)},u=function(e){return e.length&&"function"==typeof e[e.length-1]?e.pop():r},c=e("../../../errors").codes,d=c.ERR_MISSING_ARGS,h=c.ERR_STREAM_DESTROYED;t.exports=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=u(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new d("streams");var r,o=t.map((function(e,n){var l=n<t.length-1;return a(e,l,0<n,(function(e){r||(r=e),e&&o.forEach(s),l||(o.forEach(s),i(r))}))}));return t.reduce(l)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(e,t){"use strict";var n=function(e,t,n){return null==e.highWaterMark?t?e[n]:null:e.highWaterMark},i=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,o){var a=n(t,o,r);if(null!=a){if(!isFinite(a)||cu(a)!==a||0>a)throw new i(o?r:"highWaterMark",a);return cu(a)}return e.objectMode?16:16384}}},{"../../../errors":15}],28:[function(e,t){t.exports=e("events").EventEmitter},{events:7}],29:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(e,t,n){var i=function(e,t){for(var n in e)t[n]=e[n]},r=function(e,t,n){return a(e,t,n)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */,o=e("buffer"),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(i(o,n),n.Buffer=r),r.prototype=Object.create(a.prototype),i(a,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0===t?i.fill(0):"string"==typeof n?i.fill(t,n):i.fill(t),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:3}],31:[function(e,t,n){"use strict";var i=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}},r=function(e){var t=i(e);if("string"!=typeof t&&(v.isEncoding===m||!m(e)))throw new Error("Unknown encoding: "+e);return t||e},o=function(e){var t;switch(this.encoding=r(e),this.encoding){case"utf16le":this.text=c,this.end=d,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=f,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=v.allocUnsafe(t)},a=function(e){return 127>=e?0:6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2},s=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=a(t[i]);return 0<=r?(0<r&&(e.lastNeed=r-1),r):--i<n||-2===r?0:0<=(r=a(t[i]))?(0<r&&(e.lastNeed=r-2),r):--i<n||-2===r?0:0<=(r=a(t[i]))?(0<r&&(2===r?r=0:e.lastNeed=r-3),r):0},l=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,""}},u=function(e){var t=this.lastTotal-this.lastNeed,n=l(this,e,t);return void 0===n?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length)):n},c=function(e,t){if(0==(e.length-t)%2){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(55296<=i&&56319>=i)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)},d=function(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t},h=function(e,t){var n=(e.length-t)%3;return 0==n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))},f=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t},p=function(e){return e.toString(this.encoding)},g=function(e){return e&&e.length?this.write(e):""},v=e("safe-buffer").Buffer,m=v.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},{"safe-buffer":30}],32:[function(e,n){(function(e){(function(){var t=function(t){try{if(!e.localStorage)return!1}catch(e){return!1}var n=e.localStorage[t];return null!=n&&"true"===(n+"").toLowerCase()};n.exports=function(e,n){var i=function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)};if(t("noDeprecation"))return e;var r=!1;return i}}).call(this)}).call(this,void 0===t?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:t)},{}],"/":[function(e,t){var n=function(e){return e.replace(/a=ice-options:trickle\s\n/g,"")},i=function(e){console.warn(e)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */,r=e("debug")("simple-peer"),o=e("get-browser-rtc"),a=e("randombytes"),s=e("readable-stream"),l=e("queue-microtask"),f=e("err-code"),p=e("buffer").Buffer,g=65536,v=function(e){"use strict";(0,d.default)(s,e);var t=(0,h.default)(s);function s(e){var n;if((0,u.default)(this,s),e=Object.assign({allowHalfOpen:!1},e),(n=t.call(this,e))._id=a(4).toString("hex").slice(0,7),n._debug("new peer %o",e),n.channelName=e.initiator?e.channelName||a(20).toString("hex"):null,n.initiator=e.initiator||!1,n.channelConfig=e.channelConfig||s.channelConfig,n.channelNegotiated=n.channelConfig.negotiated,n.config=Object.assign({},s.config,e.config),n.offerOptions=e.offerOptions||{},n.answerOptions=e.answerOptions||{},n.sdpTransform=e.sdpTransform||function(e){return e},n.streams=e.streams||(e.stream?[e.stream]:[]),n.trickle=void 0===e.trickle||e.trickle,n.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,n.iceCompleteTimeout=e.iceCompleteTimeout||5e3,n.destroyed=!1,n.destroying=!1,n._connected=!1,n.remoteAddress=void 0,n.remoteFamily=void 0,n.remotePort=void 0,n.localAddress=void 0,n.localFamily=void 0,n.localPort=void 0,n._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:o(),!n._wrtc)throw"undefined"==typeof window?f(new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"),"ERR_WEBRTC_SUPPORT"):f(new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");n._pcReady=!1,n._channelReady=!1,n._iceComplete=!1,n._iceCompleteTimer=null,n._channel=null,n._pendingCandidates=[],n._isNegotiating=!1,n._firstNegotiation=!0,n._batchedNegotiation=!1,n._queuedNegotiation=!1,n._sendersAwaitingStable=[],n._senderMap=new Map,n._closingInterval=null,n._remoteTracks=[],n._remoteStreams=[],n._chunk=null,n._cb=null,n._interval=null;try{n._pc=new n._wrtc.RTCPeerConnection(n.config)}catch(e){return(0,ji.default)(n,void n.destroy(f(e,"ERR_PC_CONSTRUCTOR")))}return n._isReactNativeWebrtc="number"==typeof n._pc._peerConnectionId,n._pc.oniceconnectionstatechange=function(){n._onIceStateChange()},n._pc.onicegatheringstatechange=function(){n._onIceStateChange()},n._pc.onconnectionstatechange=function(){n._onConnectionStateChange()},n._pc.onsignalingstatechange=function(){n._onSignalingStateChange()},n._pc.onicecandidate=function(e){n._onIceCandidate(e)},"object"==typeof n._pc.peerIdentity&&n._pc.peerIdentity.catch((function(e){n.destroy(f(e,"ERR_PC_PEER_IDENTITY"))})),n.initiator||n.channelNegotiated?n._setupData({channel:n._pc.createDataChannel(n.channelName,n.channelConfig)}):n._pc.ondatachannel=function(e){n._setupData(e)},n.streams&&n.streams.forEach((function(e){n.addStream(e)})),n._pc.ontrack=function(e){n._onTrack(e)},n._debug("initial negotiation"),n._needsNegotiation(),n._onFinishBound=function(){n._onFinish()},n.once("finish",n._onFinishBound),(0,ji.default)(n)}return(0,c.default)(s,[{key:"bufferSize",get:function(){return this._channel&&this._channel.bufferedAmount||0}},{key:"connected",get:function(){return this._connected&&"open"===this._channel.readyState}},{key:"address",value:function(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}},{key:"signal",value:function(e){var t=this;if(!this.destroying){if(this.destroyed)throw f(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(f(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(f(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}},{key:"_addIceCandidate",value:function(e){var t=this,n=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(n).catch((function(e){!n.address||n.address.endsWith(".local")?i("Ignoring unsupported ICE candidate."):t.destroy(f(e,"ERR_ADD_ICE_CANDIDATE"))}))}},{key:"send",value:function(e){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(e)}}},{key:"addTransceiver",value:function(e,t){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(e){this.destroy(f(e,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:e,init:t}})}}},{key:"addStream",value:function(e){var t=this;if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),e.getTracks().forEach((function(n){t.addTrack(n,e)}))}}},{key:"addTrack",value:function(e,t){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");var n=this._senderMap.get(e)||new Map,i=n.get(t);if(i)throw i.removed?f(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):f(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED");i=this._pc.addTrack(e,t),n.set(t,i),this._senderMap.set(e,n),this._needsNegotiation()}}},{key:"replaceTrack",value:function(e,t,n){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");var i=this._senderMap.get(e),r=i?i.get(n):null;if(!r)throw f(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,i),null==r.replaceTrack?this.destroy(f(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):r.replaceTrack(t)}}},{key:"removeTrack",value:function(e,t){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");var n=this._senderMap.get(e),i=n?n.get(t):null;if(!i)throw f(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{i.removed=!0,this._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?this._sendersAwaitingStable.push(i):this.destroy(f(e,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}}},{key:"removeStream",value:function(e){var t=this;if(!this.destroying){if(this.destroyed)throw f(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),e.getTracks().forEach((function(n){t.removeTrack(n,e)}))}}},{key:"_needsNegotiation",value:function(){var e=this;this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,l((function(){e._batchedNegotiation=!1,e.initiator||!e._firstNegotiation?(e._debug("starting batched negotiation"),e.negotiate()):e._debug("non-initiator initial negotiation request discarded"),e._firstNegotiation=!1})))}},{key:"negotiate",value:function(){var e=this;if(!this.destroying){if(this.destroyed)throw f(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout((function(){e._createOffer()}),0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}},{key:"destroy",value:function(e){this._destroy(e,(function(){}))}},{key:"_destroy",value:function(e,t){var n=this;this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",e&&(e.message||e)),l((function(){if(n.destroyed=!0,n.destroying=!1,n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n._connected=!1,n._pcReady=!1,n._channelReady=!1,n._remoteTracks=null,n._remoteStreams=null,n._senderMap=null,clearInterval(n._closingInterval),n._closingInterval=null,clearInterval(n._interval),n._interval=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}if(n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,n._pc.ontrack=null,n._pc.ondatachannel=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close"),t()})))}},{key:"_setupData",value:function(e){var t=this;if(!e.channel)return this.destroy(f(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=g),this.channelName=this._channel.label,this._channel.onmessage=function(e){t._onChannelMessage(e)},this._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},this._channel.onopen=function(){t._onChannelOpen()},this._channel.onclose=function(){t._onChannelClose()},this._channel.onerror=function(e){var n=e.error instanceof Error?e.error:new Error("Datachannel error: ".concat(e.message," ").concat(e.filename,":").concat(e.lineno,":").concat(e.colno));t.destroy(f(n,"ERR_DATA_CHANNEL"))};var n=!1;this._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(n&&t._onChannelClose(),n=!0):n=!1}),5e3)}},{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){if(this.destroyed)return n(f(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(e){return this.destroy(f(e,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>g?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=e,this._cb=n}},{key:"_onFinish",value:function(){var e=this;if(!this.destroyed){var t=function(){setTimeout((function(){return e.destroy()}),1e3)};this._connected?t():this.once("connect",t)}}},{key:"_startIceCompleteTimeout",value:function(){var e=this;this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),this.iceCompleteTimeout))}},{key:"_createOffer",value:function(){var e=this;this.destroyed||this._pc.createOffer(this.offerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var i=function(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}};e._pc.setLocalDescription(t).then((function(){e._debug("createOffer success"),e.destroyed||(e.trickle||e._iceComplete?i():e.once("_iceComplete",i))})).catch((function(t){e.destroy(f(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(f(t,"ERR_CREATE_OFFER"))}))}},{key:"_requestMissingTransceivers",value:function(){var e=this;this._pc.getTransceivers&&this._pc.getTransceivers().forEach((function(t){t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))}},{key:"_createAnswer",value:function(){var e=this;this.destroyed||this._pc.createAnswer(this.answerOptions).then((function(t){if(!e.destroyed){e.trickle||e.allowHalfTrickle||(t.sdp=n(t.sdp)),t.sdp=e.sdpTransform(t.sdp);var i=function(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp}),e.initiator||e._requestMissingTransceivers()}};e._pc.setLocalDescription(t).then((function(){e.destroyed||(e.trickle||e._iceComplete?i():e.once("_iceComplete",i))})).catch((function(t){e.destroy(f(t,"ERR_SET_LOCAL_DESCRIPTION"))}))}})).catch((function(t){e.destroy(f(t,"ERR_CREATE_ANSWER"))}))}},{key:"_onConnectionStateChange",value:function(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(f(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}},{key:"_onIceStateChange",value:function(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),("connected"===e||"completed"===e)&&(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(f(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(f(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}}},{key:"getStats",value:function(e){var t=this,n=function(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e};0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then((function(t){var i=[];t.forEach((function(e){i.push(n(e))})),e(null,i)}),(function(t){return e(t)})):0<this._pc.getStats.length?this._pc.getStats((function(i){if(!t.destroyed){var r=[];i.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,r.push(n(t))})),e(null,r)}}),(function(t){return e(t)})):e(null,[])}},{key:"_maybeReady",value:function(){var e=this;if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),!this._connected&&!this._connecting&&this._pcReady&&this._channelReady){this._connecting=!0;var t=function(){e.destroyed||e.getStats((function(n,i){if(!e.destroyed){n&&(i=[]);var r={},o={},a={},s=!1;i.forEach((function(e){("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(o[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(a[e.id]=e)}));var l=function(t){s=!0;var n=o[t.localCandidateId];n&&(n.ip||n.address)?(e.localAddress=n.ip||n.address,e.localPort=+n.port):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=+n.portNumber):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=+n[1]),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var i=r[t.remoteCandidateId];i&&(i.ip||i.address)?(e.remoteAddress=i.ip||i.address,e.remotePort=+i.port):i&&i.ipAddress?(e.remoteAddress=i.ipAddress,e.remotePort=+i.portNumber):"string"==typeof t.googRemoteAddress&&(i=t.googRemoteAddress.split(":"),e.remoteAddress=i[0],e.remotePort=+i[1]),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)};if(i.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&l(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&l(e)})),s||Object.keys(a).length&&!Object.keys(o).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(t){return e.destroy(f(t,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var u=e._cb;e._cb=null,u(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){return e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}}))};t()}}},{key:"_onInterval",value:function(){this._cb&&this._channel&&!(this._channel.bufferedAmount>g)&&this._onChannelBufferedAmountLow()}},{key:"_onSignalingStateChange",value:function(){var e=this;this.destroyed||("stable"===this._pc.signalingState&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}},{key:"_onIceCandidate",value:function(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):!e.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}},{key:"_onChannelMessage",value:function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=p.from(t)),this.push(t)}}},{key:"_onChannelBufferedAmountLow",value:function(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}},{key:"_onChannelOpen",value:function(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}},{key:"_onChannelClose",value:function(){this.destroyed||(this._debug("on channel close"),this.destroy())}},{key:"_onTrack",value:function(e){var t=this;this.destroyed||e.streams.forEach((function(n){t._debug("on track"),t.emit("track",e.track,n),t._remoteTracks.push({track:e.track,stream:n}),t._remoteStreams.some((function(e){return e.id===n.id}))||(t._remoteStreams.push(n),l((function(){t._debug("on stream"),t.emit("stream",n)})))}))}},{key:"_debug",value:function(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],r.apply(null,e)}}]),s}(s.Duplex);v.WEBRTC_SUPPORT=!!o(),v.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},v.channelConfig={},t.exports=v},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/");var Fu,Bu,Hu,ju,zu=function(e,t){so(e,0);var n=Xa(t);po(e,n)},Wu=function(e,t,n){so(e,1),po(e,Ua(t,n))},Uu=function(e,t,n){try{za(t,Br(e),n)}catch(e){console.error("Caught error while handling a Yjs update",e)}},Vu=Uu,Ku=function(e,t,n,i){var r=jr(e);switch(r){case 0:!function(e,t,n){Wu(t,n,Br(e))}(e,t,n);break;case 1:Uu(e,n,i);break;case 2:Vu(e,n,i);break;default:throw new Error("Unknown message type")}return r},qu=(Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),f=o("8WkQI"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),3e4),Ju=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).doc=e,i.clientID=e.clientID,i.states=new Map,i.meta=new Map,i._checkInterval=setInterval((function(){var e=Io();null!==i.getLocalState()&&15e3<=e-i.meta.get(i.clientID).lastUpdated&&i.setLocalState(i.getLocalState());var t=[];i.meta.forEach((function(n,r){r!==i.clientID&&qu<=e-n.lastUpdated&&i.states.has(r)&&t.push(r)})),t.length>0&&Xu((0,Hi.default)(i),t,"timeout")}),tr(3e3)),e.on("destroy",(function(){i.destroy()})),i.setLocalState({}),i}return(0,c.default)(n,[{key:"destroy",value:function(){this.emit("destroy",[this]),this.setLocalState(null),(0,zi.default)((0,Wi.default)(n.prototype),"destroy",this).call(this),clearInterval(this._checkInterval)}},{key:"getLocalState",value:function(){return this.states.get(this.clientID)||null}},{key:"setLocalState",value:function(e){var t=this.clientID,n=this.meta.get(t),i=void 0===n?0:n.clock+1,r=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:i,lastUpdated:Io()});var o=[],a=[],s=[],l=[];null===e?l.push(t):null==r?null!=e&&o.push(t):(a.push(t),zo(r,e)||s.push(t)),(o.length>0||s.length>0||l.length>0)&&this.emit("change",[{added:o,updated:s,removed:l},"local"]),this.emit("update",[{added:o,updated:a,removed:l},"local"])}},{key:"setLocalStateField",value:function(e,t){var n=this.getLocalState();null!==n&&this.setLocalState(Vi(Ui({},n),(0,f.default)({},e,t)))}},{key:"getStates",value:function(){return this.states}}]),n}(er),Xu=function(e,t,n){for(var i=[],r=0;r<t.length;r++){var o=t[r];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){var a=e.meta.get(o);e.meta.set(o,{clock:a.clock+1,lastUpdated:Io()})}i.push(o)}}i.length>0&&(e.emit("change",[{added:[],updated:[],removed:i},n]),e.emit("update",[{added:[],updated:[],removed:i},n]))},Gu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.states,i=t.length,r=io();so(r,i);for(var o=0;o<i;o++){var a=t[o],s=n.get(a)||null,l=e.meta.get(a).clock;so(r,a),so(r,l),ho(r,JSON.stringify(s))}return ro(r)},Zu=function(e,t){var n=hr(e).buffer,i=hr(t).buffer;return crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]).then((function(e){return crypto.subtle.deriveKey({name:"PBKDF2",salt:i,iterations:1e5,hash:"SHA-256"},e,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}))},$u=function(e,t){if(!t)return To(e);var n=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,e).then((function(e){var t=io();return ho(t,"AES-GCM"),po(t,n),po(t,new Uint8Array(e)),ro(t)}))},Yu=function(e,t){if(!t)return To(e);var n,i=Pr(e);"AES-GCM"!==Wr(i)&&(n=Lo("Unknown encryption algorithm"),Promise.reject(n));var r=Br(i),o=Br(i);return crypto.subtle.decrypt({name:"AES-GCM",iv:r},t,o).then((function(e){return new Uint8Array(e)}))},Qu=(kr=o("d2KzW"),Fu="y-webrtc",Bu=la[ua],Hu=Dr("log"),ju=null!==Hu&&("*"===Hu||"true"===Hu||new RegExp(Hu,"gi").test(Fu)),ua=(ua+1)%la.length,Fu+=": ",ju?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=Io(),r=i-ca;ca=i,aa.apply(void 0,[Bu,Fu,na].concat((0,qi.default)(t.map((function(e){return"string"==typeof e||"symbol"===(void 0===e?"undefined":(0,p.default)(e))?e:JSON.stringify(e)}))),[Bu," +"+r+"ms"]))}:jo),ec=new Map,tc=new Map,nc=function(e){var t=!0;e.webrtcConns.forEach((function(e){e.synced||(t=!1)})),(!t&&e.synced||t&&!e.synced)&&(e.synced=t,e.provider.emit("synced",[{synced:t}]),Qu("synced ",Xo,e.name,Go," with all peers"))},ic=function(e,t,n){var i=Pr(t),r=io(),o=jr(i);if(void 0===e)return null;var a=e.awareness,s=e.doc,l=!1;switch(o){case 0:so(r,0);var u=Ku(i,r,s,e);1!==u||e.synced||n(),0===u&&(l=!0);break;case 3:so(r,1),po(r,Gu(a,Array.from(a.getStates().keys()))),l=!0;break;case 1:!function(e,t,n){for(var i=Pr(t),r=Io(),o=[],a=[],s=[],l=[],u=jr(i),c=0;c<u;c++){var d=jr(i),h=jr(i),f=JSON.parse(Wr(i)),p=e.meta.get(d),g=e.states.get(d),v=void 0===p?0:p.clock;(v<h||v===h&&null===f&&e.states.has(d))&&(null===f?d===e.clientID&&null!=e.getLocalState()?h++:e.states.delete(d):e.states.set(d,f),e.meta.set(d,{clock:h,lastUpdated:r}),void 0===p&&null!==f?o.push(d):void 0!==p&&null===f?l.push(d):null!==f&&(zo(f,g)||s.push(d),a.push(d)))}(o.length>0||s.length>0||l.length>0)&&e.emit("change",[{added:o,updated:s,removed:l},n]),(o.length>0||a.length>0||l.length>0)&&e.emit("update",[{added:o,updated:a,removed:l},n])}(a,Br(i),e);break;case 4:var c=1===Hr(i),d=Wr(i);if(d!==e.peerId&&(e.bcConns.has(d)&&!c||!e.bcConns.has(d)&&c)){var h=[],f=[];c?(e.bcConns.add(d),f.push(d)):(e.bcConns.delete(d),h.push(d)),e.provider.emit("peers",[{added:f,removed:h,webrtcPeers:Array.from(e.webrtcConns.keys()),bcPeers:Array.from(e.bcConns)}]),uc(e)}break;default:return console.error("Unable to compute message"),r}return l?r:null},rc=function(e,t){Qu("send message to ",Xo,e.remotePeerId,Go,$o," (",e.room.name,")",na);try{e.peer.send(ro(t))}catch(e){}},oc=function(){"use strict";function e(t,i,r,o){var a=this;(0,u.default)(this,e),Qu("establishing connection to ",Xo,r),this.room=o,this.remotePeerId=r,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new(n(Ou))(Ui({initiator:i},o.provider.peerOpts)),this.peer.on("signal",(function(e){hc(t,o,{to:r,from:o.peerId,type:"signal",signal:e})})),this.peer.on("connect",(function(){Qu("connected to ",Xo,r),a.connected=!0;var e=o.provider.doc,t=o.awareness,n=io();so(n,0),zu(n,e),rc(a,n);var i=t.getStates();if(i.size>0){var s=io();so(s,1),po(s,Gu(t,Array.from(i.keys()))),rc(a,s)}})),this.peer.on("close",(function(){a.connected=!1,a.closed=!0,o.webrtcConns.has(a.remotePeerId)&&(o.webrtcConns.delete(a.remotePeerId),o.provider.emit("peers",[{removed:[a.remotePeerId],added:[],webrtcPeers:Array.from(o.webrtcConns.keys()),bcPeers:Array.from(o.bcConns)}])),nc(o),a.peer.destroy(),Qu("closed connection to ",Xo,r),lc(o)})),this.peer.on("error",(function(e){Qu("Error in connection to ",Xo,r,": ",e),lc(o)})),this.peer.on("data",(function(e){var t=function(e,t){var n=e.room;return Qu("received message from ",Xo,e.remotePeerId,$o," (",n.name,")",Go,na),ic(n,t,(function(){e.synced=!0,Qu("synced ",Xo,n.name,Go," with ",Xo,e.remotePeerId),nc(n)}))}(a,e);null!==t&&rc(a,t)}))}return(0,c.default)(e,[{key:"destroy",value:function(){this.peer.destroy()}}]),e}(),ac=function(e,t){return $u(t,e.key).then((function(t){return e.mux((function(){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=Pu(e);i.bc.postMessage(t),i.subs.forEach((function(e){return e(t,n)}))}(e.name,t)}))}))},sc=function(e,t){e.bcconnected&&ac(e,t),function(e,t){Qu("broadcast message in ",Xo,e.name,Go),e.webrtcConns.forEach((function(e){try{e.peer.send(t)}catch(e){}}))}(e,t)},lc=function(e){ec.forEach((function(t){t.connected&&(t.send({type:"subscribe",topics:[e.name]}),e.webrtcConns.size<e.provider.maxConns&&hc(t,e,{type:"announce",from:e.peerId}))}))},uc=function(e){if(e.provider.filterBcConns){var t=io();so(t,4),ao(t,1),ho(t,e.peerId),ac(e,ro(t))}},cc=function(){"use strict";function e(t,n,i,r){var o=this;(0,u.default)(this,e),this.peerId=Ao(),this.doc=t,this.awareness=n.awareness,this.provider=n,this.synced=!1,this.name=i,this.key=r,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Su(),this.bcconnected=!1,this._bcSubscriber=function(e){return Yu(new Uint8Array(e),r).then((function(e){return o.mux((function(){var t=ic(o,e,(function(){}));t&&ac(o,ro(t))}))}))},this._docUpdateHandler=function(e,t){var n=io();so(n,0),function(e,t){so(e,2),po(e,t)}(n,e),sc(o,ro(n))},this._awarenessUpdateHandler=function(e,t){var n=e.added,i=e.updated,r=e.removed,a=n.concat(i).concat(r),s=io();so(s,1),po(s,Gu(o.awareness,a)),sc(o,ro(s))},this._beforeUnloadHandler=function(){Xu(o.awareness,[t.clientID],"window unload"),tc.forEach((function(e){e.disconnect()}))},"undefined"!=typeof window?window.addEventListener("beforeunload",this._beforeUnloadHandler):void 0!==kr&&kr.on("exit",this._beforeUnloadHandler)}return(0,c.default)(e,[{key:"connect",value:function(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),lc(this);var e,t,n=this.name;e=n,t=this._bcSubscriber,Pu(e).subs.add(t),this.bcconnected=!0,uc(this);var i=io();so(i,0),zu(i,this.doc),ac(this,ro(i));var r=io();so(r,0),Wu(r,this.doc),ac(this,ro(r));var o=io();so(o,3),ac(this,ro(o));var a=io();so(a,1),po(a,Gu(this.awareness,[this.doc.clientID])),ac(this,ro(a))}},{key:"disconnect",value:function(){var e=this;ec.forEach((function(t){t.connected&&t.send({type:"unsubscribe",topics:[e.name]})})),Xu(this.awareness,[this.doc.clientID],"disconnect");var t,n,i=io();so(i,4),ao(i,0),ho(i,this.peerId),ac(this,ro(i)),t=this.name,n=this._bcSubscriber,Pu(t).subs.delete(n),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach((function(e){return e.destroy()}))}},{key:"destroy",value:function(){this.disconnect(),"undefined"!=typeof window?window.removeEventListener("beforeunload",this._beforeUnloadHandler):void 0!==kr&&kr.off("exit",this._beforeUnloadHandler)}}]),e}(),dc=function(e,t,n,i){if(tc.has(n))throw Lo('A Yjs Doc connected to room "'.concat(n,'" already exists!'));var r=new cc(e,t,n,i);return tc.set(n,r),r},hc=function(e,t,n){t.key?function(e,t){var n=io();return mo(n,e),$u(ro(n),t)}(n,t.key).then((function(n){e.send({type:"publish",topic:t.name,data:eo(n)})})):e.send({type:"publish",topic:t.name,data:n})},fc=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this,e)).providers=new Set,i.on("connect",(function(){Qu("connected (".concat(e,")"));var t=Array.from(tc.keys());i.send({type:"subscribe",topics:t}),tc.forEach((function(e){return hc((0,Hi.default)(i),e,{type:"announce",from:e.peerId})}))})),i.on("message",(function(e){if("publish"===e.type){var t=e.topic,n=tc.get(t);if(null==n||"string"!=typeof t)return;var r=function(e){var t=n.webrtcConns,r=n.peerId;if(!(null==e||e.from===r||void 0!==e.to&&e.to!==r||n.bcConns.has(e.from))){var o=t.has(e.from)?function(){}:function(){return n.provider.emit("peers",[{removed:[],added:[e.from],webrtcPeers:Array.from(n.webrtcConns.keys()),bcPeers:Array.from(n.bcConns)}])};switch(e.type){case"announce":t.size<n.provider.maxConns&&(Gi(t,e.from,(function(){return new oc((0,Hi.default)(i),!0,e.from,n)})),o());break;case"signal":e.to===r&&(Gi(t,e.from,(function(){return new oc(i,!1,e.from,n)})).peer.signal(e.signal),o())}}};n.key?"string"==typeof e.data&&(o=to(e.data),a=n.key,Yu(o,a).then((function(e){return Kr(Pr(new Uint8Array(e)))}))).then(r):r(e.data)}var o,a})),i.on("disconnect",(function(){return Qu("disconnect (".concat(e,")"))})),i}return n}(Lu),pc=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.signaling,s=void 0===a?["wss://signaling.yjs.dev","wss://y-webrtc-signaling-eu.herokuapp.com","wss://y-webrtc-signaling-us.herokuapp.com"]:a,l=o.password,c=void 0===l?null:l,d=o.awareness,h=void 0===d?new Ju(i):d,f=o.maxConns,p=void 0===f?20+tr(15*Eo()):f,g=o.filterBcConns,v=void 0===g||g,m=o.peerOpts,y=void 0===m?{}:m;return(0,u.default)(this,n),(r=t.call(this)).roomName=e,r.doc=i,r.filterBcConns=v,r.awareness=h,r.shouldConnect=!1,r.signalingUrls=s,r.signalingConns=[],r.maxConns=p,r.peerOpts=y,r.key=c?Zu(c,e):To(null),r.room=null,r.key.then((function(t){r.room=dc(i,(0,Hi.default)(r),e,t),r.shouldConnect?r.room.connect():r.room.disconnect()})),r.connect(),r.destroy=r.destroy.bind((0,Hi.default)(r)),i.on("destroy",r.destroy),r}return(0,c.default)(n,[{key:"connected",get:function(){return null!==this.room&&this.shouldConnect}},{key:"connect",value:function(){var e=this;this.shouldConnect=!0,this.signalingUrls.forEach((function(t){var n=Gi(ec,t,(function(){return new fc(t)}));e.signalingConns.push(n),n.providers.add(e)})),this.room&&this.room.connect()}},{key:"disconnect",value:function(){var e=this;this.shouldConnect=!1,this.signalingConns.forEach((function(t){t.providers.delete(e),0===t.providers.size&&(t.destroy(),ec.delete(t.url))})),this.room&&this.room.disconnect()}},{key:"destroy",value:function(){var e=this;this.doc.off("destroy",this.destroy),this.key.then((function(){e.room.destroy(),tc.delete(e.roomName)})),(0,zi.default)((0,Wi.default)(n.prototype),"destroy",this).call(this)}}]),n}(er);u=o("4JAgF"),c=o("9HoHC");o("gkko2"),o("iwZD2"),o("fIIbJ");var gc,vc=o("iwZD2"),mc=(gc=function(e,t,n){this._onDidChange=new(0,vc.Emitter),this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)},Object.defineProperty(gc.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(gc.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(gc.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(gc.prototype,"diagnosticsOptions",{get:function(){return this.options},enumerable:!1,configurable:!0}),Object.defineProperty(gc.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),gc.prototype.setOptions=function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)},gc.prototype.setDiagnosticsOptions=function(e){this.setOptions(e)},gc.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},gc),yc={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0}},bc={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},_c=new mc("css",yc,bc),wc=new mc("scss",yc,bc),kc=new mc("less",yc,bc);function Cc(){return o("kqerF")}vc.languages.css={cssDefaults:_c,lessDefaults:kc,scssDefaults:wc},vc.languages.onLanguage("less",(function(){Cc().then((function(e){return e.setupMode(kc)}))})),vc.languages.onLanguage("scss",(function(){Cc().then((function(e){return e.setupMode(wc)}))})),vc.languages.onLanguage("css",(function(){Cc().then((function(e){return e.setupMode(_c)}))})),o("iwZD2"),o("1nYeY");vc=o("iwZD2");var xc=function(){var e=function(e,t,n){this._onDidChange=new(0,vc.Emitter),this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)};return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"diagnosticsOptions",{get:function(){return this._diagnosticsOptions},enumerable:!1,configurable:!0}),e.prototype.setDiagnosticsOptions=function(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)},e.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},e}(),Sc=new xc("json",{validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},{documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0});vc.languages.json={jsonDefaults:Sc},vc.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]}),vc.languages.onLanguage("json",(function(){o("2lYpW").then((function(e){return e.setupMode(Sc)}))})),o("iwZD2"),o("fuv5B");vc=o("iwZD2");var Ec=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Dc=function(e,t){var n,i,r,o,a=function(e){return function(t){return s([e,t])}},s=function(o){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return l.label++,{value:o[1],done:!1};case 5:l.label++,i=o[1],o=[0];continue;case 7:o=l.ops.pop(),l.trys.pop();continue;default:if(!(r=l.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){l=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){l.label=o[1];break}if(6===o[0]&&l.label<r[1]){l.label=r[1],r=o;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(o);break}r[2]&&l.ops.pop(),l.trys.pop();continue}o=t.call(e,l)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}},l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},Ac=function(){var e=function(e,t,n){this._onDidChange=new(0,vc.Emitter),this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)};return Object.defineProperty(e.prototype,"onDidChange",{get:function(){return this._onDidChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"modeConfiguration",{get:function(){return this._modeConfiguration},enumerable:!1,configurable:!0}),e.prototype.setOptions=function(e){this._options=e||Object.create(null),this._onDidChange.fire(this)},e.prototype.setModeConfiguration=function(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)},e}(),Ic={format:{tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:null,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},suggest:{},data:{useDefaultDataProvider:!0}};function Rc(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===Tc,documentFormattingEdits:e===Tc,documentRangeFormattingEdits:e===Tc}}var Tc="html",Lc="handlebars",Mc="razor",Nc=jc(Tc,Ic,Rc(Tc)),Pc=Nc.defaults,Oc=jc(Lc,Ic,Rc(Lc)),Fc=Oc.defaults,Bc=jc(Mc,Ic,Rc(Mc)),Hc=Bc.defaults;function jc(e,t,n){var i=this;void 0===t&&(t=Ic),void 0===n&&(n=Rc(e));var r,a=new Ac(e,t,n),s=vc.languages.onLanguage(e,(function(){return Ec(i,void 0,void 0,(function(){return Dc(this,(function(e){switch(e.label){case 0:return[4,o("57lVJ")];case 1:return r=e.sent().setupMode(a),[2]}}))}))}));return{defaults:a,dispose:function(){s.dispose(),null==r||r.dispose(),r=void 0}}}vc.languages.html={htmlDefaults:Pc,razorDefaults:Hc,handlebarDefaults:Fc,htmlLanguageService:Nc,handlebarLanguageService:Oc,razorLanguageService:Bc,registerHTMLLanguageService:jc},o("iwZD2"),o("aLm5l");vc=o("iwZD2");var zc,Wc={},Uc={},Vc=((zc=function(e){var t=this;this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((function(e,n){t._lazyLoadPromiseResolve=e,t._lazyLoadPromiseReject=n}))}).getOrCreate=function(e){return Uc[e]||(Uc[e]=new zc(e)),Uc[e]},zc.prototype.whenLoaded=function(){return this._lazyLoadPromise},zc.prototype.load=function(){var e=this;return this._loadingTriggered||(this._loadingTriggered=!0,Wc[this._languageId].loader().then((function(t){return e._lazyLoadPromiseResolve(t)}),(function(t){return e._lazyLoadPromiseReject(t)}))),this._lazyLoadPromise},zc);function Kc(e){var t=e.id;Wc[t]=e,vc.languages.register(e);var n=Vc.getOrCreate(t);vc.languages.setMonarchTokensProvider(t,n.whenLoaded().then((function(e){return e.language}))),vc.languages.onLanguage(t,(function(){n.load().then((function(e){vc.languages.setLanguageConfiguration(t,e.conf)}))}))}Kc({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:function(){return o("gKoIW")}}),Kc({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:function(){return o("c8Tml")}}),Kc({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:function(){return o("ira0M")}}),Kc({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:function(){return o("5gQgc")}}),Kc({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:function(){return o("5Zmxm")}}),Kc({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:function(){return o("4qFlJ")}}),Kc({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:function(){return o("7W89P")}}),Kc({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:function(){return o("8n96n")}}),Kc({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:function(){return o("AFKBL")}}),Kc({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:function(){return o("AFKBL")}}),Kc({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:function(){return o("c8TLh")}}),Kc({id:"csp",extensions:[],aliases:["CSP","csp"],loader:function(){return o("lMEps")}}),Kc({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:function(){return o("16xiS")}}),Kc({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:function(){return o("62Y46")}}),Kc({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:function(){return o("1TZyM")}}),Kc({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:function(){return o("bFYCC")}}),Kc({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:function(){return o("2KY0m")}}),Kc({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:function(){return o("9omWI")}}),Kc({id:"go",extensions:[".go"],aliases:["Go"],loader:function(){return o("aYFpF")}}),Kc({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:function(){return o("9mmoX")}}),Kc({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:function(){return o("9TiOf")}}),Kc({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:function(){return o("bpOSs")}}),Kc({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:function(){return o("hefkO")}}),Kc({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:function(){return o("7SpMH")}}),Kc({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:function(){return o("cV8Ng")}}),Kc({id:"javascript",extensions:[".js",".es6",".jsx",".mjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:function(){return o("d8bUH")}}),Kc({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:function(){return o("cjuRI")}}),Kc({id:"kotlin",extensions:[".kt"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:function(){return o("kxH7w")}}),Kc({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:function(){return o("xlG7j")}}),Kc({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:function(){return o("3ePY1")}}),Kc({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:function(){return o("2hHBe")}}),Kc({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:function(){return o("3XKzg")}}),Kc({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:function(){return o("f0ab0")}}),Kc({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:function(){return o("eGczV")}}),Kc({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:function(){return o("64L6c")}}),Kc({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:function(){return o("hayCP")}}),Kc({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:function(){return o("yQI5X")}}),Kc({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:function(){return o("fF6kJ")}}),Kc({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:function(){return o("f3L1A")}}),Kc({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:function(){return o("2jpmF")}}),Kc({id:"perl",extensions:[".pl"],aliases:["Perl","pl"],loader:function(){return o("jgZYh")}}),Kc({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:function(){return o("cSgll")}}),Kc({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:function(){return o("h9jex")}}),Kc({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:function(){return o("kkI62")}}),Kc({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:function(){return o("22Zxw")}}),Kc({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:function(){return o("adpwj")}}),Kc({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:function(){return o("kT0f0")}}),Kc({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:function(){return o("gkpZY")}}),Kc({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:function(){return o("jTtOA")}}),Kc({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:function(){return o("hP9ac")}}),Kc({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:function(){return o("eHj9x")}}),Kc({id:"redis",extensions:[".redis"],aliases:["redis"],loader:function(){return o("ifiDF")}}),Kc({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:function(){return o("3yM5B")}}),Kc({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:function(){return o("k7wWw")}}),Kc({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:function(){return o("kZzvv")}}),Kc({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:function(){return o("1iXDZ")}}),Kc({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:function(){return o("7dKvn")}}),Kc({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:function(){return o("bDnUf")}}),Kc({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:function(){return o("lKVfc")}}),Kc({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:function(){return o("7VHCx")}}),Kc({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return o("NIQHv")}}),Kc({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:function(){return o("3DW8O")}}),Kc({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:function(){return o("8JxNq")}}),Kc({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:function(){return o("9tOXT")}}),Kc({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:function(){return o("bJYx9")}}),Kc({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"],aliases:["StructuredText","scl","stl"],loader:function(){return o("hJC5E")}}),Kc({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:function(){return o("gEzl3")}}),Kc({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:function(){return o("i5VOW")}}),Kc({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:function(){return o("i5VOW")}}),Kc({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:function(){return o("acSqT")}}),Kc({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:function(){return o("8peJN")}}),Kc({id:"typescript",extensions:[".ts",".tsx"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:function(){return o("9bvwy")}}),Kc({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:function(){return o("hJug7")}}),Kc({id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:function(){return o("gqdPL")}}),Kc({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:function(){return o("dECh2")}}),o("1IvIe"),o("ikvYL"),o("1IVOw"),o("8Z9Ig");u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ");var qc=o("THDAR"),Jc=o("faA3E"),Xc=o("5cDyY"),Gc=o("3WP4Y"),Zc=o("5LFig"),$c=o("efZ3W"),Yc=(u=o("4JAgF"),c=o("9HoHC"),o("2NkmB")),Qc=o("1BIIJ"),ed=function(){"use strict";function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,u.default)(this,e),this.value=i,"string"!=typeof this.value)throw(0,Yc.illegalArgument)("value");"boolean"==typeof r?(this.isTrusted=r,this.supportThemeIcons=!1):(this.isTrusted=null!==(t=r.isTrusted)&&void 0!==t?t:void 0,this.supportThemeIcons=null!==(n=r.supportThemeIcons)&&void 0!==n&&n)}return(0,c.default)(e,[{key:"appendText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.value+=nd(this.supportThemeIcons?(0,Qc.escapeIcons)(e):e).replace(/([ \t]+)/g,(function(e,t){return"&nbsp;".repeat(t.length)})).replace(/^>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}},{key:"appendMarkdown",value:function(e){return this.value+=e,this}},{key:"appendCodeblock",value:function(e,t){return this.value+="\n```",this.value+=e,this.value+="\n",this.value+=t,this.value+="\n```\n",this}}]),e}();function td(e){return function(e){if(e instanceof ed)return!0;if(e&&"object"==typeof e)return!("string"!=typeof e.value||"boolean"!=typeof e.isTrusted&&void 0!==e.isTrusted||"boolean"!=typeof e.supportThemeIcons&&void 0!==e.supportThemeIcons);return!1}(e)?!e.value:!Array.isArray(e)||e.every(td)}function nd(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function id(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!])/g,"$1"):e}function rd(e){var t=[],n=e.split("|").map((function(e){return e.trim()}));e=n[0];var i=n[1];if(i){var r=/height=(\d+)/.exec(i),o=/width=(\d+)/.exec(i),a=r?r[1]:"",s=o?o[1]:"",l=isFinite(parseInt(s)),u=isFinite(parseInt(a));l&&t.push('width="'.concat(s,'"')),u&&t.push('height="'.concat(a,'"'))}return{href:e,dimensions:t}}var od=o("3xPLG"),ad=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},sd=function(e,t){return function(n,i){t(n,i,e)}},ld=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},ud=new(0,$c.RawContextKey)("selectionAnchorSet",!1),cd=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this.editor=t,this.selectionAnchorSetContextKey=ud.bindTo(n),this.modelChangeListener=t.onDidChangeModel((function(){return i.selectionAnchorSetContextKey.reset()}))}return(0,c.default)(e,[{key:"setSelectionAnchor",value:function(){if(this.editor.hasModel()){var e=this.editor.getPosition(),t=this.decorationId?[this.decorationId]:[],n=this.editor.deltaDecorations(t,[{range:Gc.Selection.fromPositions(e,e),options:{description:"selection-anchor",stickiness:1,hoverMessage:(new ed).appendText((0,Jc.localize)("selectionAnchor","Selection Anchor")),className:"selection-anchor"}}]);this.decorationId=n[0],this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,od.alert)((0,Jc.localize)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}},{key:"goToSelectionAnchor",value:function(){if(this.editor.hasModel()&&this.decorationId){var e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}},{key:"selectFromAnchorToCursor",value:function(){if(this.editor.hasModel()&&this.decorationId){var e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){var t=this.editor.getPosition();this.editor.setSelection(Gc.Selection.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}},{key:"cancelSelectionAnchor",value:function(){this.decorationId&&(this.editor.deltaDecorations([this.decorationId],[]),this.decorationId=void 0,this.selectionAnchorSetContextKey.set(!1))}},{key:"dispose",value:function(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();cd.ID="editor.contrib.selectionAnchorController",cd=ad([sd(1,$c.IContextKeyService)],cd);var dd=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.setSelectionAnchor",label:(0,Jc.localize)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2080),weight:100}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return ld(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cd.get(t).setSelectionAnchor();case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction),hd=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.goToSelectionAnchor",label:(0,Jc.localize)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:ud})}return(0,c.default)(i,[{key:"run",value:function(e,t){return ld(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cd.get(t).goToSelectionAnchor();case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction),fd=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.selectFromAnchorToCursor",label:(0,Jc.localize)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:ud,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2089),weight:100}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return ld(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cd.get(t).selectFromAnchorToCursor();case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction),pd=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.cancelSelectionAnchor",label:(0,Jc.localize)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:ud,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:9,weight:100}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return ld(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cd.get(t).cancelSelectionAnchor();case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction);(0,qc.registerEditorContribution)(cd.ID,cd),(0,qc.registerEditorAction)(dd),(0,qc.registerEditorAction)(hd),(0,qc.registerEditorAction)(fd),(0,qc.registerEditorAction)(pd);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),Jc=o("faA3E");var gd=o("hJucn"),vd=o("dXCvL"),md=(qc=o("THDAR"),o("kBBF2")),yd=o("5MJfC"),bd=(Gc=o("3WP4Y"),Xc=o("5cDyY"),o("7wGTu")),_d=o("60ELr"),wd=o("a6Ojp"),kd=o("ht8QC"),Cd=o("4ET02"),xd=o("feTbe"),Sd=(0,kd.registerColor)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hc:"#A0A0A0"},Jc.localize("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets.")),Ed=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.jumpToBracket",label:Jc.localize("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3160,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=Id.get(t);n&&n.jumpToBracket()}}]),n}(qc.EditorAction),Dd=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.selectToBracket",label:Jc.localize("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){var i=Id.get(t);if(i){var r=!0;n&&!1===n.selectBrackets&&(r=!1),i.selectToBracket(r)}}}]),n}(qc.EditorAction),Ad=function e(t,n,i){"use strict";(0,u.default)(this,e),this.position=t,this.brackets=n,this.options=i},Id=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._editor=e,i._lastBracketsData=[],i._lastVersionId=0,i._decorations=[],i._updateBracketsSoon=i._register(new(0,gd.RunOnceScheduler)((function(){return i._updateBrackets()}),50)),i._matchBrackets=i._editor.getOption(63),i._updateBracketsSoon.schedule(),i._register(e.onDidChangeCursorPosition((function(e){"never"!==i._matchBrackets&&i._updateBracketsSoon.schedule()}))),i._register(e.onDidChangeModelContent((function(e){i._updateBracketsSoon.schedule()}))),i._register(e.onDidChangeModel((function(e){i._lastBracketsData=[],i._decorations=[],i._updateBracketsSoon.schedule()}))),i._register(e.onDidChangeModelLanguageConfiguration((function(e){i._lastBracketsData=[],i._updateBracketsSoon.schedule()}))),i._register(e.onDidChangeConfiguration((function(e){e.hasChanged(63)&&(i._matchBrackets=i._editor.getOption(63),i._decorations=i._editor.deltaDecorations(i._decorations,[]),i._lastBracketsData=[],i._lastVersionId=0,i._updateBracketsSoon.schedule())}))),i}return(0,c.default)(n,[{key:"jumpToBracket",value:function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=this._editor.getSelections().map((function(t){var n=t.getStartPosition(),i=e.matchBracket(n),r=null;if(i)i[0].containsPosition(n)?r=i[1].getStartPosition():i[1].containsPosition(n)&&(r=i[0].getStartPosition());else{var o=e.findEnclosingBrackets(n);if(o)r=o[0].getStartPosition();else{var a=e.findNextBracket(n);a&&a.range&&(r=a.range.getStartPosition())}}return r?new(0,Gc.Selection)(r.lineNumber,r.column,r.lineNumber,r.column):new(0,Gc.Selection)(n.lineNumber,n.column,n.lineNumber,n.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}}},{key:"selectToBracket",value:function(e){if(this._editor.hasModel()){var t=this._editor.getModel(),n=[];this._editor.getSelections().forEach((function(i){var r=i.getStartPosition(),o=t.matchBracket(r);if(!o&&!(o=t.findEnclosingBrackets(r))){var a=t.findNextBracket(r);a&&a.range&&(o=t.matchBracket(a.range.getStartPosition()))}var s=null,l=null;if(o){o.sort(yd.Range.compareRangesUsingStarts);var u=(0,Ki.default)(o,2),c=u[0],d=u[1];if(s=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(r)){var h=s;s=l,l=h}}s&&l&&n.push(new(0,Gc.Selection)(s.lineNumber,s.column,l.lineNumber,l.column))})),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}}},{key:"_updateBrackets",value:function(){if("never"!==this._matchBrackets){this._recomputeBrackets();var e=[],t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._lastBracketsData[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.brackets;l&&(e[t++]={range:l[0],options:s.options},e[t++]={range:l[1],options:s.options})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._decorations=this._editor.deltaDecorations(this._decorations,e)}}},{key:"_recomputeBrackets",value:function(){if(!this._editor.hasModel())return this._lastBracketsData=[],void(this._lastVersionId=0);var e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);var t=this._editor.getModel(),i=t.getVersionId(),r=[];this._lastVersionId===i&&(r=this._lastBracketsData);for(var o=[],a=0,s=0,l=e.length;s<l;s++){var u=e[s];u.isEmpty()&&(o[a++]=u.getStartPosition())}o.length>1&&o.sort(md.Position.compare);for(var c=[],d=0,h=0,f=r.length,p=0,g=o.length;p<g;p++){for(var v=o[p];h<f&&r[h].position.isBefore(v);)h++;if(h<f&&r[h].position.equals(v))c[d++]=r[h];else{var m=t.matchBracket(v),y=n._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;m||"always"!==this._matchBrackets||(m=t.findEnclosingBrackets(v,20),y=n._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),c[d++]=new Ad(v,m,y)}}this._lastBracketsData=c,this._lastVersionId=i}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);Id.ID="editor.contrib.bracketMatchingController",Id._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=_d.ModelDecorationOptions.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,Cd.themeColorFromId)(Sd),position:bd.OverviewRulerLane.Center}}),Id._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=_d.ModelDecorationOptions.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,qc.registerEditorContribution)(Id.ID,Id),(0,qc.registerEditorAction)(Dd),(0,qc.registerEditorAction)(Ed),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(wd.editorBracketMatchBackground);n&&t.addRule(".monaco-editor .bracket-match { background-color: ".concat(n,"; }"));var i=e.getColor(wd.editorBracketMatchBorder);i&&t.addRule(".monaco-editor .bracket-match { border: 1px solid ".concat(i,"; }"))})),xd.MenuRegistry.appendMenuItem(xd.MenuId.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:Jc.localize({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),qc=o("THDAR"),Xc=o("5cDyY"),u=o("4JAgF"),c=o("9HoHC"),yd=o("5MJfC"),Gc=o("3WP4Y");var Rd=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._selection=t,this._isMovingLeft=n}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){if(this._selection.startLineNumber===this._selection.endLineNumber&&!this._selection.isEmpty()){var n=this._selection.startLineNumber,i=this._selection.startColumn,r=this._selection.endColumn;if((!this._isMovingLeft||1!==i)&&(this._isMovingLeft||r!==e.getLineMaxColumn(n)))if(this._isMovingLeft){var o=new(0,yd.Range)(n,i-1,n,i),a=e.getValueInRange(o);t.addEditOperation(o,null),t.addEditOperation(new(0,yd.Range)(n,r,n,r),a)}else{var s=new(0,yd.Range)(n,r,n,r+1),l=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new(0,yd.Range)(n,i,n,i),l)}}}},{key:"computeCursorState",value:function(e,t){return this._isMovingLeft?new(0,Gc.Selection)(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new(0,Gc.Selection)(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}]),e}(),Td=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i)).left=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=[],i=t.getSelections(),r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;n.push(new Rd(u,this.left))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}}]),n}(qc.EditorAction),Ld=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:"editor.action.moveCarretLeftAction",label:Jc.localize("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:Xc.EditorContextKeys.writable})}return n}(Td),Md=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:"editor.action.moveCarretRightAction",label:Jc.localize("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:Xc.EditorContextKeys.writable})}return n}(Td);(0,qc.registerEditorAction)(Ld),(0,qc.registerEditorAction)(Md);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),qc=o("THDAR");var Nd=o("jxlHx"),Pd=(yd=o("5MJfC"),Xc=o("5cDyY"),o("dAtPi")),Od=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.transposeLetters",label:Jc.localize("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:306},weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel(),i=[],r=t.getSelections(),o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;if(c.isEmpty()){var d=c.startLineNumber,h=c.startColumn,f=n.getLineMaxColumn(d);if(1!==d||1!==h&&(2!==h||2!==f)){var p=h===f?c.getPosition():Pd.MoveOperations.rightPosition(n,c.getPosition().lineNumber,c.getPosition().column),g=Pd.MoveOperations.leftPosition(n,p),v=Pd.MoveOperations.leftPosition(n,g),m=n.getValueInRange(yd.Range.fromPositions(v,g)),y=n.getValueInRange(yd.Range.fromPositions(g,p)),b=yd.Range.fromPositions(v,p);i.push(new(0,Nd.ReplaceCommand)(b,y+m))}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(Od);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E");var Fd=o("dqfPV"),Bd=o("5DBhW"),Hd=o("9YrXs"),jd=(qc=o("THDAR"),o("1NzEb")),zd=(Xc=o("5cDyY"),xd=o("feTbe"),o("k8rlj")),Wd=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Ud="9_cutcopypaste",Vd=Bd.isNative||document.queryCommandSupported("cut"),Kd=Bd.isNative||document.queryCommandSupported("copy"),qd=void 0!==navigator.clipboard&&!Fd.isFirefox||document.queryCommandSupported("paste");function Jd(e){return e.register(),e}var Xd=Vd?Jd(new(0,qc.MultiCommand)({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Bd.isNative?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:xd.MenuId.MenubarEditMenu,group:"2_ccp",title:Jc.localize({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:xd.MenuId.EditorContext,group:Ud,title:Jc.localize("actions.clipboard.cutLabel","Cut"),when:Xc.EditorContextKeys.writable,order:1},{menuId:xd.MenuId.CommandPalette,group:"",title:Jc.localize("actions.clipboard.cutLabel","Cut"),order:1},{menuId:xd.MenuId.SimpleEditorContext,group:Ud,title:Jc.localize("actions.clipboard.cutLabel","Cut"),when:Xc.EditorContextKeys.writable,order:1}]})):void 0,Gd=Kd?Jd(new(0,qc.MultiCommand)({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Bd.isNative?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:xd.MenuId.MenubarEditMenu,group:"2_ccp",title:Jc.localize({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:xd.MenuId.EditorContext,group:Ud,title:Jc.localize("actions.clipboard.copyLabel","Copy"),order:2},{menuId:xd.MenuId.CommandPalette,group:"",title:Jc.localize("actions.clipboard.copyLabel","Copy"),order:1},{menuId:xd.MenuId.SimpleEditorContext,group:Ud,title:Jc.localize("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;xd.MenuRegistry.appendMenuItem(xd.MenuId.MenubarEditMenu,{submenu:xd.MenuId.MenubarCopy,title:{value:Jc.localize("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),xd.MenuRegistry.appendMenuItem(xd.MenuId.EditorContext,{submenu:xd.MenuId.EditorContextCopy,title:{value:Jc.localize("copy as","Copy As"),original:"Copy As"},group:Ud,order:3});var Zd=qd?Jd(new(0,qc.MultiCommand)({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Bd.isNative?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:xd.MenuId.MenubarEditMenu,group:"2_ccp",title:Jc.localize({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:xd.MenuId.EditorContext,group:Ud,title:Jc.localize("actions.clipboard.pasteLabel","Paste"),when:Xc.EditorContextKeys.writable,order:4},{menuId:xd.MenuId.CommandPalette,group:"",title:Jc.localize("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:xd.MenuId.SimpleEditorContext,group:Ud,title:Jc.localize("actions.clipboard.pasteLabel","Paste"),when:Xc.EditorContextKeys.writable,order:4}]})):void 0,$d=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:Jc.localize("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){t.hasModel()&&(!t.getOption(31)&&t.getSelection().isEmpty()||(Hd.CopyOptions.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),Hd.CopyOptions.forceCopyWithSyntaxHighlighting=!1))}}]),n}(qc.EditorAction);function Yd(e,t){e&&(e.addImplementation(1e4,"code-editor",(function(e,n){var i=e.get(jd.ICodeEditorService).getFocusedCodeEditor();if(i&&i.hasTextFocus()){var r=i.getOption(31),o=i.getSelection();return o&&o.isEmpty()&&!r||document.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",(function(e,n){return document.execCommand(t),!0})))}Yd(Xd,"cut"),Yd(Gd,"copy"),Zd&&(Zd.addImplementation(1e4,"code-editor",(function(e,t){var i=e.get(jd.ICodeEditorService),r=e.get(zd.IClipboardService),o=i.getFocusedCodeEditor();return!(!o||!o.hasTextFocus())&&(!(!document.execCommand("paste")&&Bd.isWeb)||(Wd(void 0,void 0,void 0,n(l).mark((function e(){var t,i,a,s,u;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.readText();case 2:""!==(t=e.sent)&&(i=Hd.InMemoryClipboardMetadataManager.INSTANCE.get(t),a=!1,s=null,u=null,i&&(a=o.getOption(31)&&!!i.isFromEmptySelection,s=void 0!==i.multicursorText?i.multicursorText:null,u=i.mode),o.trigger("keyboard","paste",{text:t,pasteOnNewLine:a,multicursorText:s,mode:u}));case 4:case"end":return e.stop()}}),e)}))),!0))})),Zd.addImplementation(0,"generic-dom",(function(e,t){return document.execCommand("paste"),!0}))),Kd&&(0,qc.registerEditorAction)($d);qc=o("THDAR");var Qd={};e(Qd,"QuickFixController",(function(){return If}),(function(e){return If=e})),e(Qd,"QuickFixAction",(function(){return Mf}),(function(e){return Mf=e})),e(Qd,"AutoFixAction",(function(){return Hf}),(function(e){return Hf=e})),e(Qd,"CodeActionCommand",(function(){return Nf}),(function(e){return Nf=e})),e(Qd,"RefactorAction",(function(){return Pf}),(function(e){return Pf=e})),e(Qd,"SourceAction",(function(){return Of}),(function(e){return Of=e})),e(Qd,"OrganizeImportsAction",(function(){return Ff}),(function(e){return Ff=e})),e(Qd,"FixAllAction",(function(){return Bf}),(function(e){return Bf=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ");var eh=o("j6sHb"),th=(u=o("4JAgF"),c=o("9HoHC"),function(){"use strict";function e(t){(0,u.default)(this,e),this.executor=t,this._didRun=!1}return(0,c.default)(e,[{key:"getValue",value:function(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}},{key:"rawValue",get:function(){return this._value}}]),e}()),nh=(vd=o("dXCvL"),o("gTzCU")),ih=(qc=o("THDAR"),o("2IqeR")),rh=(Xc=o("5cDyY"),{});e(rh,"codeActionCommandId",(function(){return yh}),(function(e){return yh=e})),e(rh,"refactorCommandId",(function(){return bh}),(function(e){return bh=e})),e(rh,"sourceActionCommandId",(function(){return _h}),(function(e){return _h=e})),e(rh,"organizeImportsCommandId",(function(){return wh}),(function(e){return wh=e})),e(rh,"fixAllCommandId",(function(){return kh}),(function(e){return kh=e})),e(rh,"CodeActionItem",(function(){return Ch}),(function(e){return Ch=e})),e(rh,"getCodeActions",(function(){return Eh}),(function(e){return Eh=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ");var oh=o("2ZBuK"),ah=(eh=o("j6sHb"),Yc=o("2NkmB"),vd=o("dXCvL"),o("iPPVB")),sh=o("fLZJB"),lh=(yd=o("5MJfC"),Gc=o("3WP4Y"),o("chpjt")),uh=o("gPDld"),ch=(u=o("4JAgF"),c=o("9HoHC"),function(){"use strict";function e(t){(0,u.default)(this,e),this.value=t}return(0,c.default)(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"contains",value:function(t){return this.equals(t)||""===this.value||t.value.startsWith(this.value+e.sep)}},{key:"intersects",value:function(e){return this.contains(e)||e.contains(this)}},{key:"append",value:function(t){return new e(this.value+e.sep+t)}}]),e}());function dh(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((function(n){return fh(t,n,e.include)})))&&!(!e.includeSourceActions&&ch.Source.contains(t)))}function hh(e,t){var n=t.kind?new ch(t.kind):void 0;return!!(!e.include||n&&e.include.contains(n))&&(!(e.excludes&&n&&e.excludes.some((function(t){return fh(n,t,e.include)})))&&(!(!e.includeSourceActions&&n&&ch.Source.contains(n))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function fh(e,t,n){return!!t.contains(e)&&(!n||!t.contains(n))}ch.sep=".",ch.None=new ch("@@none@@"),ch.Empty=new ch(""),ch.QuickFix=new ch("quickfix"),ch.Refactor=new ch("refactor"),ch.Source=new ch("source"),ch.SourceOrganizeImports=ch.Source.append("organizeImports"),ch.SourceFixAll=ch.Source.append("fixAll");var ph=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.kind=t,this.apply=n,this.preferred=i}return(0,c.default)(e,null,[{key:"fromUser",value:function(t,n){return t&&"object"==typeof t?new e(e.getKindFromUser(t,n.kind),e.getApplyFromUser(t,n.apply),e.getPreferredUser(t)):new e(n.kind,n.apply,!1)}},{key:"getApplyFromUser",value:function(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}},{key:"getKindFromUser",value:function(e,t){return"string"==typeof e.kind?new ch(e.kind):t}},{key:"getPreferredUser",value:function(e){return"boolean"==typeof e.preferred&&e.preferred}}]),e}(),gh=o("gkTZs"),vh=o("j9pk1"),mh=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},yh="editor.action.codeAction",bh="editor.action.refactor",_h="editor.action.sourceAction",wh="editor.action.organizeImports",kh="editor.action.fixAll",Ch=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.action=t,this.provider=n}return(0,c.default)(e,[{key:"resolve",value:function(e){var t;return mh(this,void 0,void 0,n(l).mark((function i(){var r;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)||this.action.edit){n.next=12;break}return n.prev=2,n.next=5,this.provider.resolveCodeAction(this.action,e);case 5:r=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),(0,Yc.onUnexpectedExternalError)(n.t0);case 11:r&&(this.action.edit=r.edit);case 12:return n.abrupt("return",this);case 13:case"end":return n.stop()}}),i,this,[[2,8]])})))}}]),e}(),xh=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).documentation=i,o._register(r),o.allActions=(0,qi.default)(e).sort(n.codeActionsComparator),o.validActions=o.allActions.filter((function(e){return!e.action.disabled})),o}return(0,c.default)(n,[{key:"hasAutoFix",get:function(){return this.validActions.some((function(e){var t=e.action;return!!t.kind&&ch.QuickFix.contains(new ch(t.kind))&&!!t.isPreferred}))}}],[{key:"codeActionsComparator",value:function(e,t){var n=e.action,i=t.action;return n.isPreferred&&!i.isPreferred?-1:!n.isPreferred&&i.isPreferred?1:(0,oh.isNonEmptyArray)(n.diagnostics)?(0,oh.isNonEmptyArray)(i.diagnostics)?n.diagnostics[0].message.localeCompare(i.diagnostics[0].message):-1:(0,oh.isNonEmptyArray)(i.diagnostics)?1:0}}]),n}(vd.Disposable),Sh={actions:[],documentation:void 0};function Eh(e,t,i,r,o){var a,s=this,u=i.filter||{},c={only:null===(a=u.include)||void 0===a?void 0:a.value,trigger:i.type},d=new(0,sh.TextModelCancellationTokenSource)(e,o),h=function(e,t){return lh.CodeActionProviderRegistry.all(e).filter((function(e){return!e.providedCodeActionKinds||e.providedCodeActionKinds.some((function(e){return dh(t,new ch(e))}))}))}(e,u),f=new(0,vd.DisposableStore),p=h.map((function(i){return mh(s,void 0,void 0,n(l).mark((function o(){var a,s,h;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r.report(i),n.next=4,i.provideCodeActions(e,t,c,d.token);case 4:if((a=n.sent)&&f.add(a),!d.token.isCancellationRequested){n.next=8;break}return n.abrupt("return",Sh);case 8:return s=((null==a?void 0:a.actions)||[]).filter((function(e){return e&&hh(u,e)})),h=Dh(i,s,u.include),n.abrupt("return",{actions:s.map((function(e){return new Ch(e,i)})),documentation:h});case 13:if(n.prev=13,n.t0=n.catch(0),!(0,Yc.isPromiseCanceledError)(n.t0)){n.next=17;break}throw n.t0;case 17:return(0,Yc.onUnexpectedExternalError)(n.t0),n.abrupt("return",Sh);case 19:case"end":return n.stop()}}),o,null,[[0,13]])})))})),g=lh.CodeActionProviderRegistry.onDidChange((function(){var t=lh.CodeActionProviderRegistry.all(e);(0,oh.equals)(t,h)||d.cancel()}));return Promise.all(p).then((function(e){var t=(0,oh.flatten)(e.map((function(e){return e.actions}))),n=(0,oh.coalesce)(e.map((function(e){return e.documentation})));return new xh(t,n,f)})).finally((function(){g.dispose(),d.dispose()}))}function Dh(e,t,n){if(e.documentation){var i=e.documentation.map((function(e){return{kind:new ch(e.kind),command:e.command}}));if(n){var r,o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.kind.contains(n)&&(r?r.kind.contains(c.kind)&&(r=c):r=c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(r)return null==r?void 0:r.command}var d=!0,h=!1,f=void 0;try{for(var p,g=t[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var v=p.value;if(v.kind){var m=!0,y=!1,b=void 0;try{for(var _,w=i[Symbol.iterator]();!(m=(_=w.next()).done);m=!0){var k=_.value;if(k.kind.contains(new ch(v.kind)))return k.command}}catch(e){y=!0,b=e}finally{try{m||null==w.return||w.return()}finally{if(y)throw b}}}}}catch(e){h=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}}}vh.CommandsRegistry.registerCommand("_executeCodeActionProvider",(function(e,t,i,r,o){return mh(this,void 0,void 0,n(l).mark((function a(){var s,u,c,d,h,f,p;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t instanceof ah.URI){n.next=2;break}throw(0,Yc.illegalArgument)();case 2:if(s=e.get(uh.IModelService).getModel(t)){n.next=5;break}throw(0,Yc.illegalArgument)();case 5:if(u=Gc.Selection.isISelection(i)?Gc.Selection.liftSelection(i):yd.Range.isIRange(i)?s.validateRange(i):void 0){n.next=8;break}throw(0,Yc.illegalArgument)();case 8:return c="string"==typeof r?new ch(r):void 0,n.next=11,Eh(s,u,{type:1,filter:{includeSourceActions:!0,include:c}},gh.Progress.None,eh.CancellationToken.None);case 11:for(d=n.sent,h=[],f=Math.min(d.validActions.length,"number"==typeof o?o:0),p=0;p<f;p++)h.push(d.validActions[p].resolve(eh.CancellationToken.None));return n.prev=15,n.next=18,Promise.all(h);case 18:return n.abrupt("return",d.validActions.map((function(e){return e.action})));case 19:return n.prev=19,setTimeout((function(){return d.dispose()}),100),n.finish(19);case 22:case"end":return n.stop()}}),a,null,[[15,,19,22]])})))}));var Ah={};e(Ah,"CodeActionUi",(function(){return cf}),(function(e){return cf=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),Yc=o("2NkmB"),vd=o("dXCvL");var Ih={};e(Ih,"MessageController",(function(){return Mh}),(function(e){return Mh=e}));u=o("4JAgF"),c=o("9HoHC"),Jc=o("faA3E"),gd=o("hJucn"),vd=o("dXCvL"),od=o("3xPLG"),yd=o("5MJfC"),qc=o("THDAR"),$c=o("efZ3W"),Cd=o("4ET02"),kd=o("ht8QC");var Rh=o("kXURg"),Th=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Lh=function(e,t){return function(n,i){t(n,i,e)}},Mh=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._messageWidget=new(0,vd.MutableDisposable),this._messageListeners=new(0,vd.DisposableStore),this._editor=t,this._visible=e.MESSAGE_VISIBLE.bindTo(n),this._editorListener=this._editor.onDidAttemptReadOnlyEdit((function(){return i._onDidAttemptReadOnlyEdit()}))}return(0,c.default)(e,[{key:"dispose",value:function(){this._editorListener.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}},{key:"showMessage",value:function(e,t){var n,i=this;(0,od.alert)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new Ph(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidDispose((function(){return i.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeModel((function(){return i.closeMessage()}))),this._messageListeners.add(new(0,gd.TimeoutTimer)((function(){return i.closeMessage()}),3e3)),this._messageListeners.add(this._editor.onMouseMove((function(e){e.target.position&&(n?n.containsPosition(e.target.position)||i.closeMessage():n=new(0,yd.Range)(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}},{key:"closeMessage",value:function(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Ph.fadeOut(this._messageWidget.value))}},{key:"_onDidAttemptReadOnlyEdit",value:function(){this._editor.hasModel()&&this.showMessage(Jc.localize("editor.readonly","Cannot edit in read-only editor"),this._editor.getPosition())}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();Mh.ID="editor.contrib.messageController",Mh.MESSAGE_VISIBLE=new(0,$c.RawContextKey)("messageVisible",!1,Jc.localize("messageVisible","Whether the editor is currently showing an inline message")),Mh=Th([Lh(1,$c.IContextKeyService)],Mh);var Nh=qc.EditorCommand.bindToContribution(Mh.get);(0,qc.registerEditorCommand)(new Nh({id:"leaveEditorMessage",precondition:Mh.MESSAGE_VISIBLE,handler:function(e){return e.closeMessage()},kbOpts:{weight:130,primary:9}}));var Ph=function(){"use strict";function e(t,n,i){var r=n.lineNumber,o=n.column;(0,u.default)(this,e),this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=t,this._editor.revealLinesInCenterIfOutsideViewport(r,r,0),this._position={lineNumber:r,column:o-1},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage");var a=document.createElement("div");a.classList.add("anchor","top"),this._domNode.appendChild(a);var s=document.createElement("div");s.classList.add("message"),s.textContent=i,this._domNode.appendChild(s);var l=document.createElement("div");l.classList.add("anchor","below"),this._domNode.appendChild(l),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}return(0,c.default)(e,[{key:"dispose",value:function(){this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"messageoverlay"}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{position:this._position,preference:[1,2]}}},{key:"afterRender",value:function(e){this._domNode.classList.toggle("below",2===e)}}],[{key:"fadeOut",value:function(e){var t,n=function(){e.dispose(),clearTimeout(t),e.getDomNode().removeEventListener("animationend",n)};return t=setTimeout(n,110),e.getDomNode().addEventListener("animationend",n),e.getDomNode().classList.add("fadeOut"),{dispose:n}}}]),e}();(0,qc.registerEditorContribution)(Mh.ID,Mh),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.inputValidationInfoBorder);if(n){var i=e.type===Rh.ColorScheme.HIGH_CONTRAST?2:1;t.addRule(".monaco-editor .monaco-editor-overlaymessage .anchor.below { border-top-color: ".concat(n,"; }")),t.addRule(".monaco-editor .monaco-editor-overlaymessage .anchor.top { border-bottom-color: ".concat(n,"; }")),t.addRule(".monaco-editor .monaco-editor-overlaymessage .message { border: ".concat(i,"px solid ").concat(n,"; }"))}var r=e.getColor(kd.inputValidationInfoBackground);r&&t.addRule(".monaco-editor .monaco-editor-overlaymessage .message { background-color: ".concat(r,"; }"));var o=e.getColor(kd.inputValidationInfoForeground);o&&t.addRule(".monaco-editor .monaco-editor-overlaymessage .message { color: ".concat(o,"; }"))}));var Oh=o("hm5an"),Fh={};e(Fh,"CodeActionMenu",(function(){return qh}),(function(e){return qh=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ");var Bh=o("fTm33"),Hh=o("2NkhT"),jh=(Yc=o("2NkmB"),vd=o("dXCvL"),md=o("kBBF2"),lh=o("chpjt"),o("1UyyS")),zh=o("5H40S"),Wh=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Uh=function(e,t){return function(n,i){t(n,i,e)}},Vh=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Kh=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,e.command?e.command.id:e.title,e.title.replace(/\r\n|\r|\n/g," "),void 0,!e.disabled,i)).action=e,r}return n}(Hh.Action);var qh=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o){var a;return(0,u.default)(this,i),(a=t.call(this))._editor=e,a._delegate=n,a._contextMenuService=r,a._visible=!1,a._showingActions=a._register(new(0,vd.MutableDisposable)),a._keybindingResolver=new Jh({getKeybindings:function(){return o.getKeybindings()}}),a}return(0,c.default)(i,[{key:"isVisible",get:function(){return this._visible}},{key:"show",value:function(e,t,i,r){return Vh(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c,d,h;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=this,(s=r.includeDisabledActions?t.allActions:t.validActions).length){n.next=5;break}return this._visible=!1,n.abrupt("return");case 5:if(this._editor.getDomNode()){n.next=8;break}throw this._visible=!1,(0,Yc.canceled)();case 8:this._visible=!0,this._showingActions.value=t,u=this.getMenuActions(e,s,t.documentation),c=md.Position.isIPosition(i)?this._toCoords(i):i||{x:0,y:0},d=this._keybindingResolver.getResolver(),h=this._editor.getOption(114),this._contextMenuService.showContextMenu({domForShadowRoot:h?this._editor.getDomNode():void 0,getAnchor:function(){return c},getActions:function(){return u},onHide:function(){a._visible=!1,a._editor.focus()},autoSelectFirstItem:!0,getKeyBinding:function(e){return e instanceof Kh?d(e.action):void 0}});case 15:case"end":return n.stop()}}),o,this)})))}},{key:"getMenuActions",value:function(e,t,n){var i,r,o,a=this,s=function(e){return new Kh(e.action,(function(){return a._delegate.onSelectCodeAction(e)}))},l=t.map(s),u=(0,qi.default)(n),c=this._editor.getModel();if(c&&l.length){var d,h=!0,f=!1,p=void 0;try{for(var g,v=lh.CodeActionProviderRegistry.all(c)[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var m=g.value;m._getAdditionalMenuItems&&(d=u).push.apply(d,(0,qi.default)(m._getAdditionalMenuItems({trigger:e.type,only:null===(o=null===(r=e.filter)||void 0===r?void 0:r.include)||void 0===o?void 0:o.value},t.map((function(e){return e.action})))))}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}}return u.length&&(i=l).push.apply(i,[new(0,Hh.Separator)].concat((0,qi.default)(u.map((function(e){return s(new(0,rh.CodeActionItem)({title:e.title,command:e},void 0))}))))),l}},{key:"_toCoords",value:function(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();var t=this._editor.getScrolledVisiblePosition(e),n=(0,Bh.getDomNodePagePosition)(this._editor.getDomNode());return{x:n.left+t.left,y:n.top+t.top+t.height}}}]),i}(vd.Disposable);qh=Wh([Uh(2,jh.IContextMenuService),Uh(3,zh.IKeybindingService)],qh);var Jh=function(){"use strict";function e(t){(0,u.default)(this,e),this._keybindingProvider=t}return(0,c.default)(e,[{key:"getResolver",value:function(){var t=this,n=new th((function(){return t._keybindingProvider.getKeybindings().filter((function(t){return e.codeActionCommands.indexOf(t.command)>=0})).filter((function(e){return e.resolvedKeybinding})).map((function(e){var t=e.commandArgs;return e.command===rh.organizeImportsCommandId?t={kind:ch.SourceOrganizeImports.value}:e.command===rh.fixAllCommandId&&(t={kind:ch.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},ph.fromUser(t,{kind:ch.None,apply:"never"}))}))}));return function(e){if(e.kind){var i=t.bestKeybindingForCodeAction(e,n.getValue());return null==i?void 0:i.resolvedKeybinding}}}},{key:"bestKeybindingForCodeAction",value:function(e,t){if(e.kind){var n=new ch(e.kind);return t.filter((function(e){return e.kind.contains(n)})).filter((function(t){return!t.preferred||e.isPreferred})).reduceRight((function(e,t){return e?e.kind.contains(t.kind)?t:e:t}),void 0)}}}]),e}();Jh.codeActionCommands=[rh.refactorCommandId,rh.codeActionCommandId,rh.sourceActionCommandId,rh.organizeImportsCommandId,rh.fixAllCommandId];var Xh={};e(Xh,"LightBulbWidget",(function(){return nf}),(function(e){return nf=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),Bh=o("fTm33");var Gh,Zh=o("fPAzb"),$h=o("neTVg"),Yh=(vd=o("dXCvL"),_d=o("60ELr"),Jc=o("faA3E"),zh=o("5H40S"),Cd=o("4ET02"),kd=o("ht8QC"),o("bAWNA")),Qh=o("8bO6F"),ef=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},tf=function(e,t){return function(n,i){t(n,i,e)}};!function(e){e.Hidden={type:0};e.Showing=function e(t,n,i,r){"use strict";(0,u.default)(this,e),this.actions=t,this.trigger=n,this.editorPosition=i,this.widgetPosition=r,this.type=1}}(Gh||(Gh={}));var nf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this))._editor=e,a._quickFixActionId=i,a._preferredFixActionId=r,a._keybindingService=o,a._onClick=a._register(new(0,$h.Emitter)),a.onClick=a._onClick.event,a._state=Gh.Hidden,a._domNode=document.createElement("div"),a._domNode.className=Qh.Codicon.lightBulb.classNames,a._editor.addContentWidget((0,Hi.default)(a)),a._register(a._editor.onDidChangeModelContent((function(e){var t=a._editor.getModel();(1!==a.state.type||!t||a.state.editorPosition.lineNumber>=t.getLineCount())&&a.hide()}))),Yh.Gesture.ignoreTarget(a._domNode),a._register(Bh.addStandardDisposableGenericMouseDownListner(a._domNode,(function(e){if(1===a.state.type){a._editor.focus(),e.preventDefault();var t=Bh.getDomNodePagePosition(a._domNode),n=t.top,i=t.height,r=a._editor.getOption(58),o=Math.floor(r/3);null!==a.state.widgetPosition.position&&a.state.widgetPosition.position.lineNumber<a.state.editorPosition.lineNumber&&(o+=r),a._onClick.fire({x:e.posx,y:n+i+o,actions:a.state.actions,trigger:a.state.trigger})}}))),a._register(Bh.addDisposableListener(a._domNode,"mouseenter",(function(e){if(1==(1&e.buttons)){a.hide();var t=new(0,Zh.GlobalMouseMoveMonitor);t.startMonitoring(e.target,e.buttons,Zh.standardMouseMoveMerger,(function(){}),(function(){t.dispose()}))}}))),a._register(a._editor.onDidChangeConfiguration((function(e){e.hasChanged(56)&&!a._editor.getOption(56).enabled&&a.hide()}))),a._updateLightBulbTitleAndIcon(),a._register(a._keybindingService.onDidUpdateKeybindings(a._updateLightBulbTitleAndIcon,(0,Hi.default)(a))),a}return(0,c.default)(n,[{key:"dispose",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"LightBulbWidget"}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return 1===this._state.type?this._state.widgetPosition:null}},{key:"update",value:function(e,t,i){var r=this;if(e.validActions.length<=0)return this.hide();var o=this._editor.getOptions();if(!o.get(56).enabled)return this.hide();var a=this._editor.getModel();if(!a)return this.hide();var s=a.validatePosition(i),l=s.lineNumber,u=s.column,c=a.getOptions().tabSize,d=o.get(42),h=a.getLineContent(l),f=_d.TextModel.computeIndentLevel(h,c),p=function(e){return e>2&&r._editor.getTopForLineNumber(e)===r._editor.getTopForLineNumber(e-1)},g=l;if(!(d.spaceWidth*f>22))if(l>1&&!p(l-1))g-=1;else if(p(l+1)){if(u*d.spaceWidth<22)return this.hide()}else g+=1;this.state=new Gh.Showing(e,t,i,{position:{lineNumber:g,column:1},preference:n._posPref}),this._editor.layoutContentWidget(this)}},{key:"hide",value:function(){this.state=Gh.Hidden,this._editor.layoutContentWidget(this)}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this._updateLightBulbTitleAndIcon()}},{key:"_updateLightBulbTitleAndIcon",value:function(){var e,t;if(1===this.state.type&&this.state.actions.hasAutoFix){var n,i;(n=this._domNode.classList).remove.apply(n,(0,qi.default)(Qh.Codicon.lightBulb.classNamesArray)),(i=this._domNode.classList).add.apply(i,(0,qi.default)(Qh.Codicon.lightbulbAutofix.classNamesArray));var r=this._keybindingService.lookupKeybinding(this._preferredFixActionId);if(r)return void(this.title=Jc.localize("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",r.getLabel()))}(e=this._domNode.classList).remove.apply(e,(0,qi.default)(Qh.Codicon.lightbulbAutofix.classNamesArray)),(t=this._domNode.classList).add.apply(t,(0,qi.default)(Qh.Codicon.lightBulb.classNamesArray));var o=this._keybindingService.lookupKeybinding(this._quickFixActionId);this.title=o?Jc.localize("codeActionWithKb","Show Code Actions ({0})",o.getLabel()):Jc.localize("codeAction","Show Code Actions")}},{key:"title",set:function(e){this._domNode.title=e}}]),n}(vd.Disposable);nf._posPref=[0],nf=ef([tf(3,zh.IKeybindingService)],nf),(0,Cd.registerThemingParticipant)((function(e,t){var n,i=null===(n=e.getColor(kd.editorBackground))||void 0===n?void 0:n.transparent(.7),r=e.getColor(kd.editorLightBulbForeground);r&&t.addRule("\n\t\t.monaco-editor .contentWidgets ".concat(Qh.Codicon.lightBulb.cssSelector," {\n\t\t\tcolor: ").concat(r,";\n\t\t\tbackground-color: ").concat(i,";\n\t\t}"));var o=e.getColor(kd.editorLightBulbAutoFixForeground);o&&t.addRule("\n\t\t.monaco-editor .contentWidgets ".concat(Qh.Codicon.lightbulbAutofix.cssSelector," {\n\t\t\tcolor: ").concat(o,";\n\t\t\tbackground-color: ").concat(i,";\n\t\t}"))}));var rf,of=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},af=function(e,t){return function(n,i){t(n,i,e)}},sf=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},lf=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},uf=function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},cf=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,r,o,a,s){var c;return(0,u.default)(this,i),(c=t.call(this))._editor=e,c.delegate=a,c._activeCodeActions=c._register(new(0,vd.MutableDisposable)),rf.set((0,Hi.default)(c),!1),c._codeActionWidget=new th((function(){return c._register(s.createInstance(Fh.CodeActionMenu,c._editor,{onSelectCodeAction:function(e){return sf((0,Hi.default)(c),void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.delegate.applyCodeAction(e,!0);case 1:case"end":return t.stop()}}),t,this)})))}}))})),c._lightBulbWidget=new th((function(){var e=c._register(s.createInstance(Xh.LightBulbWidget,c._editor,r,o));return c._register(e.onClick((function(e){return c.showCodeActionList(e.trigger,e.actions,e,{includeDisabledActions:!1})}))),e})),c}return(0,c.default)(i,[{key:"dispose",value:function(){lf(this,rf,!0,"f"),(0,zi.default)((0,Wi.default)(i.prototype),"dispose",this).call(this)}},{key:"update",value:function(e){var t,i,r;return sf(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(1===e.type){n.next=3;break}return null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide(),n.abrupt("return");case 3:return n.prev=4,n.next=7,e.actions;case 7:a=n.sent,n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(4),(0,Yc.onUnexpectedError)(n.t0),n.abrupt("return");case 14:if(!uf(this,rf,"f")){n.next=16;break}return n.abrupt("return");case 16:if(this._lightBulbWidget.getValue().update(a,e.trigger,e.position),1!==e.trigger.type){n.next=45;break}if(!(null===(i=e.trigger.filter)||void 0===i?void 0:i.include)){n.next=34;break}if(!(s=this.tryGetValidActionToApply(e.trigger,a))){n.next=28;break}return n.prev=21,n.next=24,this.delegate.applyCodeAction(s,!1);case 24:return n.prev=24,a.dispose(),n.finish(24);case 27:return n.abrupt("return");case 28:if(!e.trigger.context){n.next=34;break}if(!(u=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,a))||!u.action.disabled){n.next=34;break}return Ih.MessageController.get(this._editor).showMessage(u.action.disabled,e.trigger.context.position),a.dispose(),n.abrupt("return");case 34:if(c=!!(null===(r=e.trigger.filter)||void 0===r?void 0:r.include),!e.trigger.context){n.next=41;break}if(a.allActions.length&&(c||a.validActions.length)){n.next=41;break}return Ih.MessageController.get(this._editor).showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=a,a.dispose(),n.abrupt("return");case 41:this._activeCodeActions.value=a,this._codeActionWidget.getValue().show(e.trigger,a,e.position,{includeDisabledActions:c}),n.next=46;break;case 45:this._codeActionWidget.getValue().isVisible?a.dispose():this._activeCodeActions.value=a;case 46:case"end":return n.stop()}}),o,this,[[4,10],[21,,24,27]])})))}},{key:"getInvalidActionThatWouldHaveBeenApplied",value:function(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((function(e){return e.action.disabled})):void 0}},{key:"tryGetValidActionToApply",value:function(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}},{key:"showCodeActionList",value:function(e,t,i,r){return sf(this,void 0,void 0,n(l).mark((function o(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._codeActionWidget.getValue().show(e,t,i,r);case 1:case"end":return n.stop()}}),o,this)})))}}]),i}(vd.Disposable);rf=new WeakMap,cf=of([af(4,Oh.IInstantiationService)],cf);Jc=o("faA3E"),vh=o("j9pk1"),$c=o("efZ3W"),Oh=o("hm5an");var df=o("hMofI"),hf=o("93Ice"),ff=(gh=o("gkTZs"),o("ckUVh")),pf={};e(pf,"SUPPORTED_CODE_ACTIONS",(function(){return _f}),(function(e){return _f=e})),e(pf,"CodeActionModel",(function(){return Cf}),(function(e){return Cf=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),gd=o("hJucn"),Yc=o("2NkmB"),$h=o("neTVg"),vd=o("dXCvL");var gf,vf,mf=o("L9zbH"),yf=(yd=o("5MJfC"),lh=o("chpjt"),$c=o("efZ3W"),gh=o("gkTZs"),function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)}),bf=function(e,t,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(e,n):r?r.value=n:t.set(e,n),n},_f=new(0,$c.RawContextKey)("supportedCodeAction",""),wf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;return(0,u.default)(this,n),(o=t.call(this))._editor=e,o._markerService=i,o._signalChange=r,o._delay=a,o._autoTriggerTimer=o._register(new(0,gd.TimeoutTimer)),o._register(o._markerService.onMarkerChanged((function(e){return o._onMarkerChanges(e)}))),o._register(o._editor.onDidChangeCursorPosition((function(){return o._onCursorChange()}))),o}return(0,c.default)(n,[{key:"trigger",value:function(e){var t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);return this._createEventAndSignalChange(e,t)}},{key:"_onMarkerChanges",value:function(e){var t=this,n=this._editor.getModel();n&&e.some((function(e){return(0,mf.isEqual)(e,n.uri)}))&&this._autoTriggerTimer.cancelAndSet((function(){t.trigger({type:2})}),this._delay)}},{key:"_onCursorChange",value:function(){var e=this;this._autoTriggerTimer.cancelAndSet((function(){e.trigger({type:2})}),this._delay)}},{key:"_getRangeOfMarker",value:function(e){var t=this._editor.getModel();if(t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._markerService.read({resource:t.uri})[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=t.validateRange(s);if(yd.Range.intersectRanges(l,e))return yd.Range.lift(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}},{key:"_getRangeOfSelectionUnlessWhitespaceEnclosed",value:function(e){if(this._editor.hasModel()){var t=this._editor.getModel(),n=this._editor.getSelection();if(n.isEmpty()&&2===e.type){var i=n.getPosition(),r=i.lineNumber,o=i.column,a=t.getLineContent(r);if(0===a.length)return;if(1===o){if(/\s/.test(a[0]))return}else if(o===t.getLineMaxColumn(r)){if(/\s/.test(a[a.length-1]))return}else if(/\s/.test(a[o-2])&&/\s/.test(a[o-1]))return}return n}}},{key:"_createEventAndSignalChange",value:function(e,t){var n=this._editor.getModel();if(t&&n){var i=this._getRangeOfMarker(t),r=i?i.getStartPosition():t.getStartPosition(),o={trigger:e,selection:t,position:r};return this._signalChange(o),o}this._signalChange(void 0)}}]),n}(vd.Disposable);!function(e){e.Empty={type:0};var t=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.trigger=t,this.rangeOrSelection=n,this.position=i,this._cancellablePromise=r,this.type=1,this.actions=r.catch((function(e){if((0,Yc.isPromiseCanceledError)(e))return kf;throw e}))}return(0,c.default)(e,[{key:"cancel",value:function(){this._cancellablePromise.cancel()}}]),e}();e.Triggered=t}(vf||(vf={}));var kf={allActions:[],validActions:[],dispose:function(){},documentation:[],hasAutoFix:!1},Cf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this))._editor=e,a._markerService=i,a._progressService=o,a._codeActionOracle=a._register(new(0,vd.MutableDisposable)),a._state=vf.Empty,a._onDidChangeState=a._register(new(0,$h.Emitter)),a.onDidChangeState=a._onDidChangeState.event,gf.set((0,Hi.default)(a),!1),a._supportedCodeActions=_f.bindTo(r),a._register(a._editor.onDidChangeModel((function(){return a._update()}))),a._register(a._editor.onDidChangeModelLanguage((function(){return a._update()}))),a._register(lh.CodeActionProviderRegistry.onDidChange((function(){return a._update()}))),a._update(),a}return(0,c.default)(n,[{key:"dispose",value:function(){yf(this,gf,"f")||(bf(this,gf,!0,"f"),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this),this.setState(vf.Empty,!0))}},{key:"_update",value:function(){var e=this;if(!yf(this,gf,"f")){this._codeActionOracle.value=void 0,this.setState(vf.Empty);var t=this._editor.getModel();if(t&&lh.CodeActionProviderRegistry.has(t)&&!this._editor.getOption(80)){var n,i=[],r=!0,o=!1,a=void 0;try{for(var s,l=lh.CodeActionProviderRegistry.all(t)[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;Array.isArray(u.providedCodeActionKinds)&&(n=i).push.apply(n,(0,qi.default)(u.providedCodeActionKinds))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this._supportedCodeActions.set(i.join(" ")),this._codeActionOracle.value=new wf(this._editor,this._markerService,(function(n){var i;if(n){var r=(0,gd.createCancelablePromise)((function(e){return(0,rh.getCodeActions)(t,n.selection,n.trigger,gh.Progress.None,e)}));1===n.trigger.type&&(null===(i=e._progressService)||void 0===i||i.showWhile(r,250)),e.setState(new vf.Triggered(n.trigger,n.selection,n.position,r))}else e.setState(vf.Empty)}),void 0),this._codeActionOracle.value.trigger({type:2})}else this._supportedCodeActions.reset()}}},{key:"trigger",value:function(e){this._codeActionOracle.value&&this._codeActionOracle.value.trigger(e)}},{key:"setState",value:function(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||yf(this,gf,"f")||this._onDidChangeState.fire(e))}}]),n}(vd.Disposable);gf=new WeakMap;var xf=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Sf=function(e,t){return function(n,i){t(n,i,e)}},Ef=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};function Df(e){return $c.ContextKeyExpr.regex(pf.SUPPORTED_CODE_ACTIONS.keys()[0],new RegExp("(\\s|^)"+(0,nh.escapeRegExpCharacters)(e.value)+"\\b"))}var Af={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:Jc.localize("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:Jc.localize("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[Jc.localize("args.schema.apply.first","Always apply the first returned code action."),Jc.localize("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),Jc.localize("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:Jc.localize("args.schema.preferred","Controls if only preferred code actions should be returned.")}}},If=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,r,o,a,s){var c;return(0,u.default)(this,i),(c=t.call(this))._instantiationService=s,c._editor=e,c._model=c._register(new(0,pf.CodeActionModel)(c._editor,r,o,a)),c._register(c._model.onDidChangeState((function(e){return c.update(e)}))),c._ui=new th((function(){return c._register(new(0,Ah.CodeActionUi)(e,Mf.Id,Hf.Id,{applyCodeAction:function(e,t){return Ef((0,Hi.default)(c),void 0,void 0,n(l).mark((function i(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this._applyCodeAction(e);case 3:return n.prev=3,t&&this._trigger({type:2,filter:{}}),n.finish(3);case 6:case"end":return n.stop()}}),i,this,[[0,,3,6]])})))}},c._instantiationService))})),c}return(0,c.default)(i,[{key:"update",value:function(e){this._ui.getValue().update(e)}},{key:"showCodeActions",value:function(e,t,n){return this._ui.getValue().showCodeActionList(e,t,n,{includeDisabledActions:!1})}},{key:"manualTriggerAtCurrentPosition",value:function(e,t,n){if(this._editor.hasModel()){Ih.MessageController.get(this._editor).closeMessage();var i=this._editor.getPosition();this._trigger({type:1,filter:t,autoApply:n,context:{notAvailableMessage:e,position:i}})}}},{key:"_trigger",value:function(e){return this._model.trigger(e)}},{key:"_applyCodeAction",value:function(e){return this._instantiationService.invokeFunction(Rf,e,this._editor)}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(vd.Disposable);function Rf(e,t,i){return Ef(this,void 0,void 0,n(l).mark((function r(){var o,a,s,u,c,d;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.get(ih.IBulkEditService),a=e.get(vh.ICommandService),s=e.get(ff.ITelemetryService),u=e.get(hf.INotificationService),s.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred}),n.next=7,t.resolve(eh.CancellationToken.None);case 7:if(!t.action.edit){n.next=10;break}return n.next=10,o.apply(ih.ResourceEdit.convert(t.action.edit),{editor:i,label:t.action.title});case 10:if(!t.action.command){n.next=21;break}return n.prev=11,n.next=15,(c=a).executeCommand.apply(c,[t.action.command.id].concat((0,qi.default)(t.action.command.arguments||[])));case 15:n.next=21;break;case 17:n.prev=17,n.t0=n.catch(11),d=Tf(n.t0),u.error("string"==typeof d?d:Jc.localize("applyCodeActionFailed","An unknown error occurred while applying the code action"));case 21:case"end":return n.stop()}}),r,null,[[11,17]])})))}function Tf(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}function Lf(e,t,n,i){if(e.hasModel()){var r=If.get(e);r&&r.manualTriggerAtCurrentPosition(t,n,i)}}If.ID="editor.contrib.quickFixController",If=xf([Sf(1,df.IMarkerService),Sf(2,$c.IContextKeyService),Sf(3,gh.IEditorProgressService),Sf(4,Oh.IInstantiationService)],If);var Mf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.Id,label:Jc.localize("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasCodeActionsProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2132,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){return Lf(t,Jc.localize("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0)}}]),n}(qc.EditorAction);Mf.Id="editor.action.quickFix";var Nf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:rh.codeActionCommandId,precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:Af}]}})}return(0,c.default)(n,[{key:"runEditorCommand",value:function(e,t,n){var i=ph.fromUser(n,{kind:ch.Empty,apply:"ifSingle"});return Lf(t,"string"==typeof(null==n?void 0:n.kind)?i.preferred?Jc.localize("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):Jc.localize("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?Jc.localize("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):Jc.localize("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}]),n}(qc.EditorCommand),Pf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:rh.refactorCommandId,label:Jc.localize("refactor.label","Refactor..."),alias:"Refactor...",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasCodeActionsProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Df(ch.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:Af}]}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){var i=ph.fromUser(n,{kind:ch.Refactor,apply:"never"});return Lf(t,"string"==typeof(null==n?void 0:n.kind)?i.preferred?Jc.localize("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):Jc.localize("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?Jc.localize("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):Jc.localize("editor.action.refactor.noneMessage","No refactorings available"),{include:ch.Refactor.contains(i.kind)?i.kind:ch.None,onlyIncludePreferredActions:i.preferred},i.apply)}}]),n}(qc.EditorAction),Of=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:rh.sourceActionCommandId,label:Jc.localize("source.label","Source Action..."),alias:"Source Action...",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Df(ch.Source))},description:{description:"Source Action...",args:[{name:"args",schema:Af}]}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){var i=ph.fromUser(n,{kind:ch.Source,apply:"never"});return Lf(t,"string"==typeof(null==n?void 0:n.kind)?i.preferred?Jc.localize("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):Jc.localize("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?Jc.localize("editor.action.source.noneMessage.preferred","No preferred source actions available"):Jc.localize("editor.action.source.noneMessage","No source actions available"),{include:ch.Source.contains(i.kind)?i.kind:ch.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}]),n}(qc.EditorAction),Ff=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:rh.organizeImportsCommandId,label:Jc.localize("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Df(ch.SourceOrganizeImports)),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1581,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){return Lf(t,Jc.localize("editor.action.organize.noneMessage","No organize imports action available"),{include:ch.SourceOrganizeImports,includeSourceActions:!0},"ifSingle")}}]),n}(qc.EditorAction),Bf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:rh.fixAllCommandId,label:Jc.localize("fixAll.label","Fix All"),alias:"Fix All",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Df(ch.SourceFixAll))})}return(0,c.default)(n,[{key:"run",value:function(e,t){return Lf(t,Jc.localize("fixAll.noneMessage","No fix all action available"),{include:ch.SourceFixAll,includeSourceActions:!0},"ifSingle")}}]),n}(qc.EditorAction),Hf=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.Id,label:Jc.localize("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Df(ch.QuickFix)),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1620,mac:{primary:2644},weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){return Lf(t,Jc.localize("editor.action.autoFix.noneMessage","No auto fixes available"),{include:ch.QuickFix,onlyIncludePreferredActions:!0},"ifSingle")}}]),n}(qc.EditorAction);Hf.Id="editor.action.autoFix",(0,qc.registerEditorContribution)(Qd.QuickFixController.ID,Qd.QuickFixController),(0,qc.registerEditorAction)(Qd.QuickFixAction),(0,qc.registerEditorAction)(Qd.RefactorAction),(0,qc.registerEditorAction)(Qd.SourceAction),(0,qc.registerEditorAction)(Qd.OrganizeImportsAction),(0,qc.registerEditorAction)(Qd.AutoFixAction),(0,qc.registerEditorAction)(Qd.FixAllAction),(0,qc.registerEditorCommand)(new(0,Qd.CodeActionCommand));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),gd=o("hJucn"),Yc=o("2NkmB"),vd=o("dXCvL"),sh=o("fLZJB"),qc=o("THDAR"),lh=o("chpjt");var jf={};e(jf,"CodeLensModel",(function(){return Uf}),(function(e){return Uf=e})),e(jf,"getCodeLensModel",(function(){return Vf}),(function(e){return Vf=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),l=o("1JCPQ"),eh=o("j6sHb"),Yc=o("2NkmB"),ah=o("iPPVB"),lh=o("chpjt"),uh=o("gPDld"),vd=o("dXCvL"),vh=o("j9pk1");var zf=o("jW8FZ"),Wf=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Uf=function(){"use strict";function e(){(0,u.default)(this,e),this.lenses=[],this._disposables=new(0,vd.DisposableStore)}return(0,c.default)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"add",value:function(e,t){this._disposables.add(e);var n=!0,i=!1,r=void 0;try{for(var o,a=e.lenses[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.lenses.push({symbol:s,provider:t})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}}]),e}();function Vf(e,t){return Wf(this,void 0,void 0,n(l).mark((function i(){var r,o,a,s,u;return n(l).wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=this,o=lh.CodeLensProviderRegistry.ordered(e),a=new Map,s=new Uf,u=o.map((function(i,o){return Wf(r,void 0,void 0,n(l).mark((function r(){var u;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.set(i,o),n.prev=1,n.next=4,Promise.resolve(i.provideCodeLenses(e,t));case 4:(u=n.sent)&&s.add(u,i),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),(0,Yc.onUnexpectedExternalError)(n.t0);case 11:case"end":return n.stop()}}),r,null,[[1,8]])})))})),i.next=7,Promise.all(u);case 7:return s.lenses=s.lenses.sort((function(e,t){return e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:a.get(e.provider)<a.get(t.provider)?-1:a.get(e.provider)>a.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0})),i.abrupt("return",s);case 9:case"end":return i.stop()}}),i,this)})))}vh.CommandsRegistry.registerCommand("_executeCodeLensProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=(0,Ki.default)(n,2),o=r[0],a=r[1];(0,zf.assertType)(ah.URI.isUri(o)),(0,zf.assertType)("number"==typeof a||!a);var s=e.get(uh.IModelService).getModel(o);if(!s)throw(0,Yc.illegalArgument)();var l=[],u=new(0,vd.DisposableStore);return Vf(s,eh.CancellationToken.None).then((function(e){u.add(e);var t=[],n=!0,i=!1,r=void 0;try{for(var o,c=function(e,n){var i=n.value;null==a||Boolean(i.symbol.command)?l.push(i.symbol):a-- >0&&i.provider.resolveCodeLens&&t.push(Promise.resolve(i.provider.resolveCodeLens(s,i.symbol,eh.CancellationToken.None)).then((function(e){return l.push(e||i.symbol)})))},d=e.lenses[Symbol.iterator]();!(n=(o=d.next()).done);n=!0)c(0,o)}catch(e){i=!0,r=e}finally{try{n||null==d.return||d.return()}finally{if(i)throw r}}return Promise.all(t)})).then((function(){return l})).finally((function(){setTimeout((function(){return u.dispose()}),100)}))}));u=o("4JAgF"),c=o("9HoHC"),qi=o("caN7I"),Bh=o("fTm33"),yd=o("5MJfC"),_d=o("60ELr"),wd=o("a6Ojp"),kd=o("ht8QC"),Cd=o("4ET02");var Kf=o("bgrLd"),qf=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.afterLineNumber=t,this.heightInPx=n,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}return(0,c.default)(e,[{key:"onComputedHeight",value:function(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}}]),e}(),Jf=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=t,this._id="codelens.widget-".concat(e._idPool++),this.updatePosition(i),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration ".concat(n)}return(0,c.default)(e,[{key:"withCommands",value:function(e,t){this._commands.clear();for(var n,i=[],r=!1,o=0;o<e.length;o++){var a=e[o];if(a&&(r=!0,a.command)){var s,l,u=(0,Kf.renderLabelWithIcons)(a.command.title.trim());if(a.command.id)i.push((l=Bh).$.apply(l,["a",{id:String(o),title:a.command.tooltip}].concat((0,qi.default)(u)))),this._commands.set(String(o),a.command);else i.push((s=Bh).$.apply(s,["span",{title:a.command.tooltip}].concat((0,qi.default)(u))));o+1<e.length&&i.push(Bh.$("span",void 0,"|"))}}r?((n=Bh).reset.apply(n,[this._domNode].concat((0,qi.default)(i))),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Bh.reset(this._domNode,Bh.$("span",void 0,"no commands"))}},{key:"getCommand",value:function(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}},{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"updatePosition",value:function(e){var t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}},{key:"getPosition",value:function(){return this._widgetPosition||null}}]),e}();Jf._idPool=0;var Xf=function(){"use strict";function e(){(0,u.default)(this,e),this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}return(0,c.default)(e,[{key:"addDecoration",value:function(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}},{key:"removeDecoration",value:function(e){this._removeDecorations.push(e)}},{key:"commit",value:function(e){for(var t=e.deltaDecorations(this._removeDecorations,this._addDecorations),n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}]),e}(),Gf=function(){"use strict";function e(t,n,i,r,o,a,s){var l,c=this;(0,u.default)(this,e),this._isDisposed=!1,this._editor=n,this._className=i,this._data=t,this._decorationIds=[];var d=[];this._data.forEach((function(e,t){e.symbol.command&&d.push(e.symbol),r.addDecoration({range:e.symbol.range,options:_d.ModelDecorationOptions.EMPTY},(function(e){return c._decorationIds[t]=e})),l=l?yd.Range.plusRange(l,e.symbol.range):yd.Range.lift(e.symbol.range)})),this._viewZone=new qf(l.startLineNumber-1,a,s),this._viewZoneId=o.addZone(this._viewZone),d.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(d,!1))}return(0,c.default)(e,[{key:"_createContentWidgetIfNecessary",value:function(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new Jf(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}},{key:"dispose",value:function(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t&&t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}},{key:"isDisposed",value:function(){return this._isDisposed}},{key:"isValid",value:function(){var e=this;return this._decorationIds.some((function(t,n){var i=e._editor.getModel().getDecorationRange(t),r=e._data[n].symbol;return!(!i||yd.Range.isEmpty(r.range)!==i.isEmpty())}))}},{key:"updateCodeLensSymbols",value:function(e,t){var n=this;this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((function(e,i){t.addDecoration({range:e.symbol.range,options:_d.ModelDecorationOptions.EMPTY},(function(e){return n._decorationIds[i]=e}))}))}},{key:"updateHeight",value:function(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}},{key:"computeIfNecessary",value:function(e){if(!this._viewZone.domNode.hasAttribute("monaco-visible-view-zone"))return null;for(var t=0;t<this._decorationIds.length;t++){var n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}},{key:"updateCommands",value:function(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(var t=0;t<this._data.length;t++){var n=e[t];if(n){var i=this._data[t].symbol;i.command=n.command||i.command}}}},{key:"getCommand",value:function(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}},{key:"getLineNumber",value:function(){var e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}},{key:"update",value:function(e){if(this.isValid()){var t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}},{key:"getItems",value:function(){return this._data}}]),e}();(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(wd.editorCodeLensForeground);n&&(t.addRule(".monaco-editor .codelens-decoration { color: ".concat(n,"; }")),t.addRule(".monaco-editor .codelens-decoration .codicon { color: ".concat(n,"; }")));var i=e.getColor(kd.editorActiveLinkForeground);i&&(t.addRule(".monaco-editor .codelens-decoration > a:hover { color: ".concat(i," !important; }")),t.addRule(".monaco-editor .codelens-decoration > a:hover .codicon { color: ".concat(i," !important; }")))}));vh=o("j9pk1"),hf=o("93Ice");var Zf={};e(Zf,"ICodeLensCache",(function(){return ip}),(function(e){return ip=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),qi=o("caN7I"),Oh=o("hm5an");var $f=o("2cK24"),Yf=o("728Ww"),Qf=o("6TN8i"),ep=(yd=o("5MJfC"),gd=o("hJucn"),o("c2GQh")),tp=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},np=function(e,t){return function(n,i){t(n,i,e)}},ip=(0,Oh.createDecorator)("ICodeLensCache"),rp=function e(t,n){"use strict";(0,u.default)(this,e),this.lineCount=t,this.data=n},op=function(){"use strict";function e(t){var n=this;(0,u.default)(this,e),this._fakeProvider=new(function(){function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"provideCodeLenses",value:function(){throw new Error("not supported")}}]),e}()),this._cache=new(0,Yf.LRUCache)(20,.75);(0,gd.runWhenIdle)((function(){return t.remove("codelens/cache",1)}));var i="codelens/cache2",r=t.get(i,1,"{}");this._deserialize(r),(0,ep.once)(t.onWillSaveState)((function(e){e.reason===Qf.WillSaveStateReason.SHUTDOWN&&t.store(i,n._serialize(),1,1)}))}return(0,c.default)(e,[{key:"put",value:function(e,t){var n=t.lenses.map((function(e){var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new(0,jf.CodeLensModel);i.add({lenses:n,dispose:function(){}},this._fakeProvider);var r=new rp(e.getLineCount(),i);this._cache.set(e.uri.toString(),r)}},{key:"get",value:function(e){var t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}},{key:"delete",value:function(e){this._cache.delete(e.uri.toString())}},{key:"_serialize",value:function(){var e=Object.create(null),t=!0,n=!1,i=void 0;try{for(var r,o=this._cache[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=(0,Ki.default)(r.value,2),s=a[0],l=a[1],u=new Set,c=!0,d=!1,h=void 0;try{for(var f,p=l.data.lenses[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var g=f.value;u.add(g.symbol.range.startLineNumber)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}e[s]={lineCount:l.lineCount,lines:(0,qi.default)(u.values())}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return JSON.stringify(e)}},{key:"_deserialize",value:function(e){try{var t=JSON.parse(e);for(var n in t){var i=t[n],r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i.lines[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push({range:new(0,yd.Range)(c,1,c,11)})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var d=new(0,jf.CodeLensModel);d.add({lenses:r,dispose:function(){}},this._fakeProvider),this._cache.set(n,new rp(i.lineCount,d))}}catch(e){}}}]),e}();op=tp([np(0,Qf.IStorageService)],op),(0,$f.registerSingleton)(ip,op);Bh=o("fTm33");var ap=o("jrm6V"),sp=o("8l08w"),lp=(Jc=o("faA3E"),Xc=o("5cDyY"),o("fe9Gx")),up=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cp=function(e,t){return function(n,i){t(n,i,e)}},dp=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},hp=function(){"use strict";function e(t,n,i,r){var o=this;(0,u.default)(this,e),this._editor=t,this._commandService=n,this._notificationService=i,this._codeLensCache=r,this._disposables=new(0,vd.DisposableStore),this._localToDispose=new(0,vd.DisposableStore),this._lenses=[],this._getCodeLensModelDelays=new(0,lp.LanguageFeatureRequestDelays)(lh.CodeLensProviderRegistry,250,2500),this._oldCodeLensModels=new(0,vd.DisposableStore),this._resolveCodeLensesDelays=new(0,lp.LanguageFeatureRequestDelays)(lh.CodeLensProviderRegistry,250,2500),this._resolveCodeLensesScheduler=new(0,gd.RunOnceScheduler)((function(){return o._resolveCodeLensesInViewport()}),this._resolveCodeLensesDelays.min),this._disposables.add(this._editor.onDidChangeModel((function(){return o._onModelChange()}))),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){return o._onModelChange()}))),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){(e.hasChanged(42)||e.hasChanged(15)||e.hasChanged(14))&&o._updateLensStyle(),e.hasChanged(13)&&o._onModelChange()}))),this._disposables.add(lh.CodeLensProviderRegistry.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,ap.hash)(this._editor.getId()).toString(16),this._styleElement=Bh.createStyleSheet(Bh.isInShadowDOM(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}return(0,c.default)(e,[{key:"dispose",value:function(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}},{key:"_getLayoutInfo",value:function(){var e,t=this._editor.getOption(15);return!t||t<5?(t=.9*this._editor.getOption(44)|0,e=this._editor.getOption(58)):e=t*Math.max(1.3,this._editor.getOption(58)/this._editor.getOption(44))|0,{codeLensHeight:e,fontSize:t}}},{key:"_updateLensStyle",value:function(){var e=this,t=this._getLayoutInfo(),n=t.codeLensHeight,i=t.fontSize,r=this._editor.getOption(14),o=this._editor.getOption(42),a="--codelens-font-family".concat(this._styleClassName),s="--codelens-font-features".concat(this._styleClassName),l="\n\t\t.monaco-editor .codelens-decoration.".concat(this._styleClassName," { line-height: ").concat(n,"px; font-size: ").concat(i,"px; padding-right: ").concat(Math.round(.5*i),"px; font-feature-settings: var(").concat(s,") }\n\t\t.monaco-editor .codelens-decoration.").concat(this._styleClassName," span.codicon { line-height: ").concat(n,"px; font-size: ").concat(i,"px; }\n\t\t");r&&(l+=".monaco-editor .codelens-decoration.".concat(this._styleClassName," { font-family: var(").concat(a,")}")),this._styleElement.textContent=l,this._editor.getContainerDomNode().style.setProperty(a,null!=r?r:"inherit"),this._editor.getContainerDomNode().style.setProperty(s,o.fontFeatureSettings),this._editor.changeViewZones((function(t){var i=!0,r=!1,o=void 0;try{for(var a,s=e._lenses[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.updateHeight(n,t)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}))}},{key:"_localDispose",value:function(){var e,t,n;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(n=this._currentCodeLensModel)||void 0===n||n.dispose()}},{key:"_onModelChange",value:function(){var e=this;this._localDispose();var t=this._editor.getModel();if(t&&this._editor.getOption(13)){var n=this._codeLensCache.get(t);if(n&&this._renderCodeLensSymbols(n),lh.CodeLensProviderRegistry.has(t)){var i=!0,r=!1,o=void 0;try{for(var a,s=lh.CodeLensProviderRegistry.all(t)[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if("function"==typeof l.onDidChange){var u=l.onDidChange((function(){return c.schedule()}));this._localToDispose.add(u)}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}var c=new(0,gd.RunOnceScheduler)((function(){var n,i=Date.now();null===(n=e._getCodeLensModelPromise)||void 0===n||n.cancel(),e._getCodeLensModelPromise=(0,gd.createCancelablePromise)((function(e){return(0,jf.getCodeLensModel)(t,e)})),e._getCodeLensModelPromise.then((function(n){e._currentCodeLensModel&&e._oldCodeLensModels.add(e._currentCodeLensModel),e._currentCodeLensModel=n,e._codeLensCache.put(t,n);var r=e._getCodeLensModelDelays.update(t,Date.now()-i);c.delay=r,e._renderCodeLensSymbols(n),e._resolveCodeLensesInViewportSoon()}),Yc.onUnexpectedError)}),this._getCodeLensModelDelays.get(t));this._localToDispose.add(c),this._localToDispose.add((0,vd.toDisposable)((function(){return e._resolveCodeLensesScheduler.cancel()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(){e._editor.changeDecorations((function(t){e._editor.changeViewZones((function(n){var i=[],r=-1;e._lenses.forEach((function(e){e.isValid()&&r!==e.getLineNumber()?(e.update(n),r=e.getLineNumber()):i.push(e)}));var o=new Xf;i.forEach((function(t){t.dispose(o,n),e._lenses.splice(e._lenses.indexOf(t),1)})),o.commit(t)}))})),c.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((function(){c.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((function(t){t.scrollTopChanged&&e._lenses.length>0&&e._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((function(){e._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,vd.toDisposable)((function(){if(e._editor.getModel()){var t=sh.StableEditorScrollState.capture(e._editor);e._editor.changeDecorations((function(t){e._editor.changeViewZones((function(n){e._disposeAllLenses(t,n)}))})),t.restore(e._editor)}else e._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((function(t){if(9===t.target.type){var n=t.target.element;"SPAN"===(null==n?void 0:n.tagName)&&(n=n.parentElement);var i=!0,r=!1,o=void 0;if("A"===(null==n?void 0:n.tagName))try{for(var a,s=e._lenses[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value.getCommand(n);if(l){var u;(u=e._commandService).executeCommand.apply(u,[l.id].concat((0,qi.default)(l.arguments||[]))).catch((function(t){return e._notificationService.error(t)}));break}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}}))),c.schedule()}else n&&this._localToDispose.add((0,gd.disposableTimeout)((function(){var i=e._codeLensCache.get(t);n===i&&(e._codeLensCache.delete(t),e._onModelChange())}),3e4))}}},{key:"_disposeAllLenses",value:function(e,t){var n=new Xf,i=!0,r=!1,o=void 0;try{for(var a,s=this._lenses[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){a.value.dispose(n,t)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}e&&n.commit(e),this._lenses.length=0}},{key:"_renderCodeLensSymbols",value:function(e){var t=this;if(this._editor.hasModel()){var n,i=this._editor.getModel().getLineCount(),r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e.lenses[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=c.symbol.range.startLineNumber;d<1||d>i||(n&&n[n.length-1].symbol.range.startLineNumber===d?n.push(c):(n=[c],r.push(n)))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var h=sh.StableEditorScrollState.capture(this._editor),f=this._getLayoutInfo();this._editor.changeDecorations((function(e){t._editor.changeViewZones((function(n){for(var i=new Xf,o=0,a=0;a<r.length&&o<t._lenses.length;){var s=r[a][0].symbol.range.startLineNumber,l=t._lenses[o].getLineNumber();l<s?(t._lenses[o].dispose(i,n),t._lenses.splice(o,1)):l===s?(t._lenses[o].updateCodeLensSymbols(r[a],i),a++,o++):(t._lenses.splice(o,0,new Gf(r[a],t._editor,t._styleClassName,i,n,f.codeLensHeight,(function(){return t._resolveCodeLensesInViewportSoon()}))),o++,a++)}for(;o<t._lenses.length;)t._lenses[o].dispose(i,n),t._lenses.splice(o,1);for(;a<r.length;)t._lenses.push(new Gf(r[a],t._editor,t._styleClassName,i,n,f.codeLensHeight,(function(){return t._resolveCodeLensesInViewportSoon()}))),a++;i.commit(e)}))})),h.restore(this._editor)}}},{key:"_resolveCodeLensesInViewportSoon",value:function(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}},{key:"_resolveCodeLensesInViewport",value:function(){var e,t=this;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;var n=this._editor.getModel();if(n){var i=[],r=[];if(this._lenses.forEach((function(e){var t=e.computeIfNecessary(n);t&&(i.push(t),r.push(e))})),0!==i.length){var o=Date.now(),a=(0,gd.createCancelablePromise)((function(e){var t=i.map((function(t,i){var o=new Array(t.length),a=t.map((function(t,i){return t.symbol.command||"function"!=typeof t.provider.resolveCodeLens?(o[i]=t.symbol,Promise.resolve(void 0)):Promise.resolve(t.provider.resolveCodeLens(n,t.symbol,e)).then((function(e){o[i]=e}),Yc.onUnexpectedExternalError)}));return Promise.all(a).then((function(){e.isCancellationRequested||r[i].isDisposed()||r[i].updateCommands(o)}))}));return Promise.all(t)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((function(){var e=t._resolveCodeLensesDelays.update(n,Date.now()-o);t._resolveCodeLensesScheduler.delay=e,t._currentCodeLensModel&&t._codeLensCache.put(n,t._currentCodeLensModel),t._oldCodeLensModels.clear(),a===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}),(function(e){(0,Yc.onUnexpectedError)(e),a===t._resolveCodeLensesPromise&&(t._resolveCodeLensesPromise=void 0)}))}}}},{key:"getLenses",value:function(){return this._lenses}}]),e}();hp.ID="css.editor.codeLens",hp=up([cp(1,vh.ICommandService),cp(2,hf.INotificationService),cp(3,Zf.ICodeLensCache)],hp),(0,qc.registerEditorContribution)(hp.ID,hp),(0,qc.registerEditorAction)(function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"codelens.showLensesInCurrentLine",precondition:Xc.EditorContextKeys.hasCodeLensProvider,label:(0,Jc.localize)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}return(0,c.default)(i,[{key:"run",value:function(e,t){return dp(this,void 0,void 0,n(l).mark((function i(){var r,o,a,s,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x,S;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.hasModel()){n.next=2;break}return n.abrupt("return");case 2:r=e.get(sp.IQuickInputService),o=e.get(vh.ICommandService),a=e.get(hf.INotificationService),s=t.getSelection().positionLineNumber,u=t.getContribution(hp.ID),c=[],d=!0,h=!1,f=void 0,n.prev=9,p=u.getLenses()[Symbol.iterator]();case 11:if(d=(g=p.next()).done){n.next=34;break}if(v=g.value,m=!0,y=!1,b=void 0,v.getLineNumber()!==s){n.next=31;break}for(n.prev=15,_=v.getItems()[Symbol.iterator]();!(m=(w=_.next()).done);m=!0)k=w.value,(C=k.symbol.command)&&c.push({label:C.title,command:C});n.next=23;break;case 19:n.prev=19,n.t0=n.catch(15),y=!0,b=n.t0;case 23:n.prev=23,n.prev=24,m||null==_.return||_.return();case 26:if(n.prev=26,!y){n.next=29;break}throw b;case 29:return n.finish(26);case 30:return n.finish(23);case 31:d=!0,n.next=11;break;case 34:n.next=40;break;case 36:n.prev=36,n.t1=n.catch(9),h=!0,f=n.t1;case 40:n.prev=40,n.prev=41,d||null==p.return||p.return();case 43:if(n.prev=43,!h){n.next=46;break}throw f;case 46:return n.finish(43);case 47:return n.finish(40);case 48:if(0!==c.length){n.next=50;break}return n.abrupt("return");case 50:return n.next=52,r.pick(c,{canPickMany:!1});case 52:if(x=n.sent){n.next=55;break}return n.abrupt("return");case 55:return n.prev=55,n.next=59,(S=o).executeCommand.apply(S,[x.command.id].concat((0,qi.default)(x.command.arguments||[])));case 59:n.next=64;break;case 61:n.prev=61,n.t2=n.catch(55),a.error(n.t2);case 64:case"end":return n.stop()}}),i,null,[[9,36,40,48],[15,19,23,31],[24,,26,30],[41,,43,47],[55,61]])})))}}]),i}(qc.EditorAction));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp");var fp={};e(fp,"ColorDetector",(function(){return _p}),(function(e){return _p=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),gd=o("hJucn");var pp=o("8ta7j");Yc=o("2NkmB"),ap=o("jrm6V"),vd=o("dXCvL"),qc=o("THDAR"),jd=o("1NzEb"),yd=o("5MJfC"),_d=o("60ELr"),lh=o("chpjt"),Ki=o("dVhHy"),qi=o("caN7I"),eh=o("j6sHb"),Yc=o("2NkmB"),ah=o("iPPVB"),yd=o("5MJfC"),lh=o("chpjt"),uh=o("gPDld");function gp(e,t){var n=[],i=lh.ColorProviderRegistry.ordered(e).reverse().map((function(i){return Promise.resolve(i.provideDocumentColors(e,t)).then((function(e){var t=!0,r=!1,o=void 0;if(Array.isArray(e))try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var l=a.value;n.push({colorInfo:l,provider:i})}}catch(e){r=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw o}}}))}));return Promise.all(i).then((function(){return n}))}function vp(e,t,n,i){return Promise.resolve(n.provideColorPresentations(e,t,i))}(vh=o("j9pk1")).CommandsRegistry.registerCommand("_executeDocumentColorProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=(0,Ki.default)(n,1),o=r[0];if(!(o instanceof ah.URI))throw(0,Yc.illegalArgument)();var a=e.get(uh.IModelService).getModel(o);if(!a)throw(0,Yc.illegalArgument)();var s=[],l=lh.ColorProviderRegistry.ordered(a).reverse(),u=l.map((function(e){return Promise.resolve(e.provideDocumentColors(a,eh.CancellationToken.None)).then((function(e){var t=!0,n=!1,i=void 0;if(Array.isArray(e))try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;s.push({range:a.range,color:[a.color.red,a.color.green,a.color.blue,a.color.alpha]})}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}))}));return Promise.all(u).then((function(){return s}))})),vh.CommandsRegistry.registerCommand("_executeColorPresentationProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=(0,Ki.default)(n,2),o=r[0],a=r[1],s=a.uri,l=a.range;if(!(s instanceof ah.URI&&Array.isArray(o)&&4===o.length&&yd.Range.isIRange(l)))throw(0,Yc.illegalArgument)();var u=(0,Ki.default)(o,4),c=u[0],d=u[1],h=u[2],f=u[3],p=e.get(uh.IModelService).getModel(s);if(!p)throw(0,Yc.illegalArgument)();var g={range:l,color:{red:c,green:d,blue:h,alpha:f}},v=[],m=lh.ColorProviderRegistry.ordered(p).reverse(),y=m.map((function(e){return Promise.resolve(e.provideColorPresentations(p,g,eh.CancellationToken.None)).then((function(e){var t;Array.isArray(e)&&(t=v).push.apply(t,(0,qi.default)(e))}))}));return Promise.all(y).then((function(){return v}))}));var mp=o("fnqF9"),yp=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},bp=function(e,t){return function(n,i){t(n,i,e)}},_p=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this))._editor=e,o._codeEditorService=i,o._configurationService=r,o._localToDispose=o._register(new(0,vd.DisposableStore)),o._decorationsIds=[],o._colorDatas=new Map,o._colorDecoratorIds=[],o._decorationsTypes=new Set,o._register(e.onDidChangeModel((function(){o._isEnabled=o.isEnabled(),o.onModelChanged()}))),o._register(e.onDidChangeModelLanguage((function(){return o.onModelChanged()}))),o._register(lh.ColorProviderRegistry.onDidChange((function(){return o.onModelChanged()}))),o._register(e.onDidChangeConfiguration((function(){var e=o._isEnabled;o._isEnabled=o.isEnabled(),e!==o._isEnabled&&(o._isEnabled?o.onModelChanged():o.removeAllDecorations())}))),o._timeoutTimer=null,o._computePromise=null,o._isEnabled=o.isEnabled(),o.onModelChanged(),o}return(0,c.default)(n,[{key:"isEnabled",value:function(){var e=this._editor.getModel();if(!e)return!1;var t=e.getLanguageIdentifier(),n=this._configurationService.getValue(t.language);if(n&&"object"==typeof n){var i=n.colorDecorators;if(i&&void 0!==i.enable&&!i.enable)return i.enable}return this._editor.getOption(16)}},{key:"dispose",value:function(){this.stop(),this.removeAllDecorations(),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"onModelChanged",value:function(){var e=this;if(this.stop(),this._isEnabled){var t=this._editor.getModel();t&&lh.ColorProviderRegistry.has(t)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((function(){e._timeoutTimer||(e._timeoutTimer=new(0,gd.TimeoutTimer),e._timeoutTimer.cancelAndSet((function(){e._timeoutTimer=null,e.beginCompute()}),n.RECOMPUTE_TIME))}))),this.beginCompute())}}},{key:"beginCompute",value:function(){var e=this;this._computePromise=(0,gd.createCancelablePromise)((function(t){var n=e._editor.getModel();return n?gp(n,t):Promise.resolve([])})),this._computePromise.then((function(t){e.updateDecorations(t),e.updateColorDecorators(t),e._computePromise=null}),Yc.onUnexpectedError)}},{key:"stop",value:function(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}},{key:"updateDecorations",value:function(e){var t=this,n=e.map((function(e){return{range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:_d.ModelDecorationOptions.EMPTY}}));this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,n),this._colorDatas=new Map,this._decorationsIds.forEach((function(n,i){return t._colorDatas.set(n,e[i])}))}},{key:"updateColorDecorators",value:function(e){for(var t=this,n=[],i={},r=0;r<e.length&&n.length<500;r++){var o=e[r].colorInfo.color,a=o.red,s=o.green,l=o.blue,u=o.alpha,c=new(0,pp.RGBA)(Math.round(255*a),Math.round(255*s),Math.round(255*l),u),d=(0,ap.hash)("rgba(".concat(c.r,",").concat(c.g,",").concat(c.b,",").concat(c.a,")")).toString(16),h="rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", ").concat(c.a,")"),f="colorBox-"+d;this._decorationsTypes.has(f)||i[f]||this._codeEditorService.registerDecorationType("color-detector-color",f,{before:{contentText:" ",border:"solid 0.1em #000",margin:"0.1em 0.2em 0 0.2em",width:"0.8em",height:"0.8em",backgroundColor:h},dark:{before:{border:"solid 0.1em #eee"}}},void 0,this._editor),i[f]=!0,n.push({range:{startLineNumber:e[r].colorInfo.range.startLineNumber,startColumn:e[r].colorInfo.range.startColumn,endLineNumber:e[r].colorInfo.range.endLineNumber,endColumn:e[r].colorInfo.range.endColumn},options:this._codeEditorService.resolveDecorationOptions(f,!0)})}this._decorationsTypes.forEach((function(e){i[e]||t._codeEditorService.removeDecorationType(e)})),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,n)}},{key:"removeAllDecorations",value:function(){var e=this;this._decorationsIds=this._editor.deltaDecorations(this._decorationsIds,[]),this._colorDecoratorIds=this._editor.deltaDecorations(this._colorDecoratorIds,[]),this._decorationsTypes.forEach((function(t){e._codeEditorService.removeDecorationType(t)}))}},{key:"getColorData",value:function(e){var t=this,n=this._editor.getModel();if(!n)return null;var i=n.getDecorationsInRange(yd.Range.fromPositions(e,e)).filter((function(e){return t._colorDatas.has(e.id)}));return 0===i.length?null:this._colorDatas.get(i[0].id)}}],[{key:"get",value:function(e){return e.getContribution(this.ID)}}]),n}(vd.Disposable);_p.ID="editor.contrib.colorDetector",_p.RECOMPUTE_TIME=1e3,_p=yp([bp(1,jd.ICodeEditorService),bp(2,mp.IConfigurationService)],_p),(0,qc.registerEditorContribution)(_p.ID,_p);vd=o("dXCvL"),qc=o("THDAR");var wp={};e(wp,"ModesHoverController",(function(){return HC}),(function(e){return HC=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),Zc=o("5LFig"),vd=o("dXCvL"),qc=o("THDAR"),yd=o("5MJfC"),Xc=o("5cDyY");var kp=o("8Eens"),Cp={};e(Cp,"ModesContentHoverWidget",(function(){return nk}),(function(e){return nk=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),Bh=o("fTm33"),vd=o("dXCvL"),md=o("kBBF2"),yd=o("5MJfC"),_d=o("60ELr"),lh=o("chpjt"),u=o("4JAgF"),c=o("9HoHC"),gd=o("hJucn"),Yc=o("2NkmB");var xp=function(){"use strict";function e(t,n,i,r,o){var a=this;(0,u.default)(this,e),this._computer=t,this._state=0,this._hoverTime=o,this._firstWaitScheduler=new(0,gd.RunOnceScheduler)((function(){return a._triggerAsyncComputation()}),0),this._secondWaitScheduler=new(0,gd.RunOnceScheduler)((function(){return a._triggerSyncComputation()}),0),this._loadingMessageScheduler=new(0,gd.RunOnceScheduler)((function(){return a._showLoadingMessage()}),0),this._asyncComputationPromise=null,this._asyncComputationPromiseDone=!1,this._completeCallback=n,this._errorCallback=i,this._progressCallback=r}return(0,c.default)(e,[{key:"setHoverTime",value:function(e){this._hoverTime=e}},{key:"_firstWaitTime",value:function(){return this._hoverTime/2}},{key:"_secondWaitTime",value:function(){return this._hoverTime/2}},{key:"_loadingMessageTime",value:function(){return 3*this._hoverTime}},{key:"_triggerAsyncComputation",value:function(){var e=this;this._state=2,this._secondWaitScheduler.schedule(this._secondWaitTime()),this._computer.computeAsync?(this._asyncComputationPromiseDone=!1,this._asyncComputationPromise=(0,gd.createCancelablePromise)((function(t){return e._computer.computeAsync(t)})),this._asyncComputationPromise.then((function(t){e._asyncComputationPromiseDone=!0,e._withAsyncResult(t)}),(function(t){return e._onError(t)}))):this._asyncComputationPromiseDone=!0}},{key:"_triggerSyncComputation",value:function(){this._computer.computeSync&&this._computer.onResult(this._computer.computeSync(),!0),this._asyncComputationPromiseDone?(this._state=0,this._onComplete(this._computer.getResult())):(this._state=3,this._onProgress(this._computer.getResult()))}},{key:"_showLoadingMessage",value:function(){3===this._state&&this._onProgress(this._computer.getResultWithLoadingMessage())}},{key:"_withAsyncResult",value:function(e){e&&this._computer.onResult(e,!1),3===this._state&&(this._state=0,this._onComplete(this._computer.getResult()))}},{key:"_onComplete",value:function(e){this._completeCallback(e)}},{key:"_onError",value:function(e){this._errorCallback?this._errorCallback(e):(0,Yc.onUnexpectedError)(e)}},{key:"_onProgress",value:function(e){this._progressCallback(e)}},{key:"start",value:function(e){if(0===e)0===this._state&&(this._state=1,this._firstWaitScheduler.schedule(this._firstWaitTime()),this._loadingMessageScheduler.schedule(this._loadingMessageTime()));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}},{key:"cancel",value:function(){this._loadingMessageScheduler.cancel(),1===this._state&&this._firstWaitScheduler.cancel(),2===this._state&&(this._secondWaitScheduler.cancel(),this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null)),3===this._state&&this._asyncComputationPromise&&(this._asyncComputationPromise.cancel(),this._asyncComputationPromise=null),this._state=0}}]),e}(),Sp=(oh=o("2ZBuK"),o("c9lKY")),Ep=(u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),o("5uupw")),Dp=(vd=o("dXCvL"),Bh.$),Ap=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this)).containerDomNode=document.createElement("div"),e.containerDomNode.className="monaco-hover",e.containerDomNode.tabIndex=0,e.containerDomNode.setAttribute("role","tooltip"),e.contentsDomNode=document.createElement("div"),e.contentsDomNode.className="monaco-hover-content",e._scrollbar=e._register(new(0,Ep.DomScrollableElement)(e.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),e.containerDomNode.appendChild(e._scrollbar.getDomNode()),e}return(0,c.default)(n,[{key:"onContentsChanged",value:function(){this._scrollbar.scanDomNode()}}]),n}(vd.Disposable),Ip=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).actionContainer=Bh.append(e,Dp("div.action-container")),o.action=Bh.append(o.actionContainer,Dp("a.action")),o.action.setAttribute("href","#"),o.action.setAttribute("role","button"),i.iconClass&&Bh.append(o.action,Dp("span.icon.".concat(i.iconClass))),Bh.append(o.action,Dp("span")).textContent=r?"".concat(i.label," (").concat(r,")"):i.label,o._register(Bh.addDisposableListener(o.actionContainer,Bh.EventType.CLICK,(function(e){e.stopPropagation(),e.preventDefault(),i.run(o.actionContainer)}))),o.setEnabled(!0),o}return(0,c.default)(n,[{key:"setEnabled",value:function(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}],[{key:"render",value:function(e,t,i){return new n(e,t,i)}}]),n}(vd.Disposable),Rp={};e(Rp,"MarkerHoverParticipant",(function(){return Dv}),(function(e){return Dv=e}));u=o("4JAgF"),c=o("9HoHC"),Jc=o("faA3E"),Bh=o("fTm33"),vd=o("dXCvL"),yd=o("5MJfC"),oh=o("2ZBuK"),df=o("hMofI"),mf=o("L9zbH");var Tp=o("fC4fs"),Lp=(Yc=o("2NkmB"),o("j1CnT")),Mp={};e(Mp,"MarkerController",(function(){return pv}),(function(e){return pv=e})),e(Mp,"NextMarkerAction",(function(){return vv}),(function(e){return vv=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),vd=o("dXCvL"),$c=o("efZ3W"),md=o("kBBF2"),yd=o("5MJfC"),qc=o("THDAR"),Xc=o("5cDyY");var Np={};e(Np,"MarkerNavigationWidget",(function(){return Kg}),(function(e){return Kg=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),Bh=o("fTm33"),vd=o("dXCvL"),df=o("hMofI"),yd=o("5MJfC"),kd=o("ht8QC"),Cd=o("4ET02"),pp=o("8ta7j"),Ep=o("5uupw");var Pp=o("7j06h"),Op=o("knZKL");Bd=o("5DBhW"),mf=o("L9zbH"),ah=o("iPPVB");function Fp(e){if(e){"string"==typeof e&&(e=ah.URI.file(e));var t=(0,mf.basename)(e)||(e.scheme===Op.Schemas.file?e.fsPath:e.path);return Bd.isWindows&&(0,Pp.isRootOrDriveLetter)(t)?Bp(t):t}}function Bp(e){return(0,Pp.hasDriveLetter)(e)?e.charAt(0).toUpperCase()+e.slice(1):e}oh=o("2ZBuK"),$h=o("neTVg");var Hp={};e(Hp,"IPeekViewService",(function(){return _g}),(function(e){return _g=e})),e(Hp,"PeekContext",(function(){return vg}),(function(e){return vg=e})),e(Hp,"getOuterEditor",(function(){return kg}),(function(e){return kg=e})),e(Hp,"PeekViewWidget",(function(){return xg}),(function(e){return xg=e})),e(Hp,"peekViewTitleBackground",(function(){return Eg}),(function(e){return Eg=e})),e(Hp,"peekViewTitleForeground",(function(){return Dg}),(function(e){return Dg=e})),e(Hp,"peekViewTitleInfoForeground",(function(){return Ag}),(function(e){return Ag=e})),e(Hp,"peekViewBorder",(function(){return Ig}),(function(e){return Ig=e})),e(Hp,"peekViewResultsBackground",(function(){return Rg}),(function(e){return Rg=e})),e(Hp,"peekViewResultsMatchForeground",(function(){return Tg}),(function(e){return Tg=e})),e(Hp,"peekViewResultsFileForeground",(function(){return Lg}),(function(e){return Lg=e})),e(Hp,"peekViewResultsSelectionBackground",(function(){return Mg}),(function(e){return Mg=e})),e(Hp,"peekViewResultsSelectionForeground",(function(){return Ng}),(function(e){return Ng=e})),e(Hp,"peekViewEditorBackground",(function(){return Pg}),(function(e){return Pg=e})),e(Hp,"peekViewEditorGutterBackground",(function(){return Og}),(function(e){return Og=e})),e(Hp,"peekViewResultsMatchHighlight",(function(){return Fg}),(function(e){return Fg=e})),e(Hp,"peekViewEditorMatchHighlight",(function(){return Bg}),(function(e){return Bg=e})),e(Hp,"peekViewEditorMatchHighlightBorder",(function(){return Hg}),(function(e){return Hg=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33");var jp=o("cMLhM"),zp=(Hh=o("2NkhT"),pp=o("8ta7j"),$h=o("neTVg"),o("3gwjc")),Wp=(jd=o("1NzEb"),{});e(Wp,"EmbeddedCodeEditorWidget",(function(){return Jp}),(function(e){return Jp=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),zp=o("3gwjc"),jd=o("1NzEb");var Up=o("ikvYL"),Vp=(vh=o("j9pk1"),$c=o("efZ3W"),Oh=o("hm5an"),hf=o("93Ice"),Cd=o("4ET02"),o("eUW5n")),Kp=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},qp=function(e,t){return function(n,i){t(n,i,e)}},Jp=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o,a,s,l,c,d,h){var f;return(0,u.default)(this,n),(f=t.call(this,e,Object.assign(Object.assign({},r.getRawOptions()),{overflowWidgetsDomNode:r.getOverflowWidgetsDomNode()}),{},o,a,s,l,c,d,h))._parentEditor=r,f._overwriteOptions=i,(0,zi.default)(((0,Hi.default)(f),(0,Wi.default)(n.prototype)),"updateOptions",f).call(f,f._overwriteOptions),f._register(r.onDidChangeConfiguration((function(e){return f._onParentConfigurationChanged(e)}))),f}return(0,c.default)(n,[{key:"getParentEditor",value:function(){return this._parentEditor}},{key:"_onParentConfigurationChanged",value:function(e){(0,zi.default)((0,Wi.default)(n.prototype),"updateOptions",this).call(this,this._parentEditor.getRawOptions()),(0,zi.default)((0,Wi.default)(n.prototype),"updateOptions",this).call(this,this._overwriteOptions)}},{key:"updateOptions",value:function(e){zp.mixin(this._overwriteOptions,e,!0),(0,zi.default)((0,Wi.default)(n.prototype),"updateOptions",this).call(this,this._overwriteOptions)}}]),n}(Up.CodeEditorWidget);Jp=Kp([qp(3,Oh.IInstantiationService),qp(4,jd.ICodeEditorService),qp(5,vh.ICommandService),qp(6,$c.IContextKeyService),qp(7,Cd.IThemeService),qp(8,hf.INotificationService),qp(9,Vp.IAccessibilityService)],Jp);u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),Bh=o("fTm33");var Xp=o("cNfER"),Gp=(pp=o("8ta7j"),o("k572B")),Zp=(vd=o("dXCvL"),zp=o("3gwjc"),yd=o("5MJfC"),_d=o("60ELr"),new(0,pp.Color)(new(0,pp.RGBA)(0,122,204))),$p={showArrow:!0,showFrame:!0,className:"",frameColor:Zp,arrowColor:Zp,keepEditorSelection:!1},Yp=function(){"use strict";function e(t,n,i,r,o,a){(0,u.default)(this,e),this.id="",this.domNode=t,this.afterLineNumber=n,this.afterColumn=i,this.heightInLines=r,this._onDomNodeTop=o,this._onComputedHeight=a}return(0,c.default)(e,[{key:"onDomNodeTop",value:function(e){this._onDomNodeTop(e)}},{key:"onComputedHeight",value:function(e){this._onComputedHeight(e)}}]),e}(),Qp=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._id=t,this._domNode=n}return(0,c.default)(e,[{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return null}}]),e}(),eg=function(){"use strict";function e(t){(0,u.default)(this,e),this._editor=t,this._ruleName=e._IdGenerator.nextId(),this._decorations=[],this._color=null,this._height=-1}return(0,c.default)(e,[{key:"dispose",value:function(){this.hide(),Bh.removeCSSRulesContainingSelector(this._ruleName)}},{key:"color",set:function(e){this._color!==e&&(this._color=e,this._updateStyle())}},{key:"height",set:function(e){this._height!==e&&(this._height=e,this._updateStyle())}},{key:"_updateStyle",value:function(){Bh.removeCSSRulesContainingSelector(this._ruleName),Bh.createCSSRule(".monaco-editor ".concat(this._ruleName),"border-style: solid; border-color: transparent; border-bottom-color: ".concat(this._color,"; border-width: ").concat(this._height,"px; bottom: -").concat(this._height,"px; margin-left: -").concat(this._height,"px; "))}},{key:"show",value:function(e){this._decorations=this._editor.deltaDecorations(this._decorations,[{range:yd.Range.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}},{key:"hide",value:function(){this._editor.deltaDecorations(this._decorations,[])}}]),e}();eg._IdGenerator=new(0,Gp.IdGenerator)(".arrow-decoration-");var tg=function(){"use strict";function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this;(0,u.default)(this,e),this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._positionMarkerId=[],this._viewZone=null,this._disposables=new(0,vd.DisposableStore),this.container=null,this._isShowing=!1,this.editor=t,this.options=zp.deepClone(n),zp.mixin(this.options,$p,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange((function(e){var t=i._getWidth(e);i.domNode.style.width=t+"px",i.domNode.style.left=i._getLeft(e)+"px",i._onWidth(t)})))}return(0,c.default)(e,[{key:"dispose",value:function(){var e=this;this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones((function(t){e._viewZone&&t.removeZone(e._viewZone.id),e._viewZone=null})),this.editor.deltaDecorations(this._positionMarkerId,[]),this._positionMarkerId=[],this._disposables.dispose()}},{key:"create",value:function(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new eg(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}},{key:"style",value:function(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}},{key:"_applyStyles",value:function(){if(this.container&&this.options.frameColor){var e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){var t=this.options.arrowColor.toString();this._arrow.color=t}}},{key:"_getWidth",value:function(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}},{key:"_getLeft",value:function(e){return e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?e.minimap.minimapWidth:0}},{key:"_onViewZoneTop",value:function(e){this.domNode.style.top=e+"px"}},{key:"_onViewZoneHeight",value:function(e){if(this.domNode.style.height="".concat(e,"px"),this.container){var t=e-this._decoratingElementsHeight();this.container.style.height="".concat(t,"px");var n=this.editor.getLayoutInfo();this._doLayout(t,this._getWidth(n))}this._resizeSash&&this._resizeSash.layout()}},{key:"position",get:function(){var e=(0,Ki.default)(this._positionMarkerId,1)[0];if(e){var t=this.editor.getModel();if(t){var n=t.getDecorationRange(e);if(n)return n.getStartPosition()}}}},{key:"show",value:function(e,t){var n=yd.Range.isIRange(e)?yd.Range.lift(e):yd.Range.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId=this.editor.deltaDecorations(this._positionMarkerId,[{range:n,options:_d.ModelDecorationOptions.EMPTY}])}},{key:"hide",value:function(){var e=this;this._viewZone&&(this.editor.changeViewZones((function(t){e._viewZone&&t.removeZone(e._viewZone.id)})),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow&&this._arrow.hide()}},{key:"_decoratingElementsHeight",value:function(){var e=this.editor.getOption(58),t=0;this.options.showArrow&&(t+=2*Math.round(e/3));this.options.showFrame&&(t+=2*Math.round(e/9));return t}},{key:"_showImpl",value:function(e,t){var n=this,i=e.getStartPosition(),r=this.editor.getLayoutInfo(),o=this._getWidth(r);this.domNode.style.width="".concat(o,"px"),this.domNode.style.left=this._getLeft(r)+"px";var a=document.createElement("div");a.style.overflow="hidden";var s=this.editor.getOption(58),l=Math.max(12,this.editor.getLayoutInfo().height/s*.8);t=Math.min(t,l);var u=0,c=0;if(this._arrow&&this.options.showArrow&&(u=Math.round(s/3),this._arrow.height=u,this._arrow.show(i)),this.options.showFrame&&(c=Math.round(s/9)),this.editor.changeViewZones((function(e){n._viewZone&&e.removeZone(n._viewZone.id),n._overlayWidget&&(n.editor.removeOverlayWidget(n._overlayWidget),n._overlayWidget=null),n.domNode.style.top="-1000px",n._viewZone=new Yp(a,i.lineNumber,i.column,t,(function(e){return n._onViewZoneTop(e)}),(function(e){return n._onViewZoneHeight(e)})),n._viewZone.id=e.addZone(n._viewZone),n._overlayWidget=new Qp("vs.editor.contrib.zoneWidget"+n._viewZone.id,n.domNode),n.editor.addOverlayWidget(n._overlayWidget)})),this.container&&this.options.showFrame){var d=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=d+"px",this.container.style.borderBottomWidth=d+"px"}var h=t*s-this._decoratingElementsHeight();this.container&&(this.container.style.top=u+"px",this.container.style.height=h+"px",this.container.style.overflow="hidden"),this._doLayout(h,o),this.options.keepEditorSelection||this.editor.setSelection(e);var f=this.editor.getModel();if(f){var p=e.endLineNumber+1;p<=f.getLineCount()?this.revealLine(p,!1):this.revealLine(f.getLineCount(),!0)}}},{key:"revealLine",value:function(e,t){t?this.editor.revealLineInCenter(e,0):this.editor.revealLine(e,0)}},{key:"setCssClass",value:function(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}},{key:"_onWidth",value:function(e){}},{key:"_doLayout",value:function(e,t){}},{key:"_relayout",value:function(e){var t=this;this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones((function(n){t._viewZone&&(t._viewZone.heightInLines=e,n.layoutZone(t._viewZone.id))}))}},{key:"_initSash",value:function(){var e,t=this;this._resizeSash||(this._resizeSash=this._disposables.add(new(0,Xp.Sash)(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.hide(),this._resizeSash.state=0),this._disposables.add(this._resizeSash.onDidStart((function(n){t._viewZone&&(e={startY:n.startY,heightInLines:t._viewZone.heightInLines})}))),this._disposables.add(this._resizeSash.onDidEnd((function(){e=void 0}))),this._disposables.add(this._resizeSash.onDidChange((function(n){if(e){var i=(n.currentY-e.startY)/t.editor.getOption(58),r=i<0?Math.ceil(i):Math.floor(i),o=e.heightInLines+r;o>5&&o<35&&t._relayout(o)}}))))}},{key:"getHorizontalSashLeft",value:function(){return 0}},{key:"getHorizontalSashTop",value:function(){return(null===this.domNode.style.height?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}},{key:"getHorizontalSashWidth",value:function(){var e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}]),e}(),ng=(Jc=o("faA3E"),$c=o("efZ3W"),Oh=o("hm5an"),$f=o("2cK24"),qc=o("THDAR"),kd=o("ht8QC"),Qh=o("8bO6F"),{});e(ng,"createAndFillInActionBarActions",(function(){return dg}),(function(e){return dg=e})),e(ng,"MenuEntryActionViewItem",(function(){return hg}),(function(e){return hg=e})),e(ng,"createActionViewItem",(function(){return gg}),(function(e){return gg=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),Bh=o("fTm33");var ig=o("aUUDw"),rg=o("4JC3K"),og=(u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),Bh=o("fTm33"),rg=o("4JC3K"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),ig=o("aUUDw"),Yh=o("bAWNA"),Hh=o("2NkhT"),$h=o("neTVg"),function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,e,i))._actions=[],r._contextMenuProvider=i.contextMenuProvider,r.actions=i.actions||[],r.actionProvider=i.actionProvider,r.menuClassName=i.menuClassName||"",r.menuAsChild=!!i.menuAsChild,r}return(0,c.default)(n,[{key:"menuOptions",get:function(){return this._menuOptions},set:function(e){this._menuOptions=e}},{key:"actions",get:function(){return this.actionProvider?this.actionProvider.getActions():this._actions},set:function(e){this._actions=e}},{key:"show",value:function(){var e=this;(0,zi.default)((0,Wi.default)(n.prototype),"show",this).call(this),this.element.classList.add("active"),this._contextMenuProvider.showContextMenu({getAnchor:function(){return e.element},getActions:function(){return e.actions},getActionsContext:function(){return e.menuOptions?e.menuOptions.context:null},getActionViewItem:function(t){return e.menuOptions&&e.menuOptions.actionViewItemProvider?e.menuOptions.actionViewItemProvider(t):void 0},getKeyBinding:function(t){return e.menuOptions&&e.menuOptions.getKeyBinding?e.menuOptions.getKeyBinding(t):void 0},getMenuClassName:function(){return e.menuClassName},onHide:function(){return e.onHide()},actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this.menuAsChild?this.element:void 0})}},{key:"hide",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"hide",this).call(this)}},{key:"onHide",value:function(){this.hide(),this.element.classList.remove("active")}}]),n}(function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;(0,u.default)(this,n),(r=t.call(this))._onDidChangeVisibility=new(0,$h.Emitter),r.onDidChangeVisibility=r._onDidChangeVisibility.event,r._element=(0,Bh.append)(e,(0,Bh.$)(".monaco-dropdown")),r._label=(0,Bh.append)(r._element,(0,Bh.$)(".dropdown-label"));var o=i.labelRenderer;o||(o=function(e){return e.textContent=i.label||"",null});for(var a=0,s=[Bh.EventType.CLICK,Bh.EventType.MOUSE_DOWN,Yh.EventType.Tap];a<s.length;a++){var l=s[a];r._register((0,Bh.addDisposableListener)(r.element,l,(function(e){return Bh.EventHelper.stop(e,!0)})))}for(var c=0,d=[Bh.EventType.MOUSE_DOWN,Yh.EventType.Tap];c<d.length;c++){var h=d[c];r._register((0,Bh.addDisposableListener)(r._label,h,(function(e){e instanceof MouseEvent&&e.detail>1||(r.visible?r.hide():r.show())})))}r._register((0,Bh.addDisposableListener)(r._label,Bh.EventType.KEY_UP,(function(e){var t=new(0,ig.StandardKeyboardEvent)(e);(t.equals(3)||t.equals(10))&&(Bh.EventHelper.stop(e,!0),r.visible?r.hide():r.show())})));var f=o(r._label);return f&&r._register(f),r._register(Yh.Gesture.addTarget(r._label)),r}return(0,c.default)(n,[{key:"element",get:function(){return this._element}},{key:"show",value:function(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}},{key:"hide",value:function(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}},{key:"dispose",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}]),n}(Hh.ActionRunner))),ag=($h=o("neTVg"),function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null);return(0,u.default)(this,n),(o=t.call(this,null,e,a)).actionItem=null,o._onDidChangeVisibility=o._register(new(0,$h.Emitter)),o.menuActionsOrProvider=i,o.contextMenuProvider=r,o.options=a,o.options.actionRunner&&(o.actionRunner=o.options.actionRunner),o}return(0,c.default)(n,[{key:"render",value:function(e){var t=this;this.actionItem=e;var n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:function(e){var n;t.element=(0,Bh.append)(e,(0,Bh.$)("a.action-label"));var i=[];return"string"==typeof t.options.classNames?i=t.options.classNames.split(/\s+/g).filter((function(e){return!!e})):t.options.classNames&&(i=t.options.classNames),i.find((function(e){return"icon"===e}))||i.push("codicon"),(n=t.element.classList).add.apply(n,(0,qi.default)(i)),t.element.setAttribute("role","button"),t.element.setAttribute("aria-haspopup","true"),t.element.setAttribute("aria-expanded","false"),t.element.title=t._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider};if(this.dropdownMenu=this._register(new og(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility((function(e){var n;null===(n=t.element)||void 0===n||n.setAttribute("aria-expanded","".concat(e)),t._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){var r=this;this.dropdownMenu.menuOptions=Object.assign(Object.assign({},this.dropdownMenu.menuOptions),{get anchorAlignment(){return r.options.anchorAlignmentProvider()}})}this.updateEnabled()}},{key:"setActionContext",value:function(e){(0,zi.default)((0,Wi.default)(n.prototype),"setActionContext",this).call(this,e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}},{key:"updateEnabled",value:function(){var e,t,n=!this.getAction().enabled;null===(e=this.actionItem)||void 0===e||e.classList.toggle("disabled",n),null===(t=this.element)||void 0===t||t.classList.toggle("disabled",n)}}]),n}(rg.BaseActionViewItem)),sg=(Hh=o("2NkhT"),o("kYZcP")),lg=(vd=o("dXCvL"),Bd=o("5DBhW"),Jc=o("faA3E"),xd=o("feTbe"),$c=o("efZ3W"),jh=o("1UyyS"),Oh=o("hm5an"),zh=o("5H40S"),hf=o("93Ice"),Qf=o("6TN8i"),Cd=o("4ET02"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),ug=function(e,t){return function(n,i){t(n,i,e)}},cg=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};function dg(e,t,n,i,r,o,a){var s=e.getActions(t);return function(e,t,n){var i,r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return"navigation"===e},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.MAX_SAFE_INTEGER,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return!1},l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Array.isArray(t)?(i=t,r=t):(i=t.primary,r=t.secondary);var u=new Set,c=!0,d=!1,h=void 0;try{for(var f,p=e[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var g=(0,Ki.default)(f.value,2),v=g[0],m=g[1],y=void 0;o(v)?(y=i).length>0&&l&&y.push(new(0,Hh.Separator)):(y=r).length>0&&y.push(new(0,Hh.Separator));var b=!0,_=!1,w=void 0;try{for(var k,C=m[Symbol.iterator]();!(b=(k=C.next()).done);b=!0){var x=k.value;n&&(x=x instanceof xd.MenuItemAction&&x.alt?x.alt:x);var S=y.push(x);x instanceof Hh.SubmenuAction&&u.add({group:v,action:x,index:S-1})}}catch(e){_=!0,w=e}finally{try{b||null==C.return||C.return()}finally{if(_)throw w}}}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}var E=!0,D=!1,A=void 0;try{for(var I,R=u[Symbol.iterator]();!(E=(I=R.next()).done);E=!0){var T,L=I.value,M=L.group,N=L.action,P=L.index,O=o(M)?i:r,F=N.actions;(F.length<=1||O.length+F.length-2<=a)&&s(N,M,O.length)&&(T=O).splice.apply(T,[P,1].concat((0,qi.default)(F)))}}catch(e){D=!0,A=e}finally{try{E||null==R.return||R.return()}finally{if(D)throw A}}if(i!==r&&i.length>a){var B,H=i.splice(a,i.length-a);(B=r).unshift.apply(B,(0,qi.default)(H).concat([new(0,Hh.Separator)]))}}(s,n,!1,"string"==typeof i?function(e){return e===i}:i,r,o,a),function(e){var t=new(0,vd.DisposableStore),n=!0,i=!1,r=void 0,o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=(0,Ki.default)(l.value,2)[1];try{for(var d,h=c[Symbol.iterator]();!(n=(d=h.next()).done);n=!0){var f=d.value;t.add(f)}}catch(e){i=!0,r=e}finally{try{n||null==h.return||h.return()}finally{if(i)throw r}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return t}(s)}var hg=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a){var s;return(0,u.default)(this,i),(s=t.call(this,void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:null==n?void 0:n.draggable}))._keybindingService=r,s._notificationService=o,s._contextKeyService=a,s._wantsAltCommand=!1,s._itemClassDispose=s._register(new(0,vd.MutableDisposable)),s._altKey=Bh.ModifierKeyEmitter.getInstance(),s}return(0,c.default)(i,[{key:"_menuItemAction",get:function(){return this._action}},{key:"_commandAction",get:function(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}},{key:"onClick",value:function(e){return cg(this,void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),e.stopPropagation(),t.prev=2,t.next=5,this.actionRunner.run(this._commandAction,this._context);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),this._notificationService.error(t.t0);case 10:case"end":return t.stop()}}),t,this,[[2,7]])})))}},{key:"render",value:function(e){var t=this;(0,zi.default)((0,Wi.default)(i.prototype),"render",this).call(this,e),e.classList.add("menu-entry"),this._updateItemClass(this._menuItemAction.item);var n=!1,r=this._altKey.keyStatus.altKey||(Bd.isWindows||Bd.isLinux)&&this._altKey.keyStatus.shiftKey,o=function(){var e=n&&r;e!==t._wantsAltCommand&&(t._wantsAltCommand=e,t.updateLabel(),t.updateTooltip(),t.updateClass())};this._menuItemAction.alt&&this._register(this._altKey.event((function(e){r=e.altKey||(Bd.isWindows||Bd.isLinux)&&e.shiftKey,o()}))),this._register((0,Bh.addDisposableListener)(e,"mouseleave",(function(e){n=!1,o()}))),this._register((0,Bh.addDisposableListener)(e,"mouseenter",(function(e){n=!0,o()})))}},{key:"updateLabel",value:function(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}},{key:"updateTooltip",value:function(){if(this.label){var e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label,i=t?(0,Jc.localize)("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt){var r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),s=a?(0,Jc.localize)("titleAndKb","{0} ({1})",r,a):r;i+="\n[".concat(sg.UILabelProvider.modifierLabels[Bd.OS].altKey,"] ").concat(s)}this.label.title=i}}},{key:"updateClass",value:function(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.item))}},{key:"_updateItemClass",value:function(e){var t;this._itemClassDispose.value=void 0;var n=this.element,i=this.label;if(n&&i){var r=this._commandAction.checked&&(null===(t=e.toggled)||void 0===t?void 0:t.icon)?e.toggled.icon:e.icon;if(r)if(Cd.ThemeIcon.isThemeIcon(r)){var o,a=Cd.ThemeIcon.asClassNameArray(r);(o=i.classList).add.apply(o,(0,qi.default)(a)),this._itemClassDispose.value=(0,vd.toDisposable)((function(){var e;(e=i.classList).remove.apply(e,(0,qi.default)(a))}))}else r.light&&i.style.setProperty("--menu-entry-icon-light",(0,Bh.asCSSUrl)(r.light)),r.dark&&i.style.setProperty("--menu-entry-icon-dark",(0,Bh.asCSSUrl)(r.dark)),i.classList.add("icon"),this._itemClassDispose.value=(0,vd.toDisposable)((function(){i.classList.remove("icon"),i.style.removeProperty("--menu-entry-icon-light"),i.style.removeProperty("--menu-entry-icon-dark")}))}}}]),i}(rg.ActionViewItem);hg=lg([ug(2,zh.IKeybindingService),ug(3,hf.INotificationService),ug(4,$c.IContextKeyService)],hg);var fg=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o,a;(0,u.default)(this,n);var s=Object.assign({},null!=i?i:Object.create(null),{menuAsChild:null===(o=null==i?void 0:i.menuAsChild)||void 0===o||o,classNames:null!==(a=null==i?void 0:i.classNames)&&void 0!==a?a:Cd.ThemeIcon.isThemeIcon(e.item.icon)?Cd.ThemeIcon.asClassName(e.item.icon):void 0});return t.call(this,e,{getActions:function(){return e.actions}},r,s)}return(0,c.default)(n,[{key:"render",value:function(e){if((0,zi.default)((0,Wi.default)(n.prototype),"render",this).call(this,e),this.element){e.classList.add("menu-entry");var t=this._action.item.icon;t&&!Cd.ThemeIcon.isThemeIcon(t)&&(this.element.classList.add("icon"),t.light&&this.element.style.setProperty("--menu-entry-icon-light",(0,Bh.asCSSUrl)(t.light)),t.dark&&this.element.style.setProperty("--menu-entry-icon-dark",(0,Bh.asCSSUrl)(t.dark)))}}}]),n}(ag);fg=lg([ug(2,jh.IContextMenuService)],fg);var pg=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a,s,l,c){var d,h,f,p,g;(0,u.default)(this,i),(d=t.call(this,null,e))._keybindingService=r,d._notificationService=o,d._contextMenuService=a,d._menuService=s,d._instaService=l,d._storageService=c,d._container=null,d._storageKey="".concat(e.item.submenu._debugName,"_lastActionId");var v=c.get(d._storageKey,1);v&&(g=e.actions.find((function(e){return v===e.id}))),g||(g=e.actions[0]),d._defaultAction=d._instaService.createInstance(hg,g,void 0);var m=Object.assign({},null!=n?n:Object.create(null),{menuAsChild:null===(h=null==n?void 0:n.menuAsChild)||void 0===h||h,classNames:null!==(f=null==n?void 0:n.classNames)&&void 0!==f?f:["codicon","codicon-chevron-down"],actionRunner:null!==(p=null==n?void 0:n.actionRunner)&&void 0!==p?p:new(0,Hh.ActionRunner)});return d._dropdown=new ag(e,e.actions,d._contextMenuService,m),d._dropdown.actionRunner.onDidRun((function(e){e.action instanceof xd.MenuItemAction&&d.update(e.action)})),d}return(0,c.default)(i,[{key:"update",value:function(e){this._storageService.store(this._storageKey,e.id,1,0),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(hg,e,void 0),this._defaultAction.actionRunner=new(function(e){(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"runAction",value:function(e,t){return cg(this,void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.run(void 0);case 2:case"end":return t.stop()}}),t)})))}}]),i}(Hh.ActionRunner)),this._container&&this._defaultAction.render((0,Bh.prepend)(this._container,(0,Bh.$)(".action-container")))}},{key:"setActionContext",value:function(e){(0,zi.default)((0,Wi.default)(i.prototype),"setActionContext",this).call(this,e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}},{key:"render",value:function(e){var t=this;this._container=e,(0,zi.default)((0,Wi.default)(i.prototype),"render",this).call(this,this._container),this._container.classList.add("monaco-dropdown-with-default");var n=(0,Bh.$)(".action-container");this._defaultAction.render((0,Bh.append)(this._container,n)),this._register((0,Bh.addDisposableListener)(n,Bh.EventType.KEY_DOWN,(function(e){var n=new(0,ig.StandardKeyboardEvent)(e);n.equals(17)&&(t._defaultAction.element.tabIndex=-1,t._dropdown.focus(),n.stopPropagation())})));var r=(0,Bh.$)(".dropdown-action-container");this._dropdown.render((0,Bh.append)(this._container,r)),this._register((0,Bh.addDisposableListener)(r,Bh.EventType.KEY_DOWN,(function(e){var n,i=new(0,ig.StandardKeyboardEvent)(e);i.equals(15)&&(t._defaultAction.element.tabIndex=0,t._dropdown.setFocusable(!1),null===(n=t._defaultAction.element)||void 0===n||n.focus(),i.stopPropagation())})))}},{key:"focus",value:function(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}},{key:"blur",value:function(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}},{key:"setFocusable",value:function(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}},{key:"dispose",value:function(){this._defaultAction.dispose(),this._dropdown.dispose(),(0,zi.default)((0,Wi.default)(i.prototype),"dispose",this).call(this)}}]),i}(rg.BaseActionViewItem);function gg(e,t,n){return t instanceof xd.MenuItemAction?e.createInstance(hg,t,void 0):t instanceof xd.SubmenuItemAction?t.item.rememberDefaultAction?e.createInstance(pg,t,n):e.createInstance(fg,t,n):void 0}pg=lg([ug(2,zh.IKeybindingService),ug(3,hf.INotificationService),ug(4,jh.IContextMenuService),ug(5,xd.IMenuService),ug(6,Oh.IInstantiationService),ug(7,Qf.IStorageService)],pg);var vg,mg,yg=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},bg=function(e,t){return function(n,i){t(n,i,e)}},_g=(0,Oh.createDecorator)("IPeekViewService");(0,$f.registerSingleton)(_g,function(){"use strict";function e(){(0,u.default)(this,e),this._widgets=new Map}return(0,c.default)(e,[{key:"addExclusiveWidget",value:function(e,t){var n=this,i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((function(){var i=n._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),n._widgets.delete(e))}))})}}]),e}()),(mg=vg||(vg={})).inPeekEditor=new(0,$c.RawContextKey)("inReferenceSearchEditor",!0,Jc.localize("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),mg.notInPeekEditor=mg.inPeekEditor.toNegated();var wg=function(){"use strict";function e(t,n){(0,u.default)(this,e),t instanceof Wp.EmbeddedCodeEditorWidget&&vg.inPeekEditor.bindTo(n)}return(0,c.default)(e,[{key:"dispose",value:function(){}}]),e}();function kg(e){var t=e.get(jd.ICodeEditorService).getFocusedCodeEditor();return t instanceof Wp.EmbeddedCodeEditorWidget?t.getParentEditor():t}wg.ID="editor.contrib.referenceController",wg=yg([bg(1,$c.IContextKeyService)],wg),(0,qc.registerEditorContribution)(wg.ID,wg);var Cg={headerBackgroundColor:pp.Color.white,primaryHeadingColor:pp.Color.fromHex("#333333"),secondaryHeadingColor:pp.Color.fromHex("#6c6c6cb3")},xg=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this,e,i)).instantiationService=r,o._onDidClose=new(0,$h.Emitter),o.onDidClose=o._onDidClose.event,zp.mixin(o.options,Cg,!1),o}return(0,c.default)(n,[{key:"dispose",value:function(){this.disposed||(this.disposed=!0,(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this),this._onDidClose.fire(this))}},{key:"style",value:function(e){var t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),(0,zi.default)((0,Wi.default)(n.prototype),"style",this).call(this,e)}},{key:"_applyStyles",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"_applyStyles",this).call(this);var e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}},{key:"_fillContainer",value:function(e){this.setCssClass("peekview-widget"),this._headElement=Bh.$(".head"),this._bodyElement=Bh.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}},{key:"_fillHead",value:function(e,t){var n=this,i=Bh.$(".peekview-title");this.options.supportOnTitleClick&&(i.classList.add("clickable"),Bh.addStandardDisposableListener(i,"click",(function(e){return n._onTitleClick(e)}))),Bh.append(this._headElement,i),this._fillTitleIcon(i),this._primaryHeading=Bh.$("span.filename"),this._secondaryHeading=Bh.$("span.dirname"),this._metaHeading=Bh.$("span.meta"),Bh.append(i,this._primaryHeading,this._secondaryHeading,this._metaHeading);var r=Bh.$(".peekview-actions");Bh.append(this._headElement,r);var o=this._getActionBarOptions();this._actionbarWidget=new(0,jp.ActionBar)(r,o),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new(0,Hh.Action)("peekview.close",Jc.localize("label.close","Close"),Qh.Codicon.close.classNames,!0,(function(){return n.dispose(),Promise.resolve()})),{label:!1,icon:!0})}},{key:"_fillTitleIcon",value:function(e){}},{key:"_getActionBarOptions",value:function(){return{actionViewItemProvider:ng.createActionViewItem.bind(void 0,this.instantiationService),orientation:0}}},{key:"_onTitleClick",value:function(e){}},{key:"setTitle",value:function(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:Bh.clearNode(this._secondaryHeading))}},{key:"setMetaTitle",value:function(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,Bh.show(this._metaHeading)):Bh.hide(this._metaHeading))}},{key:"_doLayout",value:function(e,t){if(!this._isShowing&&e<0)this.dispose();else{var n=Math.ceil(1.2*this.editor.getOption(58)),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}}},{key:"_doLayoutHead",value:function(e,t){this._headElement&&(this._headElement.style.height="".concat(e,"px"),this._headElement.style.lineHeight=this._headElement.style.height)}},{key:"_doLayoutBody",value:function(e,t){this._bodyElement&&(this._bodyElement.style.height="".concat(e,"px"))}}]),n}(tg);xg=yg([bg(2,Oh.IInstantiationService)],xg);var Sg,Eg=(0,kd.registerColor)("peekViewTitle.background",{dark:(0,kd.transparent)(kd.editorInfoForeground,.1),light:(0,kd.transparent)(kd.editorInfoForeground,.1),hc:null},Jc.localize("peekViewTitleBackground","Background color of the peek view title area.")),Dg=(0,kd.registerColor)("peekViewTitleLabel.foreground",{dark:pp.Color.white,light:pp.Color.black,hc:pp.Color.white},Jc.localize("peekViewTitleForeground","Color of the peek view title.")),Ag=(0,kd.registerColor)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161e6",hc:"#FFFFFF99"},Jc.localize("peekViewTitleInfoForeground","Color of the peek view title info.")),Ig=(0,kd.registerColor)("peekView.border",{dark:kd.editorInfoForeground,light:kd.editorInfoForeground,hc:kd.contrastBorder},Jc.localize("peekViewBorder","Color of the peek view borders and arrow.")),Rg=(0,kd.registerColor)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hc:pp.Color.black},Jc.localize("peekViewResultsBackground","Background color of the peek view result list.")),Tg=(0,kd.registerColor)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hc:pp.Color.white},Jc.localize("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),Lg=(0,kd.registerColor)("peekViewResult.fileForeground",{dark:pp.Color.white,light:"#1E1E1E",hc:pp.Color.white},Jc.localize("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),Mg=(0,kd.registerColor)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hc:null},Jc.localize("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),Ng=(0,kd.registerColor)("peekViewResult.selectionForeground",{dark:pp.Color.white,light:"#6C6C6C",hc:pp.Color.white},Jc.localize("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),Pg=(0,kd.registerColor)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hc:pp.Color.black},Jc.localize("peekViewEditorBackground","Background color of the peek view editor.")),Og=(0,kd.registerColor)("peekViewEditorGutter.background",{dark:Pg,light:Pg,hc:Pg},Jc.localize("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),Fg=(0,kd.registerColor)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hc:null},Jc.localize("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),Bg=(0,kd.registerColor)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hc:null},Jc.localize("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),Hg=(0,kd.registerColor)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hc:kd.activeContrastBorder},Jc.localize("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor.")),jg=(mf=o("L9zbH"),Qh=o("8bO6F"),o("kSEDy"));kd=o("ht8QC"),Cd=o("4ET02");(Sg||(Sg={})).className=function(e){switch(e){case jg.default.Ignore:return"severity-ignore "+Qh.Codicon.info.classNames;case jg.default.Info:return Qh.Codicon.info.classNames;case jg.default.Warning:return Qh.Codicon.warning.classNames;case jg.default.Error:return Qh.Codicon.error.classNames;default:return""}},(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.problemsErrorIconForeground);if(n){var i=Qh.Codicon.error.cssSelector;t.addRule("\n\t\t\t.monaco-editor .zone-widget ".concat(i,",\n\t\t\t.markers-panel .marker-icon").concat(i,",\n\t\t\t.text-search-provider-messages .providerMessage ").concat(i,",\n\t\t\t.extensions-viewlet > .extensions ").concat(i," {\n\t\t\t\tcolor: ").concat(n,";\n\t\t\t}\n\t\t"))}var r=e.getColor(kd.problemsWarningIconForeground);if(r){var o=Qh.Codicon.warning.cssSelector;t.addRule("\n\t\t\t.monaco-editor .zone-widget ".concat(o,",\n\t\t\t.markers-panel .marker-icon").concat(o,",\n\t\t\t.extensions-viewlet > .extensions ").concat(o,",\n\t\t\t.extension-editor ").concat(o,",\n\t\t\t.text-search-provider-messages .providerMessage ").concat(o,",\n\t\t\t.preferences-editor ").concat(o," {\n\t\t\t\tcolor: ").concat(r,";\n\t\t\t}\n\t\t"))}var a=e.getColor(kd.problemsInfoIconForeground);if(a){var s=Qh.Codicon.info.cssSelector;t.addRule("\n\t\t\t.monaco-editor .zone-widget ".concat(s,",\n\t\t\t.markers-panel .marker-icon").concat(s,",\n\t\t\t.extensions-viewlet > .extensions ").concat(s,",\n\t\t\t.text-search-provider-messages .providerMessage ").concat(s,",\n\t\t\t.extension-editor ").concat(s," {\n\t\t\t\tcolor: ").concat(a,";\n\t\t\t}\n\t\t"))}}));Lp=o("j1CnT"),xd=o("feTbe"),$c=o("efZ3W"),Oh=o("hm5an"),nh=o("gTzCU");var zg=o("l7Ug5"),Wg=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ug=function(e,t){return function(n,i){t(n,i,e)}},Vg=function(){"use strict";function e(t,n,i,r,o){var a=this;(0,u.default)(this,e),this._openerService=r,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new(0,vd.DisposableStore),this._editor=n;var s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(Bh.addStandardDisposableListener(this._relatedBlock,"click",(function(e){e.preventDefault();var t=a._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new(0,Ep.ScrollableElement)(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:3,verticalScrollbarSize:3}),t.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((function(e){s.style.left="-".concat(e.scrollLeft,"px"),s.style.top="-".concat(e.scrollTop,"px")}))),this._disposables.add(this._scrollable)}return(0,c.default)(e,[{key:"dispose",value:function(){(0,vd.dispose)(this._disposables)}},{key:"update",value:function(e){var t=this,n=e.source,i=e.message,r=e.relatedInformation,o=e.code,a=((null==n?void 0:n.length)||0)+2;o&&(a+="string"==typeof o?o.length:o.value.length);var s=(0,nh.splitLines)(i);this._lines=s.length,this._longestLineLength=0;var l=!0,u=!1,c=void 0;try{for(var d,h=s[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;this._longestLineLength=Math.max(f.length+a,this._longestLineLength)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}Bh.clearNode(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);var p=this._messageBlock,g=!0,v=!1,m=void 0;try{for(var y,b=s[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var _=y.value;(p=document.createElement("div")).innerText=_,""===_&&(p.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(p)}}catch(e){v=!0,m=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw m}}if(n||o){var w=document.createElement("span");if(w.classList.add("details"),p.appendChild(w),n){var k=document.createElement("span");k.innerText=n,k.classList.add("source"),w.appendChild(k)}if(o)if("string"==typeof o){var C=document.createElement("span");C.innerText="(".concat(o,")"),C.classList.add("code"),w.appendChild(C)}else{this._codeLink=Bh.$("a.code-link"),this._codeLink.setAttribute("href","".concat(o.target.toString())),this._codeLink.onclick=function(e){t._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()},Bh.append(this._codeLink,Bh.$("span")).innerText=o.value,w.appendChild(this._codeLink)}}if(Bh.clearNode(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,oh.isNonEmptyArray)(r)){var x=this._relatedBlock.appendChild(document.createElement("div"));x.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(58)),"px"),this._lines+=1;var S=!0,E=!1,D=void 0;try{for(var A,I=r[Symbol.iterator]();!(S=(A=I.next()).done);S=!0){var R=A.value,T=document.createElement("div"),L=document.createElement("a");L.classList.add("filename"),L.innerText="".concat(Fp(R.resource),"(").concat(R.startLineNumber,", ").concat(R.startColumn,"): "),L.title=this._labelService.getUriLabel(R.resource),this._relatedDiagnostics.set(L,R);var M=document.createElement("span");M.innerText=R.message,T.appendChild(L),T.appendChild(M),this._lines+=1,x.appendChild(T)}}catch(e){E=!0,D=e}finally{try{S||null==I.return||I.return()}finally{if(E)throw D}}}var N=this._editor.getOption(42),P=Math.ceil(N.typicalFullwidthCharacterWidth*this._longestLineLength*.75),O=N.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:P,scrollHeight:O})}},{key:"layout",value:function(e,t){this._scrollable.getDomNode().style.height="".concat(e,"px"),this._scrollable.getDomNode().style.width="".concat(t,"px"),this._scrollable.setScrollDimensions({width:t,height:e})}},{key:"getHeightInLines",value:function(){return Math.min(17,this._lines)}},{key:"getAriaLabel",value:function(e){var t="";switch(e.severity){case df.MarkerSeverity.Error:t=Jc.localize("Error","Error");break;case df.MarkerSeverity.Warning:t=Jc.localize("Warning","Warning");break;case df.MarkerSeverity.Info:t=Jc.localize("Info","Info");break;case df.MarkerSeverity.Hint:t=Jc.localize("Hint","Hint")}var n=Jc.localize("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),i=this._editor.getModel();if(i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1){var r=i.getLineContent(e.startLineNumber);n="".concat(r,", ").concat(n)}return n}}]),e}(),Kg=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o,a,s,l){var c;return(0,u.default)(this,n),(c=t.call(this,e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},a))._themeService=i,c._openerService=r,c._menuService=o,c._contextKeyService=s,c._labelService=l,c._callOnDispose=new(0,vd.DisposableStore),c._onDidSelectRelatedInformation=new(0,$h.Emitter),c.onDidSelectRelatedInformation=c._onDidSelectRelatedInformation.event,c._severity=df.MarkerSeverity.Warning,c._backgroundColor=pp.Color.white,c._applyTheme(i.getColorTheme()),c._callOnDispose.add(i.onDidColorThemeChange(c._applyTheme.bind((0,Hi.default)(c)))),c.create(),c}return(0,c.default)(n,[{key:"_applyTheme",value:function(e){this._backgroundColor=e.getColor(tv);var t=Gg,n=Zg;this._severity===df.MarkerSeverity.Warning?(t=$g,n=Yg):this._severity===df.MarkerSeverity.Info&&(t=Qg,n=ev);var i=e.getColor(t),r=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:r,primaryHeadingColor:e.getColor(Hp.peekViewTitleForeground),secondaryHeadingColor:e.getColor(Hp.peekViewTitleInfoForeground)})}},{key:"_applyStyles",value:function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),(0,zi.default)((0,Wi.default)(n.prototype),"_applyStyles",this).call(this)}},{key:"dispose",value:function(){this._callOnDispose.dispose(),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"_fillHead",value:function(e){var t=this;(0,zi.default)((0,Wi.default)(n.prototype),"_fillHead",this).call(this,e),this._disposables.add(this._actionbarWidget.actionRunner.onBeforeRun((function(e){return t.editor.focus()})));var i=[],r=this._menuService.createMenu(n.TitleMenu,this._contextKeyService);(0,ng.createAndFillInActionBarActions)(r,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),r.dispose()}},{key:"_fillTitleIcon",value:function(e){this._icon=Bh.append(e,Bh.$(""))}},{key:"_fillBody",value:function(e){var t=this;this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new Vg(this._container,this.editor,(function(e){return t._onDidSelectRelatedInformation.fire(e)}),this._openerService,this._labelService),this._disposables.add(this._message)}},{key:"show",value:function(){throw new Error("call showAtMarker")}},{key:"showAtMarker",value:function(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());var r=yd.Range.lift(e),o=this.editor.getPosition(),a=o&&r.containsPosition(o)?o:r.getStartPosition();(0,zi.default)((0,Wi.default)(n.prototype),"show",this).call(this,a,this.computeRequiredHeight());var s=this.editor.getModel();if(s){var l=i>1?Jc.localize("problems","{0} of {1} problems",t,i):Jc.localize("change","{0} of {1} problem",t,i);this.setTitle((0,mf.basename)(s.uri),l)}this._icon.className="codicon ".concat(Sg.className(df.MarkerSeverity.toSeverity(this._severity))),this.editor.revealPositionNearTop(a,0),this.editor.focus()}},{key:"updateMarker",value:function(e){this._container.classList.remove("stale"),this._message.update(e)}},{key:"showStale",value:function(){this._container.classList.add("stale"),this._relayout()}},{key:"_doLayoutBody",value:function(e,t){(0,zi.default)((0,Wi.default)(n.prototype),"_doLayoutBody",this).call(this,e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height="".concat(e,"px")}},{key:"_onWidth",value:function(e){this._message.layout(this._heightInPixel,e)}},{key:"_relayout",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"_relayout",this).call(this,this.computeRequiredHeight())}},{key:"computeRequiredHeight",value:function(){return 3+this._message.getHeightInLines()}}]),n}(Hp.PeekViewWidget);Kg.TitleMenu=new(0,xd.MenuId)("gotoErrorTitleMenu"),Kg=Wg([Ug(1,Cd.IThemeService),Ug(2,Lp.IOpenerService),Ug(3,xd.IMenuService),Ug(4,Oh.IInstantiationService),Ug(5,$c.IContextKeyService),Ug(6,zg.ILabelService)],Kg);var qg=(0,kd.oneOf)(kd.editorErrorForeground,kd.editorErrorBorder),Jg=(0,kd.oneOf)(kd.editorWarningForeground,kd.editorWarningBorder),Xg=(0,kd.oneOf)(kd.editorInfoForeground,kd.editorInfoBorder),Gg=(0,kd.registerColor)("editorMarkerNavigationError.background",{dark:qg,light:qg,hc:kd.contrastBorder},Jc.localize("editorMarkerNavigationError","Editor marker navigation widget error color.")),Zg=(0,kd.registerColor)("editorMarkerNavigationError.headerBackground",{dark:(0,kd.transparent)(Gg,.1),light:(0,kd.transparent)(Gg,.1),hc:null},Jc.localize("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),$g=(0,kd.registerColor)("editorMarkerNavigationWarning.background",{dark:Jg,light:Jg,hc:kd.contrastBorder},Jc.localize("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Yg=(0,kd.registerColor)("editorMarkerNavigationWarning.headerBackground",{dark:(0,kd.transparent)($g,.1),light:(0,kd.transparent)($g,.1),hc:"#0C141F"},Jc.localize("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),Qg=(0,kd.registerColor)("editorMarkerNavigationInfo.background",{dark:Xg,light:Xg,hc:kd.contrastBorder},Jc.localize("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),ev=(0,kd.registerColor)("editorMarkerNavigationInfo.headerBackground",{dark:(0,kd.transparent)(Qg,.1),light:(0,kd.transparent)(Qg,.1),hc:null},Jc.localize("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),tv=(0,kd.registerColor)("editorMarkerNavigation.background",{dark:kd.editorBackground,light:kd.editorBackground,hc:kd.editorBackground},Jc.localize("editorMarkerNavigationBackground","Editor marker navigation widget background."));(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.textLinkForeground);n&&t.addRule(".monaco-editor .marker-widget a.code-link span { color: ".concat(n,"; }"));var i=e.getColor(kd.textLinkActiveForeground);i&&t.addRule(".monaco-editor .marker-widget a.code-link span:hover { color: ".concat(i,"; }"))}));jd=o("1NzEb"),xd=o("feTbe"),Qh=o("8bO6F"),Oh=o("hm5an");var nv={};e(nv,"IMarkerNavigationService",(function(){return lv}),(function(e){return lv=e}));u=o("4JAgF"),c=o("9HoHC"),df=o("hMofI"),ah=o("iPPVB"),$h=o("neTVg"),vd=o("dXCvL"),yd=o("5MJfC"),nh=o("gTzCU"),oh=o("2ZBuK"),Oh=o("hm5an"),$f=o("2cK24");var iv=o("5kkS1"),rv=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ov=function(e,t){return function(n,i){t(n,i,e)}},av=function e(t,n,i){"use strict";(0,u.default)(this,e),this.marker=t,this.index=n,this.total=i},sv=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._markerService=n,this._onDidChange=new(0,$h.Emitter),this.onDidChange=this._onDidChange.event,this._dispoables=new(0,vd.DisposableStore),this._markers=[],this._nextIdx=-1,ah.URI.isUri(t)?this._resourceFilter=function(e){return e.toString()===t.toString()}:t&&(this._resourceFilter=t);var r=function(){i._markers=i._markerService.read({resource:ah.URI.isUri(t)?t:void 0,severities:df.MarkerSeverity.Error|df.MarkerSeverity.Warning|df.MarkerSeverity.Info}),"function"==typeof t&&(i._markers=i._markers.filter((function(e){return i._resourceFilter(e.resource)}))),i._markers.sort(e._compareMarker)};r(),this._dispoables.add(n.onMarkerChanged((function(e){i._resourceFilter&&!e.some((function(e){return i._resourceFilter(e)}))||(r(),i._nextIdx=-1,i._onDidChange.fire())})))}return(0,c.default)(e,[{key:"dispose",value:function(){this._dispoables.dispose(),this._onDidChange.dispose()}},{key:"matches",value:function(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}},{key:"selected",get:function(){var e=this._markers[this._nextIdx];return e&&new av(e,this._nextIdx+1,this._markers.length)}},{key:"_initIdx",value:function(e,t,n){var i=!1,r=this._markers.findIndex((function(t){return t.resource.toString()===e.uri.toString()}));r<0&&(r=(0,oh.binarySearch)(this._markers,{resource:e.uri},(function(e,t){return(0,nh.compare)(e.resource.toString(),t.resource.toString())})))<0&&(r=~r);for(var o=r;o<this._markers.length;o++){var a=yd.Range.lift(this._markers[o]);if(a.isEmpty()){var s=e.getWordAtPosition(a.getStartPosition());s&&(a=new(0,yd.Range)(a.startLineNumber,s.startColumn,a.startLineNumber,s.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,i=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}},{key:"resetIndex",value:function(){this._nextIdx=-1}},{key:"move",value:function(e,t,n){if(0===this._markers.length)return!1;var i=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}},{key:"find",value:function(e,t){var n=this._markers.findIndex((function(t){return t.resource.toString()===e.toString()}));if(!(n<0))for(;n<this._markers.length;n++)if(yd.Range.containsPosition(this._markers[n],t))return new av(this._markers[n],n+1,this._markers.length)}}],[{key:"_compareMarker",value:function(e,t){var n=(0,nh.compare)(e.resource.toString(),t.resource.toString());return 0===n&&(n=df.MarkerSeverity.compare(e.severity,t.severity)),0===n&&(n=yd.Range.compareRangesUsingStarts(e,t)),n}}]),e}();sv=rv([ov(1,df.IMarkerService)],sv);var lv=(0,Oh.createDecorator)("IMarkerNavigationService"),uv=function(){"use strict";function e(t){(0,u.default)(this,e),this._markerService=t,this._provider=new(0,iv.LinkedList)}return(0,c.default)(e,[{key:"getMarkerList",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._provider[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.getMarkerList(e);if(a)return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return new sv(e,this._markerService)}}]),e}();uv=rv([ov(0,df.IMarkerService)],uv),(0,$f.registerSingleton)(lv,uv,!0);var cv=o("9uoQH"),dv=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},hv=function(e,t){return function(n,i){t(n,i,e)}},fv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},pv=function(){"use strict";function e(t,n,i,r,o){(0,u.default)(this,e),this._markerNavigationService=n,this._contextKeyService=i,this._editorService=r,this._instantiationService=o,this._sessionDispoables=new(0,vd.DisposableStore),this._editor=t,this._widgetVisible=_v.bindTo(this._contextKeyService)}return(0,c.default)(e,[{key:"dispose",value:function(){this._cleanUp(),this._sessionDispoables.dispose()}},{key:"_cleanUp",value:function(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}},{key:"_getOrCreateModel",value:function(e){var t=this;if(this._model&&this._model.matches(e))return this._model;var n=!1;return this._model&&(n=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),n&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Np.MarkerNavigationWidget,this._editor),this._widget.onDidClose((function(){return t.close()}),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((function(e){var n,i,r;(null===(n=t._model)||void 0===n?void 0:n.selected)&&yd.Range.containsPosition(null===(i=t._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(r=t._model)||void 0===r||r.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((function(){if(t._widget&&t._widget.position&&t._model){var e=t._model.find(t._editor.getModel().uri,t._widget.position);e?t._widget.updateMarker(e.marker):t._widget.showStale()}}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((function(e){t._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:yd.Range.lift(e).collapseToStart()}},t._editor),t.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((function(){return t._cleanUp()}))),this._model}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._cleanUp(),e&&this._editor.focus()}},{key:"showAtMarker",value:function(e){if(this._editor.hasModel()){var t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new(0,md.Position)(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}},{key:"nagivate",value:function(t,i){return fv(this,void 0,void 0,n(l).mark((function r(){var o,a;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._editor.hasModel()){n.next=14;break}if((o=this._getOrCreateModel(i?void 0:this._editor.getModel().uri)).move(t,this._editor.getModel(),this._editor.getPosition()),o.selected){n.next=5;break}return n.abrupt("return");case 5:if(o.selected.marker.resource.toString()===this._editor.getModel().uri.toString()){n.next=13;break}return this._cleanUp(),n.next=9,this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);case 9:(a=n.sent)&&(e.get(a).close(),e.get(a).nagivate(t,i)),n.next=14;break;case 13:this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total);case 14:case"end":return n.stop()}}),r,this)})))}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();pv.ID="editor.contrib.markerController",pv=dv([hv(1,nv.IMarkerNavigationService),hv(2,$c.IContextKeyService),hv(3,jd.ICodeEditorService),hv(4,Oh.IInstantiationService)],pv);var gv=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r){var o;return(0,u.default)(this,i),(o=t.call(this,r))._next=e,o._multiFile=n,o}return(0,c.default)(i,[{key:"run",value:function(e,t){return fv(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hasModel()&&pv.get(t).nagivate(this._next,this._multiFile);case 1:case"end":return e.stop()}}),e,this)})))}}]),i}(qc.EditorAction),vv=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,!1,{id:n.ID,label:n.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:578,weight:100},menuOpts:{menuId:Np.MarkerNavigationWidget.TitleMenu,title:n.LABEL,icon:(0,cv.registerIcon)("marker-navigation-next",Qh.Codicon.arrowDown,Jc.localize("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}return n}(gv);vv.ID="editor.action.marker.next",vv.LABEL=Jc.localize("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var mv=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,!1,{id:n.ID,label:n.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:1602,weight:100},menuOpts:{menuId:Np.MarkerNavigationWidget.TitleMenu,title:vv.LABEL,icon:(0,cv.registerIcon)("marker-navigation-previous",Qh.Codicon.arrowUp,Jc.localize("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}return n}(gv);mv.ID="editor.action.marker.prev",mv.LABEL=Jc.localize("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var yv=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,!0,{id:"editor.action.marker.nextInFiles",label:Jc.localize("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:66,weight:100},menuOpts:{menuId:xd.MenuId.MenubarGoMenu,title:Jc.localize({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}return n}(gv),bv=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,!0,{id:"editor.action.marker.prevInFiles",label:Jc.localize("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:1090,weight:100},menuOpts:{menuId:xd.MenuId.MenubarGoMenu,title:Jc.localize({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}return n}(gv);(0,qc.registerEditorContribution)(pv.ID,pv),(0,qc.registerEditorAction)(vv),(0,qc.registerEditorAction)(mv),(0,qc.registerEditorAction)(yv),(0,qc.registerEditorAction)(bv);var _v=new(0,$c.RawContextKey)("markersNavigationVisible",!1),wv=qc.EditorCommand.bindToContribution(pv.get);(0,qc.registerEditorCommand)(new wv({id:"closeMarkersNavigation",precondition:_v,handler:function(e){return e.close()},kbOpts:{weight:150,kbExpr:Xc.EditorContextKeys.focus,primary:9,secondary:[1033]}}));gd=o("hJucn"),gh=o("gkTZs"),Cd=o("4ET02"),kd=o("ht8QC");var kv=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Cv=function(e,t){return function(n,i){t(n,i,e)}},xv=Bh.$,Sv=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.owner=t,this.range=n,this.marker=i}return(0,c.default)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),Ev={type:1,filter:{include:ch.QuickFix}},Dv=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._editor=t,this._hover=n,this._markerDecorationsService=i,this._openerService=r,this.recentMarkerCodeActionsInfo=void 0}return(0,c.default)(e,[{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n=this._editor.getModel(),i=e.range.startLineNumber,r=n.getLineMaxColumn(i),o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=d.range.startLineNumber===i?d.range.startColumn:1,f=d.range.endLineNumber===i?d.range.endColumn:r,p=this._markerDecorationsService.getMarker(n.uri,d);if(p){var g=new(0,yd.Range)(e.range.startLineNumber,h,e.range.startLineNumber,f);o.push(new Sv(this,g,p))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return o}},{key:"renderHoverParts",value:function(e,t,n){var i=this;if(!e.length)return vd.Disposable.None;var r=new(0,vd.DisposableStore);e.forEach((function(e){return t.appendChild(i.renderMarkerHover(e,r))}));var o=1===e.length?e[0]:e.sort((function(e,t){return df.MarkerSeverity.compare(e.marker.severity,t.marker.severity)}))[0];return this.renderMarkerStatusbar(o,n,r),r}},{key:"renderMarkerHover",value:function(e,t){var n=this,i=xv("div.hover-row"),r=Bh.append(i,xv("div.marker.hover-contents")),o=e.marker,a=o.source,s=o.message,l=o.code,u=o.relatedInformation;this._editor.applyFontInfo(r);var c=Bh.append(r,xv("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=s,a||l)if(l&&"string"!=typeof l){var d=xv("span");if(a)Bh.append(d,xv("span")).innerText=a;var h=Bh.append(d,xv("a.code-link"));h.setAttribute("href",l.target.toString()),t.add(Bh.addDisposableListener(h,"click",(function(e){n._openerService.open(l.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()}))),Bh.append(h,xv("span")).innerText=l.value;var f=Bh.append(r,d);f.style.opacity="0.6",f.style.paddingLeft="6px"}else{var p=Bh.append(r,xv("span"));p.style.opacity="0.6",p.style.paddingLeft="6px",p.innerText=a&&l?"".concat(a,"(").concat(l,")"):a||"(".concat(l,")")}var g=!0,v=!1,m=void 0;if((0,oh.isNonEmptyArray)(u))try{for(var y,b=this,_=function(e,i){var o=i.value,a=o.message,s=o.resource,l=o.startLineNumber,u=o.startColumn,c=Bh.append(r,xv("div"));c.style.marginTop="8px";var d=Bh.append(c,xv("a"));d.innerText="".concat((0,mf.basename)(s),"(").concat(l,", ").concat(u,"): "),d.style.cursor="pointer",t.add(Bh.addDisposableListener(d,"click",(function(e){e.stopPropagation(),e.preventDefault(),n._openerService&&n._openerService.open(s,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:l,startColumn:u}}}).catch(Yc.onUnexpectedError)})));var h=Bh.append(c,xv("span"));h.innerText=a,b._editor.applyFontInfo(h)},w=u[Symbol.iterator]();!(g=(y=w.next()).done);g=!0)_(0,y)}catch(e){v=!0,m=e}finally{try{g||null==w.return||w.return()}finally{if(v)throw m}}return i}},{key:"renderMarkerStatusbar",value:function(e,t,n){var i=this;if(e.marker.severity!==df.MarkerSeverity.Error&&e.marker.severity!==df.MarkerSeverity.Warning&&e.marker.severity!==df.MarkerSeverity.Info||t.addAction({label:Jc.localize("view problem","View Problem"),commandId:Mp.NextMarkerAction.ID,run:function(){i._hover.hide(),Mp.MarkerController.get(i._editor).showAtMarker(e.marker),i._editor.focus()}}),!this._editor.getOption(80)){var r=t.append(xv("div"));this.recentMarkerCodeActionsInfo&&(df.IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker)===df.IMarkerData.makeKey(e.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(r.textContent=Jc.localize("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);var o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?vd.Disposable.None:n.add((0,gd.disposableTimeout)((function(){return r.textContent=Jc.localize("checkingForQuickFixes","Checking for quick fixes...")}),200));r.textContent||(r.textContent=String.fromCharCode(160));var a=this.getCodeActions(e.marker);n.add((0,vd.toDisposable)((function(){return a.cancel()}))),a.then((function(a){if(o.dispose(),i.recentMarkerCodeActionsInfo={marker:e.marker,hasCodeActions:a.validActions.length>0},!i.recentMarkerCodeActionsInfo.hasCodeActions)return a.dispose(),void(r.textContent=Jc.localize("noQuickFixes","No quick fixes available"));r.style.display="none";var s=!1;n.add((0,vd.toDisposable)((function(){s||a.dispose()}))),t.addAction({label:Jc.localize("quick fixes","Quick Fix..."),commandId:Qd.QuickFixAction.Id,run:function(e){s=!0;var t=Qd.QuickFixController.get(i._editor),n=Bh.getDomNodePagePosition(e);i._hover.hide(),t.showCodeActions(Ev,a,{x:n.left+6,y:n.top+n.height+6})}})}),Yc.onUnexpectedError)}}},{key:"getCodeActions",value:function(e){var t=this;return(0,gd.createCancelablePromise)((function(n){return(0,rh.getCodeActions)(t._editor.getModel(),new(0,yd.Range)(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Ev,gh.Progress.None,n)}))}}]),e}();Dv=kv([Cv(2,Tp.IMarkerDecorationsService),Cv(3,Lp.IOpenerService)],Dv),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.textLinkForeground);n&&t.addRule(".monaco-hover .hover-contents a.code-link span { color: ".concat(n,"; }"));var i=e.getColor(kd.textLinkActiveForeground);i&&t.addRule(".monaco-hover .hover-contents a.code-link span:hover { color: ".concat(i,"; }"))}));Oh=o("hm5an");var Av={};e(Av,"MarkdownHoverParticipant",(function(){return Qv}),(function(e){return Qv=e}));u=o("4JAgF"),c=o("9HoHC"),l=o("1JCPQ"),Jc=o("faA3E"),Bh=o("fTm33"),vd=o("dXCvL"),yd=o("5MJfC");var Iv={};e(Iv,"MarkdownRenderer",(function(){return qv}),(function(e){return qv=e}));u=o("4JAgF"),c=o("9HoHC"),l=o("1JCPQ"),Bh=o("fTm33");var Rv,Tv=o("1nLP0"),Lv=o("jQtII"),Mv=o("kRDqv");Kf=o("bgrLd"),Yc=o("2NkmB"),$h=o("neTVg"),Qc=o("1BIIJ"),Gp=o("k572B");!function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l=void 0;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return r(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var o=void 0,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";var i=e("./toMap");t.exports={uris:i(["background","base","cite","href","longdesc","src","usemap"])}},{"./toMap":10}],2:[function(e,t,n){"use strict";t.exports={allowedAttributes:{"*":["title","accesskey"],a:["href","name","target","aria-label"],iframe:["allowfullscreen","frameborder","src"],img:["src","alt","title","aria-label"]},allowedClasses:{},allowedSchemes:["http","https","mailto"],allowedTags:["a","abbr","article","b","blockquote","br","caption","code","del","details","div","em","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","main","mark","ol","p","pre","section","span","strike","strong","sub","summary","sup","table","tbody","td","th","thead","tr","u","ul"],filter:null}},{}],3:[function(e,t,n){"use strict";var i=e("./toMap");t.exports={voids:i(["area","br","col","hr","img","wbr","input","base","basefont","link","meta"])}},{"./toMap":10}],4:[function(e,t,n){"use strict";var i=function(e,t,n){var i=[],l=!0===n?t:r({},s,t),u=a(i,l);return o(e,u),i.join("")},r=(e("he"),e("assignment")),o=e("./parser"),a=e("./sanitizer"),s=e("./defaults");i.defaults=s,t.exports=i,Rv=i},{"./defaults":2,"./parser":7,"./sanitizer":8,assignment:6,he:9}],5:[function(e,t,n){"use strict";t.exports=function(e){return"string"==typeof e?e.toLowerCase():e}},{}],6:[function(e,t,n){"use strict";t.exports=function e(t){for(var n,i,r=Array.prototype.slice.call(arguments,1);r.length;)for(i in n=r.shift())n.hasOwnProperty(i)&&("[object Object]"===Object.prototype.toString.call(t[i])?t[i]=e(t[i],n[i]):t[i]=n[i]);return t}},{}],7:[function(e,t,n){"use strict";var i=e("he"),r=e("./lowercase"),o=(e("./attributes"),e("./elements")),a=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,s=/^<\s*\/\s*([\w:-]+)[^>]*>/,l=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,u=/^</,c=/^<\s*\//;t.exports=function(e,t){for(var n,d=function(){var e=[];return e.lastItem=function(){return e[e.length-1]},e}(),h=e;e;)f();function f(){n=!0,function(){"\x3c!--"===e.substr(0,4)?(i=e.indexOf("--\x3e"),i>=0&&(t.comment&&t.comment(e.substring(4,i)),e=e.substring(i+3),n=!1)):c.test(e)?p(s,v):u.test(e)&&p(a,g);var i;!function(){if(!n)return;var i,r=e.indexOf("<");r>=0?(i=e.substring(0,r),e=e.substring(r)):(i=e,e="");t.chars&&t.chars(i)}()}();var i=e===h;h=e,i&&(e="")}function p(t,i){var r=e.match(t);r&&(e=e.substring(r[0].length),r[0].replace(t,i),n=!1)}function g(e,n,a,s){var u={},c=r(n),h=o.voids[c]||!!s;a.replace(l,(function(e,t,n,r,o){u[t]=void 0===n&&void 0===r&&void 0===o?void 0:i.decode(n||r||o||"")})),h||d.push(c),t.start&&t.start(c,u,h)}function v(e,n){var i,o=0,a=r(n);if(a)for(o=d.length-1;o>=0&&d[o]!==a;o--);if(o>=0){for(i=d.length-1;i>=o;i--)t.end&&t.end(d[i]);d.length=o}}v()}},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],8:[function(e,t,n){"use strict";var i=e("he"),r=e("./lowercase"),o=e("./attributes"),a=e("./elements");t.exports=function(e,t){var n,s=t||{};return d(),{start:function(e,t,a){var c=r(e);if(n.ignoring)return void u(c);if(-1===(s.allowedTags||[]).indexOf(c))return void u(c);if(s.filter&&!s.filter({tag:c,attrs:t}))return void u(c);l("<"),l(c),Object.keys(t).forEach((function(e){var n=t[e],a=(s.allowedClasses||{})[c]||[],u=(s.allowedAttributes||{})[c]||[];u=u.concat((s.allowedAttributes||{})["*"]||[]);var d=r(e);("class"===d&&-1===u.indexOf(d)?(n=n.split(" ").filter((function(e){return a&&-1!==a.indexOf(e)})).join(" ").trim()).length:-1!==u.indexOf(d)&&(!0!==o.uris[d]||function(e){var t=e[0];if("#"===t||"/"===t)return!0;var n=e.indexOf(":");if(-1===n)return!0;var i=e.indexOf("?");if(-1!==i&&n>i)return!0;var r=e.indexOf("#");return-1!==r&&n>r||s.allowedSchemes.some(o);function o(t){return 0===e.indexOf(t+":")}}(n)))&&(l(" "),l(e),"string"==typeof n&&(l('="'),l(i.encode(n)),l('"')))})),l(a?"/>":">")},end:function(e){var t=r(e);-1!==(s.allowedTags||[]).indexOf(t)&&!1===n.ignoring?(l("</"),l(t),l(">")):c(t)},chars:function(e){!1===n.ignoring&&l(s.transformText?s.transformText(e):e)}};function l(t){e.push(t)}function u(e){a.voids[e]||(!1===n.ignoring?n={ignoring:e,depth:1}:n.ignoring===e&&n.depth++)}function c(e){n.ignoring===e&&--n.depth<=0&&d()}function d(){n={ignoring:!1,depth:0}}}},{"./attributes":1,"./elements":3,"./lowercase":5,he:9}],9:[function(e,t,n){"use strict";var i=function(e){return s[e]},r=function(e){return l[e]},o=function(e){return null==e?"":String(e).replace(c,i)},a=function(e){return null==e?"":String(e).replace(u,r)},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},u=/(&amp;|&lt;|&gt;|&quot;|&#39;)/g,c=/[&<>"']/g;o.options=a.options={},t.exports={encode:o,escape:o,decode:a,unescape:a,version:"1.0.0-browser"}},{}],10:[function(e,t,n){"use strict";var i=function(e,t){return e[t]=!0,e};t.exports=function(e){return e.reduce(i,{})}},{}]},{},[4]);var Nv=Rv,Pv={};Pv=function(){"use strict";var e=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}},t=function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t},n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},i=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},r=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=n(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},o=function(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},a=function(e){k.exports.defaults=e},s=function(e,t){if(t){if(C.test(e))return e.replace(x,A)}else if(S.test(e))return e.replace(E,A);return e},l=function(e){return e.replace(I,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))},u=function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,i){return i=(i=i.source||i).replace(R,"$1"),e=e.replace(t,i),n},getRegex:function(){return new RegExp(e,t)}};return n},c=function(e,t,n){if(e){var i;try{i=decodeURIComponent(l(n)).replace(T,"").toLowerCase()}catch(e){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!L.test(n)&&(n=d(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},d=function(e,t){M[" "+e]||(N.test(e)?M[" "+e]=e+"/":M[" "+e]=p(e,"/",!0));var n=-1===(e=M[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(P,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(O,"$1")+t:e+t},h=function(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},f=function(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var i=!1,r=t;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n},p=function(e,t,n){var i=e.length;if(0===i)return"";for(var r=0;r<i;){var o=e.charAt(i-r-1);if(o!==t||n){if(o===t||!n)break;r++}else r++}return e.substr(0,i-r)},g=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,i=0,r=0;r<n;r++)if("\\"===e[r])r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&--i<0)return r;return-1},v=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},m=function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e},y=function(e,t,n,i){var r=t.href,o=t.title?z(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?(i.state.inLink=!0,{type:"link",raw:n,href:r,title:o,text:a,tokens:i.inlineTokens(a,[])}):{type:"image",raw:n,href:r,title:o,text:z(a)}},b=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=i.length?e.slice(i.length):e})).join("\n")},_=function(e){return e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")},w=function(e){var t,n,i="",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i},k={exports:{}};k.exports={defaults:o(),getDefaults:o,changeDefaults:a};var C=/[&<>"']/,x=/[&<>"']/g,S=/[<>"']|&(?!#?\w+;)/,E=/[<>"']|&(?!#?\w+;)/g,D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},A=function(e){return D[e]},I=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,R=/(^|[^\[])\^/g,T=/[^\w:]/g,L=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,M={},N=/^[^:]+:\/*[^/]*$/,P=/^([^:]+:)[\s\S]*$/,O=/^([^:]+:\/*[^/]*)[\s\S]*$/,F={escape:s,unescape:l,edit:u,cleanUrl:c,resolveUrl:d,noopTest:{exec:function(){}},merge:h,splitCells:f,rtrim:p,findClosingBracket:g,checkSanitizeDeprecation:v,repeatString:m},B=k.exports.defaults,H=F.rtrim,j=F.splitCells,z=F.escape,W=F.findClosingBracket,U=function(){var e=function(e){this.options=e||B},t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:H(n,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=b(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=H(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}var r={type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,i,r,o,a,s,l,u,c,d,h=t[1].trim(),f=h.length>1,p={type:"list",raw:"",ordered:f,start:f?+h.slice(0,-1):"",loose:!1,items:[]};h=f?"\\d{1,9}\\"+h.slice(-1):"\\"+h,this.options.pedantic&&(h=f?h:"[*+-]");for(var g=new RegExp("^( {0,3}"+h+")((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))");e&&!this.rules.block.hr.test(e)&&(t=g.exec(e));){c=t[2].split("\n"),this.options.pedantic?(o=2,d=c[0].trimLeft()):(o=t[2].search(/[^ ]/),o=t[1].length+(o>4?1:o),d=c[0].slice(o-t[1].length)),s=!1,n=t[0],!c[0]&&/^ *$/.test(c[1])&&(n=t[1]+c.slice(0,2).join("\n")+"\n",p.loose=!0,c=[]);var v=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:[*+-]|\\d{1,9}[.)])");for(a=1;a<c.length;a++){if(u=c[a],this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),v.test(u)){n=t[1]+c.slice(0,a).join("\n")+"\n";break}if(s){if(!(u.search(/[^ ]/)>=o)&&u.trim()){n=t[1]+c.slice(0,a).join("\n")+"\n";break}d+="\n"+u.slice(o)}else u.trim()||(s=!0),u.search(/[^ ]/)>=o?d+="\n"+u.slice(o):d+="\n"+u}p.loose||(l?p.loose=!0:/\n *\n *$/.test(n)&&(l=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(d))&&(r="[ ] "!==i[0],d=d.replace(/^\[[ xX]\] +/,"")),p.items.push({type:"list_item",raw:n,task:!!i,checked:r,loose:!1,text:d}),p.raw+=n,e=e.slice(n.length)}p.items[p.items.length-1].raw=n.trimRight(),p.items[p.items.length-1].text=d.trimRight(),p.raw=p.raw.trimRight();var m=p.items.length;for(a=0;a<m;a++)this.lexer.state.top=!1,p.items[a].tokens=this.lexer.blockTokens(p.items[a].text,[]),p.items[a].tokens.some((function(e){return"space"===e.type}))&&(p.loose=!0,p.items[a].loose=!0);return p}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t){var n={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):z(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:j(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,r,o,a,s=n.align.length;for(i=0;i<s;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(s=n.rows.length,i=0;i<s;i++)n.rows[i]=j(n.rows[i],n.header.length).map((function(e){return{text:e}}));for(s=n.header.length,r=0;r<s;r++)n.header[r].tokens=[],this.lexer.inlineTokens(n.header[r].text,n.header[r].tokens);for(s=n.rows.length,r=0;r<s;r++)for(a=n.rows[r],o=0;o<a.length;o++)a[o].tokens=[],this.lexer.inlineTokens(a[o].text,a[o].tokens);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t){var n={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},t.text=function(e){var t=this.rules.block.text.exec(e);if(t){var n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:z(t[1])}},t.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):z(t[0]):t[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=H(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=W(t[2],"()");if(r>-1){var o=(0===t[0].indexOf("!")?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,o).trim(),t[3]=""}}var a=t[2],s="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);l&&(a=l[1],s=l[3])}else s=t[3]?t[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(a=this.options.pedantic&&!/>$/.test(n)?a.slice(1):a.slice(1,-1)),y(t,{href:a?a.replace(this.rules.inline._escapes,"$1"):a,title:s?s.replace(this.rules.inline._escapes,"$1"):s},t[0],this.lexer)}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=t[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return y(n,i,n[0],this.lexer)}},t.emStrong=function(e,t,n){void 0===n&&(n="");var i=this.rules.inline.emStrong.lDelim.exec(e);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=i[1]||i[2]||"";if(!r||r&&(""===n||this.rules.inline.punctuation.exec(n))){var o,a,s=i[0].length-1,l=s,u=0,c="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,t=t.slice(-1*e.length+s);null!=(i=c.exec(t));)if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(a=o.length,i[3]||i[4])l+=a;else if(!((i[5]||i[6])&&s%3)||(s+a)%3){if(!((l-=a)>0)){if(a=Math.min(a,a+l+u),Math.min(s,a)%2){var d=e.slice(1,s+i.index+a);return{type:"em",raw:e.slice(0,s+i.index+a+1),text:d,tokens:this.lexer.inlineTokens(d,[])}}var h=e.slice(2,s+i.index+a-1);return{type:"strong",raw:e.slice(0,s+i.index+a+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}else u+=a}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=z(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}},t.autolink=function(e,t){var n,i,r=this.rules.inline.autolink.exec(e);if(r)return i="@"===r[2]?"mailto:"+(n=z(this.options.mangle?t(r[1]):r[1])):n=z(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var i,r;if("@"===n[2])r="mailto:"+(i=z(this.options.mangle?t(n[0]):n[0]));else{var o;do{o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(o!==n[0]);i=z(n[0]),r="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}},t.inlineText=function(e,t){var n,i=this.rules.inline.text.exec(e);if(i)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):z(i[0]):i[0]:z(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:n}},e}(),V=F.noopTest,K=F.edit,q=F.merge,J={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:V,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};J.def=K(J.def).replace("label",J._label).replace("title",J._title).getRegex(),J.bullet=/(?:[*+-]|\d{1,9}[.)])/,J.listItemStart=K(/^( *)(bull) */).replace("bull",J.bullet).getRegex(),J.list=K(J.list).replace(/bull/g,J.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+J.def.source+")").getRegex(),J._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",J._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,J.html=K(J.html,"i").replace("comment",J._comment).replace("tag",J._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),J.paragraph=K(J._paragraph).replace("hr",J.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J._tag).getRegex(),J.blockquote=K(J.blockquote).replace("paragraph",J.paragraph).getRegex(),J.normal=q({},J),J.gfm=q({},J.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),J.gfm.table=K(J.gfm.table).replace("hr",J.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",J._tag).getRegex(),J.pedantic=q({},J.normal,{html:K("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",J._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:V,paragraph:K(J.normal._paragraph).replace("hr",J.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",J.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var X={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:V,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:V,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};X.punctuation=K(X.punctuation).replace(/punctuation/g,X._punctuation).getRegex(),X.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,X.escapedEmSt=/\\\*|\\_/g,X._comment=K(J._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),X.emStrong.lDelim=K(X.emStrong.lDelim).replace(/punct/g,X._punctuation).getRegex(),X.emStrong.rDelimAst=K(X.emStrong.rDelimAst,"g").replace(/punct/g,X._punctuation).getRegex(),X.emStrong.rDelimUnd=K(X.emStrong.rDelimUnd,"g").replace(/punct/g,X._punctuation).getRegex(),X._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,X._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,X._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,X.autolink=K(X.autolink).replace("scheme",X._scheme).replace("email",X._email).getRegex(),X._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,X.tag=K(X.tag).replace("comment",X._comment).replace("attribute",X._attribute).getRegex(),X._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,X._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,X._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,X.link=K(X.link).replace("label",X._label).replace("href",X._href).replace("title",X._title).getRegex(),X.reflink=K(X.reflink).replace("label",X._label).getRegex(),X.reflinkSearch=K(X.reflinkSearch,"g").replace("reflink",X.reflink).replace("nolink",X.nolink).getRegex(),X.normal=q({},X),X.pedantic=q({},X.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:K(/^!?\[(label)\]\((.*?)\)/).replace("label",X._label).getRegex(),reflink:K(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",X._label).getRegex()}),X.gfm=q({},X.normal,{escape:K(X.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),X.gfm.url=K(X.gfm.url,"i").replace("email",X.gfm._extended_email).getRegex(),X.breaks=q({},X.gfm,{br:K(X.br).replace("{2,}","*").getRegex(),text:K(X.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var G={block:J,inline:X},Z=U,$=k.exports.defaults,Y=G.block,Q=G.inline,ee=F.repeatString,te=function(){var e=function(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||$,this.options.tokenizer=this.options.tokenizer||new Z,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var t={block:Y.normal,inline:Q.normal};this.options.pedantic?(t.block=Y.pedantic,t.inline=Q.pedantic):this.options.gfm&&(t.block=Y.gfm,this.options.breaks?t.inline=Q.breaks:t.inline=Q.gfm),this.tokenizer.rules=t};e.lex=function(t,n){return new e(n).lex(t)},e.lexInline=function(t,n){return new e(n).inlineTokens(t)};var n=e.prototype;return n.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},n.blockTokens=function(e,t){var n,i,r,o,a=this;for(void 0===t&&(t=[]),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(i){return!!(n=i.call({lexer:a},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),n.type&&t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),!(i=t[t.length-1])||"paragraph"!==i.type&&"text"!==i.type?t.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),!(i=t[t.length-1])||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else if(r=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,n=e.slice(1),i=void 0;a.options.extensions.startBlock.forEach((function(e){"number"==typeof(i=e.call({lexer:this},n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}(),this.state.top&&(n=this.tokenizer.paragraph(r)))i=t[t.length-1],o&&"paragraph"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),o=r.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);else if(e){var s="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(s);break}throw new Error(s)}return this.state.top=!0,t},n.inline=function(e,t){this.inlineQueue.push({src:e,tokens:t})},n.inlineTokens=function(e,t){var n,i,r,o=this;void 0===t&&(t=[]);var a,s,l,u=e;if(this.tokens.links){var c=Object.keys(this.tokens.links);if(c.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(u));)c.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,a.index)+"["+ee("a",a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(u));)u=u.slice(0,a.index)+"["+ee("a",a[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.escapedEmSt.exec(u));)u=u.slice(0,a.index)+"++"+u.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(s||(l=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(i){return!!(n=i.call({lexer:o},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,u,l))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,w))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,w))){if(r=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,n=e.slice(1),i=void 0;o.options.extensions.startInline.forEach((function(e){"number"==typeof(i=e.call({lexer:this},n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(r=e.substring(0,t+1))}(),n=this.tokenizer.inlineText(r,_))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(l=n.raw.slice(-1)),s=!0,(i=t[t.length-1])&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(e){var d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}throw new Error(d)}}else e=e.substring(n.raw.length),t.push(n);return t},t(e,null,[{key:"rules",get:function(){return{block:Y,inline:Q}}}]),e}(),ne=k.exports.defaults,ie=F.cleanUrl,re=F.escape,oe=function(){var e=function(e){this.options=e||ne},t=e.prototype;return t.code=function(e,t,n){var i=(t||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,i);null!=r&&r!==e&&(n=!0,e=r)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+re(i,!0)+'">'+(n?e:re(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:re(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=ie(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+re(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=ie(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ae=function(){var e=function(){},t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),se=function(){var e=function(){this.seen={}},t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do{n=e+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),le=oe,ue=ae,ce=se,de=k.exports.defaults,he=F.unescape,fe=function(){var e=function(e){this.options=e||de,this.options.renderer=this.options.renderer||new le,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ue,this.slugger=new ce};e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,i,r,o,a,s,l,u,c,d,h,f,p,g,v,m,y,b,_,w="",k=e.length;for(n=0;n<k;n++)if(d=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[d.type])||!1===(_=this.options.extensions.renderers[d.type].call({parser:this},d))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(d.type))switch(d.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(d.tokens),d.depth,he(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(u="",l="",o=d.header.length,i=0;i<o;i++)l+=this.renderer.tablecell(this.parseInline(d.header[i].tokens),{header:!0,align:d.align[i]});for(u+=this.renderer.tablerow(l),c="",o=d.rows.length,i=0;i<o;i++){for(l="",a=(s=d.rows[i]).length,r=0;r<a;r++)l+=this.renderer.tablecell(this.parseInline(s[r].tokens),{header:!1,align:d.align[r]});c+=this.renderer.tablerow(l)}w+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(d.tokens),w+=this.renderer.blockquote(c);continue;case"list":for(h=d.ordered,f=d.start,p=d.loose,o=d.items.length,c="",i=0;i<o;i++)m=(v=d.items[i]).checked,y=v.task,g="",v.task&&(b=this.renderer.checkbox(m),p?v.tokens.length>0&&"paragraph"===v.tokens[0].type?(v.tokens[0].text=b+" "+v.tokens[0].text,v.tokens[0].tokens&&v.tokens[0].tokens.length>0&&"text"===v.tokens[0].tokens[0].type&&(v.tokens[0].tokens[0].text=b+" "+v.tokens[0].tokens[0].text)):v.tokens.unshift({type:"text",text:b}):g+=b),g+=this.parse(v.tokens,p),c+=this.renderer.listitem(g,y,m);w+=this.renderer.list(c,h,f);continue;case"html":w+=this.renderer.html(d.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(c=d.tokens?this.parseInline(d.tokens):d.text;n+1<k&&"text"===e[n+1].type;)c+="\n"+((d=e[++n]).tokens?this.parseInline(d.tokens):d.text);w+=t?this.renderer.paragraph(c):c;continue;default:var C='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else w+=_||"";return w},t.parseInline=function(e,t){t=t||this.renderer;var n,i,r,o="",a=e.length;for(n=0;n<a;n++)if(i=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(r=this.options.extensions.renderers[i.type].call({parser:this},i))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))switch(i.type){case"escape":case"text":o+=t.text(i.text);break;case"html":o+=t.html(i.text);break;case"link":o+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case"image":o+=t.image(i.href,i.title,i.text);break;case"strong":o+=t.strong(this.parseInline(i.tokens,t));break;case"em":o+=t.em(this.parseInline(i.tokens,t));break;case"codespan":o+=t.codespan(i.text);break;case"br":o+=t.br();break;case"del":o+=t.del(this.parseInline(i.tokens,t));break;default:var s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(s);throw new Error(s)}else o+=r||"";return o},e}(),pe=te,ge=fe,ve=U,me=oe,ye=ae,be=se,_e=F.merge,we=F.checkSanitizeDeprecation,ke=F.escape,Ce=k.exports.getDefaults,xe=k.exports.changeDefaults,Se=k.exports.defaults;function Ee(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=_e({},Ee.defaults,t||{}),we(t),n){var i,r=t.highlight;try{i=pe.lex(e,t)}catch(e){return n(e)}var o=function(e){var o;if(!e)try{t.walkTokens&&Ee.walkTokens(i,t.walkTokens),o=ge.parse(i,t)}catch(t){e=t}return t.highlight=r,e?n(e):n(null,o)};if(!r||r.length<3)return o();if(delete t.highlight,!i.length)return o();var a=0;return Ee.walkTokens(i,(function(e){"code"===e.type&&(a++,setTimeout((function(){r(e.text,e.lang,(function(t,n){if(t)return o(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--a&&o()}))}),0))})),void(0===a&&o())}try{var s=pe.lex(e,t);return t.walkTokens&&Ee.walkTokens(s,t.walkTokens),ge.parse(s,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ke(e.message+"",!0)+"</pre>";throw e}}return Ee.options=Ee.setOptions=function(e){return _e(Ee.defaults,e),xe(Ee.defaults),Ee},Ee.getDefaults=Ce,Ee.defaults=Se,Ee.use=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,o=_e.apply(void 0,[{}].concat(n)),a=Ee.defaults.extensions||{renderers:{},childTokens:{}};n.forEach((function(t){if(t.extensions&&(r=!0,t.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=a.renderers?a.renderers[e.name]:null;a.renderers[e.name]=t?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=e.renderer.apply(this,i);return!1===o&&(o=t.apply(this,i)),o}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");a[e.level]?a[e.level].unshift(e.tokenizer):a[e.level]=[e.tokenizer],e.start&&("block"===e.level?a.startBlock?a.startBlock.push(e.start):a.startBlock=[e.start]:"inline"===e.level&&(a.startInline?a.startInline.push(e.start):a.startInline=[e.start]))}e.childTokens&&(a.childTokens[e.name]=e.childTokens)}))),t.renderer&&function(){var e=Ee.defaults.renderer||new me,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=t.renderer[n].apply(e,o);return!1===s&&(s=i.apply(e,o)),s}};for(var i in t.renderer)n(i);o.renderer=e}(),t.tokenizer&&function(){var e=Ee.defaults.tokenizer||new ve,n=function(n){var i=e[n];e[n]=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var s=t.tokenizer[n].apply(e,o);return!1===s&&(s=i.apply(e,o)),s}};for(var i in t.tokenizer)n(i);o.tokenizer=e}(),t.walkTokens){var n=Ee.defaults.walkTokens;o.walkTokens=function(i){t.walkTokens.call(e,i),n&&n(i)}}r&&(o.extensions=a),Ee.setOptions(o)}))},Ee.walkTokens=function(e,t){for(var n,i=function(){var e=n.value;switch(t(e),e.type){case"table":for(var i,o=r(e.header);!(i=o()).done;){var a=i.value;Ee.walkTokens(a.tokens,t)}for(var s,l=r(e.rows);!(s=l()).done;)for(var u,c=s.value,d=r(c);!(u=d()).done;){var h=u.value;Ee.walkTokens(h.tokens,t)}break;case"list":Ee.walkTokens(e.items,t);break;default:Ee.defaults.extensions&&Ee.defaults.extensions.childTokens&&Ee.defaults.extensions.childTokens[e.type]?Ee.defaults.extensions.childTokens[e.type].forEach((function(n){Ee.walkTokens(e[n],t)})):e.tokens&&Ee.walkTokens(e.tokens,t)}},o=r(e);!(n=o()).done;)i()},Ee.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=_e({},Ee.defaults,t||{}),we(t);try{var n=pe.lexInline(e,t);return t.walkTokens&&Ee.walkTokens(n,t.walkTokens),ge.parseInline(n,t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+ke(e.message+"",!0)+"</pre>";throw e}},Ee.Parser=ge,Ee.parser=ge.parse,Ee.Renderer=me,Ee.TextRenderer=ye,Ee.Lexer=pe,Ee.lexer=pe.lex,Ee.Tokenizer=ve,Ee.Slugger=be,Ee.parse=Ee,Ee}();var Ov,Fv=o("gj6DA"),Bv=(Op=o("knZKL"),zp=o("3gwjc"),mf=o("L9zbH"),nh=o("gTzCU"),ah=o("iPPVB"),null===(Ov=window.trustedTypes)||void 0===Ov?void 0:Ov.createPolicy("insane",{createHTML:function(e,t){return Nv(e,t)}}));function Hv(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,Lv.createElement)(i),a=function(t){var n;try{n=(0,Fv.parse)(decodeURIComponent(t))}catch(e){}return n?(n=(0,zp.cloneAndChange)(n,(function(t){return e.uris&&e.uris[t]?ah.URI.revive(e.uris[t]):void 0})),encodeURIComponent(JSON.stringify(n))):t},s=function(t,n){var i=e.uris&&e.uris[t];if(!i)return t;var r=ah.URI.revive(i);return n?t.startsWith(Op.Schemas.data+":")?t:Op.FileAccess.asBrowserUri(r).toString(!0):ah.URI.parse(t).toString()===r.toString()?t:(r.query&&(r=r.with({query:a(r.query)})),r.toString())},l=new Promise((function(e){return n=e})),u=new Pv.Renderer;if(u.image=function(e,t,n){var r=[],o=[];if(e){var a;e=(a=rd(e)).href,r=a.dimensions,e=s(e,!0);try{var l=ah.URI.parse(e);i.baseUrl&&l.scheme===Op.Schemas.file&&(e=(0,mf.resolvePath)(i.baseUrl,e).toString())}catch(e){}o.push('src="'.concat(e,'"'))}return n&&o.push('alt="'.concat(n,'"')),t&&o.push('title="'.concat(t,'"')),r.length&&(o=o.concat(r)),"<img "+o.join(" ")+">"},u.link=function(t,n,r){(t===r&&(r=id(r)),t=s(t,!1),i.baseUrl)&&(/^\w[\w\d+.-]*:/.test(t)||(t=(0,mf.resolvePath)(i.baseUrl,t).toString()));return n=id(n),!(t=id(t))||t.match(/^data:|javascript:/i)||t.match(/^command:/i)&&!e.isTrusted||t.match(/^command:(\/\/\/)?_workbench\.downloadResource/i)?r:(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),'<a href="#" data-href="'.concat(t,'" title="').concat(n||t,'">').concat(r,"</a>"))},u.paragraph=function(t){e.supportThemeIcons&&(t=(0,Kf.renderLabelWithIcons)(t).map((function(e){return"string"==typeof e?e:e.outerHTML})).join(""));return"<p>".concat(t,"</p>")},i.codeBlockRenderer&&(u.code=function(e,t){var n=i.codeBlockRenderer(t,e),r=Gp.defaultGenerator.nextId(),a=Promise.all([n,l]).then((function(e){var t=o.querySelector('div[data-code="'.concat(r,'"]'));t&&Bh.reset(t,e[0])})).catch((function(e){}));return i.asyncRenderCallback&&a.then(i.asyncRenderCallback),'<div class="code" data-code="'.concat(r,'">').concat((0,nh.escape)(e),"</div>")}),i.actionHandler){var c=i.actionHandler.disposables.add(new(0,Tv.DomEmitter)(o,"click")),d=i.actionHandler.disposables.add(new(0,Tv.DomEmitter)(o,"auxclick"));i.actionHandler.disposables.add($h.Event.any(c.event,d.event)((function(e){var t=new(0,Mv.StandardMouseEvent)(e);if(t.leftButton||t.middleButton){var n=t.target;if("A"===n.tagName||(n=n.parentElement)&&"A"===n.tagName)try{var r=n.dataset.href;r&&i.actionHandler.callback(r,t)}catch(e){(0,Yc.onUnexpectedError)(e)}finally{t.preventDefault()}}})))}r.sanitizer=function(t){return(e.isTrusted?t.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?t:""},r.sanitize=!0,r.silent=!0,r.renderer=u;var h=null!==(t=e.value)&&void 0!==t?t:"";h.length>1e5&&(h="".concat(h.substr(0,1e5),"")),e.supportThemeIcons&&(h=(0,Qc.markdownEscapeEscapedIcons)(h));var f=Pv.parse(h,r);o.innerHTML=jv(e,f),n();var p=!0,g=!1,v=void 0;if(i.asyncRenderCallback)try{for(var m,y=function(e,t){var n=t.value,r=Bh.addDisposableListener(n,"load",(function(){r.dispose(),i.asyncRenderCallback()}))},b=o.getElementsByTagName("img")[Symbol.iterator]();!(p=(m=b.next()).done);p=!0)y(b,m)}catch(e){g=!0,v=e}finally{try{p||null==b.return||b.return()}finally{if(g)throw v}}return o}function jv(e,t){var n,i=function(e){var t=[Op.Schemas.http,Op.Schemas.https,Op.Schemas.mailto,Op.Schemas.data,Op.Schemas.file,Op.Schemas.vscodeFileResource,Op.Schemas.vscodeRemote,Op.Schemas.vscodeRemoteResource];e.isTrusted&&t.push(Op.Schemas.command);return{allowedSchemes:t,allowedTags:["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"],allowedAttributes:{a:["href","name","target","data-href"],img:["src","title","alt","width","height"],div:["class","data-code"],span:["class","style"],th:["align"],td:["align"]},filter:function(t){return"span"!==t.tag||!e.isTrusted||(t.attrs.style&&1===Object.keys(t.attrs).length?!!t.attrs.style.match(/^(color\:#[0-9a-fA-F]+;)?(background-color\:#[0-9a-fA-F]+;)?$/):!!t.attrs.class&&!!t.attrs.class.match(/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/))}}}(e);return null!==(n=null==Bv?void 0:Bv.createHTML(t,i))&&void 0!==n?n:Nv(t,i)}Lp=o("j1CnT"),kp=o("8Eens"),Yc=o("2NkmB");var zv,Wv=o("PM73f"),Uv=($h=o("neTVg"),vd=o("dXCvL"),lh=o("chpjt"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),Vv=function(e,t){return function(n,i){t(n,i,e)}},Kv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},qv=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._options=t,this._modeService=n,this._openerService=i,this._onDidRenderAsync=new(0,$h.Emitter),this.onDidRenderAsync=this._onDidRenderAsync.event}return(0,c.default)(e,[{key:"dispose",value:function(){this._onDidRenderAsync.dispose()}},{key:"render",value:function(e,t,n){var i=new(0,vd.DisposableStore);return{element:e?Hv(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),n):document.createElement("span"),dispose:function(){return i.dispose()}}}},{key:"_getRenderOptions",value:function(t,i){var r=this;return{baseUrl:this._options.baseUrl,codeBlockRenderer:function(t,i){return Kv(r,void 0,void 0,n(l).mark((function r(){var o,a,s,u,c,d,h,f;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t?c=this._modeService.getModeIdForLanguageName(t):this._options.editor&&(c=null===(o=this._options.editor.getModel())||void 0===o?void 0:o.getLanguageIdentifier().language),c||(c="plaintext"),this._modeService.triggerMode(c),n.next=7,lh.TokenizationRegistry.getPromise(c);case 7:if(n.t1=a=n.sent,n.t0=null!==n.t1,!n.t0){n.next=11;break}n.t0=void 0!==a;case 11:if(!n.t0){n.next=15;break}n.t2=a,n.next=16;break;case 15:n.t2=void 0;case 16:return d=n.t2,(h=document.createElement("span")).innerHTML=null!==(u=null===(s=e._ttpTokenizer)||void 0===s?void 0:s.createHTML(i,d))&&void 0!==u?u:(0,Wv.tokenizeToString)(i,d),f=this._options.codeBlockFontFamily,this._options.editor&&(f=this._options.editor.getOption(42).fontFamily),f&&(h.style.fontFamily=f),n.abrupt("return",h);case 23:case"end":return n.stop()}}),r,this)})))},asyncRenderCallback:function(){return r._onDidRenderAsync.fire()},actionHandler:{callback:function(e){return r._openerService.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:t.isTrusted}).catch(Yc.onUnexpectedError)},disposables:i}}}}]),e}();qv._ttpTokenizer=null===(zv=window.trustedTypes)||void 0===zv?void 0:zv.createPolicy("tokenizeToString",{createHTML:function(e,t){return(0,Wv.tokenizeToString)(e,t)}}),qv=Uv([Vv(1,kp.IModeService),Vv(2,Lp.IOpenerService)],qv);oh=o("2ZBuK"),Lp=o("j1CnT"),kp=o("8Eens"),lh=o("chpjt"),oh=o("2ZBuK"),eh=o("j6sHb"),Yc=o("2NkmB"),qc=o("THDAR"),lh=o("chpjt");function Jv(e,t,n){var i=lh.HoverProviderRegistry.ordered(e).map((function(i){return Promise.resolve(i.provideHover(e,t,n)).then((function(e){return e&&(n=void 0!==(t=e).range,i=void 0!==t.contents&&t.contents&&t.contents.length>0,n&&i)?e:void 0;var t,n,i}),(function(e){(0,Yc.onUnexpectedExternalError)(e)}))}));return Promise.all(i).then(oh.coalesce)}(0,qc.registerModelAndPositionCommand)("_executeHoverProvider",(function(e,t){return Jv(e,t,eh.CancellationToken.None)}));md=o("kBBF2"),mp=o("fnqF9");var Xv=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Gv=function(e,t){return function(n,i){t(n,i,e)}},Zv=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},$v=Bh.$,Yv=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.owner=t,this.range=n,this.contents=i}return(0,c.default)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),Qv=function(){"use strict";function e(t,n,i,r,o){(0,u.default)(this,e),this._editor=t,this._hover=n,this._modeService=i,this._openerService=r,this._configurationService=o}return(0,c.default)(e,[{key:"createLoadingMessage",value:function(e){return new Yv(this,e.range,[(new ed).appendText(Jc.localize("modesContentHover.loading","Loading..."))])}},{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var n=this._editor.getModel(),i=e.range.startLineNumber,r=n.getLineMaxColumn(i),o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value,h=d.range.startLineNumber===i?d.range.startColumn:1,f=d.range.endLineNumber===i?d.range.endColumn:r,p=d.options.hoverMessage;if(p&&!td(p)){var g=new(0,yd.Range)(e.range.startLineNumber,h,e.range.startLineNumber,f);o.push(new Yv(this,g,(0,oh.asArray)(p)))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}var v=this._editor.getModel().getLineLength(i),m=this._configurationService.getValue("editor.maxTokenizationLineLength");return"number"==typeof m&&v>=m&&o.push(new Yv(this,new(0,yd.Range)(i,1,i,v+1),[{value:Jc.localize("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}])),o}},{key:"computeAsync",value:function(e,t,i){return Zv(this,void 0,void 0,n(l).mark((function t(){var r,o,a,s,u,c,d,h,f,p;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&1===e.type){t.next=2;break}return t.abrupt("return",Promise.resolve([]));case 2:if(r=this._editor.getModel(),lh.HoverProviderRegistry.has(r)){t.next=5;break}return t.abrupt("return",Promise.resolve([]));case 5:return t.next=7,Jv(r,new(0,md.Position)(e.range.startLineNumber,e.range.startColumn),i);case 7:o=t.sent,a=[],s=!0,u=!1,c=void 0,t.prev=10,d=o[Symbol.iterator]();case 12:if(s=(h=d.next()).done){t.next=21;break}if(!td((f=h.value).contents)){t.next=16;break}return t.abrupt("continue",18);case 16:p=f.range?yd.Range.lift(f.range):e.range,a.push(new Yv(this,p,f.contents));case 18:s=!0,t.next=12;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(10),u=!0,c=t.t0;case 27:t.prev=27,t.prev=28,s||null==d.return||d.return();case 30:if(t.prev=30,!u){t.next=33;break}throw c;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.abrupt("return",a);case 36:case"end":return t.stop()}}),t,this,[[10,23,27,35],[28,,30,34]])})))}},{key:"renderHoverParts",value:function(e,t,n){var i=this,r=new(0,vd.DisposableStore),o=!0,a=!1,s=void 0,l=!0,u=!1,c=void 0;try{for(var d,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;try{for(var p,g=f.contents[Symbol.iterator]();!(o=(p=g.next()).done);o=!0){var v=p.value;if(!td(v)){var m=$v("div.hover-row.markdown-hover"),y=Bh.append(m,$v("div.hover-contents")),b=r.add(new(0,Iv.MarkdownRenderer)({editor:this._editor},this._modeService,this._openerService));r.add(b.onDidRenderAsync((function(){y.className="hover-contents code-hover-contents",i._hover.onContentsChanged()})));var _=r.add(b.render(v));y.appendChild(_.element),t.appendChild(m)}}}catch(e){a=!0,s=e}finally{try{o||null==g.return||g.return()}finally{if(a)throw s}}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return r}}]),e}();Qv=Xv([Gv(2,kp.IModeService),Gv(3,Lp.IOpenerService),Gv(4,mp.IConfigurationService)],Qv);var em={};e(em,"InlineCompletionsHoverParticipant",(function(){return Nw}),(function(e){return Nw=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),Jc=o("faA3E"),u=o("4JAgF"),c=o("9HoHC");var tm=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.priority=t,this.range=n,this.type=1}return(0,c.default)(e,[{key:"equals",value:function(e){return 1===e.type&&this.range.equalsRange(e.range)}},{key:"canAdoptVisibleHover",value:function(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}]),e}(),nm=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.priority=t,this.owner=n,this.range=i,this.type=2}return(0,c.default)(e,[{key:"equals",value:function(e){return 2===e.type&&this.owner===e.owner}},{key:"canAdoptVisibleHover",value:function(e,t){return 2===e.type&&this.owner===e.owner}}]),e}(),im=(yd=o("5MJfC"),vd=o("dXCvL"),{});e(im,"GhostTextController",(function(){return Cw}),(function(e){return Cw=e})),e(im,"commitInlineSuggestionAction",(function(){return Dw}),(function(e){return Dw=e})),e(im,"ShowNextInlineSuggestionAction",(function(){return Aw}),(function(e){return Aw=e})),e(im,"ShowPreviousInlineSuggestionAction",(function(){return Iw}),(function(e){return Iw=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),vd=o("dXCvL"),qc=o("THDAR"),Xc=o("5cDyY");var rm={};e(rm,"GhostTextWidget",(function(){return vm}),(function(e){return vm=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),vd=o("dXCvL"),yd=o("5MJfC"),jd=o("1NzEb"),nh=o("gTzCU");var om,am=o("6cSF6"),sm=o("3HfO4"),lm=o("bf5t9"),um=o("cEBTL"),cm=o("ezzg9"),dm=(md=o("kBBF2"),Cd=o("4ET02"),wd=o("a6Ojp"),pp=o("8ta7j"),o("4gyIT")),hm=o("ik60t"),fm=($c=o("efZ3W"),Oh=o("hm5an"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),pm=function(e,t){return function(n,i){t(n,i,e)}},gm=null===(om=window.trustedTypes)||void 0===om?void 0:om.createPolicy("editorGhostText",{createHTML:function(e){return e}}),vm=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).editor=e,o.model=i,o.instantiationService=r,o.disposed=!1,o.partsWidget=o._register(o.instantiationService.createInstance(mm,o.editor)),o.additionalLinesWidget=o._register(new bm(o.editor)),o.viewMoreContentWidget=void 0,o._register(o.editor.onDidChangeConfiguration((function(e){(e.hasChanged(28)||e.hasChanged(105)||e.hasChanged(88)||e.hasChanged(82)||e.hasChanged(43)||e.hasChanged(42)||e.hasChanged(58))&&o.update()}))),o._register((0,vd.toDisposable)((function(){var e;o.disposed=!0,o.update(),null===(e=o.viewMoreContentWidget)||void 0===e||e.dispose(),o.viewMoreContentWidget=void 0}))),o._register(i.onDidChange((function(){o.update()}))),o.update(),o}return(0,c.default)(n,[{key:"shouldShowHoverAtViewZone",value:function(e){return this.additionalLinesWidget.viewZoneId===e}},{key:"update",value:function(){var e,t=function(e,t){if(r.length>0){var n=r[r.length-1];t&&n.decorations.push(new(0,hm.LineDecoration)(n.content.length+1,n.content.length+1+e[0].length,t,0)),n.content+=e[0],e=e.slice(1)}var i=!0,o=!1,a=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;r.push({content:u,decorations:t?[new(0,hm.LineDecoration)(1,u.length+1,t,0)]:[]})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}},n=this.model.ghostText;if(!this.editor.hasModel()||!n||this.disposed)return this.partsWidget.clear(),void this.additionalLinesWidget.clear();var i=new Array,r=new Array,o=this.editor.getModel().getLineContent(n.lineNumber);this.editor.getModel().getLineTokens(n.lineNumber);var a=void 0,s=0,l=!0,u=!1,c=void 0;try{for(var d,h=n.parts[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value,p=f.lines;void 0===a?(i.push({column:f.column,text:p[0],preview:f.preview}),p=p.slice(1)):t([o.substring(s,f.column-1)],void 0),p.length>0&&(t(p,"ghost-text"),void 0===a&&f.column<=o.length&&(a=f.column)),s=f.column-1}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}void 0!==a&&t([o.substring(s)],void 0),this.partsWidget.setParts(n.lineNumber,i,void 0!==a?{column:a,length:o.length+1-a}:void 0),this.additionalLinesWidget.updateLines(n.lineNumber,r,n.additionalReservedLineCount),n.parts.some((function(e){return e.lines.length<0}))?this.viewMoreContentWidget=this.renderViewMoreLines(new(0,md.Position)(n.lineNumber,this.editor.getModel().getLineMaxColumn(n.lineNumber)),"",0):(null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0)}},{key:"renderViewMoreLines",value:function(e,t,n){var i=this,r=this.editor.getOption(42),o=document.createElement("div");o.className="suggest-preview-additional-widget",um.Configuration.applyFontInfoSlow(o,r);var a=document.createElement("span");a.className="content-spacer",a.append(t),o.append(a);var s=document.createElement("span");s.className="content-newline suggest-preview-text",s.append("  "),o.append(s);var l=new(0,vd.DisposableStore),u=document.createElement("div");return u.className="button suggest-preview-text",u.append("+".concat(n," lines")),l.add(Bh.addStandardDisposableListener(u,"mousedown",(function(e){var t;null===(t=i.model)||void 0===t||t.setExpanded(!0),e.preventDefault(),i.editor.focus()}))),o.append(u),new wm(this.editor,e,o,l)}}]),n}(vd.Disposable);vm=fm([pm(2,Oh.IInstantiationService)],vm);var mm=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.editor=t,this.codeEditorService=n,this.themeService=i,this.contextKeyService=r,this.decorationIds=[],this.disposableStore=new(0,vd.DisposableStore)}return(0,c.default)(e,[{key:"dispose",value:function(){this.clear(),this.disposableStore.dispose()}},{key:"clear",value:function(){this.editor.deltaDecorations(this.decorationIds,[]),this.disposableStore.clear()}},{key:"setParts",value:function(e,t,n){var i=this;this.disposableStore.clear();var r=this.themeService.getColorTheme(),o=r.getColor(wd.ghostTextForeground),a=void 0,s=void 0;o&&(a=String(o.rgba.a),s=pp.Color.Format.CSS.format(ym(o)));var l=r.getColor(wd.ghostTextBorder),u=void 0;l&&(u="2px dashed ".concat(l));var c=this.editor.getModel();if(c){var d=c.getOptions().tabSize,h=c.getLineContent(e)||"",f=0,p="",g=new Array;n&&g.push({range:yd.Range.fromPositions(new(0,md.Position)(e,n.column),new(0,md.Position)(e,n.column+n.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});var v=this.contextKeyService.getContextKeyValue("config.editor.useInjectedText"),m=void 0===v||!!v;this.decorationIds=this.editor.deltaDecorations(this.decorationIds,t.map((function(t){p+=h.substring(f,t.column-1),f=t.column-1;var n=m?t.text:i.renderSingleLineText(t.text,p,d,!1),r=i.disposableStore.add(function(e,t,n,i){var r=n+_m++;return e.registerDecorationType(t,r,i),{dispose:function(){e.removeDecorationType(r)},resolve:function(){return e.resolveDecorationOptions(r,!0)}}}(i.codeEditorService,"ghost-text","0-ghost-text-",{after:{contentText:n,opacity:a,color:s,border:u,fontWeight:t.preview?"bold":"normal"}}));return{range:yd.Range.fromPositions(new(0,md.Position)(e,t.column)),options:m?{description:"ghost-text",after:{content:n,inlineClassName:t.preview?"ghost-text-decoration-preview":"ghost-text-decoration"}}:Object.assign({},r.resolve())}})).concat(g))}}},{key:"renderSingleLineText",value:function(e,t,n,i){var r=t+e,o=dm.CursorColumns.visibleColumnsByColumns(r,n),a="",s=t.length+1,l=!0,u=!1,c=void 0;try{for(var d,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if("\t"===f){var p=o[s+1]-o[s];if(i){a+="";for(var g=1;g<p;g++)a+=""}else for(var v=0;v<p;v++)a+=""}else a+=" "===f?i?"":"":f;s+=1}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}return a}}]),e}();function ym(e){var t=e.rgba,n=t.r,i=t.b,r=t.g;return new(0,pp.Color)(new(0,pp.RGBA)(n,r,i,255))}mm=fm([pm(1,jd.ICodeEditorService),pm(2,Cd.IThemeService),pm(3,$c.IContextKeyService)],mm);var bm=function(){"use strict";function e(t){(0,u.default)(this,e),this.editor=t,this._viewZoneId=void 0}return(0,c.default)(e,[{key:"viewZoneId",get:function(){return this._viewZoneId}},{key:"dispose",value:function(){this.clear()}},{key:"clear",value:function(){var e=this;this.editor.changeViewZones((function(t){e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0)}))}},{key:"updateLines",value:function(e,t,n){var i=this,r=this.editor.getModel();if(r){var o=r.getOptions().tabSize;this.editor.changeViewZones((function(r){i._viewZoneId&&(r.removeZone(i._viewZoneId),i._viewZoneId=void 0);var a=Math.max(t.length,n);if(a>0){var s=document.createElement("div");!function(e,t,n,i){var r=i.get(28),o=i.get(105),a="none",s=i.get(82),l=i.get(43),u=i.get(42),c=i.get(58),d=(0,lm.createStringBuilder)(1e4);d.appendASCIIString('<div class="suggest-preview-text">');for(var h=0,f=n.length;h<f;h++){var p=n[h],g=p.content;d.appendASCIIString('<div class="view-line'),d.appendASCIIString('" style="top:'),d.appendASCIIString(String(h*c)),d.appendASCIIString('px;width:1000000px;">');var v=nh.isBasicASCII(g),m=nh.containsRTL(g),y=cm.LineTokens.createEmpty(g);(0,am.renderViewLine)(new(0,am.RenderLineInput)(u.isMonospace&&!r,u.canUseHalfwidthRightwardsArrow,g,!1,v,m,0,y,p.decorations,t,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,o,a,s,l!==sm.EditorFontLigatures.OFF,null),d),d.appendASCIIString("</div>")}d.appendASCIIString("</div>"),um.Configuration.applyFontInfoSlow(e,u);var b=d.build(),_=gm?gm.createHTML(b):b;e.innerHTML=_}(s,o,t,i.editor.getOptions()),i._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:s})}}))}}}]),e}();var _m=0;var wm=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this)).editor=e,a.position=i,a.domNode=r,a.allowEditorOverflow=!1,a.suppressMouseDown=!1,a._register(o),a._register((0,vd.toDisposable)((function(){a.editor.removeContentWidget((0,Hi.default)(a))}))),a.editor.addContentWidget((0,Hi.default)(a)),a}return(0,c.default)(n,[{key:"getId",value:function(){return"editor.widget.viewMoreLinesWidget"}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:this.position,preference:[0]}}}]),n}(vd.Disposable);(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(wd.ghostTextForeground);if(n){var i=String(n.rgba.a),r=pp.Color.Format.CSS.format(ym(n));t.addRule(".monaco-editor .ghost-text-decoration { opacity: ".concat(i,"; color: ").concat(r,"; }")),t.addRule(".monaco-editor .ghost-text-decoration-preview { color: ".concat(n.toString(),"; }")),t.addRule(".monaco-editor .suggest-preview-text .ghost-text { opacity: ".concat(i,"; color: ").concat(r,"; }"))}var o=e.getColor(wd.ghostTextBorder);o&&t.addRule(".monaco-editor .suggest-preview-text .ghost-text { border: 2px dashed ".concat(o,"; }"))}));Jc=o("faA3E"),$c=o("efZ3W"),Oh=o("hm5an");var km={};e(km,"GhostTextModel",(function(){return yw}),(function(e){return yw=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),vd=o("dXCvL");var Cm={};e(Cm,"InlineCompletionsModel",(function(){return Bm}),(function(e){return Bm=e})),e(Cm,"provideInlineCompletions",(function(){return Vm}),(function(e){return Vm=e})),e(Cm,"UpdateOperation",(function(){return jm}),(function(e){return jm=e})),e(Cm,"SynchronizedInlineCompletionsCache",(function(){return zm}),(function(e){return zm=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),gd=o("hJucn"),eh=o("j6sHb"),Yc=o("2NkmB"),$h=o("neTVg"),vd=o("dXCvL"),yd=o("5MJfC"),lh=o("chpjt");var xm=o("7NUhl"),Sm=(vh=o("j9pk1"),qc=o("THDAR"),o("1IvIe")),Em=(u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),$h=o("neTVg"),vd=o("dXCvL"),yd=o("5MJfC"),function(){"use strict";function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(0,u.default)(this,e),this.lineNumber=t,this.parts=n,this.additionalReservedLineCount=i}return(0,c.default)(e,[{key:"renderForScreenReader",value:function(e){if(0===this.parts.length)return"";var t=this.parts[this.parts.length-1];return function(e,t){var n=new Dm(e),i=t.map((function(e){var t=yd.Range.lift(e.range);return{startOffset:n.getOffset(t.getStartPosition()),endOffset:n.getOffset(t.getEndPosition()),text:e.text}}));i.sort((function(e,t){return t.startOffset-e.startOffset}));var r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;e=e.substring(0,u.startOffset)+u.text+e.substring(u.endOffset)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return e}(e.substr(0,t.column-1),this.parts.map((function(e){return{range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")}}))).substring(this.parts[0].column-1)}}]),e}()),Dm=function(){"use strict";function e(t){(0,u.default)(this,e),this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(var n=0;n<t.length;n++)"\n"===t.charAt(n)&&this.lineStartOffsetByLineIdx.push(n+1)}return(0,c.default)(e,[{key:"getOffset",value:function(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}]),e}();var Am=function e(t,n,i){"use strict";(0,u.default)(this,e),this.column=t,this.lines=n,this.preview=i},Im=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).editor=e,i._expanded=void 0,i.onDidChangeEmitter=new(0,$h.Emitter),i.onDidChange=i.onDidChangeEmitter.event,i._register(e.onDidChangeConfiguration((function(e){e.hasChanged(106)&&void 0===i._expanded&&i.onDidChangeEmitter.fire()}))),i}return(0,c.default)(n,[{key:"setExpanded",value:function(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}]),n}(vd.Disposable),Rm=(nh=o("gTzCU"),o("bhuw3"));function Tm(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.range.startLineNumber===e.range.endLineNumber){var o=e.text.length,a=o-r,s=t.getValueInRange(e.range),l=Mm(s,e.text),u=e.range.startLineNumber,c=new Array;if("prefix"===n){var d=l.filter((function(e){return 0===e.originalLength}));if(d.length>1||1===d.length&&d[0].originalStart!==s.length)return}var h=!0,f=!1,p=void 0;try{for(var g,v=l[Symbol.iterator]();!(h=(g=v.next()).done);h=!0){var m=g.value,y=e.range.startColumn+m.originalStart+m.originalLength;if("subwordSmart"===n&&i&&i.lineNumber===e.range.startLineNumber&&y<i.column)return;if(m.originalLength>0){var b=s.substr(m.originalStart,m.originalLength),_=t.getLineFirstNonWhitespaceColumn(u);if(!/^(\t| )*$/.test(b)||!(0===_||y<=_))return}if(0!==m.modifiedLength){var w=m.modifiedStart+m.modifiedLength,k=Math.max(m.modifiedStart,Math.min(w,a)),C=e.text.substring(m.modifiedStart,k),x=e.text.substring(k,Math.max(m.modifiedStart,w));if(C.length>0){var S=nh.splitLines(C);c.push(new Am(y,S,!1))}if(x.length>0){var E=nh.splitLines(x);c.push(new Am(y,E,!0))}}}}catch(e){f=!0,p=e}finally{try{h||null==v.return||v.return()}finally{if(f)throw p}}return new Em(u,c,0)}}var Lm=void 0;function Mm(e,t){if((null==Lm?void 0:Lm.originalValue)===e&&(null==Lm?void 0:Lm.newValue)===t)return null==Lm?void 0:Lm.changes;var n=function(e,t){var n=function(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e.charCodeAt(n);r>t&&(t=r)}return t},i=function(e){if(e<0)throw new Error("unexpected");return o+e+1},r=function(e){for(var t=0,n=0,r=new Int32Array(e.length),o=0,a=e.length;o<a;o++){var s=100*n+t;"("===e[o]?(r[o]=i(2*s),t++):")"===e[o]?(r[o]=i(2*s+1),1===t&&n++,t=Math.max(t-1,0)):r[o]=e.charCodeAt(o)}return r},o=Math.max(n(e),n(t)),a=r(e),s=r(t);return new(0,Rm.LcsDiff)({getElements:function(){return a}},{getElements:function(){return s}}).ComputeDiff(!1).changes}(e,t);return Lm={originalValue:e,newValue:t,changes:n},n}var Nm="editor.action.inlineSuggest.commit",Pm=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Om=function(e,t){return function(n,i){t(n,i,e)}},Fm=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Bm=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r){var o;return(0,u.default)(this,i),(o=t.call(this)).editor=e,o.cache=n,o.commandService=r,o.onDidChangeEmitter=new(0,$h.Emitter),o.onDidChange=o.onDidChangeEmitter.event,o.completionSession=o._register(new(0,vd.MutableDisposable)),o.active=!1,o.disposed=!1,o._register(r.onDidExecuteCommand((function(t){new Set([qc.UndoCommand.id,qc.RedoCommand.id,Sm.CoreEditingCommands.Tab.id,Sm.CoreEditingCommands.DeleteLeft.id,Sm.CoreEditingCommands.DeleteRight.id,Nm,"acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&o.handleUserInput()}))),o._register(o.editor.onDidType((function(e){o.handleUserInput()}))),o._register(o.editor.onDidChangeCursorPosition((function(e){o.session&&!o.session.isValid&&o.hide()}))),o._register((0,vd.toDisposable)((function(){o.disposed=!0}))),o}return(0,c.default)(i,[{key:"handleUserInput",value:function(){var e=this;this.session&&!this.session.isValid&&this.hide(),setTimeout((function(){e.disposed||e.startSessionIfTriggered()}),0)}},{key:"session",get:function(){return this.completionSession.value}},{key:"ghostText",get:function(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}},{key:"minReservedLineCount",get:function(){return this.session?this.session.minReservedLineCount:0}},{key:"setExpanded",value:function(e){var t;null===(t=this.session)||void 0===t||t.setExpanded(e)}},{key:"setActive",value:function(e){var t;this.active=e,e&&(null===(t=this.session)||void 0===t||t.scheduleAutomaticUpdate())}},{key:"startSessionIfTriggered",value:function(){this.editor.getOption(54).enabled&&(this.session&&this.session.isValid||this.trigger(lh.InlineCompletionTriggerKind.Automatic))}},{key:"trigger",value:function(e){var t=this;this.completionSession.value?e===lh.InlineCompletionTriggerKind.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new Hm(this.editor,this.editor.getPosition(),(function(){return t.active}),this.commandService,this.cache,e),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((function(){t.onDidChangeEmitter.fire()}))))}},{key:"hide",value:function(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}},{key:"commitCurrentSuggestion",value:function(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}},{key:"showNext",value:function(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}},{key:"showPrevious",value:function(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}},{key:"hasMultipleInlineCompletions",value:function(){var e;return Fm(this,void 0,void 0,n(l).mark((function t(){var i;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.session)||void 0===e?void 0:e.hasMultipleInlineCompletions();case 2:return i=t.sent,t.abrupt("return",void 0!==i&&i);case 4:case"end":return t.stop()}}),t,this)})))}}]),i}(vd.Disposable);Bm=Pm([Om(2,vh.ICommandService)],Bm);var Hm=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a,s){var l;(0,u.default)(this,i),(l=t.call(this,e)).triggerPosition=n,l.shouldUpdate=r,l.commandService=o,l.cache=a,l.initialTriggerKind=s,l.minReservedLineCount=0,l.updateOperation=l._register(new(0,vd.MutableDisposable)),l.updateSoon=l._register(new(0,gd.RunOnceScheduler)((function(){var e=l.initialTriggerKind;return l.initialTriggerKind=lh.InlineCompletionTriggerKind.Automatic,l.update(e)}),50)),l.currentlySelectedCompletionId=void 0;var c=void 0;return l._register(l.onDidChange((function(){var e=l.currentCompletion;if(e&&e.sourceInlineCompletion!==c){c=e.sourceInlineCompletion;var t=e.sourceProvider;t.handleItemDidShow&&t.handleItemDidShow(e.sourceInlineCompletions,c)}}))),l._register((0,vd.toDisposable)((function(){l.cache.clear()}))),l._register(l.editor.onDidChangeCursorPosition((function(e){l.cache.value&&l.onDidChangeEmitter.fire()}))),l._register(l.editor.onDidChangeModelContent((function(e){l.scheduleAutomaticUpdate()}))),l._register(lh.InlineCompletionsProviderRegistry.onDidChange((function(){l.updateSoon.schedule()}))),l.scheduleAutomaticUpdate(),l}return(0,c.default)(i,[{key:"fixAndGetIndexOfCurrentSelection",value:function(){var e=this;if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;var t=this.cache.value.completions.findIndex((function(t){return t.semanticId===e.currentlySelectedCompletionId}));return-1===t?(this.currentlySelectedCompletionId=void 0,0):t}},{key:"currentCachedCompletion",get:function(){if(this.cache.value)return this.cache.value.completions[this.fixAndGetIndexOfCurrentSelection()]}},{key:"showNextInlineCompletion",value:function(){var e;return Fm(this,void 0,void 0,n(l).mark((function t(){var i,r;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureUpdateWithExplicitContext();case 2:(i=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[]).length>0?(r=(this.fixAndGetIndexOfCurrentSelection()+1)%i.length,this.currentlySelectedCompletionId=i[r].semanticId):this.currentlySelectedCompletionId=void 0,this.onDidChangeEmitter.fire();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"showPreviousInlineCompletion",value:function(){var e;return Fm(this,void 0,void 0,n(l).mark((function t(){var i,r;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureUpdateWithExplicitContext();case 2:(i=(null===(e=this.cache.value)||void 0===e?void 0:e.completions)||[]).length>0?(r=(this.fixAndGetIndexOfCurrentSelection()+i.length-1)%i.length,this.currentlySelectedCompletionId=i[r].semanticId):this.currentlySelectedCompletionId=void 0,this.onDidChangeEmitter.fire();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"ensureUpdateWithExplicitContext",value:function(){var e;return Fm(this,void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.updateOperation.value){t.next=10;break}if(this.updateOperation.value.triggerKind!==lh.InlineCompletionTriggerKind.Explicit){t.next=6;break}return t.next=4,this.updateOperation.value.promise;case 4:t.next=8;break;case 6:return t.next=8,this.update(lh.InlineCompletionTriggerKind.Explicit);case 8:t.next=13;break;case 10:if((null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)===lh.InlineCompletionTriggerKind.Explicit){t.next=13;break}return t.next=13,this.update(lh.InlineCompletionTriggerKind.Explicit);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"hasMultipleInlineCompletions",value:function(){var e;return Fm(this,void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureUpdateWithExplicitContext();case 2:return t.abrupt("return",((null===(e=this.cache.value)||void 0===e?void 0:e.completions.length)||0)>1);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"ghostText",get:function(){var e=this.currentCompletion,t=this.editor.getOptions().get(54).mode;return e?Tm(e,this.editor.getModel(),t,this.editor.getPosition()):void 0}},{key:"currentCompletion",get:function(){var e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}},{key:"isValid",get:function(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}},{key:"scheduleAutomaticUpdate",value:function(){this.updateOperation.clear(),this.updateSoon.schedule()}},{key:"update",value:function(e){return Fm(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this,this.shouldUpdate()){t.next=3;break}return t.abrupt("return");case 3:return r=this.editor.getPosition(),o=(0,gd.createCancelablePromise)((function(t){return Fm(i,void 0,void 0,n(l).mark((function i(){var o;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=1,n.next=4,Vm(r,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},t);case 4:o=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),(0,Yc.onUnexpectedError)(n.t0),n.abrupt("return");case 11:if(!t.isCancellationRequested){n.next=13;break}return n.abrupt("return");case 13:this.cache.setValue(this.editor,o,e),this.onDidChangeEmitter.fire();case 15:case"end":return n.stop()}}),i,this,[[1,7]])})))})),a=new jm(o,e),this.updateOperation.value=a,t.next=9,o;case 9:this.updateOperation.value===a&&this.updateOperation.clear();case 10:case"end":return t.stop()}}),t,this)})))}},{key:"takeOwnership",value:function(e){this._register(e)}},{key:"commitCurrentCompletion",value:function(){if(this.ghostText){var e=this.currentCompletion;e&&this.commit(e)}}},{key:"commit",value:function(e){var t,n=this.cache.clearAndLeak();this.editor.executeEdits("inlineSuggestion.accept",[xm.EditOperation.replaceMove(e.range,e.text)]),e.command?(t=this.commandService).executeCommand.apply(t,[e.command.id].concat((0,qi.default)(e.command.arguments||[]))).finally((function(){null==n||n.dispose()})).then(void 0,Yc.onUnexpectedExternalError):null==n||n.dispose(),this.onDidChangeEmitter.fire()}}]),i}(Im),jm=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.promise=t,this.triggerKind=n}return(0,c.default)(e,[{key:"dispose",value:function(){this.promise.cancel()}}]),e}(),zm=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;(0,u.default)(this,n),(a=t.call(this)).triggerKind=o;var s=e.deltaDecorations([],i.items.map((function(e){return{range:e.range,options:{description:"inline-completion-tracking-range"}}})));return a._register((0,vd.toDisposable)((function(){e.deltaDecorations(s,[])}))),a.completions=i.items.map((function(e,t){return new Wm(e,s[t])})),a._register(e.onDidChangeModelContent((function(){var t=!1,n=e.getModel(),i=!0,o=!1,s=void 0;try{for(var l,u=a.completions[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,d=n.getDecorationRange(c.decorationId);d?c.synchronizedRange.equalsRange(d)||(t=!0,c.synchronizedRange=d):(0,Yc.onUnexpectedError)(new Error("Decoration has no range"))}}catch(e){o=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}t&&r()}))),a._register(i),a}return n}(vd.Disposable),Wm=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.inlineCompletion=t,this.decorationId=n,this.semanticId=JSON.stringify({text:this.inlineCompletion.text,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=t.range}return(0,c.default)(e,[{key:"toLiveInlineCompletion",value:function(){return{text:this.inlineCompletion.text,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion}}}]),e}();function Um(e,t){var n=t.getWordAtPosition(e),i=t.getLineMaxColumn(e.lineNumber);return n?new(0,yd.Range)(e.lineNumber,n.startColumn,e.lineNumber,i):yd.Range.fromPositions(e,e.with(void 0,i))}function Vm(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:eh.CancellationToken.None;return Fm(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x;return n(l).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=this,s=Um(e,t),u=lh.InlineCompletionsProviderRegistry.all(t),o.next=5,Promise.all(u.map((function(o){return Fm(a,void 0,void 0,n(l).mark((function a(){var s;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.provideInlineCompletions(t,e,i,r);case 2:return s=n.sent,n.abrupt("return",{completions:s,provider:o,dispose:function(){s&&o.freeInlineCompletions(s)}});case 4:case"end":return n.stop()}}),a)})))})));case 5:c=o.sent,d=new Map,h=!0,f=!1,p=void 0,o.prev=8,g=c[Symbol.iterator]();case 10:if(h=(v=g.next()).done){o.next=42;break}if(m=v.value,y=m.completions,b=!0,_=!1,w=void 0,!y){o.next=39;break}o.prev=15,k=y.items.map((function(e){return{text:e.text,range:e.range?yd.Range.lift(e.range):s,command:e.command,sourceProvider:m.provider,sourceInlineCompletions:y,sourceInlineCompletion:e}}))[Symbol.iterator]();case 17:if(b=(C=k.next()).done){o.next=25;break}if((x=C.value).range.startLineNumber===x.range.endLineNumber){o.next=21;break}return o.abrupt("continue",22);case 21:d.set(JSON.stringify({text:x.text,range:x.range}),x);case 22:b=!0,o.next=17;break;case 25:o.next=31;break;case 27:o.prev=27,o.t0=o.catch(15),_=!0,w=o.t0;case 31:o.prev=31,o.prev=32,b||null==k.return||k.return();case 34:if(o.prev=34,!_){o.next=37;break}throw w;case 37:return o.finish(34);case 38:return o.finish(31);case 39:h=!0,o.next=10;break;case 42:o.next=48;break;case 44:o.prev=44,o.t1=o.catch(8),f=!0,p=o.t1;case 48:o.prev=48,o.prev=49,h||null==g.return||g.return();case 51:if(o.prev=51,!f){o.next=54;break}throw p;case 54:return o.finish(51);case 55:return o.finish(48);case 56:return o.abrupt("return",{items:(0,qi.default)(d.values()),dispose:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=c[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}});case 57:case"end":return o.stop()}}),o,this,[[8,44,48,56],[15,27,31,39],[32,,34,38],[49,,51,55]])})))}var Km={};e(Km,"SuggestWidgetPreviewModel",(function(){return hw}),(function(e){return hw=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),gd=o("hJucn"),Yc=o("2NkmB"),vd=o("dXCvL"),yd=o("5MJfC"),lh=o("chpjt"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),gd=o("hJucn"),$h=o("neTVg"),vd=o("dXCvL"),yd=o("5MJfC"),u=o("4JAgF"),c=o("9HoHC"),f=o("8WkQI"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp");var qm,Jm=function(){"use strict";function e(){(0,u.default)(this,e),this.value="",this.pos=0}return(0,c.default)(e,[{key:"text",value:function(e){this.value=e,this.pos=0}},{key:"tokenText",value:function(e){return this.value.substr(e.pos,e.len)}},{key:"next",value:function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,i=0,r=this.value.charCodeAt(n);if("number"==typeof(t=e._table[r]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(r)){t=8;do{i+=1,r=this.value.charCodeAt(n+i)}while(e.isDigitCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}if(e.isVariableCharacter(r)){t=9;do{r=this.value.charCodeAt(n+ ++i)}while(e.isVariableCharacter(r)||e.isDigitCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}t=10;do{i+=1,r=this.value.charCodeAt(n+i)}while(!isNaN(r)&&void 0===e._table[r]&&!e.isDigitCharacter(r)&&!e.isVariableCharacter(r));return this.pos+=i,{type:t,pos:n,len:i}}}],[{key:"isDigitCharacter",value:function(e){return e>=48&&e<=57}},{key:"isVariableCharacter",value:function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}}]),e}();Jm._table=(qm={},(0,f.default)(qm,36,0),(0,f.default)(qm,58,1),(0,f.default)(qm,44,2),(0,f.default)(qm,123,3),(0,f.default)(qm,125,4),(0,f.default)(qm,92,5),(0,f.default)(qm,47,6),(0,f.default)(qm,124,7),(0,f.default)(qm,43,11),(0,f.default)(qm,45,12),(0,f.default)(qm,63,13),qm);var Xm=function(){"use strict";function e(){(0,u.default)(this,e),this._children=[]}return(0,c.default)(e,[{key:"appendChild",value:function(e){return e instanceof Gm&&this._children[this._children.length-1]instanceof Gm?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}},{key:"replace",value:function(e,t){var n,i=e.parent,r=i.children.indexOf(e),o=i.children.slice(0);(n=o).splice.apply(n,[r,1].concat((0,qi.default)(t))),i._children=o,function e(t,n){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.parent=n,e(l.children,l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}(t,i)}},{key:"children",get:function(){return this._children}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof iy)return e;e=e.parent}}},{key:"toString",value:function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")}},{key:"len",value:function(){return 0}}]),e}(),Gm=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).value=e,i}return(0,c.default)(n,[{key:"toString",value:function(){return this.value}},{key:"len",value:function(){return this.value.length}},{key:"clone",value:function(){return new n(this.value)}}]),n}(Xm),Zm=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return n}(Xm),$m=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).index=e,i}return(0,c.default)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof Ym?this._children[0]:void 0}},{key:"clone",value:function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}],[{key:"compareByIndex",value:function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}}]),n}(Zm),Ym=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).options=[],e}return(0,c.default)(n,[{key:"appendChild",value:function(e){return e instanceof Gm&&(e.parent=this,this.options.push(e)),this}},{key:"toString",value:function(){return this.options[0].value}},{key:"len",value:function(){return this.options[0].len()}},{key:"clone",value:function(){var e=new n;return this.options.forEach(e.appendChild,e),e}}]),n}(Xm),Qm=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).regexp=new RegExp(""),e}return(0,c.default)(n,[{key:"resolve",value:function(e){var t=this,n=!1,i=e.replace(this.regexp,(function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!n&&this._children.some((function(e){return e instanceof ey&&Boolean(e.elseValue)}))&&(i=this._replace([])),i}},{key:"_replace",value:function(e){var t="",n=!0,i=!1,r=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s instanceof ey){var l=e[s.index]||"";t+=l=s.resolve(l)}else t+=s.toString()}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"toString",value:function(){return""}},{key:"clone",value:function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e}}]),n}(Xm),ey=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this)).index=e,a.shorthandName=i,a.ifValue=r,a.elseValue=o,a}return(0,c.default)(n,[{key:"resolve",value:function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"==typeof this.ifValue?this.ifValue:Boolean(e)||"string"!=typeof this.elseValue?e||"":this.elseValue}},{key:"_toPascalCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})).join(""):e}},{key:"_toCamelCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})).join(""):e}},{key:"clone",value:function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)}}]),n}(Xm),ty=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).name=e,i}return(0,c.default)(n,[{key:"resolve",value:function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Gm(t)],!0)}},{key:"clone",value:function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}]),n}(Zm);function ny(e,t){for(var n=(0,qi.default)(e);n.length>0;){var i,r=n.shift();if(!t(r))break;(i=n).unshift.apply(i,(0,qi.default)(r.children))}}var iy=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return n instanceof $m&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}},{key:"offset",value:function(e){var t=0,n=!1;return this.walk((function(i){return i===e?(n=!0,!1):(t+=i.len(),!0)})),n?t:-1}},{key:"fullLen",value:function(e){var t=0;return ny([e],(function(e){return t+=e.len(),!0})),t}},{key:"enclosingPlaceholders",value:function(e){for(var t=[],n=e.parent;n;)n instanceof $m&&t.push(n),n=n.parent;return t}},{key:"resolveVariables",value:function(e){var t=this;return this.walk((function(n){return n instanceof ty&&n.resolve(e)&&(t._placeholders=void 0),!0})),this}},{key:"appendChild",value:function(e){return this._placeholders=void 0,(0,zi.default)((0,Wi.default)(n.prototype),"appendChild",this).call(this,e)}},{key:"replace",value:function(e,t){return this._placeholders=void 0,(0,zi.default)((0,Wi.default)(n.prototype),"replace",this).call(this,e,t)}},{key:"clone",value:function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e}},{key:"walk",value:function(e){ny(this.children,e)}}]),n}(Xm),ry=function(){"use strict";function e(){(0,u.default)(this,e),this._scanner=new Jm,this._token={type:14,pos:0,len:0}}return(0,c.default)(e,[{key:"parse",value:function(e,t,n){this._scanner.text(e),this._token=this._scanner.next();for(var i=new iy;this._parse(i););var r=new Map,o=[],a=0;i.walk((function(e){return e instanceof $m&&(a+=1,e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):o.push(e)),!0}));var s=!0,l=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value,f=r.get(h.index);if(f){var p=new $m(h.index);p.transform=h.transform;var g=!0,v=!1,m=void 0;try{for(var y,b=f[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var _=y.value;p.appendChild(_.clone())}}catch(e){v=!0,m=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw m}}i.replace(h,[p])}}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return n||(n=a>0&&t),!r.has(0)&&n&&i.appendChild(new $m(0)),i}},{key:"_accept",value:function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1}},{key:"_backTo",value:function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}},{key:"_until",value:function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var i=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),i}},{key:"_parse",value:function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}},{key:"_parseEscaped",value:function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Gm(t)),!0)}},{key:"_parseTabstopOrVariableName",value:function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new $m(Number(t)):new ty(t)),!0):this._backTo(n)}},{key:"_parseComplexPlaceholder",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var i=new $m(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new Gm("${"+t+":")),i.children.forEach(e.appendChild,e),!0}else{if(!(i.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(var r=new Ym;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(i.appendChild(r),this._accept(4)))return e.appendChild(i),!0}return this._backTo(n),!1}}}},{key:"_parseChoiceElement",value:function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var i=void 0;if(!(i=(i=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(i)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new Gm(n.join(""))),!0)}},{key:"_parseComplexVariable",value:function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var i=new ty(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(i)?(e.appendChild(i),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(i),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(i),!0;if(!this._parse(i))return e.appendChild(new Gm("${"+t+":")),i.children.forEach(e.appendChild,e),!0}}},{key:"_parseTransform",value:function(e){for(var t=new Qm,n="",i="";!this._accept(6);){var r=void 0;if(r=this._accept(5,!0))n+=r=this._accept(6,!0)||r;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Gm(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,i)}catch(e){return!1}return e.transform=t,!0}},{key:"_parseFormatString",value:function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var i=this._accept(8,!0);if(!i)return this._backTo(t),!1;if(!n)return e.appendChild(new ey(Number(i))),!0;if(this._accept(4))return e.appendChild(new ey(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var r=this._accept(9,!0);return r&&this._accept(4)?(e.appendChild(new ey(Number(i),r)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new ey(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new ey(Number(i),void 0,void 0,a)),!0}else if(this._accept(13)){var s=this._until(1);if(s){var l=this._until(4);if(l)return e.appendChild(new ey(Number(i),void 0,s,l)),!0}}else{var u=this._until(4);if(u)return e.appendChild(new ey(Number(i),void 0,void 0,u)),!0}return this._backTo(t),!1}},{key:"_parseAnything",value:function(e){return 14!==this._token.type&&(e.appendChild(new Gm(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}],[{key:"escape",value:function(e){return e.replace(/\$|}|\\/g,"\\$&")}},{key:"guessNeedsClipboard",value:function(e){return/\${?CLIPBOARD/.test(e)}}]),e}();u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),qi=o("caN7I"),p=o("dCPLc"),oh=o("2ZBuK");o("dXCvL");nh=o("gTzCU"),xm=o("7NUhl"),yd=o("5MJfC"),Gc=o("3WP4Y"),_d=o("60ELr");var oy=o("8EMjZ"),ay=(Oh=o("hm5an"),u=o("4JAgF"),c=o("9HoHC"),Jc=o("faA3E"),o("41U55")),sy=(mf=o("L9zbH"),o("k4Xpx")),ly=(nh=o("gTzCU"),ah=o("iPPVB"),"code-workspace");function uy(e){var t=e;return"string"==typeof(null==t?void 0:t.id)&&ah.URI.isUri(t.uri)}for(var cy,dy=new Uint8Array(16),hy=[],fy=0;fy<256;fy++)hy.push(fy.toString(16).padStart(2,"0"));function py(){cy(dy),dy[6]=15&dy[6]|64,dy[8]=63&dy[8]|128;var e=0,t="";return t+=hy[dy[e++]],t+=hy[dy[e++]],t+=hy[dy[e++]],t+=hy[dy[e++]],t+="-",t+=hy[dy[e++]],t+=hy[dy[e++]],t+="-",t+=hy[dy[e++]],t+=hy[dy[e++]],t+="-",t+=hy[dy[e++]],t+=hy[dy[e++]],t+="-",t+=hy[dy[e++]],t+=hy[dy[e++]],t+=hy[dy[e++]],t+=hy[dy[e++]],t+=hy[dy[e++]],t+=hy[dy[e++]]}cy="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues.bind(crypto):function(e){for(var t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random());return e};var gy=function(){"use strict";function e(t){(0,u.default)(this,e),this._delegates=t}return(0,c.default)(e,[{key:"resolve",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._delegates[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value.resolve(e);if(void 0!==a)return a}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}]),e}(),vy=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._model=t,this._selection=n,this._selectionIdx=i,this._overtypingCapturer=r}return(0,c.default)(e,[{key:"resolve",value:function(e){var t=e.name;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){var n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){var r=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);r&&(n=r.value,i=r.multiline)}if(n&&i&&e.snippet){var o=this._model.getLineContent(this._selection.startLineNumber),a=(0,nh.getLeadingWhitespace)(o,0,this._selection.startColumn-1),s=a;e.snippet.walk((function(t){return t!==e&&(t instanceof Gm&&(s=(0,nh.getLeadingWhitespace)((0,nh.splitLines)(t.value).pop())),!0)}));var l=(0,nh.commonPrefixLength)(s,a);n=n.replace(/(\r\n|\r|\n)(.*)/g,(function(e,t,n){return"".concat(t).concat(s.substr(l)).concat(n)}))}return n}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){var u=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return u&&u.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):void 0}}]),e}(),my=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._labelService=t,this._model=n}return(0,c.default)(e,[{key:"resolve",value:function(e){var t=e.name;if("TM_FILENAME"===t)return ay.basename(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){var n=ay.basename(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}return"TM_DIRECTORY"===t&&this._labelService?"."===ay.dirname(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,mf.dirname)(this._model.uri)):"TM_FILEPATH"===t&&this._labelService?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t&&this._labelService?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}]),e}(),yy=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._readClipboardText=t,this._selectionIdx=n,this._selectionCount=i,this._spread=r}return(0,c.default)(e,[{key:"resolve",value:function(e){if("CLIPBOARD"===e.name){var t=this._readClipboardText();if(t){if(this._spread){var n=t.split(/\r\n|\n|\r/).filter((function(e){return!(0,nh.isFalsyOrWhitespace)(e)}));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}}]),e}(),by=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._model=t,this._selection=n}return(0,c.default)(e,[{key:"resolve",value:function(e){var t=e.name,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=sy.LanguageConfigurationRegistry.getComments(n);if(i)return"LINE_COMMENT"===t?i.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?i.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&i.blockCommentEndToken||void 0}}]),e}(),_y=function(){"use strict";function e(){(0,u.default)(this,e),this._date=new Date}return(0,c.default)(e,[{key:"resolve",value:function(t){var n=t.name;return"CURRENT_YEAR"===n?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===n?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===n?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===n?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===n?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===n?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===n?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===n?e.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===n?e.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===n?e.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===n?e.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===n?String(Math.floor(this._date.getTime()/1e3)):void 0}}]),e}();_y.dayNames=[Jc.localize("Sunday","Sunday"),Jc.localize("Monday","Monday"),Jc.localize("Tuesday","Tuesday"),Jc.localize("Wednesday","Wednesday"),Jc.localize("Thursday","Thursday"),Jc.localize("Friday","Friday"),Jc.localize("Saturday","Saturday")],_y.dayNamesShort=[Jc.localize("SundayShort","Sun"),Jc.localize("MondayShort","Mon"),Jc.localize("TuesdayShort","Tue"),Jc.localize("WednesdayShort","Wed"),Jc.localize("ThursdayShort","Thu"),Jc.localize("FridayShort","Fri"),Jc.localize("SaturdayShort","Sat")],_y.monthNames=[Jc.localize("January","January"),Jc.localize("February","February"),Jc.localize("March","March"),Jc.localize("April","April"),Jc.localize("May","May"),Jc.localize("June","June"),Jc.localize("July","July"),Jc.localize("August","August"),Jc.localize("September","September"),Jc.localize("October","October"),Jc.localize("November","November"),Jc.localize("December","December")],_y.monthNamesShort=[Jc.localize("JanuaryShort","Jan"),Jc.localize("FebruaryShort","Feb"),Jc.localize("MarchShort","Mar"),Jc.localize("AprilShort","Apr"),Jc.localize("MayShort","May"),Jc.localize("JuneShort","Jun"),Jc.localize("JulyShort","Jul"),Jc.localize("AugustShort","Aug"),Jc.localize("SeptemberShort","Sep"),Jc.localize("OctoberShort","Oct"),Jc.localize("NovemberShort","Nov"),Jc.localize("DecemberShort","Dec")];var wy=function(){"use strict";function e(t){(0,u.default)(this,e),this._workspaceService=t}return(0,c.default)(e,[{key:"resolve",value:function(e){if(this._workspaceService){var t,n=(t=this._workspaceService.getWorkspace()).configuration?{id:t.id,configPath:t.configuration}:1===t.folders.length?{id:t.id,uri:t.folders[0].uri}:void 0;if(n)return"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(n):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(n):void 0}}},{key:"_resolveWorkspaceName",value:function(e){if(uy(e))return ay.basename(e.uri.path);var t=ay.basename(e.configPath.path);return t.endsWith(ly)&&(t=t.substr(0,t.length-ly.length-1)),t}},{key:"_resoveWorkspacePath",value:function(e){if(uy(e))return Bp(e.uri.fsPath);var t=ay.basename(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?Bp(n):"/"}}]),e}(),ky=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"resolve",value:function(e){var t=e.name;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?py():void 0}}]),e}();Cd=o("4ET02"),kd=o("ht8QC"),zg=o("l7Ug5");(0,Cd.registerThemingParticipant)((function(e,t){var n=function(t){var n=e.getColor(t);return n?n.toString():"transparent"};t.addRule(".monaco-editor .snippet-placeholder { background-color: ".concat(n(kd.snippetTabstopHighlightBackground),"; outline-color: ").concat(n(kd.snippetTabstopHighlightBorder),"; }")),t.addRule(".monaco-editor .finish-snippet-placeholder { background-color: ".concat(n(kd.snippetFinalTabstopHighlightBackground),"; outline-color: ").concat(n(kd.snippetFinalTabstopHighlightBorder),"; }"))}));var Cy=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._editor=t,this._snippet=n,this._offset=i,this._snippetLineLeadingWhitespace=r,this._nestingLevel=1,this._placeholderGroups=(0,oh.groupBy)(n.placeholders,$m.compareByIndex),this._placeholderGroupsIdx=-1}return(0,c.default)(e,[{key:"dispose",value:function(){this._placeholderDecorations&&this._editor.deltaDecorations((0,qi.default)(this._placeholderDecorations.values()),[]),this._placeholderGroups.length=0}},{key:"_initDecorations",value:function(){var t=this;if(!this._placeholderDecorations){this._placeholderDecorations=new Map;var n=this._editor.getModel();this._editor.changeDecorations((function(i){var r=!0,o=!1,a=void 0;try{for(var s,l=t._snippet.placeholders[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=t._snippet.offset(u),d=t._snippet.fullLen(u),h=yd.Range.fromPositions(n.getPositionAt(t._offset+c),n.getPositionAt(t._offset+c+d)),f=u.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive,p=i.addDecoration(h,f);t._placeholderDecorations.set(u,p)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}))}}},{key:"move",value:function(t){var n=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=this._placeholderGroups[this._placeholderGroupsIdx][Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;if(u.transform){for(var c=this._placeholderDecorations.get(u),d=this._editor.getModel().getDecorationRange(c),h=this._editor.getModel().getValueInRange(d),f=u.transform.resolve(h).split(/\r\n|\r|\n/),p=1;p<f.length;p++)f[p]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+f[p]);i.push(xm.EditOperation.replace(d,f.join(this._editor.getModel().getEOL())))}}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}var g=!1;!0===t&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,g=!0):!1===t&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,g=!0);var v=this._editor.getModel().changeDecorations((function(t){var i=new Set,r=[],o=!0,a=!1,s=void 0;try{for(var l,u=n._placeholderGroups[n._placeholderGroupsIdx][Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=n._placeholderDecorations.get(c),h=n._editor.getModel().getDecorationRange(d);r.push(new(0,Gc.Selection)(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn)),g=g&&n._hasPlaceholderBeenCollapsed(c),t.changeDecorationOptions(d,c.isFinalTabstop?e._decor.activeFinal:e._decor.active),i.add(c);var f=!0,p=!1,v=void 0;try{for(var m,y=n._snippet.enclosingPlaceholders(c)[Symbol.iterator]();!(f=(m=y.next()).done);f=!0){var b=m.value,_=n._placeholderDecorations.get(b);t.changeDecorationOptions(_,b.isFinalTabstop?e._decor.activeFinal:e._decor.active),i.add(b)}}catch(e){p=!0,v=e}finally{try{f||null==y.return||y.return()}finally{if(p)throw v}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var w=!0,k=!1,C=void 0;try{for(var x,S=n._placeholderDecorations[Symbol.iterator]();!(w=(x=S.next()).done);w=!0){var E=(0,Ki.default)(x.value,2),D=E[0],A=E[1];i.has(D)||t.changeDecorationOptions(A,D.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive)}}catch(e){k=!0,C=e}finally{try{w||null==S.return||S.return()}finally{if(k)throw C}}return r}));return g?this.move(t):null!=v?v:[]}},{key:"_hasPlaceholderBeenCollapsed",value:function(e){for(var t=e;t;){if(t instanceof $m){var n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}},{key:"isAtFirstPlaceholder",get:function(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}},{key:"isAtLastPlaceholder",get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}},{key:"hasPlaceholder",get:function(){return this._snippet.placeholders.length>0}},{key:"computePossibleSelections",value:function(){var e=new Map,t=!0,n=!1,i=void 0;try{for(var r,o=this._placeholderGroups[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=void 0,l=!0,u=!1,c=void 0;try{for(var d,h=a[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if(f.isFinalTabstop)break;s||(s=[],e.set(f.index,s));var p=this._placeholderDecorations.get(f),g=this._editor.getModel().getDecorationRange(p);if(!g){e.delete(f.index);break}s.push(g)}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"choice",get:function(){return this._placeholderGroups[this._placeholderGroupsIdx][0].choice}},{key:"merge",value:function(t){var n=this,i=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((function(r){var o=!0,a=!1,s=void 0;try{for(var l,u=n._placeholderGroups[n._placeholderGroupsIdx][Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=t.shift();console.assert(!d._placeholderDecorations);var h=d._snippet.placeholderInfo.last.index,f=!0,p=!1,g=void 0;try{for(var v,m=d._snippet.placeholderInfo.all[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=v.value;y.isFinalTabstop?y.index=c.index+(h+1)/n._nestingLevel:y.index=c.index+y.index/n._nestingLevel}}catch(e){p=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw g}}n._snippet.replace(c,d._snippet.children);var b=n._placeholderDecorations.get(c);r.removeDecoration(b),n._placeholderDecorations.delete(c);var _=!0,w=!1,k=void 0;try{for(var C,x=d._snippet.placeholders[Symbol.iterator]();!(_=(C=x.next()).done);_=!0){var S=C.value,E=d._snippet.offset(S),D=d._snippet.fullLen(S),A=yd.Range.fromPositions(i.getPositionAt(d._offset+E),i.getPositionAt(d._offset+E+D)),I=r.addDecoration(A,e._decor.inactive);n._placeholderDecorations.set(S,I)}}catch(e){w=!0,k=e}finally{try{_||null==x.return||x.return()}finally{if(w)throw k}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}n._placeholderGroups=(0,oh.groupBy)(n._snippet.placeholders,$m.compareByIndex)}))}}]),e}();Cy._decor={active:_d.ModelDecorationOptions.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:_d.ModelDecorationOptions.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:_d.ModelDecorationOptions.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:_d.ModelDecorationOptions.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var xy={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},Sy=function(){"use strict";function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xy;(0,u.default)(this,e),this._templateMerges=[],this._snippets=[],this._editor=t,this._template=n,this._options=i}return(0,c.default)(e,[{key:"dispose",value:function e(){e(this._snippets)}},{key:"_logInfo",value:function(){return'template="'.concat(this._template,'", merged_templates="').concat(this._templateMerges.join(" -> "),'"')}},{key:"insert",value:function(){var t=this;if(this._editor.hasModel()){var n=e.createEditsAndSnippets(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer),i=n.edits,r=n.snippets;this._snippets=r,this._editor.executeEdits("snippet",i,(function(e){return t._snippets[0].hasPlaceholder?t._move(!0):e.filter((function(e){return!!e.identifier})).map((function(e){return Gc.Selection.fromPositions(e.range.getEndPosition())}))})),this._editor.revealRange(this._editor.getSelections()[0])}}},{key:"merge",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xy,i=this;if(this._editor.hasModel()){this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);var r=e.createEditsAndSnippets(this._editor,t,n.overwriteBefore,n.overwriteAfter,!0,n.adjustWhitespace,n.clipboardText,n.overtypingCapturer),o=r.edits,a=r.snippets;this._editor.executeEdits("snippet",o,(function(e){var t=!0,n=!1,r=void 0;try{for(var o,s=i._snippets[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){o.value.merge(a)}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return console.assert(0===a.length),i._snippets[0].hasPlaceholder?i._move(void 0):e.filter((function(e){return!!e.identifier})).map((function(e){return Gc.Selection.fromPositions(e.range.getEndPosition())}))}))}}},{key:"next",value:function(){var e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"prev",value:function(){var e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"_move",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._snippets[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s,l=o.value.move(e);(s=t).push.apply(s,(0,qi.default)(l))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}},{key:"isAtFirstPlaceholder",get:function(){return this._snippets[0].isAtFirstPlaceholder}},{key:"isAtLastPlaceholder",get:function(){return this._snippets[0].isAtLastPlaceholder}},{key:"hasPlaceholder",get:function(){return this._snippets[0].hasPlaceholder}},{key:"choice",get:function(){return this._snippets[0].choice}},{key:"isSelectionWithinPlaceholders",value:function(){if(!this.hasPlaceholder)return!1;var e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;var t=new Map,n=!0,i=!1,r=void 0;try{for(var o,a=function(n,i){var r=i.value.computePossibleSelections(),o=!0,a=!1,s=void 0;if(0===t.size)try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=(0,Ki.default)(l.value,2),d=c[0],h=c[1];h.sort(yd.Range.compareRangesUsingStarts);var f=!0,p=!1,g=void 0;try{for(var v,m=e[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=v.value;if(h[0].containsRange(y)){t.set(d,[]);break}}}catch(e){p=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw g}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(0===t.size)return{v:!1};t.forEach((function(e,t){var n;(n=e).push.apply(n,(0,qi.default)(r.get(t)))}))},s=this._snippets[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=a(0,o);if("object"===(0,p.default)(l))return l.v}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}e.sort(yd.Range.compareRangesUsingStarts);var u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var g=(0,Ki.default)(h.value,2),v=g[0],m=g[1];if(m.length===e.length){m.sort(yd.Range.compareRangesUsingStarts);for(var y=0;y<m.length;y++)if(!m[y].containsRange(e[y])){t.delete(v);continue}}else t.delete(v)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}return t.size>0}}],[{key:"adjustWhitespace",value:function(e,t,n,i,r){var o,a=e.getLineContent(t.lineNumber),s=(0,nh.getLeadingWhitespace)(a,0,t.column-1);return n.walk((function(t){if(!(t instanceof Gm)||t.parent instanceof Ym)return!0;var r=t.value.split(/\r\n|\r|\n/);if(i){var a=n.offset(t);if(0===a)r[0]=e.normalizeIndentation(r[0]);else{var l=(o=null!=o?o:n.toString()).charCodeAt(a-1);10!==l&&13!==l||(r[0]=e.normalizeIndentation(s+r[0]))}for(var u=1;u<r.length;u++)r[u]=e.normalizeIndentation(s+r[u])}var c=r.join(e.getEOL());return c!==t.value&&(t.parent.replace(t,[new Gm(c)]),o=void 0),!0})),s}},{key:"adjustSelection",value:function(e,t,n,i){if(0!==n||0!==i){var r=t.positionLineNumber,o=t.positionColumn,a=o-n,s=o+i,l=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:s});t=Gc.Selection.createWithDirection(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn,t.getDirection())}return t}},{key:"createEditsAndSnippets",value:function(t,n,i,r,o,a,s,l){var u=[],c=[];if(!t.hasModel())return{edits:u,snippets:c};var d=t.getModel(),h=t.invokeWithinContext((function(e){return e.get(oy.IWorkspaceContextService,Oh.optional)})),f=t.invokeWithinContext((function(e){return new my(e.get(zg.ILabelService,Oh.optional),d)})),p=function(){return s},g=0,v=d.getValueInRange(e.adjustSelection(d,t.getSelection(),i,0)),m=d.getValueInRange(e.adjustSelection(d,t.getSelection(),0,r)),y=d.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),b=t.getSelections().map((function(e,t){return{selection:e,idx:t}})).sort((function(e,t){return yd.Range.compareRangesUsingStarts(e.selection,t.selection)})),_=!0,w=!1,k=void 0;try{for(var C,x=b[Symbol.iterator]();!(_=(C=x.next()).done);_=!0){var S=C.value,E=S.selection,D=S.idx,A=e.adjustSelection(d,E,i,0),I=e.adjustSelection(d,E,0,r);v!==d.getValueInRange(A)&&(A=E),m!==d.getValueInRange(I)&&(I=E);var R=E.setStartPosition(A.startLineNumber,A.startColumn).setEndPosition(I.endLineNumber,I.endColumn),T=(new ry).parse(n,!0,o),L=R.getStartPosition(),M=e.adjustWhitespace(d,L,T,a||D>0&&y!==d.getLineFirstNonWhitespaceColumn(E.positionLineNumber),!0);T.resolveVariables(new gy([f,new yy(p,D,b.length,"spread"===t.getOption(70)),new vy(d,E,D,l),new by(d,E),new _y,new wy(h),new ky]));var N=d.getOffsetAt(L)+g;g+=T.toString().length-d.getValueLengthInRange(R),u[D]=xm.EditOperation.replace(R,T.toString()),u[D].identifier={major:D,minor:0},c[D]=new Cy(t,T,N,M)}}catch(e){w=!0,k=e}finally{try{_||null==x.return||x.return()}finally{if(w)throw k}}return{edits:u,snippets:c}}}]),e}(),Ey={};e(Ey,"SuggestController",(function(){return aw}),(function(e){return aw=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),od=o("3xPLG"),oh=o("2ZBuK"),Yc=o("2NkmB"),Zc=o("5LFig"),vd=o("dXCvL"),sh=o("fLZJB"),qc=o("THDAR"),xm=o("7NUhl"),yd=o("5MJfC"),Xc=o("5cDyY");var Dy={};e(Dy,"SnippetController2",(function(){return Zy}),(function(e){return Zy=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),vd=o("dXCvL"),qc=o("THDAR"),yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY");var Ay={};e(Ay,"Context",(function(){return Ny}),(function(e){return Ny=e})),e(Ay,"suggestWidgetStatusbarMenu",(function(){return Py}),(function(e){return Py=e})),e(Ay,"CompletionOptions",(function(){return Fy}),(function(e){return Fy=e})),e(Ay,"getSnippetSuggestSupport",(function(){return By}),(function(e){return By=e})),e(Ay,"provideSuggestionItems",(function(){return jy}),(function(e){return jy=e})),e(Ay,"getSuggestionComparator",(function(){return Uy}),(function(e){return Uy=e})),e(Ay,"showSimpleSuggestions",(function(){return Ky}),(function(e){return Ky=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),qi=o("caN7I"),l=o("1JCPQ"),Yc=o("2NkmB"),lh=o("chpjt"),md=o("kBBF2"),$c=o("efZ3W"),eh=o("j6sHb"),yd=o("5MJfC");var Iy,Ry=o("3cgwy"),Ty=(vd=o("dXCvL"),xd=o("feTbe"),o("dwv6L")),Ly=(vh=o("j9pk1"),zf=o("jW8FZ"),ah=o("iPPVB"),o("fTO0K")),My=(Jc=o("faA3E"),function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))}),Ny={Visible:new(0,$c.RawContextKey)("suggestWidgetVisible",!1,(0,Jc.localize)("suggestWidgetVisible","Whether suggestion are visible")),DetailsVisible:new(0,$c.RawContextKey)("suggestWidgetDetailsVisible",!1,(0,Jc.localize)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new(0,$c.RawContextKey)("suggestWidgetMultipleSuggestions",!1,(0,Jc.localize)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new(0,$c.RawContextKey)("suggestionMakesTextEdit",!0,(0,Jc.localize)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new(0,$c.RawContextKey)("acceptSuggestionOnEnter",!0,(0,Jc.localize)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new(0,$c.RawContextKey)("suggestionHasInsertAndReplaceRange",!1,(0,Jc.localize)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new(0,$c.RawContextKey)("suggestionInsertMode",void 0,{type:"string",description:(0,Jc.localize)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new(0,$c.RawContextKey)("suggestionCanResolve",!1,(0,Jc.localize)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Py=new(0,xd.MenuId)("suggestWidgetStatusBar"),Oy=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.position=t,this.completion=n,this.container=i,this.provider=r,this.isInvalid=!1,this.score=Ry.FuzzyScore.Default,this.distance=0,this.textLabel="string"==typeof n.label?n.label:n.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=n.sortText&&n.sortText.toLowerCase(),this.filterTextLow=n.filterText&&n.filterText.toLowerCase(),yd.Range.isIRange(n.range)?(this.editStart=new(0,md.Position)(n.range.startLineNumber,n.range.startColumn),this.editInsertEnd=new(0,md.Position)(n.range.endLineNumber,n.range.endColumn),this.editReplaceEnd=new(0,md.Position)(n.range.endLineNumber,n.range.endColumn),this.isInvalid=this.isInvalid||yd.Range.spansMultipleLines(n.range)||n.range.startLineNumber!==t.lineNumber):(this.editStart=new(0,md.Position)(n.range.insert.startLineNumber,n.range.insert.startColumn),this.editInsertEnd=new(0,md.Position)(n.range.insert.endLineNumber,n.range.insert.endColumn),this.editReplaceEnd=new(0,md.Position)(n.range.replace.endLineNumber,n.range.replace.endColumn),this.isInvalid=this.isInvalid||yd.Range.spansMultipleLines(n.range.insert)||yd.Range.spansMultipleLines(n.range.replace)||n.range.insert.startLineNumber!==t.lineNumber||n.range.replace.startLineNumber!==t.lineNumber||n.range.insert.startColumn!==n.range.replace.startColumn),"function"!=typeof r.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}return(0,c.default)(e,[{key:"isResolved",get:function(){return!!this._isResolved}},{key:"resolve",value:function(e){return My(this,void 0,void 0,n(l).mark((function t(){var i,r;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this,this._resolveCache||(r=e.onCancellationRequested((function(){i._resolveCache=void 0,i._isResolved=!1})),this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then((function(e){Object.assign(i.completion,e),i._isResolved=!0,r.dispose()}),(function(e){(0,Yc.isPromiseCanceledError)(e)&&(i._resolveCache=void 0,i._isResolved=!1)}))),t.abrupt("return",this._resolveCache);case 3:case"end":return t.stop()}}),t,this)})))}}]),e}(),Fy=function e(){"use strict";var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];(0,u.default)(this,e),this.snippetSortOrder=t,this.kindFilter=n,this.providerFilter=i,this.showDeprecated=r};function By(){return Iy}Fy.default=new Fy;var Hy=function e(t,n,i,r){"use strict";(0,u.default)(this,e),this.items=t,this.needsClipboard=n,this.durations=i,this.disposable=r};function jy(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fy.default,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{triggerKind:0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eh.CancellationToken.None;return My(this,void 0,void 0,n(l).mark((function a(){var s,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x,S;return n(l).wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=this,u=new(0,Ty.StopWatch)(!0),t=t.clone(),c=e.getWordAtPosition(t),d=c?new(0,yd.Range)(t.lineNumber,c.startColumn,t.lineNumber,c.endColumn):yd.Range.fromPositions(t),h={replace:d,insert:d.setEndPosition(t.lineNumber,t.column)},f=[],p=new(0,vd.DisposableStore),g=[],v=!1,m=function(e,n,r){var o,a,s;if(n){var l=!0,u=!1,c=void 0;try{for(var d,m=n.suggestions[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var y=d.value;if(!i.kindFilter.has(y.kind)){if(!i.showDeprecated&&(null===(o=null==y?void 0:y.tags)||void 0===o?void 0:o.includes(1)))continue;y.range||(y.range=h),y.sortText||(y.sortText="string"==typeof y.label?y.label:y.label.label),!v&&y.insertTextRules&&4&y.insertTextRules&&(v=ry.guessNeedsClipboard(y.insertText)),f.push(new Oy(t,y,n,e))}}}catch(e){u=!0,c=e}finally{try{l||null==m.return||m.return()}finally{if(u)throw c}}(0,vd.isDisposable)(n)&&p.add(n),g.push({providerName:null!==(a=e._debugDisplayName)&&void 0!==a?a:"unkown_provider",elapsedProvider:null!==(s=n.duration)&&void 0!==s?s:-1,elapsedOverall:r.elapsed()})}},y=My(s,void 0,void 0,n(l).mark((function a(){var s,u;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return");case 2:if(!(i.providerFilter.size>0)||i.providerFilter.has(Iy)){n.next=4;break}return n.abrupt("return");case 4:return s=new(0,Ty.StopWatch)(!0),n.next=7,Iy.provideCompletionItems(e,t,r,o);case 7:u=n.sent,m(Iy,u,s);case 9:case"end":return n.stop()}}),a)}))),b=!0,_=!1,w=void 0,a.prev=13,k=lh.CompletionProviderRegistry.orderedGroups(e)[Symbol.iterator]();case 15:if(b=(C=k.next()).done){a.next=25;break}return x=C.value,S=f.length,a.next=20,Promise.all(x.map((function(a){return My(s,void 0,void 0,n(l).mark((function s(){var u,c;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i.providerFilter.size>0)||i.providerFilter.has(a)){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,u=new(0,Ty.StopWatch)(!0),n.next=6,a.provideCompletionItems(e,t,r,o);case 6:c=n.sent,m(a,c,u),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),(0,Yc.onUnexpectedExternalError)(n.t0);case 13:case"end":return n.stop()}}),s,null,[[2,10]])})))})));case 20:if(S===f.length&&!o.isCancellationRequested){a.next=22;break}return a.abrupt("break",25);case 22:b=!0,a.next=15;break;case 25:a.next=31;break;case 27:a.prev=27,a.t0=a.catch(13),_=!0,w=a.t0;case 31:a.prev=31,a.prev=32,b||null==k.return||k.return();case 34:if(a.prev=34,!_){a.next=37;break}throw w;case 37:return a.finish(34);case 38:return a.finish(31);case 39:return a.next=41,y;case 41:if(!o.isCancellationRequested){a.next=44;break}return p.dispose(),a.abrupt("return",Promise.reject((0,Yc.canceled)()));case 44:return a.abrupt("return",new Hy(f.sort(Uy(i.snippetSortOrder)),v,{entries:g,elapsed:u.elapsed()},p));case 45:case"end":return a.stop()}}),a,this,[[13,27,31,39],[32,,34,38]])})))}function zy(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.completion.label<t.completion.label?-1:e.completion.label>t.completion.label?1:e.completion.kind-t.completion.kind}var Wy=new Map;function Uy(e){return Wy.get(e)}Wy.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return zy(e,t)})),Wy.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return zy(e,t)})),Wy.set(1,zy),vh.CommandsRegistry.registerCommand("_executeCompletionItemProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return My(void 0,void 0,void 0,n(l).mark((function t(){var r,o,a,s,u,c,d,h,f,p,g,v,m,y,b;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,Ki.default)(i,4),o=r[0],a=r[1],s=r[2],u=r[3],(0,zf.assertType)(ah.URI.isUri(o)),(0,zf.assertType)(md.Position.isIPosition(a)),(0,zf.assertType)("string"==typeof s||!s),(0,zf.assertType)("number"==typeof u||!u),t.next=7,e.get(Ly.ITextModelService).createModelReference(o);case 7:return c=t.sent,t.prev=8,d={incomplete:!1,suggestions:[]},h=[],t.next=13,jy(c.object.textEditorModel,md.Position.lift(a),void 0,{triggerCharacter:s,triggerKind:s?1:0});case 13:for(f=t.sent,p=!0,g=!1,v=void 0,t.prev=15,m=f.items[Symbol.iterator]();!(p=(y=m.next()).done);p=!0)b=y.value,h.length<(null!=u?u:0)&&h.push(b.resolve(eh.CancellationToken.None)),d.incomplete=d.incomplete||b.container.incomplete,d.suggestions.push(b.completion);t.next=23;break;case 19:t.prev=19,t.t0=t.catch(15),g=!0,v=t.t0;case 23:t.prev=23,t.prev=24,p||null==m.return||m.return();case 26:if(t.prev=26,!g){t.next=29;break}throw v;case 29:return t.finish(26);case 30:return t.finish(23);case 31:return t.prev=31,t.next=34,Promise.all(h);case 34:return t.abrupt("return",d);case 35:return t.prev=35,setTimeout((function(){return f.disposable.dispose()}),100),t.finish(35);case 38:return t.prev=38,c.dispose(),t.finish(38);case 41:case"end":return t.stop()}}),t,null,[[8,,38,41],[15,19,23,31],[24,,26,30],[31,,35,38]])})))}));var Vy=new(function(){"use strict";function e(){(0,u.default)(this,e),this.onlyOnceSuggestions=[]}return(0,c.default)(e,[{key:"provideCompletionItems",value:function(){var e={suggestions:this.onlyOnceSuggestions.slice(0)};return this.onlyOnceSuggestions.length=0,e}}]),e}());function Ky(e,t){setTimeout((function(){var n;(n=Vy.onlyOnceSuggestions).push.apply(n,(0,qi.default)(t)),e.getContribution("editor.contrib.suggestController").triggerSuggest((new Set).add(Vy))}),0)}lh.CompletionProviderRegistry.register("*",Vy);$c=o("efZ3W");var qy=o("04xCG"),Jy=(Jc=o("faA3E"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),Xy=function(e,t){return function(n,i){t(n,i,e)}},Gy={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},Zy=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._editor=t,this._logService=n,this._snippetListener=new(0,vd.DisposableStore),this._modelVersionId=-1,this._inSnippet=e.InSnippetMode.bindTo(i),this._hasNextTabstop=e.HasNextTabstop.bindTo(i),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(i)}return(0,c.default)(e,[{key:"dispose",value:function(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}},{key:"insert",value:function(e,t){try{this._doInsert(e,void 0===t?Gy:Object.assign(Object.assign({},Gy),t))}catch(t){this.cancel(),this._logService.error(t),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}},{key:"_doInsert",value:function(e,t){var n=this;this._editor.hasModel()&&(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session?this._session.merge(e,t):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Sy(this._editor,e,t),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((function(e){return e.isFlush&&n.cancel()}))),this._snippetListener.add(this._editor.onDidChangeModel((function(){return n.cancel()}))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((function(){return n._updateState()}))))}},{key:"_updateState",value:function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}},{key:"_handleChoice",value:function(){var e=this;if(this._session&&this._editor.hasModel()){var t=this._session.choice;if(t){if(this._currentChoice!==t){this._currentChoice=t,this._editor.setSelections(this._editor.getSelections().map((function(e){return Gc.Selection.fromPositions(e.getStartPosition())})));var n=(0,Ki.default)(t.options,1)[0];(0,Ay.showSimpleSuggestions)(this._editor,t.options.map((function(t,i){return{kind:13,label:t.value,insertText:t.value,sortText:"a".repeat(i+1),range:yd.Range.fromPositions(e._editor.getPosition(),e._editor.getPosition().delta(0,n.value.length))}})))}}else this._currentChoice=void 0}else this._currentChoice=void 0}},{key:"finish",value:function(){for(;this._inSnippet.get();)this.next()}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),null===(e=this._session)||void 0===e||e.dispose(),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])}},{key:"prev",value:function(){this._session&&this._session.prev(),this._updateState()}},{key:"next",value:function(){this._session&&this._session.next(),this._updateState()}},{key:"isInSnippet",value:function(){return Boolean(this._inSnippet.get())}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();Zy.ID="snippetController2",Zy.InSnippetMode=new(0,$c.RawContextKey)("inSnippetMode",!1,(0,Jc.localize)("inSnippetMode","Whether the editor in current in snippet mode")),Zy.HasNextTabstop=new(0,$c.RawContextKey)("hasNextTabstop",!1,(0,Jc.localize)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),Zy.HasPrevTabstop=new(0,$c.RawContextKey)("hasPrevTabstop",!1,(0,Jc.localize)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),Zy=Jy([Xy(1,qy.ILogService),Xy(2,$c.IContextKeyService)],Zy),(0,qc.registerEditorContribution)(Zy.ID,Zy);var $y=qc.EditorCommand.bindToContribution(Zy.get);(0,qc.registerEditorCommand)(new $y({id:"jumpToNextSnippetPlaceholder",precondition:$c.ContextKeyExpr.and(Zy.InSnippetMode,Zy.HasNextTabstop),handler:function(e){return e.next()},kbOpts:{weight:130,kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2}})),(0,qc.registerEditorCommand)(new $y({id:"jumpToPrevSnippetPlaceholder",precondition:$c.ContextKeyExpr.and(Zy.InSnippetMode,Zy.HasPrevTabstop),handler:function(e){return e.prev()},kbOpts:{weight:130,kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1026}})),(0,qc.registerEditorCommand)(new $y({id:"leaveSnippet",precondition:Zy.InSnippetMode,handler:function(e){return e.cancel(!0)},kbOpts:{weight:130,kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:9,secondary:[1033]}})),(0,qc.registerEditorCommand)(new $y({id:"acceptSnippet",precondition:Zy.InSnippetMode,handler:function(e){return e.finish()}}));var Yy={};e(Yy,"ISuggestMemoryService",(function(){return ab}),(function(e){return ab=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),Yf=o("728Ww"),Qf=o("6TN8i"),lh=o("chpjt"),vd=o("dXCvL"),gd=o("hJucn"),Oh=o("hm5an"),mp=o("fnqF9"),$f=o("2cK24"),kp=o("8Eens");var Qy=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},eb=function(e,t){return function(n,i){t(n,i,e)}},tb=function(){"use strict";function e(t){(0,u.default)(this,e),this.name=t}return(0,c.default)(e,[{key:"select",value:function(e,t,n){if(0===n.length)return 0;for(var i=n[0].score[0],r=0;r<n.length;r++){var o=n[r],a=o.score,s=o.completion;if(a[0]!==i)break;if(s.preselect)return r}return 0}}]),e}(),nb=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,"first")}return(0,c.default)(n,[{key:"memorize",value:function(e,t,n){}},{key:"toJSON",value:function(){}},{key:"fromJSON",value:function(){}}]),n}(tb),ib=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this,"recentlyUsed"))._cache=new(0,Yf.LRUCache)(300,.66),e._seq=0,e}return(0,c.default)(n,[{key:"memorize",value:function(e,t,n){var i="".concat(e.getLanguageIdentifier().language,"/").concat(n.textLabel);this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}},{key:"select",value:function(e,t,i){if(0===i.length)return 0;var r=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(r))return(0,zi.default)((0,Wi.default)(n.prototype),"select",this).call(this,e,t,i);for(var o=i[0].score[0],a=-1,s=-1,l=-1,u=0;u<i.length&&i[u].score[0]===o;u++){var c="".concat(e.getLanguageIdentifier().language,"/").concat(i[u].textLabel),d=this._cache.peek(c);if(d&&d.touch>l&&d.type===i[u].completion.kind&&d.insertText===i[u].completion.insertText&&(l=d.touch,s=u),i[u].completion.preselect&&-1===a)return u}return-1!==s?s:-1!==a?a:0}},{key:"toJSON",value:function(){return this._cache.toJSON()}},{key:"fromJSON",value:function(e){this._cache.clear();var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=(0,Ki.default)(r.value,2),s=a[0],l=a[1];l.touch=0,l.type="number"==typeof l.type?l.type:(0,lh.completionKindFromString)(l.type),this._cache.set(s,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}this._seq=this._cache.size}}]),n}(tb),rb=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this,"recentlyUsedByPrefix"))._trie=Yf.TernarySearchTree.forStrings(),e._seq=0,e}return(0,c.default)(n,[{key:"memorize",value:function(e,t,n){var i=e.getWordUntilPosition(t).word,r="".concat(e.getLanguageIdentifier().language,"/").concat(i);this._trie.set(r,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}},{key:"select",value:function(e,t,i){var r=e.getWordUntilPosition(t).word;if(!r)return(0,zi.default)((0,Wi.default)(n.prototype),"select",this).call(this,e,t,i);var o="".concat(e.getLanguageIdentifier().language,"/").concat(r),a=this._trie.get(o);if(a||(a=this._trie.findSubstr(o)),a)for(var s=0;s<i.length;s++){var l=i[s].completion,u=l.kind,c=l.insertText;if(u===a.type&&c===a.insertText)return s}return(0,zi.default)((0,Wi.default)(n.prototype),"select",this).call(this,e,t,i)}},{key:"toJSON",value:function(){var e=[];return this._trie.forEach((function(t,n){return e.push([n,t])})),e.sort((function(e,t){return-(e[1].touch-t[1].touch)})).forEach((function(e,t){return e[1].touch=t})),e.slice(0,200)}},{key:"fromJSON",value:function(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;var t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=(0,Ki.default)(r.value,2),s=a[0],l=a[1];l.type="number"==typeof l.type?l.type:(0,lh.completionKindFromString)(l.type),this._trie.set(s,l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}}]),n}(tb),ob=function(){"use strict";function e(t,n,i){var r=this;(0,u.default)(this,e),this._storageService=t,this._modeService=n,this._configService=i,this._disposables=new(0,vd.DisposableStore),this._persistSoon=new(0,gd.RunOnceScheduler)((function(){return r._saveState()}),500),this._disposables.add(t.onWillSaveState((function(e){e.reason===Qf.WillSaveStateReason.SHUTDOWN&&r._saveState()})))}return(0,c.default)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._persistSoon.dispose()}},{key:"memorize",value:function(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}},{key:"select",value:function(e,t,n){return this._withStrategy(e,t).select(e,t,n)}},{key:"_withStrategy",value:function(t,n){var i,r,o=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:null===(i=this._modeService.getLanguageIdentifier(t.getLanguageIdAtPosition(n.lineNumber,n.column)))||void 0===i?void 0:i.language,resource:t.uri});if((null===(r=this._strategy)||void 0===r?void 0:r.name)!==o){this._saveState();var a=e._strategyCtors.get(o)||nb;this._strategy=new a;try{var s=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get("".concat(e._storagePrefix,"/").concat(o),s);l&&this._strategy.fromJSON(JSON.parse(l))}catch(e){}}return this._strategy}},{key:"_saveState",value:function(){if(this._strategy){var t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store("".concat(e._storagePrefix,"/").concat(this._strategy.name),n,t,1)}}}]),e}();ob._strategyCtors=new Map([["recentlyUsedByPrefix",rb],["recentlyUsed",ib],["first",nb]]),ob._storagePrefix="suggest/memories",ob=Qy([eb(0,Qf.IStorageService),eb(1,kp.IModeService),eb(2,mp.IConfigurationService)],ob);var ab=(0,Oh.createDecorator)("ISuggestMemories");(0,$f.registerSingleton)(ab,ob,!0);Jc=o("faA3E"),vh=o("j9pk1"),$c=o("efZ3W"),Oh=o("hm5an");var sb=o("8vTtk"),lb={};e(lb,"SuggestAlternatives",(function(){return db}),(function(e){return db=e}));u=o("4JAgF"),c=o("9HoHC"),$c=o("efZ3W");var ub=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},cb=function(e,t){return function(n,i){t(n,i,e)}},db=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(n)}return(0,c.default)(e,[{key:"dispose",value:function(){this.reset()}},{key:"reset",value:function(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}},{key:"set",value:function(t,n){var i=t.model,r=t.index,o=this;0!==i.items.length?e._moveIndex(!0,i,r)!==r?(this._acceptNext=n,this._model=i,this._index=r,this._listener=this._editor.onDidChangeCursorPosition((function(){o._ignore||o.reset()})),this._ckOtherSuggestions.set(!0)):this.reset():this.reset()}},{key:"next",value:function(){this._move(!0)}},{key:"prev",value:function(){this._move(!1)}},{key:"_move",value:function(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}}],[{key:"_moveIndex",value:function(e,t,n){for(var i=n;(i=(i+t.items.length+(e?1:-1))%t.items.length)!==n&&t.items[i].completion.additionalTextEdits;);return i}}]),e}();db.OtherSuggestions=new(0,$c.RawContextKey)("hasOtherSuggestions",!1),db=ub([cb(1,$c.IContextKeyService)],db);var hb={};e(hb,"SuggestModel",(function(){return Sb}),(function(e){return Sb=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),l=o("1JCPQ"),gd=o("hJucn"),Yc=o("2NkmB"),$h=o("neTVg"),vd=o("dXCvL"),Gc=o("3WP4Y"),lh=o("chpjt"),u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),Ry=o("3cgwy"),nh=o("gTzCU"),oh=o("2ZBuK");var fb=function(){"use strict";function e(t,n,i,r,o,a,s){(0,u.default)(this,e),this.clipboardText=s,this._snippetCompareFn=e._compareCompletionItems,this._items=t,this._column=n,this._wordDistance=r,this._options=o,this._refilterKind=1,this._lineContext=i,"top"===a?this._snippetCompareFn=e._compareCompletionItemsSnippetsUp:"bottom"===a&&(this._snippetCompareFn=e._compareCompletionItemsSnippetsDown)}return(0,c.default)(e,[{key:"lineContext",get:function(){return this._lineContext},set:function(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}},{key:"items",get:function(){return this._ensureCachedState(),this._filteredItems}},{key:"allProvider",get:function(){return this._ensureCachedState(),this._providerInfo.keys()}},{key:"incomplete",get:function(){this._ensureCachedState();var e=new Set,t=!0,n=!1,i=void 0;try{for(var r,o=this._providerInfo[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=(0,Ki.default)(r.value,2),s=a[0];a[1]&&e.add(s)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return e}},{key:"adopt",value:function(e){for(var t=[],n=0;n<this._items.length;)e.has(this._items[n].provider)?n++:(t.push(this._items[n]),this._items[n]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}},{key:"stats",get:function(){return this._ensureCachedState(),this._stats}},{key:"_ensureCachedState",value:function(){0!==this._refilterKind&&this._createCachedState()}},{key:"_createCachedState",value:function(){this._providerInfo=new Map;for(var e=[],t=this._lineContext,n=t.leadingLineContent,i=t.characterCountDelta,r="",o="",a=1===this._refilterKind?this._items:this._filteredItems,s=[],l=!this._options.filterGraceful||a.length>2e3?Ry.fuzzyScore:Ry.fuzzyScoreGracefulAggressive,u=0;u<a.length;u++){var c=a[u];if(!c.isInvalid){this._providerInfo.set(c.provider,Boolean(c.container.incomplete));var d=c.position.column-c.editStart.column,h=d+i-(c.position.column-this._column);if(r.length!==h&&(o=(r=0===h?"":n.slice(-h)).toLowerCase()),c.word=r,0===h)c.score=Ry.FuzzyScore.Default;else{for(var f=0;f<d;){var p=r.charCodeAt(f);if(32!==p&&9!==p)break;f+=1}if(f>=h)c.score=Ry.FuzzyScore.Default;else if("string"==typeof c.completion.filterText){var g=l(r,o,f,c.completion.filterText,c.filterTextLow,0,!1);if(!g)continue;0===(0,nh.compareIgnoreCase)(c.completion.filterText,c.textLabel)?c.score=g:(c.score=(0,Ry.anyScore)(r,o,f,c.textLabel,c.labelLow,0),c.score[0]=g[0])}else{var v=l(r,o,f,c.textLabel,c.labelLow,0,!1);if(!v)continue;c.score=v}}c.idx=u,c.distance=this._wordDistance.distance(c.position,c.completion),s.push(c),e.push(c.textLabel.length)}}this._filteredItems=s.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,oh.quickSelect)(e.length-.85,e,(function(e,t){return e-t})):0}}}],[{key:"_compareCompletionItems",value:function(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}},{key:"_compareCompletionItemsSnippetsDown",value:function(t,n){if(t.completion.kind!==n.completion.kind){if(27===t.completion.kind)return 1;if(27===n.completion.kind)return-1}return e._compareCompletionItems(t,n)}},{key:"_compareCompletionItemsSnippetsUp",value:function(t,n){if(t.completion.kind!==n.completion.kind){if(27===t.completion.kind)return-1;if(27===n.completion.kind)return 1}return e._compareCompletionItems(t,n)}}]),e}(),pb=(eh=o("j6sHb"),o("1BgEP")),gb={};e(gb,"WordDistance",(function(){return _b}),(function(e){return _b=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),l=o("1JCPQ"),oh=o("2ZBuK"),yd=o("5MJfC");var vb={};e(vb,"BracketSelectionRangeProvider",(function(){return yb}),(function(e){return yb=e}));u=o("4JAgF"),c=o("9HoHC"),l=o("1JCPQ"),md=o("kBBF2"),yd=o("5MJfC"),iv=o("5kkS1");var mb=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},yb=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"provideSelectionRanges",value:function(t,i){return mb(this,void 0,void 0,n(l).mark((function r(){var o,a,s,u,c,d,h,f,p;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=[],a=!0,s=!1,u=void 0,n.prev=2,c=i[Symbol.iterator]();case 4:if(a=(d=c.next()).done){n.next=16;break}return h=d.value,f=[],o.push(f),p=new Map,n.next=11,new Promise((function(n){return e._bracketsRightYield(n,0,t,h,p)}));case 11:return n.next=13,new Promise((function(n){return e._bracketsLeftYield(n,0,t,h,p,f)}));case 13:a=!0,n.next=4;break;case 16:n.next=22;break;case 18:n.prev=18,n.t0=n.catch(2),s=!0,u=n.t0;case 22:n.prev=22,n.prev=23,a||null==c.return||c.return();case 25:if(n.prev=25,!s){n.next=28;break}throw u;case 28:return n.finish(25);case 29:return n.finish(22);case 30:return n.abrupt("return",o);case 31:case"end":return n.stop()}}),r,null,[[2,18,22,30],[23,,25,29]])})))}}],[{key:"_bracketsRightYield",value:function(t,n,i,r,o){for(var a=new Map,s=Date.now();;){if(n>=e._maxRounds){t();break}if(!r){t();break}var l=i.findNextBracket(r);if(!l){t();break}if(Date.now()-s>e._maxDuration){setTimeout((function(){return e._bracketsRightYield(t,n+1,i,r,o)}));break}var u=l.close[0];if(l.isOpen){var c=a.has(u)?a.get(u):0;a.set(u,c+1)}else{var d=a.has(u)?a.get(u):0;if(d-=1,a.set(u,Math.max(0,d)),d<0){var h=o.get(u);h||(h=new(0,iv.LinkedList),o.set(u,h)),h.push(l.range)}}r=l.range.getEndPosition()}}},{key:"_bracketsLeftYield",value:function(t,n,i,r,o,a){for(var s=new Map,l=Date.now();;){if(n>=e._maxRounds&&0===o.size){t();break}if(!r){t();break}var u=i.findPrevBracket(r);if(!u){t();break}if(Date.now()-l>e._maxDuration){setTimeout((function(){return e._bracketsLeftYield(t,n+1,i,r,o,a)}));break}var c=u.close[0];if(u.isOpen){var d=s.has(c)?s.get(c):0;if(d-=1,s.set(c,Math.max(0,d)),d<0){var h=o.get(c);if(h){var f=h.shift();0===h.size&&o.delete(c);var p=yd.Range.fromPositions(u.range.getEndPosition(),f.getStartPosition()),g=yd.Range.fromPositions(u.range.getStartPosition(),f.getEndPosition());a.push({range:p}),a.push({range:g}),e._addBracketLeading(i,g,a)}}}else{var v=s.has(c)?s.get(c):0;s.set(c,v+1)}r=u.range.getStartPosition()}}},{key:"_addBracketLeading",value:function(e,t,n){if(t.startLineNumber!==t.endLineNumber){var i=t.startLineNumber,r=e.getLineFirstNonWhitespaceColumn(i);0!==r&&r!==t.startColumn&&(n.push({range:yd.Range.fromPositions(new(0,md.Position)(i,r),t.getEndPosition())}),n.push({range:yd.Range.fromPositions(new(0,md.Position)(i,1),t.getEndPosition())}));var o=i-1;if(o>0){var a=e.getLineFirstNonWhitespaceColumn(o);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(o)&&(n.push({range:yd.Range.fromPositions(new(0,md.Position)(o,a),t.getEndPosition())}),n.push({range:yd.Range.fromPositions(new(0,md.Position)(o,1),t.getEndPosition())}))}}}}]),e}();yb._maxDuration=30,yb._maxRounds=2;var bb=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},_b=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,null,[{key:"create",value:function(t,i){return bb(this,void 0,void 0,n(l).mark((function r(){var o,a,s,f,p,g;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.getOption(106).localityBonus){n.next=2;break}return n.abrupt("return",e.None);case 2:if(i.hasModel()){n.next=4;break}return n.abrupt("return",e.None);case 4:if(o=i.getModel(),a=i.getPosition(),t.canComputeWordRanges(o.uri)){n.next=8;break}return n.abrupt("return",e.None);case 8:return n.t0=Ki.default,n.next=11,(new(0,vb.BracketSelectionRangeProvider)).provideSelectionRanges(o,[a]);case 11:if(n.t1=n.sent,s=(0,n.t0)(n.t1,1),0!==(f=s[0]).length){n.next=16;break}return n.abrupt("return",e.None);case 16:return n.next=18,t.computeWordRanges(o.uri,f[0].range);case 18:if(p=n.sent){n.next=21;break}return n.abrupt("return",e.None);case 21:return g=o.getWordUntilPosition(a),delete p[g.word],n.abrupt("return",new(function(e){(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"distance",value:function(e,t){if(!a.equals(i.getPosition()))return 0;if(17===t.kind)return 2097152;var n="string"==typeof t.label?t.label:t.label.label,r=p[n];if((0,oh.isFalsyOrEmpty)(r))return 2097152;var o=(0,oh.binarySearch)(r,yd.Range.fromPositions(e),yd.Range.compareRangesUsingStarts),s=o>=0?r[o]:r[Math.max(0,~o-1)],l=f.length,u=!0,c=!1,d=void 0;try{for(var h,g=f[Symbol.iterator]();!(u=(h=g.next()).done);u=!0){var v=h.value;if(!yd.Range.containsRange(v.range,s))break;l-=1}}catch(e){c=!0,d=e}finally{try{u||null==g.return||g.return()}finally{if(c)throw d}}return l}}]),n}(e)));case 24:case"end":return n.stop()}}),r)})))}}]),e}();_b.None=new(function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"distance",value:function(){return 0}}]),n}(_b));nh=o("gTzCU"),zd=o("k8rlj"),ff=o("ckUVh"),qy=o("04xCG"),$c=o("efZ3W"),mp=o("fnqF9");var wb=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},kb=function(e,t){return function(n,i){t(n,i,e)}},Cb=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},xb=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.leadingLineContent=t.getLineContent(n.lineNumber).substr(0,n.column-1),this.leadingWord=t.getWordUntilPosition(n),this.lineNumber=n.lineNumber,this.column=n.column,this.auto=i,this.shy=r}return(0,c.default)(e,null,[{key:"shouldAutoTrigger",value:function(e){if(!e.hasModel())return!1;var t=e.getModel(),n=e.getPosition();t.tokenizeIfCheap(n.lineNumber);var i=t.getWordAtPosition(n);return!!i&&(i.endColumn===n.column&&!!isNaN(Number(i.word)))}}]),e}();var Sb=function(){"use strict";function e(t,n,i,r,o,a,s){var l=this;(0,u.default)(this,e),this._editor=t,this._editorWorkerService=n,this._clipboardService=i,this._telemetryService=r,this._logService=o,this._contextKeyService=a,this._configurationService=s,this._toDispose=new(0,vd.DisposableStore),this._quickSuggestDelay=10,this._triggerCharacterListener=new(0,vd.DisposableStore),this._triggerQuickSuggest=new(0,gd.TimeoutTimer),this._state=0,this._completionDisposables=new(0,vd.DisposableStore),this._onDidCancel=new(0,$h.Emitter),this._onDidTrigger=new(0,$h.Emitter),this._onDidSuggest=new(0,$h.Emitter),this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new(0,Gc.Selection)(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((function(){l._updateTriggerCharacters(),l.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((function(){l._updateTriggerCharacters(),l.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((function(){l._updateTriggerCharacters(),l._updateQuickSuggest()}))),this._toDispose.add(lh.CompletionProviderRegistry.onDidChange((function(){l._updateTriggerCharacters(),l._updateActiveSuggestSession()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((function(e){l._onCursorChange(e)})));var c=!1;this._toDispose.add(this._editor.onDidCompositionStart((function(){c=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((function(){c=!1,l._refilterCompletionItems()}))),this._toDispose.add(this._editor.onDidChangeModelContent((function(){c||l._refilterCompletionItems()}))),this._updateTriggerCharacters(),this._updateQuickSuggest()}return(0,c.default)(e,[{key:"dispose",value:function(){(0,vd.dispose)(this._triggerCharacterListener),(0,vd.dispose)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}},{key:"_updateQuickSuggest",value:function(){this._quickSuggestDelay=this._editor.getOption(79),(isNaN(this._quickSuggestDelay)||!this._quickSuggestDelay&&0!==this._quickSuggestDelay||this._quickSuggestDelay<0)&&(this._quickSuggestDelay=10)}},{key:"_updateTriggerCharacters",value:function(){var e=this;if(this._triggerCharacterListener.clear(),!this._editor.getOption(80)&&this._editor.hasModel()&&this._editor.getOption(109)){var t=new Map,n=!0,i=!1,r=void 0,o=!0,a=!1,s=void 0;try{for(var l,u=lh.CompletionProviderRegistry.all(this._editor.getModel())[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;try{for(var d,h=(c.triggerCharacters||[])[Symbol.iterator]();!(n=(d=h.next()).done);n=!0){var f=d.value,p=t.get(f);p||((p=new Set).add((0,Ay.getSnippetSuggestSupport)()),t.set(f,p)),p.add(c)}}catch(e){i=!0,r=e}finally{try{n||null==h.return||h.return()}finally{if(i)throw r}}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var g=function(n){var i,r;if((i=e._contextKeyService,r=e._configurationService,!Boolean(i.getContextKeyValue("inlineSuggestionVisible"))||Boolean(r.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters")))&&!xb.shouldAutoTrigger(e._editor)){if(!n){var o=e._editor.getPosition();n=e._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}var a="";(0,nh.isLowSurrogate)(n.charCodeAt(n.length-1))?(0,nh.isHighSurrogate)(n.charCodeAt(n.length-2))&&(a=n.substr(n.length-2)):a=n.charAt(n.length-1);var s=t.get(a);if(s){var l=e._completionModel?{items:e._completionModel.adopt(s),clipboardText:e._completionModel.clipboardText}:void 0;e.trigger({auto:!0,shy:!1,triggerCharacter:a},Boolean(e._completionModel),s,l)}}};this._triggerCharacterListener.add(this._editor.onDidType(g)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(g))}}},{key:"state",get:function(){return this._state}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];0!==this._state&&(this._triggerQuickSuggest.cancel(),null===(e=this._requestToken)||void 0===e||e.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))}},{key:"clear",value:function(){this._completionDisposables.clear()}},{key:"_updateActiveSuggestSession",value:function(){0!==this._state&&(this._editor.hasModel()&&lh.CompletionProviderRegistry.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1},!0):this.cancel())}},{key:"_onCursorChange",value:function(e){var t=this;if(this._editor.hasModel()){var n=this._editor.getModel(),i=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source)this.cancel();else if(lh.CompletionProviderRegistry.has(n))if(0===this._state&&0===e.reason){if(!1===this._editor.getOption(78))return;if(!i.containsRange(this._currentSelection)&&!i.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))return;if(this._editor.getOption(106).snippetsPreventQuickSuggestions&&Dy.SnippetController2.get(this._editor).isInSnippet())return;this.cancel(),this._triggerQuickSuggest.cancelAndSet((function(){if(0===t._state&&xb.shouldAutoTrigger(t._editor)&&t._editor.hasModel()){var e=t._editor.getModel(),n=t._editor.getPosition(),i=t._editor.getOption(78);if(!1!==i){if(!0===i);else{e.tokenizeIfCheap(n.lineNumber);var r=e.getLineTokens(n.lineNumber),o=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(!(i.other&&0===o||i.comments&&1===o||i.strings&&2===o))return}var a,s;if(a=t._contextKeyService,s=t._configurationService,!Boolean(a.getContextKeyValue("inlineSuggestionVisible"))||Boolean(s.getValue("editor.inlineSuggest.allowQuickSuggestions")))t.trigger({auto:!0,shy:!1})}}}),this._quickSuggestDelay)}else 0!==this._state&&3===e.reason&&this._refilterCompletionItems()}}},{key:"_refilterCompletionItems",value:function(){var e=this;Promise.resolve().then((function(){if(0!==e._state&&e._editor.hasModel()){var t=e._editor.getModel(),n=e._editor.getPosition(),i=new xb(t,n,2===e._state,!1);e._onNewContext(i)}}))}},{key:"trigger",value:function(t){var i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=this;if(this._editor.hasModel()){var u=this._editor.getModel(),c=t.auto,d=new xb(u,this._editor.getPosition(),c,t.shy);this.cancel(r),this._state=c?2:1,this._onDidTrigger.fire({auto:c,shy:t.shy,position:this._editor.getPosition()}),this._context=d;var h={triggerKind:null!==(i=t.triggerKind)&&void 0!==i?i:0};t.triggerCharacter&&(h={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new(0,eh.CancellationTokenSource);var f=this._editor.getOption(101),p=1;switch(f){case"top":p=0;break;case"bottom":p=2}var g=e._createSuggestFilter(this._editor),v=g.itemKind,m=g.showDeprecated,y=gb.WordDistance.create(this._editorWorkerService,this._editor),b=(0,Ay.provideSuggestionItems)(u,this._editor.getPosition(),new(0,Ay.CompletionOptions)(p,v,o,m),h,this._requestToken.token);Promise.all([b,y]).then((function(e){var i=(0,Ki.default)(e,2),r=i[0],o=i[1];return Cb(s,void 0,void 0,n(l).mark((function e(){var i,s,u,d,h,f;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=this._requestToken)||void 0===i||i.dispose(),this._editor.hasModel()){e.next=4;break}return e.abrupt("return");case 4:if((s=null==a?void 0:a.clipboardText)||!r.needsClipboard){e.next=9;break}return e.next=8,this._clipboardService.readText();case 8:s=e.sent;case 9:if(0!==this._state){e.next=11;break}return e.abrupt("return");case 11:u=this._editor.getModel(),d=r.items,a&&(h=(0,Ay.getSuggestionComparator)(p),d=d.concat(a.items).sort(h)),f=new xb(u,this._editor.getPosition(),c,t.shy),this._completionModel=new fb(d,this._context.column,{leadingLineContent:f.leadingLineContent,characterCountDelta:f.column-this._context.column},o,this._editor.getOption(106),this._editor.getOption(101),s),this._completionDisposables.add(r.disposable),this._onNewContext(f),this._reportDurationsTelemetry(r.durations);case 19:case"end":return e.stop()}}),e,this)})))})).catch(Yc.onUnexpectedError)}}},{key:"_reportDurationsTelemetry",value:function(e){var t=this;this._telemetryGate++%230==0&&setTimeout((function(){t._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),t._logService.debug("suggest.durations.json",e)}))}},{key:"_onNewContext",value:function(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if((0,nh.getLeadingWhitespace)(e.leadingLineContent)===(0,nh.getLeadingWhitespace)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1},!0):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){var t=new Set(lh.CompletionProviderRegistry.all(this._editor.getModel())),n=!0,i=!1,r=void 0;try{for(var o,a=this._completionModel.allProvider[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.delete(s)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1},!0,t,{items:l,clipboardText:this._completionModel.clipboardText})}else if(e.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==e.leadingWord.word.length){var u=this._completionModel.incomplete,c=this._completionModel.adopt(u);this.trigger({auto:2===this._state,shy:!1,triggerKind:2},!0,u,{items:c,clipboardText:this._completionModel.clipboardText})}else{var d=this._completionModel.lineContext,h=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){if(xb.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=d,(h=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,isFrozen:h})}}else this.cancel();else this.cancel()}}],[{key:"_createSuggestFilter",value:function(e){var t=new Set;"none"===e.getOption(101)&&t.add(27);var n=e.getOption(106);return n.showMethods||t.add(0),n.showFunctions||t.add(1),n.showConstructors||t.add(2),n.showFields||t.add(3),n.showVariables||t.add(4),n.showClasses||t.add(5),n.showStructs||t.add(6),n.showInterfaces||t.add(7),n.showModules||t.add(8),n.showProperties||t.add(9),n.showEvents||t.add(10),n.showOperators||t.add(11),n.showUnits||t.add(12),n.showValues||t.add(13),n.showConstants||t.add(14),n.showEnums||t.add(15),n.showEnumMembers||t.add(16),n.showKeywords||t.add(17),n.showWords||t.add(18),n.showColors||t.add(19),n.showFiles||t.add(20),n.showReferences||t.add(21),n.showColors||t.add(22),n.showFolders||t.add(23),n.showTypeParameters||t.add(24),n.showSnippets||t.add(27),n.showUsers||t.add(25),n.showIssues||t.add(26),{itemKind:t,showDeprecated:n.showDeprecated}}}]),e}();Sb=wb([kb(1,pb.IEditorWorkerService),kb(2,zd.IClipboardService),kb(3,ff.ITelemetryService),kb(4,qy.ILogService),kb(5,$c.IContextKeyService),kb(6,mp.IConfigurationService)],Sb);var Eb={};e(Eb,"SuggestWidget",(function(){return X_}),(function(e){return X_=e}));u=o("4JAgF"),c=o("9HoHC"),l=o("1JCPQ");o("aGuK0");Jc=o("faA3E"),Cd=o("4ET02"),kd=o("ht8QC"),Qh=o("8bO6F");var Db=(0,kd.registerColor)("symbolIcon.arrayForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ab=(0,kd.registerColor)("symbolIcon.booleanForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ib=(0,kd.registerColor)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,Jc.localize)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Rb=(0,kd.registerColor)("symbolIcon.colorForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Tb=(0,kd.registerColor)("symbolIcon.constantForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Lb=(0,kd.registerColor)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,Jc.localize)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Mb=(0,kd.registerColor)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,Jc.localize)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Nb=(0,kd.registerColor)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Jc.localize)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Pb=(0,kd.registerColor)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hc:"#EE9D28"},(0,Jc.localize)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ob=(0,kd.registerColor)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Jc.localize)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Fb=(0,kd.registerColor)("symbolIcon.fileForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bb=(0,kd.registerColor)("symbolIcon.folderForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Hb=(0,kd.registerColor)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,Jc.localize)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jb=(0,kd.registerColor)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Jc.localize)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zb=(0,kd.registerColor)("symbolIcon.keyForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Wb=(0,kd.registerColor)("symbolIcon.keywordForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ub=(0,kd.registerColor)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hc:"#B180D7"},(0,Jc.localize)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vb=(0,kd.registerColor)("symbolIcon.moduleForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kb=(0,kd.registerColor)("symbolIcon.namespaceForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qb=(0,kd.registerColor)("symbolIcon.nullForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jb=(0,kd.registerColor)("symbolIcon.numberForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xb=(0,kd.registerColor)("symbolIcon.objectForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gb=(0,kd.registerColor)("symbolIcon.operatorForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zb=(0,kd.registerColor)("symbolIcon.packageForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$b=(0,kd.registerColor)("symbolIcon.propertyForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Yb=(0,kd.registerColor)("symbolIcon.referenceForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qb=(0,kd.registerColor)("symbolIcon.snippetForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e_=(0,kd.registerColor)("symbolIcon.stringForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),t_=(0,kd.registerColor)("symbolIcon.structForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),n_=(0,kd.registerColor)("symbolIcon.textForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),i_=(0,kd.registerColor)("symbolIcon.typeParameterForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),r_=(0,kd.registerColor)("symbolIcon.unitForeground",{dark:kd.foreground,light:kd.foreground,hc:kd.foreground},(0,Jc.localize)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),o_=(0,kd.registerColor)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hc:"#75BEFF"},(0,Jc.localize)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(Db);n&&t.addRule("".concat(Qh.Codicon.symbolArray.cssSelector," { color: ").concat(n,"; }"));var i=e.getColor(Ab);i&&t.addRule("".concat(Qh.Codicon.symbolBoolean.cssSelector," { color: ").concat(i,"; }"));var r=e.getColor(Ib);r&&t.addRule("".concat(Qh.Codicon.symbolClass.cssSelector," { color: ").concat(r,"; }"));var o=e.getColor(Ub);o&&t.addRule("".concat(Qh.Codicon.symbolMethod.cssSelector," { color: ").concat(o,"; }"));var a=e.getColor(Rb);a&&t.addRule("".concat(Qh.Codicon.symbolColor.cssSelector," { color: ").concat(a,"; }"));var s=e.getColor(Tb);s&&t.addRule("".concat(Qh.Codicon.symbolConstant.cssSelector," { color: ").concat(s,"; }"));var l=e.getColor(Lb);l&&t.addRule("".concat(Qh.Codicon.symbolConstructor.cssSelector," { color: ").concat(l,"; }"));var u=e.getColor(Mb);u&&t.addRule("\n\t\t\t".concat(Qh.Codicon.symbolValue.cssSelector,",").concat(Qh.Codicon.symbolEnum.cssSelector," { color: ").concat(u,"; }"));var c=e.getColor(Nb);c&&t.addRule("".concat(Qh.Codicon.symbolEnumMember.cssSelector," { color: ").concat(c,"; }"));var d=e.getColor(Pb);d&&t.addRule("".concat(Qh.Codicon.symbolEvent.cssSelector," { color: ").concat(d,"; }"));var h=e.getColor(Ob);h&&t.addRule("".concat(Qh.Codicon.symbolField.cssSelector," { color: ").concat(h,"; }"));var f=e.getColor(Fb);f&&t.addRule("".concat(Qh.Codicon.symbolFile.cssSelector," { color: ").concat(f,"; }"));var p=e.getColor(Bb);p&&t.addRule("".concat(Qh.Codicon.symbolFolder.cssSelector," { color: ").concat(p,"; }"));var g=e.getColor(Hb);g&&t.addRule("".concat(Qh.Codicon.symbolFunction.cssSelector," { color: ").concat(g,"; }"));var v=e.getColor(jb);v&&t.addRule("".concat(Qh.Codicon.symbolInterface.cssSelector," { color: ").concat(v,"; }"));var m=e.getColor(zb);m&&t.addRule("".concat(Qh.Codicon.symbolKey.cssSelector," { color: ").concat(m,"; }"));var y=e.getColor(Wb);y&&t.addRule("".concat(Qh.Codicon.symbolKeyword.cssSelector," { color: ").concat(y,"; }"));var b=e.getColor(Vb);b&&t.addRule("".concat(Qh.Codicon.symbolModule.cssSelector," { color: ").concat(b,"; }"));var _=e.getColor(Kb);_&&t.addRule("".concat(Qh.Codicon.symbolNamespace.cssSelector," { color: ").concat(_,"; }"));var w=e.getColor(qb);w&&t.addRule("".concat(Qh.Codicon.symbolNull.cssSelector," { color: ").concat(w,"; }"));var k=e.getColor(Jb);k&&t.addRule("".concat(Qh.Codicon.symbolNumber.cssSelector," { color: ").concat(k,"; }"));var C=e.getColor(Xb);C&&t.addRule("".concat(Qh.Codicon.symbolObject.cssSelector," { color: ").concat(C,"; }"));var x=e.getColor(Gb);x&&t.addRule("".concat(Qh.Codicon.symbolOperator.cssSelector," { color: ").concat(x,"; }"));var S=e.getColor(Zb);S&&t.addRule("".concat(Qh.Codicon.symbolPackage.cssSelector," { color: ").concat(S,"; }"));var E=e.getColor($b);E&&t.addRule("".concat(Qh.Codicon.symbolProperty.cssSelector," { color: ").concat(E,"; }"));var D=e.getColor(Yb);D&&t.addRule("".concat(Qh.Codicon.symbolReference.cssSelector," { color: ").concat(D,"; }"));var A=e.getColor(Qb);A&&t.addRule("".concat(Qh.Codicon.symbolSnippet.cssSelector," { color: ").concat(A,"; }"));var I=e.getColor(e_);I&&t.addRule("".concat(Qh.Codicon.symbolString.cssSelector," { color: ").concat(I,"; }"));var R=e.getColor(t_);R&&t.addRule("".concat(Qh.Codicon.symbolStruct.cssSelector," { color: ").concat(R,"; }"));var T=e.getColor(n_);T&&t.addRule("".concat(Qh.Codicon.symbolText.cssSelector," { color: ").concat(T,"; }"));var L=e.getColor(i_);L&&t.addRule("".concat(Qh.Codicon.symbolTypeParameter.cssSelector," { color: ").concat(L,"; }"));var M=e.getColor(r_);M&&t.addRule("".concat(Qh.Codicon.symbolUnit.cssSelector," { color: ").concat(M,"; }"));var N=e.getColor(o_);N&&t.addRule("".concat(Qh.Codicon.symbolVariable.cssSelector," { color: ").concat(N,"; }"))}));Jc=o("faA3E"),nh=o("gTzCU"),Bh=o("fTm33"),$h=o("neTVg"),Yc=o("2NkmB"),vd=o("dXCvL");var a_=o("apxcA"),s_=($c=o("efZ3W"),o("jgMBB")),l_=(Cd=o("4ET02"),kd=o("ht8QC"),Qf=o("6TN8i"),gd=o("hJucn"),Oh=o("hm5an"),{});e(l_,"canExpandCompletionItem",(function(){return h_}),(function(e){return h_=e})),e(l_,"SuggestDetailsWidget",(function(){return f_}),(function(e){return f_=e})),e(l_,"SuggestDetailsOverlay",(function(){return p_}),(function(e){return p_=e}));u=o("4JAgF"),c=o("9HoHC"),Jc=o("faA3E"),vd=o("dXCvL"),Bh=o("fTm33"),Ep=o("5uupw"),Qh=o("8bO6F"),$h=o("neTVg"),u=o("4JAgF"),c=o("9HoHC"),$h=o("neTVg"),vd=o("dXCvL"),Bh=o("fTm33"),Xp=o("cNfER");var u_=function(){"use strict";function e(){var t,n=this;(0,u.default)(this,e),this._onDidWillResize=new(0,$h.Emitter),this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new(0,$h.Emitter),this.onDidResize=this._onDidResize.event,this._sashListener=new(0,vd.DisposableStore),this._size=new(0,Bh.Dimension)(0,0),this._minSize=new(0,Bh.Dimension)(0,0),this._maxSize=new(0,Bh.Dimension)(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new(0,Xp.Sash)(this.domNode,{getVerticalSashLeft:function(){return n._size.width}},{orientation:0}),this._westSash=new(0,Xp.Sash)(this.domNode,{getVerticalSashLeft:function(){return 0}},{orientation:0}),this._northSash=new(0,Xp.Sash)(this.domNode,{getHorizontalSashTop:function(){return 0}},{orientation:1,orthogonalEdge:Xp.OrthogonalEdge.North}),this._southSash=new(0,Xp.Sash)(this.domNode,{getHorizontalSashTop:function(){return n._size.height}},{orientation:1,orthogonalEdge:Xp.OrthogonalEdge.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;var i=0,r=0;this._sashListener.add($h.Event.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)((function(){void 0===t&&(n._onDidWillResize.fire(),t=n._size,i=0,r=0)}))),this._sashListener.add($h.Event.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)((function(){void 0!==t&&(t=void 0,i=0,r=0,n._onDidResize.fire({dimension:n._size,done:!0}))}))),this._sashListener.add(this._eastSash.onDidChange((function(e){t&&(r=e.currentX-e.startX,n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,east:!0}))}))),this._sashListener.add(this._westSash.onDidChange((function(e){t&&(r=-(e.currentX-e.startX),n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,west:!0}))}))),this._sashListener.add(this._northSash.onDidChange((function(e){t&&(i=-(e.currentY-e.startY),n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,north:!0}))}))),this._sashListener.add(this._southSash.onDidChange((function(e){t&&(i=e.currentY-e.startY,n.layout(t.height+i,t.width+r),n._onDidResize.fire({dimension:n._size,done:!1,south:!0}))}))),this._sashListener.add($h.Event.any(this._eastSash.onDidReset,this._westSash.onDidReset)((function(e){n._preferredSize&&(n.layout(n._size.height,n._preferredSize.width),n._onDidResize.fire({dimension:n._size,done:!0}))}))),this._sashListener.add($h.Event.any(this._northSash.onDidReset,this._southSash.onDidReset)((function(e){n._preferredSize&&(n.layout(n._preferredSize.height,n._size.width),n._onDidResize.fire({dimension:n._size,done:!0}))})))}return(0,c.default)(e,[{key:"dispose",value:function(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}},{key:"enableSashes",value:function(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}},{key:"layout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.size.height,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size.width,n=this._minSize,i=n.height,r=n.width,o=this._maxSize,a=o.height,s=o.width;e=Math.max(i,Math.min(a,e)),t=Math.max(r,Math.min(s,t));var l=new(0,Bh.Dimension)(t,e);Bh.Dimension.equals(l,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=l,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}},{key:"clearSashHoverState",value:function(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}},{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=e}},{key:"minSize",get:function(){return this._minSize},set:function(e){this._minSize=e}},{key:"preferredSize",get:function(){return this._preferredSize},set:function(e){this._preferredSize=e}}]),e}(),c_=(Oh=o("hm5an"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),d_=function(e,t){return function(n,i){t(n,i,e)}};function h_(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}var f_=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._editor=t,this._onDidClose=new(0,$h.Emitter),this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new(0,$h.Emitter),this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new(0,vd.DisposableStore),this._renderDisposeable=new(0,vd.DisposableStore),this._borderWidth=1,this._size=new Bh.Dimension(330,0),this.domNode=Bh.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=n.createInstance(Iv.MarkdownRenderer,{editor:t}),this._body=Bh.$(".body"),this._scrollbar=new(0,Ep.DomScrollableElement)(this._body,{}),Bh.append(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Bh.append(this._body,Bh.$(".header")),this._close=Bh.append(this._header,Bh.$("span"+Qh.Codicon.close.cssSelector)),this._close.title=Jc.localize("details.close","Close"),this._type=Bh.append(this._header,Bh.$("p.type")),this._docs=Bh.append(this._body,Bh.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(42)&&i._configureFont()})))}return(0,c.default)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._renderDisposeable.dispose()}},{key:"_configureFont",value:function(){var e=this._editor.getOptions(),t=e.get(42),n=t.fontFamily,i=e.get(107)||t.fontSize,r=e.get(108)||t.lineHeight,o=t.fontWeight,a="".concat(i,"px"),s="".concat(r,"px");this.domNode.style.fontSize=a,this.domNode.style.lineHeight=s,this.domNode.style.fontWeight=o,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=s,this._close.style.width=s}},{key:"getLayoutInfo",value:function(){var e=this._editor.getOption(108)||this._editor.getOption(42).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}},{key:"renderLoading",value:function(){this._type.textContent=Jc.localize("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}},{key:"renderItem",value:function(e,t){var n,i,r=this;this._renderDisposeable.clear();var o=e.completion,a=o.detail,s=o.documentation;if(t){var l="";l+="score: ".concat(e.score[0],"\n"),l+="prefix: ".concat(null!==(n=e.word)&&void 0!==n?n:"(no prefix)","\n"),l+="word: ".concat(e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel,"\n"),l+="distance: ".concat(e.distance," (localityBonus-setting)\n"),l+="index: ".concat(e.idx,", based on ").concat(e.completion.sortText&&'sortText: "'.concat(e.completion.sortText,'"')||"label","\n"),l+="commit_chars: ".concat(null===(i=e.completion.commitCharacters)||void 0===i?void 0:i.join(""),"\n"),s=(new ed).appendCodeblock("empty",l),a="Provider: ".concat(e.provider._debugDisplayName)}if(t||h_(e)){if(this.domNode.classList.remove("no-docs","no-type"),a){var u=a.length>1e5?"".concat(a.substr(0,1e5),""):a;this._type.textContent=u,this._type.title=u,Bh.show(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(u))}else Bh.clearNode(this._type),this._type.title="",Bh.hide(this._type),this.domNode.classList.add("no-type");if(Bh.clearNode(this._docs),"string"==typeof s)this._docs.classList.remove("markdown-docs"),this._docs.textContent=s;else if(s){this._docs.classList.add("markdown-docs"),Bh.clearNode(this._docs);var c=this._markdownRenderer.render(s);this._docs.appendChild(c.element),this._renderDisposeable.add(c),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((function(){r.layout(r._size.width,r._type.clientHeight+r._docs.clientHeight),r._onDidChangeContents.fire(r)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},this._close.onclick=function(e){e.preventDefault(),e.stopPropagation(),r._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}},{key:"clearContents",value:function(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}},{key:"size",get:function(){return this._size}},{key:"layout",value:function(e,t){var n=new Bh.Dimension(e,t);Bh.Dimension.equals(n,this._size)||(this._size=n,Bh.size(this.domNode,e,t)),this._scrollbar.scanDomNode()}},{key:"scrollDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop+=e}},{key:"scrollUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop-=e}},{key:"scrollTop",value:function(){this._body.scrollTop=0}},{key:"scrollBottom",value:function(){this._body.scrollTop=this._body.scrollHeight}},{key:"pageDown",value:function(){this.scrollDown(80)}},{key:"pageUp",value:function(){this.scrollUp(80)}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(e){this._borderWidth=e}}]),e}();f_=c_([d_(1,Oh.IInstantiationService)],f_);var p_=function(){"use strict";function e(t,n){var i,r,o=this;(0,u.default)(this,e),this.widget=t,this._editor=n,this._disposables=new(0,vd.DisposableStore),this._added=!1,this._resizable=new u_,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(t.domNode),this._resizable.enableSashes(!1,!0,!0,!1);var a=0,s=0;this._disposables.add(this._resizable.onDidWillResize((function(){i=o._topLeft,r=o._resizable.size}))),this._disposables.add(this._resizable.onDidResize((function(e){if(i&&r){o.widget.layout(e.dimension.width,e.dimension.height);var t=!1;e.west&&(s=r.width-e.dimension.width,t=!0),e.north&&(a=r.height-e.dimension.height,t=!0),t&&o._applyTopLeft({top:i.top+a,left:i.left+s})}e.done&&(i=void 0,r=void 0,a=0,s=0,o._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((function(){var e;o._anchorBox&&o._placeAtAnchor(o._anchorBox,null!==(e=o._userSize)&&void 0!==e?e:o.widget.size)})))}return(0,c.default)(e,[{key:"dispose",value:function(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}},{key:"getId",value:function(){return"suggest.details"}},{key:"getDomNode",value:function(){return this._resizable.domNode}},{key:"getPosition",value:function(){return null}},{key:"show",value:function(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}},{key:"placeAtAnchor",value:function(e){var t,n=Bh.getDomNodePagePosition(e);this._anchorBox=n,this._placeAtAnchor(this._anchorBox,null!==(t=this._userSize)&&void 0!==t?t:this.widget.size)}},{key:"_placeAtAnchor",value:function(e,t){var n,i,r,o,a=Bh.getClientArea(document.body),s=this.widget.getLayoutInfo(),l=new Bh.Dimension(220,2*s.lineHeight),u=0,c=e.top,d=e.top+e.height-s.borderHeight,h=a.width-(e.left+e.width+s.borderWidth+s.horizontalPadding);u=-s.borderWidth+e.left+e.width,o=!0,i=(n=new Bh.Dimension(h,a.height-e.top-s.borderHeight-s.verticalPadding)).with(void 0,e.top+e.height-s.borderHeight-s.verticalPadding),t.width>h&&(e.left>h&&(h=e.left-s.borderWidth-s.horizontalPadding,o=!1,u=Math.max(s.horizontalPadding,e.left-t.width-s.borderWidth),i=(n=n.with(h)).with(void 0,i.height)),e.width>1.3*h&&a.height-(e.top+e.height)>e.height&&(h=e.width,u=e.left,c=-s.borderWidth+e.top+e.height,i=(n=new Bh.Dimension(e.width-s.borderHeight,a.height-e.top-e.height-s.verticalPadding)).with(void 0,e.top-s.verticalPadding),l=l.with(n.width)));var f,p=t.height,g=Math.max(n.height,i.height);p>g&&(p=g),p<=n.height?(r=!0,f=n):(r=!1,f=i),this._applyTopLeft({left:u,top:r?c:d-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!r,o,r,!o),this._resizable.minSize=l,this._resizable.maxSize=f,this._resizable.layout(p,Math.min(f.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}},{key:"_applyTopLeft",value:function(e){this._topLeft=e,this.getDomNode().style.left="".concat(this._topLeft.left,"px"),this.getDomNode().style.top="".concat(this._topLeft.top,"px")}}]),e}(),g_={};e(g_,"SuggestWidgetStatus",(function(){return b_}),(function(e){return b_=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),Bh=o("fTm33"),jp=o("cMLhM"),vd=o("dXCvL"),Jc=o("faA3E"),xd=o("feTbe"),$c=o("efZ3W"),Oh=o("hm5an");var v_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},m_=function(e,t){return function(n,i){t(n,i,e)}},y_=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return(0,zi.default)((0,Wi.default)(n.prototype),"updateLabel",this).call(this);this.label&&(this.label.textContent=(0,Jc.localize)("ddd","{0} ({1})",this._action.label,n.symbolPrintEnter(e)))}}],[{key:"symbolPrintEnter",value:function(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"")}}]),n}(ng.MenuEntryActionViewItem),b_=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._menuService=i,this._contextKeyService=r,this._menuDisposables=new(0,vd.DisposableStore),this.element=Bh.append(t,Bh.$(".suggest-status-bar"));var o=function(e){return e instanceof xd.MenuItemAction?n.createInstance(y_,e,void 0):void 0};this._leftActions=new(0,jp.ActionBar)(this.element,{actionViewItemProvider:o}),this._rightActions=new(0,jp.ActionBar)(this.element,{actionViewItemProvider:o}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}return(0,c.default)(e,[{key:"dispose",value:function(){this._menuDisposables.dispose(),this.element.remove()}},{key:"show",value:function(){var e=this,t=this._menuService.createMenu(Ay.suggestWidgetStatusbarMenu,this._contextKeyService);this._menuDisposables.add(t.onDidChange((function(){return function(){var n,i,r=[],o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t.getActions()[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=(0,Ki.default)(u.value,2),h=d[0],f=d[1];"left"===h?(n=r).push.apply(n,(0,qi.default)(f)):(i=o).push.apply(i,(0,qi.default)(f))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}e._leftActions.clear(),e._leftActions.push(r),e._rightActions.clear(),e._rightActions.push(o)}()}))),this._menuDisposables.add(t)}},{key:"hide",value:function(){this._menuDisposables.clear()}}]),e}();b_=v_([m_(1,Oh.IInstantiationService),m_(2,xd.IMenuService),m_(3,$c.IContextKeyService)],b_);var __={};e(__,"getAriaId",(function(){return R_}),(function(e){return R_=e})),e(__,"ItemRenderer",(function(){return M_}),(function(e){return M_=e}));u=o("4JAgF"),c=o("9HoHC"),qi=o("caN7I"),Jc=o("faA3E"),Ry=o("3cgwy"),vd=o("dXCvL"),Bh=o("fTm33"),Cd=o("4ET02"),kp=o("8Eens"),lh=o("chpjt");var w_,k_,C_=o("kveS3"),x_=(Op=o("knZKL"),mf=o("L9zbH"),o("8THsA"));function S_(e,t,n,i){var r=i===w_.ROOT_FOLDER?["rootfolder-icon"]:i===w_.FOLDER?["folder-icon"]:["file-icon"];if(n){var o;if(n.scheme===Op.Schemas.data)o=mf.DataUri.parseMetaData(n).get(mf.DataUri.META_DATA_LABEL);else o=E_((0,mf.basenameOrAuthority)(n).toLowerCase());if(i===w_.FOLDER)r.push("".concat(o,"-name-folder-icon"));else{if(o){if(r.push("".concat(o,"-name-file-icon")),o.length<=255)for(var a=o.split("."),s=1;s<a.length;s++)r.push("".concat(a.slice(s).join("."),"-ext-file-icon"));r.push("ext-file-icon")}var l=function(e,t,n){if(!n)return null;var i=null;if(n.scheme===Op.Schemas.data){var r=mf.DataUri.parseMetaData(n).get(mf.DataUri.META_DATA_MIME);r&&(i=t.getModeId(r))}else{var o=e.getModel(n);o&&(i=o.getModeId())}return i&&i!==x_.PLAINTEXT_MODE_ID?i:t.getModeIdByFilepathOrFirstLine(n)}(e,t,n);l&&r.push("".concat(E_(l),"-lang-file-icon"))}}return r}function E_(e){return e.replace(/[\11\12\14\15\40]/g,"/")}(k_=w_||(w_={}))[k_.FILE=0]="FILE",k_[k_.FOLDER=1]="FOLDER",k_[k_.ROOT_FOLDER=2]="ROOT_FOLDER";uh=o("gPDld"),ah=o("iPPVB"),oh=o("2ZBuK"),Qh=o("8bO6F"),$h=o("neTVg");var D_,A_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},I_=function(e,t){return function(n,i){t(n,i,e)}};function R_(e){return"suggest-aria-id:".concat(e)}var T_=(0,(cv=o("9uoQH")).registerIcon)("suggest-more-info",Qh.Codicon.chevronRight,Jc.localize("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),L_=new((D_=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"extract",value:function(t,n){if(t.textLabel.match(e._regexStrict))return n[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return n[0]=t.completion.detail,!0;if("string"==typeof t.completion.documentation){var i=e._regexRelaxed.exec(t.completion.documentation);if(i&&(0===i.index||i.index+i[0].length===t.completion.documentation.length))return n[0]=i[0],!0}return!1}}]),e}())._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,D_._regexStrict=new RegExp("^".concat(D_._regexRelaxed.source,"$"),"i"),D_),M_=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._editor=t,this._modelService=n,this._modeService=i,this._themeService=r,this._onDidToggleDetails=new(0,$h.Emitter),this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}return(0,c.default)(e,[{key:"dispose",value:function(){this._onDidToggleDetails.dispose()}},{key:"renderTemplate",value:function(e){var t=this,n=Object.create(null);n.disposables=new(0,vd.DisposableStore),n.root=e,n.root.classList.add("show-file-icons"),n.icon=(0,Bh.append)(e,(0,Bh.$)(".icon")),n.colorspan=(0,Bh.append)(n.icon,(0,Bh.$)("span.colorspan"));var i=(0,Bh.append)(e,(0,Bh.$)(".contents")),r=(0,Bh.append)(i,(0,Bh.$)(".main"));n.iconContainer=(0,Bh.append)(r,(0,Bh.$)(".icon-label.codicon")),n.left=(0,Bh.append)(r,(0,Bh.$)("span.left")),n.right=(0,Bh.append)(r,(0,Bh.$)("span.right")),n.iconLabel=new(0,C_.IconLabel)(n.left,{supportHighlights:!0,supportIcons:!0}),n.disposables.add(n.iconLabel),n.parametersLabel=(0,Bh.append)(n.left,(0,Bh.$)("span.signature-label")),n.qualifierLabel=(0,Bh.append)(n.left,(0,Bh.$)("span.qualifier-label")),n.detailsLabel=(0,Bh.append)(n.right,(0,Bh.$)("span.details-label")),n.readMore=(0,Bh.append)(n.right,(0,Bh.$)("span.readMore"+Cd.ThemeIcon.asCSSSelector(T_))),n.readMore.title=Jc.localize("readMore","Read More");var o=function(){var e=t._editor.getOptions(),i=e.get(42),o=i.fontFamily,a=i.fontFeatureSettings,s=e.get(107)||i.fontSize,l=e.get(108)||i.lineHeight,u=i.fontWeight,c="".concat(s,"px"),d="".concat(l,"px");n.root.style.fontSize=c,n.root.style.fontWeight=u,r.style.fontFamily=o,r.style.fontFeatureSettings=a,r.style.lineHeight=d,n.icon.style.height=d,n.icon.style.width=d,n.readMore.style.height=d,n.readMore.style.width=d};return o(),n.disposables.add(this._editor.onDidChangeConfiguration((function(e){(e.hasChanged(42)||e.hasChanged(107)||e.hasChanged(108))&&o()}))),n}},{key:"renderElement",value:function(e,t,n){var i=this,r=e.completion;n.root.id=R_(t),n.colorspan.style.backgroundColor="";var o={labelEscapeNewLines:!0,matches:(0,Ry.createMatches)(e.score)},a=[];if(19===r.kind&&L_.extract(e,a))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=a[0];else if(20===r.kind&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";var s=S_(this._modelService,this._modeService,ah.URI.from({scheme:"fake",path:e.textLabel}),w_.FILE),l=S_(this._modelService,this._modeService,ah.URI.from({scheme:"fake",path:r.detail}),w_.FILE);o.extraClasses=s.length>l.length?s:l}else if(23===r.kind&&this._themeService.getFileIconTheme().hasFolderIcons)n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=(0,oh.flatten)([S_(this._modelService,this._modeService,ah.URI.from({scheme:"fake",path:e.textLabel}),w_.FOLDER),S_(this._modelService,this._modeService,ah.URI.from({scheme:"fake",path:r.detail}),w_.FOLDER)]);else{var u;n.icon.className="icon hide",n.iconContainer.className="",(u=n.iconContainer.classList).add.apply(u,["suggest-icon"].concat((0,qi.default)((0,lh.completionKindToCssClass)(r.kind).split(" "))))}r.tags&&r.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),"string"==typeof r.label?(n.parametersLabel.textContent="",n.detailsLabel.textContent=N_(r.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=N_(r.label.detail||""),n.detailsLabel.textContent=N_(r.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(106).showInlineDetails?(0,Bh.show)(n.detailsLabel):(0,Bh.hide)(n.detailsLabel),(0,l_.canExpandCompletionItem)(e)?(n.right.classList.add("can-expand-details"),(0,Bh.show)(n.readMore),n.readMore.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},n.readMore.onclick=function(e){e.stopPropagation(),e.preventDefault(),i._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),(0,Bh.hide)(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}},{key:"disposeTemplate",value:function(e){e.disposables.dispose()}}]),e}();function N_(e){return e.replace(/\r\n|\r|\n/g,"")}M_=A_([I_(1,uh.IModelService),I_(2,kp.IModeService),I_(3,Cd.IThemeService)],M_);var P_=o("lrBDX"),O_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},F_=function(e,t){return function(n,i){t(n,i,e)}},B_=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},H_=(0,kd.registerColor)("editorSuggestWidget.background",{dark:kd.editorWidgetBackground,light:kd.editorWidgetBackground,hc:kd.editorWidgetBackground},Jc.localize("editorSuggestWidgetBackground","Background color of the suggest widget.")),j_=(0,kd.registerColor)("editorSuggestWidget.border",{dark:kd.editorWidgetBorder,light:kd.editorWidgetBorder,hc:kd.editorWidgetBorder},Jc.localize("editorSuggestWidgetBorder","Border color of the suggest widget.")),z_=(0,kd.registerColor)("editorSuggestWidget.foreground",{dark:kd.editorForeground,light:kd.editorForeground,hc:kd.editorForeground},Jc.localize("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),W_=(0,kd.registerColor)("editorSuggestWidget.selectedForeground",{dark:kd.quickInputListFocusForeground,light:kd.quickInputListFocusForeground,hc:kd.quickInputListFocusForeground},Jc.localize("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),U_=(0,kd.registerColor)("editorSuggestWidget.selectedIconForeground",{dark:kd.quickInputListFocusIconForeground,light:kd.quickInputListFocusIconForeground,hc:kd.quickInputListFocusIconForeground},Jc.localize("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),V_=(0,kd.registerColor)("editorSuggestWidget.selectedBackground",{dark:kd.quickInputListFocusBackground,light:kd.quickInputListFocusBackground,hc:kd.quickInputListFocusBackground},Jc.localize("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")),K_=(0,kd.registerColor)("editorSuggestWidget.highlightForeground",{dark:kd.listHighlightForeground,light:kd.listHighlightForeground,hc:kd.listHighlightForeground},Jc.localize("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),q_=(0,kd.registerColor)("editorSuggestWidget.focusHighlightForeground",{dark:kd.listFocusHighlightForeground,light:kd.listFocusHighlightForeground,hc:kd.listFocusHighlightForeground},Jc.localize("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),J_=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._service=t,this._key="suggestWidget.size/".concat(n.getEditorType(),"/").concat(n instanceof Wp.EmbeddedCodeEditorWidget)}return(0,c.default)(e,[{key:"restore",value:function(){var e,t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{var n=JSON.parse(t);if(Bh.Dimension.is(n))return Bh.Dimension.lift(n)}catch(e){}}},{key:"store",value:function(e){this._service.store(this._key,JSON.stringify(e),0,1)}},{key:"reset",value:function(){this._service.remove(this._key,0)}}]),e}(),X_=function(){"use strict";function e(t,n,i,r,o){var a=this;(0,u.default)(this,e),this.editor=t,this._storageService=n,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new(0,gd.TimeoutTimer),this._disposables=new(0,vd.DisposableStore),this._onDidSelect=new(0,$h.Emitter),this._onDidFocus=new(0,$h.Emitter),this._onDidHide=new(0,$h.Emitter),this._onDidShow=new(0,$h.Emitter),this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new(0,$h.Emitter),this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new u_,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new G_(this,t),this._persistedSize=new J_(n,t);var s,l=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,u.default)(this,e),this.persistedSize=t,this.currentSize=n,this.persistHeight=i,this.persistWidth=r};this._disposables.add(this.element.onDidWillResize((function(){a._contentWidget.lockPreference(),s=new l(a._persistedSize.restore(),a.element.size)}))),this._disposables.add(this.element.onDidResize((function(e){var t,n,i,r;if(a._resize(e.dimension.width,e.dimension.height),s&&(s.persistHeight=s.persistHeight||!!e.north||!!e.south,s.persistWidth=s.persistWidth||!!e.east||!!e.west),e.done){if(s){var o=a.getLayoutInfo(),l=o.itemHeight,u=o.defaultSize,c=Math.round(l/2),d=a.element.size,h=d.width,f=d.height;(!s.persistHeight||Math.abs(s.currentSize.height-f)<=c)&&(f=null!==(n=null===(t=s.persistedSize)||void 0===t?void 0:t.height)&&void 0!==n?n:u.height),(!s.persistWidth||Math.abs(s.currentSize.width-h)<=c)&&(h=null!==(r=null===(i=s.persistedSize)||void 0===i?void 0:i.width)&&void 0!==r?r:u.width),a._persistedSize.store(new Bh.Dimension(h,f))}a._contentWidget.unlockPreference(),s=void 0}}))),this._messageElement=Bh.append(this.element.domNode,Bh.$(".message")),this._listElement=Bh.append(this.element.domNode,Bh.$(".tree"));var c=o.createInstance(l_.SuggestDetailsWidget,this.editor);c.onDidClose(this.toggleDetails,this,this._disposables),this._details=new(0,l_.SuggestDetailsOverlay)(c,this.editor);var d=function(){return a.element.domNode.classList.toggle("no-icons",!a.editor.getOption(106).showIcons)};d();var h=o.createInstance(__.ItemRenderer,this.editor);this._disposables.add(h),this._disposables.add(h.onDidToggleDetails((function(){return a.toggleDetails()}))),this._list=new(0,a_.List)("SuggestWidget",this._listElement,{getHeight:function(e){return a.getLayoutInfo().itemHeight},getTemplateId:function(e){return"suggestion"}},[h],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,accessibilityProvider:{getRole:function(){return"option"},getAriaLabel:function(e){if(e.isResolved&&a._isDetailsVisible()){var t=e.completion,n=t.documentation,i=t.detail,r=nh.format("{0}{1}",i||"",n?"string"==typeof n?n:n.value:"");return Jc.localize("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",e.textLabel,r)}return e.textLabel},getWidgetAriaLabel:function(){return Jc.localize("suggest","Suggest")},getWidgetRole:function(){return"listbox"}}}),this._status=o.createInstance(g_.SuggestWidgetStatus,this.element.domNode);var f=function(){return a.element.domNode.classList.toggle("with-status-bar",a.editor.getOption(106).showStatusBar)};f(),this._disposables.add((0,s_.attachListStyler)(this._list,r,{listInactiveFocusBackground:V_,listInactiveFocusOutline:kd.activeContrastBorder})),this._disposables.add(r.onDidColorThemeChange((function(e){return a._onThemeChange(e)}))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown((function(e){return a._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onTap((function(e){return a._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onDidChangeSelection((function(e){return a._onListSelection(e)}))),this._disposables.add(this._list.onDidChangeFocus((function(e){return a._onListFocus(e)}))),this._disposables.add(this.editor.onDidChangeCursorSelection((function(){return a._onCursorSelectionChanged()}))),this._disposables.add(this.editor.onDidChangeConfiguration((function(e){e.hasChanged(106)&&(f(),d())}))),this._ctxSuggestWidgetVisible=Ay.Context.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=Ay.Context.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=Ay.Context.MultipleSuggestions.bindTo(i),this._disposables.add(Bh.addStandardDisposableListener(this._details.widget.domNode,"keydown",(function(e){a._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((function(e){return a._onEditorMouseDown(e)})))}return(0,c.default)(e,[{key:"dispose",value:function(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}},{key:"_onEditorMouseDown",value:function(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}},{key:"_onCursorSelectionChanged",value:function(){0!==this._state&&this._contentWidget.layout()}},{key:"_onListMouseDownOrTap",value:function(e){void 0!==e.element&&void 0!==e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}},{key:"_onListSelection",value:function(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}},{key:"_select",value:function(e,t){var n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}},{key:"_onThemeChange",value:function(e){var t=e.getColor(H_);t&&(this.element.domNode.style.backgroundColor=t.toString(),this._messageElement.style.backgroundColor=t.toString(),this._details.widget.domNode.style.backgroundColor=t.toString());var n=e.getColor(j_);n&&(this.element.domNode.style.borderColor=n.toString(),this._messageElement.style.borderColor=n.toString(),this._status.element.style.borderTopColor=n.toString(),this._details.widget.domNode.style.borderColor=n.toString(),this._detailsBorderColor=n.toString());var i=e.getColor(kd.focusBorder);i&&(this._detailsFocusBorderColor=i.toString()),this._details.widget.borderWidth="hc"===e.type?2:1}},{key:"_onListFocus",value:function(e){var t,i=this;if(!this._ignoreFocusEvents){if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),void this.editor.setAriaOptions({activeDescendant:void 0});if(this._completionModel){var r=e.elements[0],o=e.indexes[0];r!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=r,this._list.reveal(o),this._currentSuggestionDetails=(0,gd.createCancelablePromise)((function(e){return B_(i,void 0,void 0,n(l).mark((function t(){var i,o,a;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this,o=(0,gd.disposableTimeout)((function(){i._isDetailsVisible()&&i.showDetails(!0)}),250),e.onCancellationRequested((function(){return o.dispose()})),t.next=5,r.resolve(e);case 5:return a=t.sent,o.dispose(),t.abrupt("return",a);case 8:case"end":return t.stop()}}),t,this)})))})),this._currentSuggestionDetails.then((function(){o>=i._list.length||r!==i._list.element(o)||(i._ignoreFocusEvents=!0,i._list.splice(o,1,[r]),i._list.setFocus([o]),i._ignoreFocusEvents=!1,i._isDetailsVisible()?i.showDetails(!1):i.element.domNode.classList.remove("docs-side"),i.editor.setAriaOptions({activeDescendant:(0,__.getAriaId)(o)}))})).catch(Yc.onUnexpectedError)),this._onDidFocus.fire({item:r,index:o,model:this._completionModel})}}}},{key:"_setState",value:function(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",4===t),this.element.domNode.classList.remove("message"),t){case 0:Bh.hide(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.LOADING_MESSAGE,Bh.hide(this._listElement,this._status.element),Bh.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,Bh.hide(this._listElement,this._status.element),Bh.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:Bh.hide(this._messageElement),Bh.show(this._listElement,this._status.element),this._show();break;case 5:Bh.hide(this._messageElement),Bh.show(this._listElement,this._status.element),this._details.show(),this._show()}}},{key:"_show",value:function(){var e=this;this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((function(){e.element.domNode.classList.add("visible"),e._onDidShow.fire(e)}),100)}},{key:"showTriggered",value:function(e,t){var n=this;0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,gd.disposableTimeout)((function(){return n._setState(1)}),t)))}},{key:"showSuggestions",value:function(e,t,n,i){var r,o;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(r=this._loadingTimeout)||void 0===r||r.dispose(),null===(o=this._currentSuggestionDetails)||void 0===o||o.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&2!==this._state&&0!==this._state)this._setState(4);else{var a=this._completionModel.items.length,s=0===a;if(this._ctxSuggestWidgetMultipleSuggestions.set(a>1),s)return this._setState(i?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus([t]),this._layout(this.element.size),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)}}},{key:"selectNextPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}},{key:"selectNext",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}},{key:"selectLast",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}},{key:"selectPreviousPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}},{key:"selectPrevious",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}},{key:"selectFirst",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}},{key:"getFocusedItem",value:function(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}},{key:"toggleDetailsFocus",value:function(){5===this._state?(this._setState(3),this._detailsBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsBorderColor)):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._detailsFocusBorderColor&&(this._details.widget.domNode.style.borderColor=this._detailsFocusBorderColor))}},{key:"toggleDetails",value:function(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!(0,l_.canExpandCompletionItem)(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}},{key:"showDetails",value:function(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}},{key:"toggleExplainMode",value:function(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}},{key:"resetPersistedSize",value:function(){this._persistedSize.reset()}},{key:"hideWidget",value:function(){var e;null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();var t=this._persistedSize.restore(),n=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<n&&this._persistedSize.store(t.with(void 0,n))}},{key:"isFrozen",value:function(){return 4===this._state}},{key:"_afterRender",value:function(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}},{key:"_layout",value:function(e){var t,n,i;if(this.editor.hasModel()&&this.editor.getDomNode()){var r=Bh.getClientArea(document.body),o=this.getLayoutInfo();e||(e=o.defaultSize);var a=e.height,s=e.width;if(this._status.element.style.lineHeight="".concat(o.itemHeight,"px"),2===this._state||1===this._state)a=o.itemHeight+o.borderHeight,s=o.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Bh.Dimension(s,a),this._contentWidget.setPreference(2);else{var l=r.width-o.borderHeight-2*o.horizontalPadding;s>l&&(s=l);var u=this._completionModel?this._completionModel.stats.pLabelLen*o.typicalHalfwidthCharacterWidth:s,c=o.statusBarHeight+this._list.contentHeight+o.borderHeight,d=o.itemHeight+o.statusBarHeight,h=Bh.getDomNodePagePosition(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=h.top+f.top+f.height,g=Math.min(r.height-p-o.verticalPadding,c),v=h.top+f.top-o.verticalPadding,m=Math.min(v,c),y=Math.min(Math.max(m,g)+o.borderHeight,c);a===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(a=this._cappedHeight.wanted),a<d&&(a=d),a>y&&(a=y);a>g||this._forceRenderingAbove&&v>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),y=m):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),y=g),this.element.preferredSize=new Bh.Dimension(u,o.defaultSize.height),this.element.maxSize=new Bh.Dimension(l,y),this.element.minSize=new Bh.Dimension(220,d),this._cappedHeight=a===c?{wanted:null!==(i=null===(n=this._cappedHeight)||void 0===n?void 0:n.wanted)&&void 0!==i?i:e.height,capped:a}:void 0}this._resize(s,a)}}},{key:"_resize",value:function(e,t){var n=this.element.maxSize,i=n.width,r=n.height;e=Math.min(i,e),t=Math.min(r,t);var o=this.getLayoutInfo().statusBarHeight;this._list.layout(t-o,e),this._listElement.style.height="".concat(t-o,"px"),this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}},{key:"_positionDetails",value:function(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode)}},{key:"getLayoutInfo",value:function(){var e=this.editor.getOption(42),t=(0,P_.clamp)(this.editor.getOption(108)||e.lineHeight,8,1e3),n=this.editor.getOption(106).showStatusBar&&2!==this._state&&1!==this._state?t:0,i=this._details.widget.borderWidth,r=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:r,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Bh.Dimension(430,n+12*t+r)}}},{key:"_isDetailsVisible",value:function(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}},{key:"_setDetailsVisible",value:function(e){this._storageService.store("expandSuggestionDocs",e,0,0)}},{key:"forceRenderingAbove",value:function(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}},{key:"stopForceRenderingAbove",value:function(){this._forceRenderingAbove=!1}}]),e}();X_.LOADING_MESSAGE=Jc.localize("suggestWidget.loading","Loading..."),X_.NO_SUGGESTIONS_MESSAGE=Jc.localize("suggestWidget.noSuggestions","No suggestions."),X_=O_([F_(1,Qf.IStorageService),F_(2,$c.IContextKeyService),F_(3,Cd.IThemeService),F_(4,Oh.IInstantiationService)],X_);var G_=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._widget=t,this._editor=n,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}return(0,c.default)(e,[{key:"dispose",value:function(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}},{key:"getId",value:function(){return"editor.widget.suggestWidget"}},{key:"getDomNode",value:function(){return this._widget.element.domNode}},{key:"show",value:function(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}},{key:"hide",value:function(){this._hidden||(this._hidden=!0,this.layout())}},{key:"layout",value:function(){this._editor.layoutContentWidget(this)}},{key:"getPosition",value:function(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}},{key:"beforeRender",value:function(){var e=this._widget.element.size,t=e.height,n=e.width,i=this._widget.getLayoutInfo(),r=i.borderWidth,o=i.horizontalPadding;return new Bh.Dimension(n+2*r+o,t+2*r)}},{key:"afterRender",value:function(e){this._widget._afterRender(e)}},{key:"setPreference",value:function(e){this._preferenceLocked||(this._preference=e)}},{key:"lockPreference",value:function(){this._preferenceLocked=!0}},{key:"unlockPreference",value:function(){this._preferenceLocked=!1}},{key:"setPosition",value:function(e){this._position=e}}]),e}();(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(K_);n&&t.addRule(".monaco-editor .suggest-widget .monaco-list .monaco-list-row .monaco-highlighted-label .highlight { color: ".concat(n,"; }"));var i=e.getColor(q_);n&&t.addRule(".monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .monaco-highlighted-label .highlight { color: ".concat(i,"; }"));var r=e.getColor(z_);r&&t.addRule(".monaco-editor .suggest-widget, .monaco-editor .suggest-details { color: ".concat(r,"; }"));var o=e.getColor(W_);o&&t.addRule(".monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused { color: ".concat(o,"; }"));var a=e.getColor(U_);a&&t.addRule(".monaco-editor .suggest-widget .monaco-list .monaco-list-row.focused .codicon { color: ".concat(a,"; }"));var s=e.getColor(kd.textLinkForeground);s&&t.addRule(".monaco-editor .suggest-details a { color: ".concat(s,"; }"));var l=e.getColor(kd.textLinkActiveForeground);l&&t.addRule(".monaco-editor .suggest-details a:hover { color: ".concat(l,"; }"));var u=e.getColor(kd.textCodeBlockBackground);u&&t.addRule(".monaco-editor .suggest-details code { background-color: ".concat(u,"; }"))}));var Z_={};e(Z_,"WordContextKey",(function(){return Q_}),(function(e){return Q_=e}));u=o("4JAgF"),c=o("9HoHC"),$c=o("efZ3W");var $_=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Y_=function(e,t){return function(n,i){t(n,i,e)}},Q_=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._editor=t,this._enabled=!1,this._ckAtEnd=e.AtEnd.bindTo(n),this._configListener=this._editor.onDidChangeConfiguration((function(e){return e.hasChanged(111)&&i._update()})),this._update()}return(0,c.default)(e,[{key:"dispose",value:function(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}},{key:"_update",value:function(){var e=this,t="on"===this._editor.getOption(111);if(this._enabled!==t)if(this._enabled=t,this._enabled){var n=function(){if(e._editor.hasModel()){var t=e._editor.getModel(),n=e._editor.getSelection(),i=t.getWordAtPosition(n.getStartPosition());i?e._ckAtEnd.set(i.endColumn===n.getStartPosition().column):e._ckAtEnd.set(!1)}else e._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(n),n()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}}]),e}();Q_.AtEnd=new(0,$c.RawContextKey)("atEndOfWord",!1),Q_=$_([Y_(1,$c.IContextKeyService)],Q_);$h=o("neTVg"),gd=o("hJucn"),zf=o("jW8FZ"),u=o("4JAgF"),c=o("9HoHC"),oh=o("2ZBuK"),vd=o("dXCvL");var ew=o("5AAsZ"),tw=function(){"use strict";function e(t,n,i){var r=this;(0,u.default)(this,e),this._disposables=new(0,vd.DisposableStore),this._disposables.add(n.onDidShow((function(){return r._onItem(n.getFocusedItem())}))),this._disposables.add(n.onDidFocus(this._onItem,this)),this._disposables.add(n.onDidHide(this.reset,this)),this._disposables.add(t.onWillType((function(e){if(r._active&&!n.isFrozen()){var o=e.charCodeAt(e.length-1);r._active.acceptCharacters.has(o)&&t.getOption(0)&&i(r._active.item)}})))}return(0,c.default)(e,[{key:"_onItem",value:function(e){if(e&&(0,oh.isNonEmptyArray)(e.item.completion.commitCharacters)){if(!this._active||this._active.item.item!==e.item){var t=new(0,ew.CharacterSet),n=!0,i=!1,r=void 0;try{for(var o,a=e.item.completion.commitCharacters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.length>0&&t.add(s.charCodeAt(0))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._active={acceptCharacters:t,item:e}}}else this.reset()}},{key:"reset",value:function(){this._active=void 0}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}(),nw=(u=o("4JAgF"),c=o("9HoHC"),vd=o("dXCvL"),function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._disposables=new(0,vd.DisposableStore),this._lastOvertyped=[],this._empty=!0,this._disposables.add(t.onWillType((function(){if(i._empty&&t.hasModel()){for(var n=t.getSelections(),r=n.length,o=!1,a=0;a<r;a++)if(!n[a].isEmpty()){o=!0;break}if(o){i._lastOvertyped=[];for(var s=t.getModel(),l=0;l<r;l++){var u=n[l];if(s.getValueLengthInRange(u)>e._maxSelectionLength)return;i._lastOvertyped[l]={value:s.getValueInRange(u),multiline:u.startLineNumber!==u.endLineNumber}}i._empty=!1}}}))),this._disposables.add(n.onDidCancel((function(e){i._empty||e.retrigger||(i._empty=!0)})))}return(0,c.default)(e,[{key:"getLastOvertypedInfo",value:function(e){if(!this._empty&&e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}());nw._maxSelectionLength=51200;md=o("kBBF2"),Bd=o("5DBhW"),xd=o("feTbe"),eh=o("j6sHb"),qy=o("04xCG"),Ty=o("dwv6L");var iw=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},rw=function(e,t){return function(n,i){t(n,i,e)}},ow=function(){"use strict";function e(t,n){if((0,u.default)(this,e),this._model=t,this._position=n,t.getLineMaxColumn(n.lineNumber)!==n.column){var i=t.getOffsetAt(n),r=t.getPositionAt(i+1);this._marker=t.deltaDecorations([],[{range:yd.Range.fromPositions(n,r),options:{description:"suggest-line-suffix",stickiness:1}}])}}return(0,c.default)(e,[{key:"dispose",value:function(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}},{key:"delta",value:function(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){var t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}]),e}(),aw=function(){"use strict";function e(t,n,i,r,o,a){var s=this;(0,u.default)(this,e),this._memoryService=n,this._commandService=i,this._contextKeyService=r,this._instantiationService=o,this._logService=a,this._lineSuffix=new(0,vd.MutableDisposable),this._toDispose=new(0,vd.DisposableStore),this.editor=t,this.model=o.createInstance(hb.SuggestModel,this.editor);var l=Ay.Context.InsertMode.bindTo(r);l.set(t.getOption(106).insertMode),this.model.onDidTrigger((function(){return l.set(t.getOption(106).insertMode)})),this.widget=this._toDispose.add(new(0,gd.IdleValue)((function(){var e=s._instantiationService.createInstance(Eb.SuggestWidget,s.editor);s._toDispose.add(e),s._toDispose.add(e.onDidSelect((function(e){return s._insertSuggestion(e,0)}),s));var t=new tw(s.editor,e,(function(e){return s._insertSuggestion(e,2)}));s._toDispose.add(t),s._toDispose.add(s.model.onDidSuggest((function(e){0===e.completionModel.items.length&&t.reset()})));var n=Ay.Context.MakesTextEdit.bindTo(s._contextKeyService),i=Ay.Context.HasInsertAndReplaceRange.bindTo(s._contextKeyService),r=Ay.Context.CanResolve.bindTo(s._contextKeyService);return s._toDispose.add((0,vd.toDisposable)((function(){n.reset(),i.reset(),r.reset()}))),s._toDispose.add(e.onDidFocus((function(e){var t=e.item,o=s.editor.getPosition(),a=t.editStart.column,l=o.column,u=!0;"smart"!==s.editor.getOption(1)||2!==s.model.state||t.completion.command||t.completion.additionalTextEdits||4&t.completion.insertTextRules||l-a!==t.completion.insertText.length||(u=s.editor.getModel().getValueInRange({startLineNumber:o.lineNumber,startColumn:a,endLineNumber:o.lineNumber,endColumn:l})!==t.completion.insertText);n.set(u),i.set(!md.Position.equals(t.editInsertEnd,t.editReplaceEnd)),r.set(Boolean(t.provider.resolveCompletionItem)||Boolean(t.completion.documentation)||t.completion.detail!==t.completion.label)}))),s._toDispose.add(e.onDetailsKeyDown((function(e){e.toKeybinding().equals(new(0,Zc.SimpleKeybinding)(!0,!1,!1,!1,33))||Bd.isMacintosh&&e.toKeybinding().equals(new(0,Zc.SimpleKeybinding)(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeybinding().isModifierKey()||s.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new(0,gd.IdleValue)((function(){return s._toDispose.add(new nw(s.editor,s.model))}))),this._alternatives=this._toDispose.add(new(0,gd.IdleValue)((function(){return s._toDispose.add(new(0,lb.SuggestAlternatives)(s.editor,s._contextKeyService))}))),this._toDispose.add(o.createInstance(Z_.WordContextKey,t)),this._toDispose.add(this.model.onDidTrigger((function(e){s.widget.value.showTriggered(e.auto,e.shy?250:50),s._lineSuffix.value=new ow(s.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((function(e){if(!e.shy){var t=s._memoryService.select(s.editor.getModel(),s.editor.getPosition(),e.completionModel.items);s.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.auto)}}))),this._toDispose.add(this.model.onDidCancel((function(e){e.retrigger||s.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((function(){s.model.cancel(),s.model.clear()})));var c=Ay.Context.AcceptSuggestionsOnEnter.bindTo(r),d=function(){var e=s.editor.getOption(1);c.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((function(){return d()}))),d()}return(0,c.default)(e,[{key:"dispose",value:function(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}},{key:"_insertSuggestion",value:function(e,t){var n=this;if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(this.editor.hasModel()){var i=this.editor.getModel(),r=i.getAlternativeVersionId(),o=e.item,a=[],s=new(0,eh.CancellationTokenSource);1&t||this.editor.pushUndoStop();var l=this.getOverwriteInfo(o,Boolean(8&t));if(this._memoryService.memorize(i,this.editor.getPosition(),o),Array.isArray(o.completion.additionalTextEdits)){var u=sh.StableEditorScrollState.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",o.completion.additionalTextEdits.map((function(e){return xm.EditOperation.replace(yd.Range.lift(e.range),e.text)}))),u.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!o.isResolved){var c,d=new(0,Ty.StopWatch)(!0),h=i.onDidChangeContent((function(e){if(e.isFlush)return s.cancel(),void h.dispose();var t=!0,n=!1,i=void 0;try{for(var r,o=e.changes[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,l=yd.Range.getEndPosition(a.range);c&&!md.Position.isBefore(l,c)||(c=l)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}})),f=t;t|=2;var p=!1,g=this.editor.onWillType((function(){g.dispose(),p=!0,2&f||n.editor.pushUndoStop()}));a.push(o.resolve(s.token).then((function(){if(!o.completion.additionalTextEdits||s.token.isCancellationRequested)return!1;if(c&&o.completion.additionalTextEdits.some((function(e){return md.Position.isBefore(c,yd.Range.getStartPosition(e.range))})))return!1;p&&n.editor.pushUndoStop();var e=sh.StableEditorScrollState.capture(n.editor);return n.editor.executeEdits("suggestController.additionalTextEdits.async",o.completion.additionalTextEdits.map((function(e){return xm.EditOperation.replace(yd.Range.lift(e.range),e.text)}))),e.restoreRelativeVerticalPositionOfCursor(n.editor),!p&&2&f||n.editor.pushUndoStop(),!0})).then((function(e){n._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",d.elapsed(),e),h.dispose(),g.dispose()})))}var v=o.completion.insertText;if(4&o.completion.insertTextRules||(v=ry.escape(v)),Dy.SnippetController2.get(this.editor).insert(v,{overwriteBefore:l.overwriteBefore,overwriteAfter:l.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&o.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),o.completion.command)if(o.completion.command.id===sw.id)this.model.trigger({auto:!0,shy:!1},!0);else{var m;a.push((m=this._commandService).executeCommand.apply(m,[o.completion.command.id].concat((0,qi.default)(o.completion.command.arguments?(0,qi.default)(o.completion.command.arguments):[]))).catch(Yc.onUnexpectedError)),this.model.cancel()}else this.model.cancel();4&t&&this._alternatives.value.set(e,(function(e){for(s.cancel();i.canUndo();){r!==i.getAlternativeVersionId()&&i.undo(),n._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(o),Promise.all(a).finally((function(){n.model.clear(),s.dispose()}))}}},{key:"getOverwriteInfo",value:function(e,t){(0,zf.assertType)(this.editor.hasModel());var n="replace"===this.editor.getOption(106).insertMode;t&&(n=!n);var i=e.position.column-e.editStart.column,r=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:i+(this.editor.getPosition().column-e.position.column),overwriteAfter:r+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}},{key:"_alertCompletionItem",value:function(e){if((0,oh.isNonEmptyArray)(e.completion.additionalTextEdits)){var t=Jc.localize("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,od.alert)(t)}}},{key:"triggerSuggest",value:function(e){this.editor.hasModel()&&(this.model.trigger({auto:!1,shy:!1},!1,e),this.editor.revealLine(this.editor.getPosition().lineNumber,0),this.editor.focus())}},{key:"triggerSuggestAndAcceptBest",value:function(e){var t=this;if(this.editor.hasModel()){var n=this.editor.getPosition(),i=function(){n.equals(t.editor.getPosition())&&t._commandService.executeCommand(e.fallback)};$h.Event.once(this.model.onDidTrigger)((function(e){var n=[];$h.Event.any(t.model.onDidTrigger,t.model.onDidCancel)((function(){(0,vd.dispose)(n),i()}),void 0,n),t.model.onDidSuggest((function(e){var r=e.completionModel;if((0,vd.dispose)(n),0!==r.items.length){var o=t._memoryService.select(t.editor.getModel(),t.editor.getPosition(),r.items),a=r.items[o];!function(e){if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;var n=t.editor.getPosition(),i=e.editStart.column,r=n.column;return r-i!==e.completion.insertText.length||t.editor.getModel().getValueInRange({startLineNumber:n.lineNumber,startColumn:i,endLineNumber:n.lineNumber,endColumn:r})!==e.completion.insertText}(a)?i():(t.editor.pushUndoStop(),t._insertSuggestion({index:o,item:a,model:r},7))}else i()}),void 0,n)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealLine(n.lineNumber,0),this.editor.focus()}}},{key:"acceptSelectedSuggestion",value:function(e,t){var n=this.widget.value.getFocusedItem(),i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}},{key:"acceptNextSuggestion",value:function(){this._alternatives.value.next()}},{key:"acceptPrevSuggestion",value:function(){this._alternatives.value.prev()}},{key:"cancelSuggestWidget",value:function(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}},{key:"selectNextSuggestion",value:function(){this.widget.value.selectNext()}},{key:"selectNextPageSuggestion",value:function(){this.widget.value.selectNextPage()}},{key:"selectLastSuggestion",value:function(){this.widget.value.selectLast()}},{key:"selectPrevSuggestion",value:function(){this.widget.value.selectPrevious()}},{key:"selectPrevPageSuggestion",value:function(){this.widget.value.selectPreviousPage()}},{key:"selectFirstSuggestion",value:function(){this.widget.value.selectFirst()}},{key:"toggleSuggestionDetails",value:function(){this.widget.value.toggleDetails()}},{key:"toggleExplainMode",value:function(){this.widget.value.toggleExplainMode()}},{key:"toggleSuggestionFocus",value:function(){this.widget.value.toggleDetailsFocus()}},{key:"resetWidgetSize",value:function(){this.widget.value.resetPersistedSize()}},{key:"forceRenderingAbove",value:function(){this.widget.value.forceRenderingAbove()}},{key:"stopForceRenderingAbove",value:function(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();aw.ID="editor.contrib.suggestController",aw=iw([rw(1,Yy.ISuggestMemoryService),rw(2,vh.ICommandService),rw(3,$c.IContextKeyService),rw(4,Oh.IInstantiationService),rw(5,qy.ILogService)],aw);var sw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.id,label:Jc.localize("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasCompletionItemProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=aw.get(t);n&&n.triggerSuggest()}}]),n}(qc.EditorAction);sw.id="editor.action.triggerSuggest",(0,qc.registerEditorContribution)(aw.ID,aw),(0,qc.registerEditorAction)(sw);var lw=190,uw=qc.EditorCommand.bindToContribution(aw.get);(0,qc.registerEditorCommand)(new uw({id:"acceptSelectedSuggestion",precondition:Ay.Context.Visible,handler:function(e){e.acceptSelectedSuggestion(!0,!1)}})),sb.KeybindingsRegistry.registerKeybindingRule({id:"acceptSelectedSuggestion",when:$c.ContextKeyExpr.and(Ay.Context.Visible,Xc.EditorContextKeys.textInputFocus),primary:2,weight:lw}),sb.KeybindingsRegistry.registerKeybindingRule({id:"acceptSelectedSuggestion",when:$c.ContextKeyExpr.and(Ay.Context.Visible,Xc.EditorContextKeys.textInputFocus,Ay.Context.AcceptSuggestionsOnEnter,Ay.Context.MakesTextEdit),primary:3,weight:lw}),xd.MenuRegistry.appendMenuItem(Ay.suggestWidgetStatusbarMenu,{command:{id:"acceptSelectedSuggestion",title:Jc.localize("accept.insert","Insert")},group:"left",order:1,when:Ay.Context.HasInsertAndReplaceRange.toNegated()}),xd.MenuRegistry.appendMenuItem(Ay.suggestWidgetStatusbarMenu,{command:{id:"acceptSelectedSuggestion",title:Jc.localize("accept.insert","Insert")},group:"left",order:1,when:$c.ContextKeyExpr.and(Ay.Context.HasInsertAndReplaceRange,Ay.Context.InsertMode.isEqualTo("insert"))}),xd.MenuRegistry.appendMenuItem(Ay.suggestWidgetStatusbarMenu,{command:{id:"acceptSelectedSuggestion",title:Jc.localize("accept.replace","Replace")},group:"left",order:1,when:$c.ContextKeyExpr.and(Ay.Context.HasInsertAndReplaceRange,Ay.Context.InsertMode.isEqualTo("replace"))}),(0,qc.registerEditorCommand)(new uw({id:"acceptAlternativeSelectedSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Xc.EditorContextKeys.textInputFocus),kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:1027,secondary:[1026]},handler:function(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Ay.suggestWidgetStatusbarMenu,group:"left",order:2,when:$c.ContextKeyExpr.and(Ay.Context.HasInsertAndReplaceRange,Ay.Context.InsertMode.isEqualTo("insert")),title:Jc.localize("accept.replace","Replace")},{menuId:Ay.suggestWidgetStatusbarMenu,group:"left",order:2,when:$c.ContextKeyExpr.and(Ay.Context.HasInsertAndReplaceRange,Ay.Context.InsertMode.isEqualTo("replace")),title:Jc.localize("accept.insert","Insert")}]})),vh.CommandsRegistry.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,qc.registerEditorCommand)(new uw({id:"hideSuggestWidget",precondition:Ay.Context.Visible,handler:function(e){return e.cancelSuggestWidget()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})),(0,qc.registerEditorCommand)(new uw({id:"selectNextSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Ay.Context.MultipleSuggestions),handler:function(e){return e.selectNextSuggestion()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,qc.registerEditorCommand)(new uw({id:"selectNextPageSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Ay.Context.MultipleSuggestions),handler:function(e){return e.selectNextPageSuggestion()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:12,secondary:[2060]}})),(0,qc.registerEditorCommand)(new uw({id:"selectLastSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Ay.Context.MultipleSuggestions),handler:function(e){return e.selectLastSuggestion()}})),(0,qc.registerEditorCommand)(new uw({id:"selectPrevSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Ay.Context.MultipleSuggestions),handler:function(e){return e.selectPrevSuggestion()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,qc.registerEditorCommand)(new uw({id:"selectPrevPageSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Ay.Context.MultipleSuggestions),handler:function(e){return e.selectPrevPageSuggestion()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:11,secondary:[2059]}})),(0,qc.registerEditorCommand)(new uw({id:"selectFirstSuggestion",precondition:$c.ContextKeyExpr.and(Ay.Context.Visible,Ay.Context.MultipleSuggestions),handler:function(e){return e.selectFirstSuggestion()}})),(0,qc.registerEditorCommand)(new uw({id:"toggleSuggestionDetails",precondition:Ay.Context.Visible,handler:function(e){return e.toggleSuggestionDetails()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2058,mac:{primary:266}},menuOpts:[{menuId:Ay.suggestWidgetStatusbarMenu,group:"right",order:1,when:$c.ContextKeyExpr.and(Ay.Context.DetailsVisible,Ay.Context.CanResolve),title:Jc.localize("detail.more","show less")},{menuId:Ay.suggestWidgetStatusbarMenu,group:"right",order:1,when:$c.ContextKeyExpr.and(Ay.Context.DetailsVisible.toNegated(),Ay.Context.CanResolve),title:Jc.localize("detail.less","show more")}]})),(0,qc.registerEditorCommand)(new uw({id:"toggleExplainMode",precondition:Ay.Context.Visible,handler:function(e){return e.toggleExplainMode()},kbOpts:{weight:100,primary:2133}})),(0,qc.registerEditorCommand)(new uw({id:"toggleSuggestionFocus",precondition:Ay.Context.Visible,handler:function(e){return e.toggleSuggestionFocus()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2570,mac:{primary:778}}})),(0,qc.registerEditorCommand)(new uw({id:"insertBestCompletion",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,$c.ContextKeyExpr.equals("config.editor.tabCompletion","on"),Z_.WordContextKey.AtEnd,Ay.Context.Visible.toNegated(),lb.SuggestAlternatives.OtherSuggestions.toNegated(),Dy.SnippetController2.InSnippetMode.toNegated()),handler:function(e,t){e.triggerSuggestAndAcceptBest((0,zf.isObject)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:lw,primary:2}})),(0,qc.registerEditorCommand)(new uw({id:"insertNextSuggestion",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,$c.ContextKeyExpr.equals("config.editor.tabCompletion","on"),lb.SuggestAlternatives.OtherSuggestions,Ay.Context.Visible.toNegated(),Dy.SnippetController2.InSnippetMode.toNegated()),handler:function(e){return e.acceptNextSuggestion()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2}})),(0,qc.registerEditorCommand)(new uw({id:"insertPrevSuggestion",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,$c.ContextKeyExpr.equals("config.editor.tabCompletion","on"),lb.SuggestAlternatives.OtherSuggestions,Ay.Context.Visible.toNegated(),Dy.SnippetController2.InSnippetMode.toNegated()),handler:function(e){return e.acceptPrevSuggestion()},kbOpts:{weight:lw,kbExpr:Xc.EditorContextKeys.textInputFocus,primary:1026}})),(0,qc.registerEditorAction)(function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.resetSuggestSize",label:Jc.localize("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){aw.get(t).resetWidgetSize()}}]),n}(qc.EditorAction));var cw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;(0,u.default)(this,n),(i=t.call(this)).editor=e,i.isSuggestWidgetVisible=!1,i.isShiftKeyPressed=!1,i._isActive=!1,i._currentInlineCompletion=void 0,i.onDidChangeEmitter=new(0,$h.Emitter),i.onDidChange=i.onDidChangeEmitter.event,i.setInactiveDelayed=i._register(new(0,gd.RunOnceScheduler)((function(){i.isSuggestWidgetVisible||i._isActive&&(i._isActive=!1,i.onDidChangeEmitter.fire())}),100)),i._register(e.onKeyDown((function(e){e.shiftKey&&!i.isShiftKeyPressed&&(i.isShiftKeyPressed=!0,i.update(i._isActive))}))),i._register(e.onKeyUp((function(e){e.shiftKey&&i.isShiftKeyPressed&&(i.isShiftKeyPressed=!1,i.update(i._isActive))})));var r=Ey.SuggestController.get(i.editor);if(r){var o=!1;i._register($h.Event.once(r.model.onDidTrigger)((function(e){o||(o=!0,i._register(r.widget.value.onDidShow((function(){i.isSuggestWidgetVisible=!0,i.update(!0)}))),i._register(r.widget.value.onDidHide((function(){i.isSuggestWidgetVisible=!1,i.setInactiveDelayed.schedule(),i.update(i._isActive)}))),i._register(r.widget.value.onDidFocus((function(){i.isSuggestWidgetVisible=!0,i.update(!0)}))))})))}return i.update(i._isActive),i}return(0,c.default)(n,[{key:"state",get:function(){if(this._isActive)return{selectedItemAsInlineCompletion:this._currentInlineCompletion}}},{key:"update",value:function(e){var t=this.getInlineCompletion(),n=!1;this._currentInlineCompletion!==t&&(this._currentInlineCompletion=t,n=!0),this._isActive!==e&&(this._isActive=e,n=!0),n&&this.onDidChangeEmitter.fire()}},{key:"getInlineCompletion",value:function(){var e=Ey.SuggestController.get(this.editor);if(e&&this.isSuggestWidgetVisible){var t=e.widget.value.getFocusedItem();if(t)return function(e,t,n,i){var r=n.item;if(Array.isArray(r.completion.additionalTextEdits)&&r.completion.additionalTextEdits.length>0)return{text:"",range:yd.Range.fromPositions(t,t)};var o=r.completion.insertText;if(4&r.completion.insertTextRules){var a=(new ry).parse(o),s=e.editor.getModel();Sy.adjustWhitespace(s,t,a,!0,!0),o=a.toString()}var l=e.getOverwriteInfo(r,i);return{text:o,range:yd.Range.fromPositions(t.delta(0,-l.overwriteBefore),t.delta(0,Math.max(l.overwriteAfter,0)))}}(e,this.editor.getPosition(),t,this.isShiftKeyPressed)}}},{key:"stopForceRenderingAbove",value:function(){var e=Ey.SuggestController.get(this.editor);e&&e.stopForceRenderingAbove()}},{key:"forceRenderingAbove",value:function(){var e=Ey.SuggestController.get(this.editor);e&&e.forceRenderingAbove()}}]),n}(vd.Disposable);var dw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},hw=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this,e)).cache=n,r.suggestionInlineCompletionSource=r._register(new cw(r.editor)),r.updateOperation=r._register(new(0,vd.MutableDisposable)),r.updateCacheSoon=r._register(new(0,gd.RunOnceScheduler)((function(){return r.updateCache()}),50)),r.minReservedLineCount=0,r._register(r.suggestionInlineCompletionSource.onDidChange((function(){r.updateCacheSoon.schedule(),r.suggestionInlineCompletionSource.state||(r.minReservedLineCount=0);var e=r.ghostText;e&&(r.minReservedLineCount=Math.max(r.minReservedLineCount,e.parts.map((function(e){return e.lines.length-1})).reduce((function(e,t){return e+t}),0))),r.minReservedLineCount>=1&&r.isSuggestionPreviewEnabled()?r.suggestionInlineCompletionSource.forceRenderingAbove():r.suggestionInlineCompletionSource.stopForceRenderingAbove(),r.onDidChangeEmitter.fire()}))),r._register(r.cache.onDidChange((function(){r.onDidChangeEmitter.fire()}))),r._register(r.editor.onDidChangeCursorPosition((function(e){r.isSuggestionPreviewEnabled()&&(r.minReservedLineCount=0,r.updateCacheSoon.schedule(),r.onDidChangeEmitter.fire())}))),r._register((0,vd.toDisposable)((function(){return r.suggestionInlineCompletionSource.stopForceRenderingAbove()}))),r}return(0,c.default)(i,[{key:"isActive",get:function(){return void 0!==this.suggestionInlineCompletionSource.state}},{key:"isSuggestionPreviewEnabled",value:function(){return this.editor.getOption(106).preview}},{key:"updateCache",value:function(){return dw(this,void 0,void 0,n(l).mark((function e(){var t,i,r,o,a,s;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,(i=this.suggestionInlineCompletionSource.state)&&i.selectedItemAsInlineCompletion){e.next=4;break}return e.abrupt("return");case 4:return r={text:i.selectedItemAsInlineCompletion.text,range:i.selectedItemAsInlineCompletion.range},o=this.editor.getPosition(),a=(0,gd.createCancelablePromise)((function(e){return dw(t,void 0,void 0,n(l).mark((function t(){var i;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,(0,Cm.provideInlineCompletions)(o,this.editor.getModel(),{triggerKind:lh.InlineCompletionTriggerKind.Automatic,selectedSuggestionInfo:r},e);case 4:i=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),(0,Yc.onUnexpectedError)(t.t0),t.abrupt("return");case 11:if(!e.isCancellationRequested){t.next=13;break}return t.abrupt("return");case 13:this.cache.setValue(this.editor,i,lh.InlineCompletionTriggerKind.Automatic),this.onDidChangeEmitter.fire();case 15:case"end":return t.stop()}}),t,this,[[1,7]])})))})),s=new(0,Cm.UpdateOperation)(a,lh.InlineCompletionTriggerKind.Automatic),this.updateOperation.value=s,e.next=11,a;case 11:this.updateOperation.value===s&&this.updateOperation.clear();case 12:case"end":return e.stop()}}),e,this)})))}},{key:"ghostText",get:function(){var e,t,n,i,r=this,o=this.suggestionInlineCompletionSource.state,a=fw(this.editor.getModel(),null==o?void 0:o.selectedItemAsInlineCompletion),s=fw(this.editor.getModel(),null===(t=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()),l=s&&a&&s.text.startsWith(a.text)&&s.range.equalsRange(a.range)?s:a||s,u=a?((null==l?void 0:l.text.length)||0)-a.text.length:0,c=(n=l,i=r.editor.getOptions().get(106).previewMode,n?Tm(n,r.editor.getModel(),i,r.editor.getPosition(),u)||new Em(n.range.endLineNumber,[],r.minReservedLineCount):void 0);return this.isSuggestionPreviewEnabled()?c:void 0}}]),i}(Im);function fw(e,t){if(!t)return t;var n=e.getValueInRange(t.range),i=function(e,t){for(var n=0;n<e.length&&n<t.length&&e[n]===t[n];)n++;return n}(n,t.text),r=e.getOffsetAt(t.range.getStartPosition())+i,o=e.getPositionAt(r),a=function(e,t){for(var n=0;n<e.length&&n<t.length&&e[e.length-n-1]===t[t.length-n-1];)n++;return n}(n.substr(i),t.text),s=e.getPositionAt(Math.max(r,e.getOffsetAt(t.range.getEndPosition())-a));return{range:yd.Range.fromPositions(o,s),text:t.text.substr(i,t.text.length-i-a)}}vh=o("j9pk1"),$h=o("neTVg"),md=o("kBBF2");lh=o("chpjt");var pw=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},gw=function(e,t){return function(n,i){t(n,i,e)}},vw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},mw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).onDidChangeEmitter=new(0,$h.Emitter),e.onDidChange=e.onDidChangeEmitter.event,e.hasCachedGhostText=!1,e.currentModelRef=e._register(new(0,vd.MutableDisposable)),e}return(0,c.default)(n,[{key:"targetModel",get:function(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}},{key:"setTargetModel",value:function(e){var t,n,i,r=this;(null===(t=this.currentModelRef.value)||void 0===t?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?(n=e,i=e.onDidChange((function(){r.hasCachedGhostText=!1,r.onDidChangeEmitter.fire()})),{object:n,dispose:function(){return null==i?void 0:i.dispose()}}):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}},{key:"ghostText",get:function(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=null===(t=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===t?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}},{key:"setExpanded",value:function(e){var t;null===(t=this.targetModel)||void 0===t||t.setExpanded(e)}},{key:"minReservedLineCount",get:function(){return this.targetModel?this.targetModel.minReservedLineCount:0}}]),n}(vd.Disposable),yw=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this)).editor=e,r.commandService=n,r.sharedCache=r._register(new bw),r.suggestWidgetAdapterModel=r._register(new(0,Km.SuggestWidgetPreviewModel)(r.editor,r.sharedCache)),r.inlineCompletionsModel=r._register(new(0,Cm.InlineCompletionsModel)(r.editor,r.sharedCache,r.commandService)),r._register(r.suggestWidgetAdapterModel.onDidChange((function(){r.updateModel()}))),r.updateModel(),r}return(0,c.default)(i,[{key:"activeInlineCompletionsModel",get:function(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}},{key:"updateModel",value:function(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}},{key:"shouldShowHoverAt",value:function(e){var t,n=null===(t=this.activeInlineCompletionsModel)||void 0===t?void 0:t.ghostText;return!!n&&n.parts.some((function(t){return e.containsPosition(new(0,md.Position)(n.lineNumber,t.column))}))}},{key:"triggerInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger(lh.InlineCompletionTriggerKind.Explicit)}},{key:"commitInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}},{key:"hideInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}},{key:"showNextInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}},{key:"showPreviousInlineCompletion",value:function(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}},{key:"hasMultipleInlineCompletions",value:function(){var e;return vw(this,void 0,void 0,n(l).mark((function t(){var i;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.activeInlineCompletionsModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();case 2:return i=t.sent,t.abrupt("return",void 0!==i&&i);case 4:case"end":return t.stop()}}),t,this)})))}}]),i}(mw);yw=pw([gw(1,vh.ICommandService)],yw);var bw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call.apply(t,[this].concat(Array.prototype.slice.call(arguments)))).onDidChangeEmitter=new(0,$h.Emitter),e.onDidChange=e.onDidChangeEmitter.event,e.cache=e._register(new(0,vd.MutableDisposable)),e}return(0,c.default)(n,[{key:"value",get:function(){return this.cache.value}},{key:"setValue",value:function(e,t,n){var i=this;this.cache.value=new(0,Cm.SynchronizedInlineCompletionsCache)(e,t,(function(){return i.onDidChangeEmitter.fire()}),n)}},{key:"clearAndLeak",value:function(){return this.cache.clearAndLeak()}},{key:"clear",value:function(){this.cache.clear()}}]),n}(vd.Disposable),_w=(sb=o("8vTtk"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),ww=function(e,t){return function(n,i){t(n,i,e)}},kw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Cw=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this)).editor=e,r.instantiationService=n,r.triggeredExplicitly=!1,r.activeController=r._register(new(0,vd.MutableDisposable)),r._register(r.editor.onDidChangeModel((function(){r.updateModelController()}))),r._register(r.editor.onDidChangeConfiguration((function(e){e.hasChanged(106)&&r.updateModelController(),e.hasChanged(54)&&r.updateModelController()}))),r.updateModelController(),r}return(0,c.default)(i,[{key:"activeModel",get:function(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}},{key:"updateModelController",value:function(){var e=this.editor.getOption(106),t=this.editor.getOption(54);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(Sw,this.editor):void 0}},{key:"shouldShowHoverAt",value:function(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}},{key:"shouldShowHoverAtViewZone",value:function(e){var t,n;return(null===(n=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===n?void 0:n.shouldShowHoverAtViewZone(e))||!1}},{key:"trigger",value:function(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}},{key:"commit",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}},{key:"hide",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}},{key:"showNextInlineCompletion",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}},{key:"showPreviousInlineCompletion",value:function(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}},{key:"hasMultipleInlineCompletions",value:function(){var e;return kw(this,void 0,void 0,n(l).mark((function t(){var i;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();case 2:return i=t.sent,t.abrupt("return",void 0!==i&&i);case 4:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(vd.Disposable);Cw.inlineSuggestionVisible=new(0,$c.RawContextKey)("inlineSuggestionVisible",!1,Jc.localize("inlineSuggestionVisible","Whether an inline suggestion is visible")),Cw.inlineSuggestionHasIndentation=new(0,$c.RawContextKey)("inlineSuggestionHasIndentation",!1,Jc.localize("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),Cw.ID="editor.contrib.ghostTextController",Cw=_w([ww(1,Oh.IInstantiationService)],Cw);var xw=function e(t){"use strict";(0,u.default)(this,e),this.contextKeyService=t,this.inlineCompletionVisible=Cw.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Cw.inlineSuggestionHasIndentation.bindTo(this.contextKeyService)},Sw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).editor=e,o.instantiationService=i,o.contextKeyService=r,o.contextKeys=new xw(o.contextKeyService),o.model=o._register(o.instantiationService.createInstance(km.GhostTextModel,o.editor)),o.widget=o._register(o.instantiationService.createInstance(rm.GhostTextWidget,o.editor,o.model)),o._register((0,vd.toDisposable)((function(){o.contextKeys.inlineCompletionVisible.set(!1),o.contextKeys.inlineCompletionSuggestsIndentation.set(!1)}))),o._register(o.model.onDidChange((function(){o.updateContextKeys()}))),o.updateContextKeys(),o}return(0,c.default)(n,[{key:"updateContextKeys",value:function(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));var t=this.model.inlineCompletionsModel.ghostText;if(t&&t.parts.length>0){var n=t.parts[0],i=n.column,r=n.lines,o=r[0].startsWith(" ")||r[0].startsWith("\t"),a=i<=this.editor.getModel().getLineIndentColumn(t.lineNumber);this.contextKeys.inlineCompletionSuggestsIndentation.set(!!this.model.activeInlineCompletionsModel&&o&&a)}else this.contextKeys.inlineCompletionSuggestsIndentation.set(!1)}}]),n}(vd.Disposable);Sw=_w([ww(1,Oh.IInstantiationService),ww(2,$c.IContextKeyService)],Sw);var Ew=qc.EditorCommand.bindToContribution(Cw.get),Dw=new Ew({id:Nm,precondition:Cw.inlineSuggestionVisible,handler:function(e){e.commit(),e.editor.focus()}});(0,qc.registerEditorCommand)(Dw),sb.KeybindingsRegistry.registerKeybindingRule({primary:2,weight:200,id:Dw.id,when:$c.ContextKeyExpr.and(Dw.precondition,Xc.EditorContextKeys.tabMovesFocus.toNegated(),Cw.inlineSuggestionHasIndentation.toNegated())}),(0,qc.registerEditorCommand)(new Ew({id:"editor.action.inlineSuggest.hide",precondition:Cw.inlineSuggestionVisible,kbOpts:{weight:100,primary:9},handler:function(e){e.hide()}}));var Aw=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:i.ID,label:Jc.localize("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Cw.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return kw(this,void 0,void 0,n(l).mark((function e(){var i;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=Cw.get(t))&&(i.showNextInlineCompletion(),t.focus());case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction);Aw.ID="editor.action.inlineSuggest.showNext";var Iw=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:i.ID,label:Jc.localize("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Cw.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return kw(this,void 0,void 0,n(l).mark((function e(){var i;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=Cw.get(t))&&(i.showPreviousInlineCompletion(),t.focus());case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction);Iw.ID="editor.action.inlineSuggest.showPrevious";var Rw=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.inlineSuggest.trigger",label:Jc.localize("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(i,[{key:"run",value:function(e,t){return kw(this,void 0,void 0,n(l).mark((function e(){var i;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=Cw.get(t))&&i.trigger();case 2:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction);(0,qc.registerEditorContribution)(Cw.ID,Cw),(0,qc.registerEditorAction)(Rw),(0,qc.registerEditorAction)(Aw),(0,qc.registerEditorAction)(Iw);vh=o("j9pk1"),xd=o("feTbe"),$c=o("efZ3W"),Bh=o("fTm33"),kp=o("8Eens"),Lp=o("j1CnT"),Vp=o("eUW5n");var Tw=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Lw=function(e,t){return function(n,i){t(n,i,e)}},Mw=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.owner=t,this.range=n,this.controller=i}return(0,c.default)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}},{key:"hasMultipleSuggestions",value:function(){return this.controller.hasMultipleInlineCompletions()}}]),e}(),Nw=function(){"use strict";function e(t,n,i,r,o,a,s,l){(0,u.default)(this,e),this._editor=t,this._hover=n,this._commandService=i,this._menuService=r,this._contextKeyService=o,this._modeService=a,this._openerService=s,this.accessibilityService=l}return(0,c.default)(e,[{key:"suggestHoverAnchor",value:function(e){var t=im.GhostTextController.get(this._editor);if(!t)return null;if(8===e.target.type){var n=e.target.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new nm(1e3,this,yd.Range.fromPositions(n.positionBefore||n.position,n.positionBefore||n.position))}if(7===e.target.type&&e.target.range&&t.shouldShowHoverAt(e.target.range))return new nm(1e3,this,e.target.range);if(6===e.target.type&&e.target.range&&e.target.detail&&(e.target.detail.mightBeForeignElement&&t.shouldShowHoverAt(e.target.range)))return new nm(1e3,this,e.target.range);return null}},{key:"computeSync",value:function(e,t){var n=im.GhostTextController.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new Mw(this,e.range,n)]:[]}},{key:"renderHoverParts",value:function(e,t,n){var i=this,r=new(0,vd.DisposableStore),o=e[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(o,t,r);var a=r.add(this._menuService.createMenu(xd.MenuId.InlineCompletionsActions,this._contextKeyService)),s=n.addAction({label:Jc.localize("showNextInlineSuggestion","Next"),commandId:im.ShowNextInlineSuggestionAction.ID,run:function(){return i._commandService.executeCommand(im.ShowNextInlineSuggestionAction.ID)}}),l=n.addAction({label:Jc.localize("showPreviousInlineSuggestion","Previous"),commandId:im.ShowPreviousInlineSuggestionAction.ID,run:function(){return i._commandService.executeCommand(im.ShowPreviousInlineSuggestionAction.ID)}});n.addAction({label:Jc.localize("acceptInlineSuggestion","Accept"),commandId:im.commitInlineSuggestionAction.id,run:function(){return i._commandService.executeCommand(im.commitInlineSuggestionAction.id)}});var u=[s,l],c=!0,d=!1,h=void 0;try{for(var f,p=u[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){f.value.setEnabled(!1)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}o.hasMultipleSuggestions().then((function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=u[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){r.value.setEnabled(e)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}));var g=!0,v=!1,m=void 0;try{for(var y,b=a.getActions()[Symbol.iterator]();!(g=(y=b.next()).done);g=!0){var _=(0,Ki.default)(y.value,2),w=(_[0],_[1]),k=!0,C=!1,x=void 0;try{for(var S,E=function(e,t){var r=t.value;r instanceof xd.MenuItemAction&&n.addAction({label:r.label,commandId:r.item.id,run:function(){return i._commandService.executeCommand(r.item.id)}})},D=w[Symbol.iterator]();!(k=(S=D.next()).done);k=!0)E(0,S)}catch(e){C=!0,x=e}finally{try{k||null==D.return||D.return()}finally{if(C)throw x}}}}catch(e){v=!0,m=e}finally{try{g||null==b.return||b.return()}finally{if(v)throw m}}return r}},{key:"renderScreenReaderText",value:function(e,t,n){var i,r,o=this,a=Bh.$,s=a("div.hover-row.markdown-hover"),l=Bh.append(s,a("div.hover-contents")),u=n.add(new(0,Iv.MarkdownRenderer)({editor:this._editor},this._modeService,this._openerService)),c=null===(r=null===(i=e.controller.activeModel)||void 0===i?void 0:i.inlineCompletionsModel)||void 0===r?void 0:r.ghostText;if(c){var d=this._editor.getModel().getLineContent(c.lineNumber);!function(e){n.add(u.onDidRenderAsync((function(){l.className="hover-contents code-hover-contents",o._hover.onContentsChanged()})));var t=Jc.localize("inlineSuggestionFollows","Suggestion:"),i=n.add(u.render((new ed).appendText(t).appendCodeblock("text",e)));l.replaceChildren(i.element)}(c.renderForScreenReader(d))}t.appendChild(s)}}]),e}();Nw=Tw([Lw(2,vh.ICommandService),Lw(3,xd.IMenuService),Lw(4,$c.IContextKeyService),Lw(5,kp.IModeService),Lw(6,Lp.IOpenerService),Lw(7,Vp.IAccessibilityService)],Nw);var Pw={};e(Pw,"ColorHoverParticipant",(function(){return Gw}),(function(e){return Gw=e}));u=o("4JAgF"),c=o("9HoHC"),qi=o("caN7I"),l=o("1JCPQ"),vd=o("dXCvL"),yd=o("5MJfC"),eh=o("j6sHb"),pp=o("8ta7j"),u=o("4JAgF"),c=o("9HoHC"),$h=o("neTVg");var Ow=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.presentationIndex=i,this._onColorFlushed=new(0,$h.Emitter),this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new(0,$h.Emitter),this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new(0,$h.Emitter),this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=t,this._color=t,this._colorPresentations=n}return(0,c.default)(e,[{key:"color",get:function(){return this._color},set:function(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}},{key:"presentation",get:function(){return this.colorPresentations[this.presentationIndex]}},{key:"colorPresentations",get:function(){return this._colorPresentations},set:function(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}},{key:"selectNextColorPresentation",value:function(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}},{key:"guessColorPresentation",value:function(e,t){for(var n=0;n<this.colorPresentations.length;n++)if(t.toLowerCase()===this.colorPresentations[n].label){this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation);break}}},{key:"flushColor",value:function(){this._onColorFlushed.fire(this._color)}}]),e}(),Fw=(Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Fd=o("dqfPV"),Bh=o("fTm33"),Zh=o("fPAzb"),Sp=o("c9lKY"),pp=o("8ta7j"),$h=o("neTVg"),vd=o("dXCvL"),kd=o("ht8QC"),Cd=o("4ET02"),Bh.$),Bw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;(0,u.default)(this,n),(o=t.call(this)).model=i,o.domNode=Fw(".colorpicker-header"),Bh.append(e,o.domNode),o.pickedColorNode=Bh.append(o.domNode,Fw(".picked-color"));var a=Bh.append(o.domNode,Fw(".original-color"));return a.style.backgroundColor=pp.Color.Format.CSS.format(o.model.originalColor)||"",o.backgroundColor=r.getColorTheme().getColor(kd.editorHoverBackground)||pp.Color.white,o._register((0,Cd.registerThemingParticipant)((function(e,t){o.backgroundColor=e.getColor(kd.editorHoverBackground)||pp.Color.white}))),o._register(Bh.addDisposableListener(o.pickedColorNode,Bh.EventType.CLICK,(function(){return o.model.selectNextColorPresentation()}))),o._register(Bh.addDisposableListener(a,Bh.EventType.CLICK,(function(){o.model.color=o.model.originalColor,o.model.flushColor()}))),o._register(i.onDidChangeColor(o.onDidChangeColor,(0,Hi.default)(o))),o._register(i.onDidChangePresentation(o.onDidChangePresentation,(0,Hi.default)(o))),o.pickedColorNode.style.backgroundColor=pp.Color.Format.CSS.format(i.color)||"",o.pickedColorNode.classList.toggle("light",i.color.rgba.a<.5?o.backgroundColor.isLighter():i.color.isLighter()),o}return(0,c.default)(n,[{key:"onDidChangeColor",value:function(e){this.pickedColorNode.style.backgroundColor=pp.Color.Format.CSS.format(e)||"",this.pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}},{key:"onDidChangePresentation",value:function(){this.pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:""}}]),n}(vd.Disposable),Hw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).model=i,o.pixelRatio=r,o.domNode=Fw(".colorpicker-body"),Bh.append(e,o.domNode),o.saturationBox=new jw(o.domNode,o.model,o.pixelRatio),o._register(o.saturationBox),o._register(o.saturationBox.onDidChange(o.onDidSaturationValueChange,(0,Hi.default)(o))),o._register(o.saturationBox.onColorFlushed(o.flushColor,(0,Hi.default)(o))),o.opacityStrip=new Ww(o.domNode,o.model),o._register(o.opacityStrip),o._register(o.opacityStrip.onDidChange(o.onDidOpacityChange,(0,Hi.default)(o))),o._register(o.opacityStrip.onColorFlushed(o.flushColor,(0,Hi.default)(o))),o.hueStrip=new Uw(o.domNode,o.model),o._register(o.hueStrip),o._register(o.hueStrip.onDidChange(o.onDidHueChange,(0,Hi.default)(o))),o._register(o.hueStrip.onColorFlushed(o.flushColor,(0,Hi.default)(o))),o}return(0,c.default)(n,[{key:"flushColor",value:function(){this.model.flushColor()}},{key:"onDidSaturationValueChange",value:function(e){var t=e.s,n=e.v,i=this.model.color.hsva;this.model.color=new(0,pp.Color)(new(0,pp.HSVA)(i.h,t,n,i.a))}},{key:"onDidOpacityChange",value:function(e){var t=this.model.color.hsva;this.model.color=new(0,pp.Color)(new(0,pp.HSVA)(t.h,t.s,t.v,e))}},{key:"onDidHueChange",value:function(e){var t=this.model.color.hsva,n=360*(1-e);this.model.color=new(0,pp.Color)(new(0,pp.HSVA)(360===n?0:n,t.s,t.v,t.a))}},{key:"layout",value:function(){this.saturationBox.layout(),this.opacityStrip.layout(),this.hueStrip.layout()}}]),n}(vd.Disposable),jw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).model=i,o.pixelRatio=r,o._onDidChange=new(0,$h.Emitter),o.onDidChange=o._onDidChange.event,o._onColorFlushed=new(0,$h.Emitter),o.onColorFlushed=o._onColorFlushed.event,o.domNode=Fw(".saturation-wrap"),Bh.append(e,o.domNode),o.canvas=document.createElement("canvas"),o.canvas.className="saturation-box",Bh.append(o.domNode,o.canvas),o.selection=Fw(".saturation-selection"),Bh.append(o.domNode,o.selection),o.layout(),o._register(Bh.addDisposableGenericMouseDownListner(o.domNode,(function(e){return o.onMouseDown(e)}))),o._register(o.model.onDidChangeColor(o.onDidChangeColor,(0,Hi.default)(o))),o.monitor=null,o}return(0,c.default)(n,[{key:"onMouseDown",value:function(e){var t=this;this.monitor=this._register(new(0,Zh.GlobalMouseMoveMonitor));var n=Bh.getDomNodePagePosition(this.domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.buttons,Zh.standardMouseMoveMerger,(function(e){return t.onDidChangePosition(e.posx-n.left,e.posy-n.top)}),(function(){return null}));var i=Bh.addDisposableGenericMouseUpListner(document,(function(){t._onColorFlushed.fire(),i.dispose(),t.monitor&&(t.monitor.stopMonitoring(!0),t.monitor=null)}),!0)}},{key:"onDidChangePosition",value:function(e,t){var n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}},{key:"layout",value:function(){this.width=this.domNode.offsetWidth,this.height=this.domNode.offsetHeight,this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.paint();var e=this.model.color.hsva;this.paintSelection(e.s,e.v)}},{key:"paint",value:function(){var e=this.model.color.hsva,t=new(0,pp.Color)(new(0,pp.HSVA)(e.h,1,1,1)),n=this.canvas.getContext("2d"),i=n.createLinearGradient(0,0,this.canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");var r=n.createLinearGradient(0,0,0,this.canvas.height);r.addColorStop(0,"rgba(0, 0, 0, 0)"),r.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this.canvas.width,this.canvas.height),n.fillStyle=pp.Color.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=r,n.fill()}},{key:"paintSelection",value:function(e,t){this.selection.style.left="".concat(e*this.width,"px"),this.selection.style.top="".concat(this.height-t*this.height,"px")}},{key:"onDidChangeColor",value:function(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}]),n}(vd.Disposable),zw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this)).model=i,r._onDidChange=new(0,$h.Emitter),r.onDidChange=r._onDidChange.event,r._onColorFlushed=new(0,$h.Emitter),r.onColorFlushed=r._onColorFlushed.event,r.domNode=Bh.append(e,Fw(".strip")),r.overlay=Bh.append(r.domNode,Fw(".overlay")),r.slider=Bh.append(r.domNode,Fw(".slider")),r.slider.style.top="0px",r._register(Bh.addDisposableGenericMouseDownListner(r.domNode,(function(e){return r.onMouseDown(e)}))),r.layout(),r}return(0,c.default)(n,[{key:"layout",value:function(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;var e=this.getValue(this.model.color);this.updateSliderPosition(e)}},{key:"onMouseDown",value:function(e){var t=this,n=this._register(new(0,Zh.GlobalMouseMoveMonitor)),i=Bh.getDomNodePagePosition(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),n.startMonitoring(e.target,e.buttons,Zh.standardMouseMoveMerger,(function(e){return t.onDidChangeTop(e.posy-i.top)}),(function(){return null}));var r=Bh.addDisposableGenericMouseUpListner(document,(function(){t._onColorFlushed.fire(),r.dispose(),n.stopMonitoring(!0),t.domNode.classList.remove("grabbing")}),!0)}},{key:"onDidChangeTop",value:function(e){var t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}},{key:"updateSliderPosition",value:function(e){this.slider.style.top="".concat((1-e)*this.height,"px")}}]),n}(vd.Disposable),Ww=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,e,i)).domNode.classList.add("opacity-strip"),r._register(i.onDidChangeColor(r.onDidChangeColor,(0,Hi.default)(r))),r.onDidChangeColor(r.model.color),r}return(0,c.default)(n,[{key:"onDidChangeColor",value:function(e){var t=e.rgba,n=t.r,i=t.g,r=t.b,o=new(0,pp.Color)(new(0,pp.RGBA)(n,i,r,1)),a=new(0,pp.Color)(new(0,pp.RGBA)(n,i,r,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(o," 0%, ").concat(a," 100%)")}},{key:"getValue",value:function(e){return e.hsva.a}}]),n}(zw),Uw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,e,i)).domNode.classList.add("hue-strip"),r}return(0,c.default)(n,[{key:"getValue",value:function(e){return 1-e.hsva.h/360}}]),n}(zw),Vw=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;(0,u.default)(this,n),(a=t.call(this)).model=i,a.pixelRatio=r,a._register((0,Fd.onDidChangeZoomLevel)((function(){return a.layout()})));var s=Fw(".colorpicker-widget");e.appendChild(s);var l=new Bw(s,a.model,o);return a.body=new Hw(s,a.model,a.pixelRatio),a._register(l),a._register(a.body),a}return(0,c.default)(n,[{key:"layout",value:function(){this.body.layout()}}]),n}(Sp.Widget),Kw=(Cd=o("4ET02"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),qw=function(e,t){return function(n,i){t(n,i,e)}},Jw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Xw=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.owner=t,this.range=n,this.model=i,this.provider=r,this.forceShowAtRange=!0}return(0,c.default)(e,[{key:"isValidForHoverAnchor",value:function(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}]),e}(),Gw=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._editor=t,this._hover=n,this._themeService=i}return(0,c.default)(e,[{key:"computeSync",value:function(e,t){return[]}},{key:"computeAsync",value:function(e,t,i){return Jw(this,void 0,void 0,n(l).mark((function e(){var i,r,o,a,s,u,c,d,h;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._editor.hasModel()){e.next=2;break}return e.abrupt("return",[]);case 2:i=fp.ColorDetector.get(this._editor),r=!0,o=!1,a=void 0,e.prev=4,s=t[Symbol.iterator]();case 6:if(r=(u=s.next()).done){e.next=17;break}if(c=u.value,!(d=i.getColorData(c.range.getStartPosition()))){e.next=14;break}return e.next=12,this._createColorHover(this._editor.getModel(),d.colorInfo,d.provider);case 12:return h=e.sent,e.abrupt("return",[h]);case 14:r=!0,e.next=6;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(4),o=!0,a=e.t0;case 23:e.prev=23,e.prev=24,r||null==s.return||s.return();case 26:if(e.prev=26,!o){e.next=29;break}throw a;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return e.abrupt("return",[]);case 32:case"end":return e.stop()}}),e,this,[[4,19,23,31],[24,,26,30]])})))}},{key:"_createColorHover",value:function(e,t,i){return Jw(this,void 0,void 0,n(l).mark((function r(){var o,a,s,u,c,d,h,f,p,g;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.getValueInRange(t.range),a=t.color,s=a.red,u=a.green,c=a.blue,d=a.alpha,h=new(0,pp.RGBA)(Math.round(255*s),Math.round(255*u),Math.round(255*c),d),f=new(0,pp.Color)(h),n.next=6,vp(e,t,i,eh.CancellationToken.None);case 6:return p=n.sent,(g=new Ow(f,[],0)).colorPresentations=p||[],g.guessColorPresentation(f,o),n.abrupt("return",new Xw(this,yd.Range.lift(t.range),g,i));case 11:case"end":return n.stop()}}),r,this)})))}},{key:"renderHoverParts",value:function(e,t,n){var i=this;if(0===e.length||!this._editor.hasModel())return vd.Disposable.None;var r=new(0,vd.DisposableStore),o=e[0],a=this._editor.getModel(),s=o.model,l=r.add(new Vw(t,s,this._editor.getOption(128),this._themeService)),u=new(0,yd.Range)(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn),c=function(){var e,t;if(s.presentation.textEdit){e=[s.presentation.textEdit],t=new(0,yd.Range)(s.presentation.textEdit.range.startLineNumber,s.presentation.textEdit.range.startColumn,s.presentation.textEdit.range.endLineNumber,s.presentation.textEdit.range.endColumn);var n=i._editor.getModel()._setTrackedRange(null,t,3);i._editor.pushUndoStop(),i._editor.executeEdits("colorpicker",e),t=i._editor.getModel()._getTrackedRange(n)||t}else e=[{identifier:null,range:u,text:s.presentation.label,forceMoveMarkers:!1}],t=u.setEndPosition(u.endLineNumber,u.startColumn+s.presentation.label.length),i._editor.pushUndoStop(),i._editor.executeEdits("colorpicker",e);s.presentation.additionalTextEdits&&(e=(0,qi.default)(s.presentation.additionalTextEdits),i._editor.executeEdits("colorpicker",e),i._hover.hide()),i._editor.pushUndoStop(),u=t},d=function(e){return vp(a,{range:u,color:{red:e.rgba.r/255,green:e.rgba.g/255,blue:e.rgba.b/255,alpha:e.rgba.a}},o.provider,eh.CancellationToken.None).then((function(e){s.colorPresentations=e||[]}))};return r.add(s.onColorFlushed((function(e){d(e).then(c)}))),r.add(s.onDidChangeColor(d)),this._hover.setColorPicker(l),r}}]),e}();Gw=Kw([qw(2,Cd.IThemeService)],Gw);zh=o("5H40S");var Zw=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$w=function(e,t){return function(n,i){t(n,i,e)}},Yw=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Qw=Bh.$,ek=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._keybindingService=e,i._hasContent=!1,i.hoverElement=Qw("div.hover-row.status-bar"),i.actionsElement=Bh.append(i.hoverElement,Qw("div.actions")),i}return(0,c.default)(n,[{key:"hasContent",get:function(){return this._hasContent}},{key:"addAction",value:function(e){var t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;return this._hasContent=!0,this._register(Ip.render(this.actionsElement,e,n))}},{key:"append",value:function(e){var t=Bh.append(this.actionsElement,e);return this._hasContent=!0,t}}]),n}(vd.Disposable);ek=Zw([$w(0,zh.IKeybindingService)],ek);var tk=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._participants=n,this._editor=t,this._result=[],this._anchor=null}return(0,c.default)(e,[{key:"setAnchor",value:function(e){this._anchor=e,this._result=[]}},{key:"clearResult",value:function(){this._result=[]}},{key:"computeAsync",value:function(t){return Yw(this,void 0,void 0,n(l).mark((function i(){var r,o,a,s;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this,o=this._anchor,this._editor.hasModel()&&o){n.next=4;break}return n.abrupt("return",Promise.resolve([]));case 4:return a=e._getLineDecorations(this._editor,o),n.next=7,Promise.all(this._participants.map((function(e){return r._computeAsync(e,a,o,t)})));case 7:return s=n.sent,n.abrupt("return",(0,oh.flatten)(s));case 9:case"end":return n.stop()}}),i,this)})))}},{key:"_computeAsync",value:function(e,t,i,r){return Yw(this,void 0,void 0,n(l).mark((function o(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.computeAsync){n.next=2;break}return n.abrupt("return",[]);case 2:return n.abrupt("return",e.computeAsync(i,t,r));case 3:case"end":return n.stop()}}),o)})))}},{key:"computeSync",value:function(){if(!this._editor.hasModel()||!this._anchor)return[];var t=e._getLineDecorations(this._editor,this._anchor),n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._participants[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;n=n.concat(l.computeSync(this._anchor,t))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return(0,oh.coalesce)(n)}},{key:"onResult",value:function(e,t){this._result=t?e.concat(this._result):this._result.concat(e)}},{key:"getResult",value:function(){return this._result.slice(0)}},{key:"getResultWithLoadingMessage",value:function(){if(this._anchor){var e=!0,t=!1,n=void 0;try{for(var i,r=this._participants[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(o.createLoadingMessage){var a=o.createLoadingMessage(this._anchor);if(a)return this._result.slice(0).concat([a])}}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}return this._result.slice(0)}}],[{key:"_getLineDecorations",value:function(e,t){if(1!==t.type)return[];var n=e.getModel(),i=t.range.startLineNumber,r=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter((function(e){if(e.options.isWholeLine)return!0;var n=e.range.startLineNumber===i?e.range.startColumn:1,o=e.range.endLineNumber===i?e.range.endColumn:r;return!(n>t.range.startColumn||t.range.endColumn>o)}))}}]),e}(),nk=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this))._hoverVisibleKey=i,a._keybindingService=o,a.allowEditorOverflow=!0,a._participants=[r.createInstance(Pw.ColorHoverParticipant,e,(0,Hi.default)(a)),r.createInstance(Av.MarkdownHoverParticipant,e,(0,Hi.default)(a)),r.createInstance(em.InlineCompletionsHoverParticipant,e,(0,Hi.default)(a)),r.createInstance(Rp.MarkerHoverParticipant,e,(0,Hi.default)(a))],a._hover=a._register(new Ap),a._id=n.ID,a._editor=e,a._isVisible=!1,a._stoleFocus=!1,a._renderDisposable=null,a.onkeydown(a._hover.containerDomNode,(function(e){e.equals(9)&&a.hide()})),a._register(a._editor.onDidChangeConfiguration((function(e){e.hasChanged(42)&&a._updateFont()}))),a._editor.onDidLayoutChange((function(){return a.layout()})),a.layout(),a._editor.addContentWidget((0,Hi.default)(a)),a._showAtPosition=null,a._showAtRange=null,a._stoleFocus=!1,a._messages=[],a._lastAnchor=null,a._computer=new tk(a._editor,a._participants),a._highlightDecorations=[],a._isChangingDecorations=!1,a._shouldFocus=!1,a._colorPicker=null,a._hoverOperation=new xp(a._computer,(function(e){return a._withResult(e,!0)}),null,(function(e){return a._withResult(e,!1)}),a._editor.getOption(52).delay),a._register(Bh.addStandardDisposableListener(a.getDomNode(),Bh.EventType.FOCUS,(function(){a._colorPicker&&a.getDomNode().classList.add("colorpicker-hover")}))),a._register(Bh.addStandardDisposableListener(a.getDomNode(),Bh.EventType.BLUR,(function(){a.getDomNode().classList.remove("colorpicker-hover")}))),a._register(e.onDidChangeConfiguration((function(){a._hoverOperation.setHoverTime(a._editor.getOption(52).delay)}))),a._register(lh.TokenizationRegistry.onDidChange((function(){a._isVisible&&a._lastAnchor&&a._messages.length>0&&(a._hover.contentsDomNode.textContent="",a._renderMessages(a._lastAnchor,a._messages))}))),a}return(0,c.default)(n,[{key:"dispose",value:function(){this._hoverOperation.cancel(),this._editor.removeContentWidget(this),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._hover.containerDomNode}},{key:"_shouldShowAt",value:function(e){var t=e.target.type;if(6===t)return!0;if(7===t){var n=this._editor.getOption(42).typicalHalfwidthCharacterWidth/2,i=e.target.detail;if(i&&!i.isAfterLines&&"number"==typeof i.horizontalDistanceToText&&i.horizontalDistanceToText<n)return!0}return!1}},{key:"maybeShowAt",value:function(e){var t,n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._participants[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if("function"==typeof l.suggestHoverAnchor){var u=l.suggestHoverAnchor(e);u&&n.push(u)}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}if(this._shouldShowAt(e)&&e.target.range){var c=(0,qi.default)((null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]).find((function(e){return e.startsWith("ced-colorBox")}))&&e.target.range.endColumn-e.target.range.startColumn==1?new(0,yd.Range)(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1):e.target.range;n.push(new tm(0,c))}return 0!==n.length&&(n.sort((function(e,t){return t.priority-e.priority})),this._startShowingAt(n[0],0,!1),!0)}},{key:"_showAt",value:function(e,t,n){this._showAtPosition=e,this._showAtRange=t,this._hoverVisibleKey.set(!0),this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._editor.render(),this._stoleFocus=n,n&&this._hover.containerDomNode.focus()}},{key:"getPosition",value:function(){return this._isVisible?{position:this._showAtPosition,range:this._showAtRange,preference:[1,2]}:null}},{key:"_updateFont",value:function(){var e=this;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"_updateContents",value:function(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont(),this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}},{key:"layout",value:function(){var e=Math.max(this._editor.getLayoutInfo().height/4,250),t=this._editor.getOption(42),n=t.fontSize,i=t.lineHeight;this._hover.contentsDomNode.style.fontSize="".concat(n,"px"),this._hover.contentsDomNode.style.lineHeight="".concat(i,"px"),this._hover.contentsDomNode.style.maxHeight="".concat(e,"px"),this._hover.contentsDomNode.style.maxWidth="".concat(Math.max(.66*this._editor.getLayoutInfo().width,500),"px")}},{key:"onModelDecorationsChanged",value:function(){this._isChangingDecorations||this._isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._colorPicker||this._hoverOperation.start(0))}},{key:"startShowingAtRange",value:function(e,t,n){this._startShowingAt(new tm(0,e),t,n)}},{key:"_startShowingAt",value:function(e,t,n){if(!this._lastAnchor||!this._lastAnchor.equals(e)){if(this._hoverOperation.cancel(),this._isVisible)if(this._showAtPosition&&this._lastAnchor&&e.canAdoptVisibleHover(this._lastAnchor,this._showAtPosition)){var i=this._messages.filter((function(t){return t.isValidForHoverAnchor(e)}));if(0===i.length)this.hide();else{if(i.length===this._messages.length)return;this._renderMessages(e,i)}}else this.hide();this._lastAnchor=e,this._computer.setAnchor(e),this._shouldFocus=n,this._hoverOperation.start(t)}}},{key:"hide",value:function(){var e=this;this._lastAnchor=null,this._hoverOperation.cancel(),this._isVisible&&(setTimeout((function(){e._isVisible||e._hoverVisibleKey.set(!1)}),0),this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._editor.layoutContentWidget(this),this._stoleFocus&&this._editor.focus()),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,[]),this._isChangingDecorations=!1,this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null}},{key:"isColorPickerVisible",value:function(){return!!this._colorPicker}},{key:"setColorPicker",value:function(e){this._colorPicker=e}},{key:"onContentsChanged",value:function(){this._hover.onContentsChanged()}},{key:"_withResult",value:function(e,t){this._messages=e,this._lastAnchor&&this._messages.length>0?this._renderMessages(this._lastAnchor,this._messages):t&&this.hide()}},{key:"_renderMessages",value:function(e,t){this._renderDisposable&&(this._renderDisposable.dispose(),this._renderDisposable=null),this._colorPicker=null;var i=1073741824,r=t[0].range,o=null,a=document.createDocumentFragment(),s=new(0,vd.DisposableStore),l=new Map,u=!0,c=!1,d=void 0;try{for(var h,f=t[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;i=Math.min(i,p.range.startColumn),r=yd.Range.plusRange(r,p.range),p.forceShowAtRange&&(o=p.range),l.has(p.owner)||l.set(p.owner,[]),l.get(p.owner).push(p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var g=s.add(new ek(this._keybindingService)),v=!0,m=!1,y=void 0;try{for(var b,_=l[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=(0,Ki.default)(b.value,2),k=w[0],C=w[1];s.add(k.renderHoverParts(C,a,g))}}catch(e){m=!0,y=e}finally{try{v||null==_.return||_.return()}finally{if(m)throw y}}g.hasContent&&a.appendChild(g.hoverElement),this._renderDisposable=s,a.hasChildNodes()&&(o?this._showAt(o.getStartPosition(),o,this._shouldFocus):this._showAt(new(0,md.Position)(e.range.startLineNumber,i),r,this._shouldFocus),this._updateContents(a)),this._colorPicker&&this._colorPicker.layout(),this._isChangingDecorations=!0,this._highlightDecorations=this._editor.deltaDecorations(this._highlightDecorations,r?[{range:r,options:n._DECORATION_OPTIONS}]:[]),this._isChangingDecorations=!1}}]),n}(Sp.Widget);nk.ID="editor.contrib.modesContentHoverWidget",nk._DECORATION_OPTIONS=_d.ModelDecorationOptions.register({description:"content-hover-highlight",className:"hoverHighlight"}),nk=Zw([$w(2,Oh.IInstantiationService),$w(3,zh.IKeybindingService)],nk);u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),Bh=o("fTm33"),vd=o("dXCvL"),Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp");var ik=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this))._id=e,r._editor=i,r._isVisible=!1,r._domNode=document.createElement("div"),r._domNode.className="monaco-hover hidden",r._domNode.setAttribute("aria-hidden","true"),r._domNode.setAttribute("role","tooltip"),r._showAtLineNumber=-1,r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(42)&&r.updateFont()}))),r._editor.addOverlayWidget((0,Hi.default)(r)),r}return(0,c.default)(n,[{key:"isVisible",get:function(){return this._isVisible},set:function(e){this._isVisible=e,this._domNode.classList.toggle("hidden",!this._isVisible)}},{key:"getId",value:function(){return this._id}},{key:"getDomNode",value:function(){return this._domNode}},{key:"showAt",value:function(e){this._showAtLineNumber=e,this.isVisible||(this.isVisible=!0);var t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(this._showAtLineNumber),i=this._editor.getScrollTop(),r=this._editor.getOption(58),o=n-i-(this._domNode.clientHeight-r)/2;this._domNode.style.left="".concat(t.glyphMarginLeft+t.glyphMarginWidth,"px"),this._domNode.style.top="".concat(Math.max(Math.round(o),0),"px")}},{key:"hide",value:function(){this.isVisible&&(this.isVisible=!1)}},{key:"getPosition",value:function(){return null}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"updateFont",value:function(){var e=this,t=Array.prototype.slice.call(this._domNode.getElementsByTagName("code")),n=Array.prototype.slice.call(this._domNode.getElementsByClassName("code"));(0,qi.default)(t).concat((0,qi.default)(n)).forEach((function(t){return e._editor.applyFontInfo(t)}))}},{key:"updateContents",value:function(e){this._domNode.textContent="",this._domNode.appendChild(e),this.updateFont()}}]),n}((Sp=o("c9lKY")).Widget),rk=(Lp=o("j1CnT"),oh=o("2ZBuK"),function(){"use strict";function e(t){(0,u.default)(this,e),this._editor=t,this._lineNumber=-1,this._result=[]}return(0,c.default)(e,[{key:"setLineNumber",value:function(e){this._lineNumber=e,this._result=[]}},{key:"clearResult",value:function(){this._result=[]}},{key:"computeSync",value:function(){var e=function(e){return{value:e}},t=this._editor.getLineDecorations(this._lineNumber),n=[];if(!t)return n;var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l,u=a.value;if(u.options.glyphMarginClassName){var c=u.options.glyphMarginHoverMessage;c&&!td(c)&&(l=n).push.apply(l,(0,qi.default)((0,oh.asArray)(c).map(e)))}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"onResult",value:function(e,t){this._result=this._result.concat(e)}},{key:"getResult",value:function(){return this._result}},{key:"getResultWithLoadingMessage",value:function(){return this.getResult()}}]),e}()),ok=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lp.NullOpenerService;return(0,u.default)(this,n),(r=t.call(this,n.ID,e))._renderDisposeables=r._register(new(0,vd.DisposableStore)),r._messages=[],r._lastLineNumber=-1,r._markdownRenderer=r._register(new(0,Iv.MarkdownRenderer)({editor:r._editor},i,o)),r._computer=new rk(r._editor),r._hoverOperation=new xp(r._computer,(function(e){return r._withResult(e)}),void 0,(function(e){return r._withResult(e)}),300),r}return(0,c.default)(n,[{key:"dispose",value:function(){this._hoverOperation.cancel(),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"onModelDecorationsChanged",value:function(){this.isVisible&&(this._hoverOperation.cancel(),this._computer.clearResult(),this._hoverOperation.start(0))}},{key:"startShowingAt",value:function(e){this._lastLineNumber!==e&&(this._hoverOperation.cancel(),this.hide(),this._lastLineNumber=e,this._computer.setLineNumber(e),this._hoverOperation.start(0))}},{key:"hide",value:function(){this._lastLineNumber=-1,this._hoverOperation.cancel(),(0,zi.default)((0,Wi.default)(n.prototype),"hide",this).call(this)}},{key:"_withResult",value:function(e){this._messages=e,this._messages.length>0?this._renderMessages(this._lastLineNumber,this._messages):this.hide()}},{key:"_renderMessages",value:function(e,t){this._renderDisposeables.clear();var n=document.createDocumentFragment(),i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=this._markdownRenderer.render(l.value);this._renderDisposeables.add(u),n.appendChild((0,Bh.$)("div.hover-row",void 0,u.element))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}this.updateContents(n),this.showAt(e)}}]),n}(ik);ok.ID="editor.contrib.modesGlyphHoverWidget";Lp=o("j1CnT"),kd=o("ht8QC"),Cd=o("4ET02");var ak={};e(ak,"GotoDefinitionAtPositionEditorContribution",(function(){return OC}),(function(e){return OC=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),Jc=o("faA3E"),gd=o("hJucn"),Yc=o("2NkmB"),kp=o("8Eens"),yd=o("5MJfC"),lh=o("chpjt"),qc=o("THDAR");var sk={};e(sk,"getDefinitionsAtPosition",(function(){return vk}),(function(e){return vk=e})),e(sk,"getDeclarationsAtPosition",(function(){return mk}),(function(e){return mk=e})),e(sk,"getImplementationsAtPosition",(function(){return yk}),(function(e){return yk=e})),e(sk,"getTypeDefinitionsAtPosition",(function(){return bk}),(function(e){return bk=e})),e(sk,"getReferencesAtPosition",(function(){return _k}),(function(e){return _k=e}));qi=o("caN7I"),l=o("1JCPQ"),eh=o("j6sHb"),Yc=o("2NkmB"),qc=o("THDAR"),lh=o("chpjt");var lk={};e(lk,"OneReference",(function(){return ck}),(function(e){return ck=e})),e(lk,"FileReferences",(function(){return hk}),(function(e){return hk=e})),e(lk,"ReferencesModel",(function(){return fk}),(function(e){return fk=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),l=o("1JCPQ"),Jc=o("faA3E"),$h=o("neTVg"),mf=o("L9zbH");o("dXCvL");nh=o("gTzCU"),Gp=o("k572B"),yd=o("5MJfC"),Yf=o("728Ww"),Yc=o("2NkmB");var uk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},ck=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.isProviderFirst=t,this.parent=n,this.link=i,this._rangeCallback=r,this.id=Gp.defaultGenerator.nextId()}return(0,c.default)(e,[{key:"uri",get:function(){return this.link.uri}},{key:"range",get:function(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range},set:function(e){this._range=e,this._rangeCallback(this)}},{key:"ariaMessage",get:function(){var e,t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,Jc.localize)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,mf.basename)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,Jc.localize)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,mf.basename)(this.uri),this.range.startLineNumber,this.range.startColumn)}}]),e}(),dk=function(){"use strict";function e(t){(0,u.default)(this,e),this._modelReference=t}return(0,c.default)(e,[{key:"dispose",value:function(){this._modelReference.dispose()}},{key:"preview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=this._modelReference.object.textEditorModel;if(n){var i=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,a=e.endColumn,s=n.getWordUntilPosition({lineNumber:i,column:r-t}),l=new(0,yd.Range)(i,s.startColumn,i,r),u=new(0,yd.Range)(o,a,o,1073741824),c=n.getValueInRange(l).replace(/^\s+/,""),d=n.getValueInRange(e),h=n.getValueInRange(u).replace(/\s+$/,"");return{value:c+d+h,highlight:{start:c.length,end:c.length+d.length}}}}}]),e}(),hk=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.parent=t,this.uri=n,this.children=[],this._previews=new(0,Yf.ResourceMap)}return(0,c.default)(e,[{key:"dispose",value:function e(){e(this._previews.values()),this._previews.clear()}},{key:"getPreview",value:function(e){return this._previews.get(e.uri)}},{key:"ariaMessage",get:function(){var e=this.children.length;return 1===e?(0,Jc.localize)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,mf.basename)(this.uri),this.uri.fsPath):(0,Jc.localize)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,mf.basename)(this.uri),this.uri.fsPath)}},{key:"resolve",value:function(e){return uk(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a,s,u,c;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this._previews.size){t.next=2;break}return t.abrupt("return",this);case 2:i=!0,r=!1,o=void 0,t.prev=3,a=this.children[Symbol.iterator]();case 5:if(i=(s=a.next()).done){t.next=22;break}if(u=s.value,!this._previews.has(u.uri)){t.next=9;break}return t.abrupt("continue",19);case 9:return t.prev=9,t.next=12,e.createModelReference(u.uri);case 12:c=t.sent,this._previews.set(u.uri,new dk(c)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),(0,Yc.onUnexpectedError)(t.t0);case 19:i=!0,t.next=5;break;case 22:t.next=28;break;case 24:t.prev=24,t.t1=t.catch(3),r=!0,o=t.t1;case 28:t.prev=28,t.prev=29,i||null==a.return||a.return();case 31:if(t.prev=31,!r){t.next=34;break}throw o;case 34:return t.finish(31);case 35:return t.finish(28);case 36:return t.abrupt("return",this);case 37:case"end":return t.stop()}}),t,this,[[3,24,28,36],[9,16],[29,,31,35]])})))}}]),e}(),fk=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this.groups=[],this.references=[],this._onDidChangeReferenceRange=new(0,$h.Emitter),this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=n;var r,o=(0,Ki.default)(t,1)[0];t.sort(e._compareReferences);var a=!0,s=!1,l=void 0;try{for(var c,d=t[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value;if(r&&mf.extUri.isEqual(r.uri,h.uri,!0)||(r=new hk(this,h.uri),this.groups.push(r)),0===r.children.length||0!==e._compareReferences(h,r.children[r.children.length-1])){var f=new ck(o===h,r,h,(function(e){return i._onDidChangeReferenceRange.fire(e)}));this.references.push(f),r.children.push(f)}}}catch(e){s=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(s)throw l}}}return(0,c.default)(e,[{key:"dispose",value:function e(){e(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}},{key:"clone",value:function(){return new e(this._links,this._title)}},{key:"title",get:function(){return this._title}},{key:"isEmpty",get:function(){return 0===this.groups.length}},{key:"ariaMessage",get:function(){return this.isEmpty?(0,Jc.localize)("aria.result.0","No results found"):1===this.references.length?(0,Jc.localize)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,Jc.localize)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,Jc.localize)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}},{key:"nextOrPreviousReference",value:function(e,t){var n=e.parent,i=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return 1===o||t&&i+1<r||!t&&i>0?(i=t?(i+1)%r:(i+r-1)%r,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}},{key:"nearestReference",value:function(e,t){var n=this.references.map((function(n,i){return{idx:i,prefixLen:nh.commonPrefixLength(n.uri.toString(),e.toString()),offsetDist:100*Math.abs(n.range.startLineNumber-t.lineNumber)+Math.abs(n.range.startColumn-t.column)}})).sort((function(e,t){return e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0}))[0];if(n)return this.references[n.idx]}},{key:"referenceAt",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this.references[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.uri.toString()===e.toString()&&yd.Range.containsPosition(s.range,t))return s}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}}},{key:"firstReference",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.references[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if(o.isProviderFirst)return o}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return this.references[0]}}],[{key:"_compareReferences",value:function(e,t){return mf.extUri.compare(e.uri,t.uri)||yd.Range.compareRangesUsingStarts(e.range,t.range)}}]),e}(),pk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};function gk(e,t,n,i){var r=n.ordered(e).map((function(n){return Promise.resolve(i(n,e,t)).then(void 0,(function(e){(0,Yc.onUnexpectedExternalError)(e)}))}));return Promise.all(r).then((function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s,l=o.value;Array.isArray(l)?(s=t).push.apply(s,(0,qi.default)(l)):l&&t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}))}function vk(e,t,n){return gk(e,t,lh.DefinitionProviderRegistry,(function(e,t,i){return e.provideDefinition(t,i,n)}))}function mk(e,t,n){return gk(e,t,lh.DeclarationProviderRegistry,(function(e,t,i){return e.provideDeclaration(t,i,n)}))}function yk(e,t,n){return gk(e,t,lh.ImplementationProviderRegistry,(function(e,t,i){return e.provideImplementation(t,i,n)}))}function bk(e,t,n){return gk(e,t,lh.TypeDefinitionProviderRegistry,(function(e,t,i){return e.provideTypeDefinition(t,i,n)}))}function _k(e,t,i,r){var o=this;return gk(e,t,lh.ReferenceProviderRegistry,(function(e,t,a){return pk(o,void 0,void 0,n(l).mark((function o(){var s,u;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.provideReferences(t,a,{includeDeclaration:!0},r);case 2:if(s=n.sent,i&&s&&2===s.length){n.next=5;break}return n.abrupt("return",s);case 5:return n.next=7,e.provideReferences(t,a,{includeDeclaration:!1},r);case 7:if(!(u=n.sent)||1!==u.length){n.next=10;break}return n.abrupt("return",u);case 10:return n.abrupt("return",s);case 11:case"end":return n.stop()}}),o)})))}))}function wk(e){return pk(this,void 0,void 0,n(l).mark((function t(){var i,r,o;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return i=t.sent,r=new(0,lk.ReferencesModel)(i,""),o=r.references.map((function(e){return e.link})),r.dispose(),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))}(0,qc.registerModelAndPositionCommand)("_executeDefinitionProvider",(function(e,t){return wk((function(){return vk(e,t,eh.CancellationToken.None)}))})),(0,qc.registerModelAndPositionCommand)("_executeDeclarationProvider",(function(e,t){return wk((function(){return mk(e,t,eh.CancellationToken.None)}))})),(0,qc.registerModelAndPositionCommand)("_executeImplementationProvider",(function(e,t){return wk((function(){return yk(e,t,eh.CancellationToken.None)}))})),(0,qc.registerModelAndPositionCommand)("_executeTypeDefinitionProvider",(function(e,t){return wk((function(){return bk(e,t,eh.CancellationToken.None)}))})),(0,qc.registerModelAndPositionCommand)("_executeReferenceProvider",(function(e,t){return wk((function(){return _k(e,t,!1,eh.CancellationToken.None)}))}));vd=o("dXCvL"),Ly=o("fTO0K"),Cd=o("4ET02"),kd=o("ht8QC"),sh=o("fLZJB");var kk={};e(kk,"DefinitionAction",(function(){return wC}),(function(e){return wC=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),od=o("3xPLG"),gd=o("hJucn"),Zc=o("5LFig"),Bd=o("5DBhW");var Ck=o("iQI0Q"),xk=(qc=o("THDAR"),jd=o("1NzEb"),md=o("kBBF2"),yd=o("5MJfC"),Xc=o("5cDyY"),lh=o("chpjt"),{});e(xk,"ReferencesController",(function(){return eC}),(function(e){return eC=e}));u=o("4JAgF"),c=o("9HoHC"),l=o("1JCPQ"),Jc=o("faA3E"),Yc=o("2NkmB"),vd=o("dXCvL"),jd=o("1NzEb"),Oh=o("hm5an"),$c=o("efZ3W"),mp=o("fnqF9"),Qf=o("6TN8i");var Sk={};e(Sk,"LayoutData",(function(){return Jk}),(function(e){return Jk=e})),e(Sk,"ReferenceWidget",(function(){return Gk}),(function(e){return Gk=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),Bh=o("fTm33"),pp=o("8ta7j"),$h=o("neTVg"),vd=o("dXCvL"),Op=o("knZKL"),mf=o("L9zbH"),yd=o("5MJfC"),_d=o("60ELr"),Ly=o("fTO0K");var Ek={};e(Ek,"DataSource",(function(){return Tk}),(function(e){return Tk=e})),e(Ek,"Delegate",(function(){return Lk}),(function(e){return Lk=e})),e(Ek,"FileReferencesRenderer",(function(){return Ok}),(function(e){return Ok=e})),e(Ek,"OneReferenceRenderer",(function(){return Bk}),(function(e){return Bk=e})),e(Ek,"StringRepresentationProvider",(function(){return Mk}),(function(e){return Mk=e})),e(Ek,"IdentityProvider",(function(){return Nk}),(function(e){return Nk=e})),e(Ek,"AccessibilityProvider",(function(){return Hk}),(function(e){return Hk=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Ly=o("fTO0K"),C_=o("kveS3");var Dk=o("ihX8T"),Ak=(zg=o("l7Ug5"),Cd=o("4ET02"),s_=o("jgMBB"),Bh=o("fTm33"),Jc=o("faA3E"),mf=o("L9zbH"),vd=o("dXCvL"),Oh=o("hm5an"),zh=o("5H40S"),Ry=o("3cgwy"),o("dj3I6")),Ik=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Rk=function(e,t){return function(n,i){t(n,i,e)}},Tk=function(){"use strict";function e(t){(0,u.default)(this,e),this._resolverService=t}return(0,c.default)(e,[{key:"hasChildren",value:function(e){return e instanceof lk.ReferencesModel||e instanceof lk.FileReferences}},{key:"getChildren",value:function(e){if(e instanceof lk.ReferencesModel)return e.groups;if(e instanceof lk.FileReferences)return e.resolve(this._resolverService).then((function(e){return e.children}));throw new Error("bad tree")}}]),e}();Tk=Ik([Rk(0,Ly.ITextModelService)],Tk);var Lk=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"getHeight",value:function(){return 23}},{key:"getTemplateId",value:function(e){return e instanceof lk.FileReferences?Ok.id:Bk.id}}]),e}(),Mk=function(){"use strict";function e(t){(0,u.default)(this,e),this._keybindingService=t}return(0,c.default)(e,[{key:"getKeyboardNavigationLabel",value:function(e){var t;if(e instanceof lk.OneReference){var n=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(n)return n.value}return(0,mf.basename)(e.uri)}}]),e}();Mk=Ik([Rk(0,zh.IKeybindingService)],Mk);var Nk=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"getId",value:function(e){return e instanceof lk.OneReference?e.id:e.uri}}]),e}(),Pk=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;(0,u.default)(this,n),(o=t.call(this))._uriLabel=i;var a=document.createElement("div");return a.classList.add("reference-file"),o.file=o._register(new(0,C_.IconLabel)(a,{supportHighlights:!0})),o.badge=new(0,Dk.CountBadge)(Bh.append(a,Bh.$(".count"))),o._register((0,s_.attachBadgeStyler)(o.badge,r)),e.appendChild(a),o}return(0,c.default)(n,[{key:"set",value:function(e,t){var n=(0,mf.dirname)(e.uri);this.file.setLabel(Fp(e.uri),this._uriLabel.getUriLabel(n,{relative:!0}),{title:this._uriLabel.getUriLabel(e.uri),matches:t});var i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat((0,Jc.localize)("referencesCount","{0} references",i)):this.badge.setTitleFormat((0,Jc.localize)("referenceCount","{0} reference",i))}}]),n}(vd.Disposable);Pk=Ik([Rk(1,zg.ILabelService),Rk(2,Cd.IThemeService)],Pk);var Ok=function(){"use strict";function e(t){(0,u.default)(this,e),this._instantiationService=t,this.templateId=e.id}return(0,c.default)(e,[{key:"renderTemplate",value:function(e){return this._instantiationService.createInstance(Pk,e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,(0,Ry.createMatches)(e.filterData))}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}();Ok.id="FileReferencesRenderer",Ok=Ik([Rk(0,Oh.IInstantiationService)],Ok);var Fk=function(){"use strict";function e(t){(0,u.default)(this,e),this.label=new(0,Ak.HighlightedLabel)(t,!1)}return(0,c.default)(e,[{key:"set",value:function(e,t){var n,i=null===(n=e.parent.getPreview(e))||void 0===n?void 0:n.preview(e.range);if(i&&i.value){var r=i.value,o=i.highlight;t&&!Ry.FuzzyScore.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,(0,Ry.createMatches)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}else this.label.set("".concat((0,mf.basename)(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}]),e}(),Bk=function(){"use strict";function e(){(0,u.default)(this,e),this.templateId=e.id}return(0,c.default)(e,[{key:"renderTemplate",value:function(e){return new Fk(e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,e.filterData)}},{key:"disposeTemplate",value:function(){}}]),e}();Bk.id="OneReferenceRenderer";var Hk=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"getWidgetAriaLabel",value:function(){return(0,Jc.localize)("treeAriaLabel","References")}},{key:"getAriaLabel",value:function(e){return e.ariaMessage}}]),e}(),jk=(Jc=o("faA3E"),Oh=o("hm5an"),zg=o("l7Ug5"),o("bIBIv")),zk=(kd=o("ht8QC"),Cd=o("4ET02"),o("j5G31")),Wk=o("1q0pG"),Uk=(zh=o("5H40S"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),Vk=function(e,t){return function(n,i){t(n,i,e)}},Kk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},qk=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._editor=t,this._model=n,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new(0,vd.DisposableStore),this._callOnModelChange=new(0,vd.DisposableStore),this._callOnDispose.add(this._editor.onDidChangeModel((function(){return i._onModelChanged()}))),this._onModelChanged()}return(0,c.default)(e,[{key:"dispose",value:function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}},{key:"_onModelChanged",value:function(){this._callOnModelChange.clear();var e=this._editor.getModel();if(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._model.references[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a.uri.toString()===e.uri.toString())return void this._addDecorations(a.parent)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"_addDecorations",value:function(t){var n=this;if(this._editor.hasModel()){this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((function(){return n._onDecorationChanged()})));for(var i=[],r=[],o=0,a=t.children.length;o<a;o++){var s=t.children[o];this._decorationIgnoreSet.has(s.id)||s.uri.toString()===this._editor.getModel().uri.toString()&&(i.push({range:s.range,options:e.DecorationOptions}),r.push(o))}for(var l=this._editor.deltaDecorations([],i),u=0;u<l.length;u++)this._decorations.set(l[u],t.children[r[u]])}}},{key:"_onDecorationChanged",value:function(){var e=[],t=this._editor.getModel();if(t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._decorations[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=(0,Ki.default)(o.value,2),l=s[0],u=s[1],c=t.getDecorationRange(l);if(c){var d=!1;if(!yd.Range.equalsRange(c,u.range)){if(yd.Range.spansMultipleLines(c))d=!0;else u.range.endColumn-u.range.startColumn!==c.endColumn-c.startColumn&&(d=!0);d?(this._decorationIgnoreSet.add(u.id),e.push(l)):u.range=c}}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}for(var h=0,f=e.length;h<f;h++)this._decorations.delete(e[h]);this._editor.deltaDecorations(e,[])}}},{key:"removeDecorations",value:function(){this._editor.deltaDecorations((0,qi.default)(this._decorations.keys()),[]),this._decorations.clear()}}]),e}();qk.DecorationOptions=_d.ModelDecorationOptions.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var Jk=function(){"use strict";function e(){(0,u.default)(this,e),this.ratio=.7,this.heightInLines=18}return(0,c.default)(e,null,[{key:"fromJSON",value:function(e){var t,n;try{var i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:n||18}}}]),e}(),Xk=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return n}(jk.WorkbenchAsyncDataTree),Gk=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a,s,l,c,d,h){var f;return(0,u.default)(this,i),(f=t.call(this,e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},s))._defaultTreeKeyboardSupport=n,f.layoutData=r,f._textModelResolverService=a,f._instantiationService=s,f._peekViewService=l,f._uriLabel=c,f._undoRedoService=d,f._keybindingService=h,f._disposeOnNewModel=new(0,vd.DisposableStore),f._callOnDispose=new(0,vd.DisposableStore),f._onDidSelectReference=new(0,$h.Emitter),f.onDidSelectReference=f._onDidSelectReference.event,f._dim=new Bh.Dimension(0,0),f._applyTheme(o.getColorTheme()),f._callOnDispose.add(o.onDidColorThemeChange(f._applyTheme.bind((0,Hi.default)(f)))),f._peekViewService.addExclusiveWidget(e,(0,Hi.default)(f)),f.create(),f}return(0,c.default)(i,[{key:"dispose",value:function e(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),e(this._preview),e(this._previewNotAvailableMessage),e(this._tree),e(this._previewModelReference),this._splitView.dispose(),(0,zi.default)((0,Wi.default)(i.prototype),"dispose",this).call(this)}},{key:"_applyTheme",value:function(e){var t=e.getColor(Hp.peekViewBorder)||pp.Color.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(Hp.peekViewTitleBackground)||pp.Color.transparent,primaryHeadingColor:e.getColor(Hp.peekViewTitleForeground),secondaryHeadingColor:e.getColor(Hp.peekViewTitleInfoForeground)})}},{key:"show",value:function(e){this.editor.revealRangeInCenterIfOutsideViewport(e,0),(0,zi.default)((0,Wi.default)(i.prototype),"show",this).call(this,e,this.layoutData.heightInLines||18)}},{key:"focusOnReferenceTree",value:function(){this._tree.domFocus()}},{key:"focusOnPreviewEditor",value:function(){this._preview.focus()}},{key:"isPreviewEditorFocused",value:function(){return this._preview.hasTextFocus()}},{key:"_onTitleClick",value:function(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}},{key:"_fillBody",value:function(e){var t=this;this.setCssClass("reference-zone-widget"),this._messageContainer=Bh.append(e,Bh.$("div.messages")),Bh.hide(this._messageContainer),this._splitView=new(0,zk.SplitView)(e,{orientation:1}),this._previewContainer=Bh.append(e,Bh.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(Wp.EmbeddedCodeEditorWidget,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),Bh.hide(this._previewContainer),this._previewNotAvailableMessage=new(0,_d.TextModel)(Jc.localize("missingPreviewMessage","no preview available"),_d.TextModel.DEFAULT_CREATION_OPTIONS,null,null,this._undoRedoService),this._treeContainer=Bh.append(e,Bh.$("div.ref-tree.inline"));var n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new(0,Ek.AccessibilityProvider),keyboardNavigationLabelProvider:this._instantiationService.createInstance(Ek.StringRepresentationProvider),identityProvider:new(0,Ek.IdentityProvider),openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:Hp.peekViewResultsBackground}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(Bh.addStandardDisposableListener(this._treeContainer,"keydown",(function(e){e.equals(9)&&(t._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(Xk,"ReferencesWidget",this._treeContainer,new(0,Ek.Delegate),[this._instantiationService.createInstance(Ek.FileReferencesRenderer),this._instantiationService.createInstance(Ek.OneReferenceRenderer)],this._instantiationService.createInstance(Ek.DataSource),n),this._splitView.addView({onDidChange:$h.Event.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(e){t._preview.layout({height:t._dim.height,width:e})}},zk.Sizing.Distribute),this._splitView.addView({onDidChange:$h.Event.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(e){t._treeContainer.style.height="".concat(t._dim.height,"px"),t._treeContainer.style.width="".concat(e,"px"),t._tree.layout(t._dim.height,e)}},zk.Sizing.Distribute),this._disposables.add(this._splitView.onDidSashChange((function(){t._dim.width&&(t.layoutData.ratio=t._splitView.getViewSize(0)/t._dim.width)}),void 0));var i=function(e,n){e instanceof lk.OneReference&&("show"===n&&t._revealReference(e,!1),t._onDidSelectReference.fire({element:e,kind:n,source:"tree"}))};this._tree.onDidOpen((function(e){e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),Bh.hide(this._treeContainer)}},{key:"_onWidth",value:function(e){this._dim&&this._doLayoutBody(this._dim.height,e)}},{key:"_doLayoutBody",value:function(e,t){(0,zi.default)((0,Wi.default)(i.prototype),"_doLayoutBody",this).call(this,e,t),this._dim=new Bh.Dimension(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}},{key:"setSelection",value:function(e){var t=this;return this._revealReference(e,!0).then((function(){t._model&&(t._tree.setSelection([e]),t._tree.setFocus([e]))}))}},{key:"setModel",value:function(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}},{key:"_onNewModel",value:function(){var e=this;return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=Jc.localize("noResults","No results"),Bh.show(this._messageContainer),Promise.resolve(void 0)):(Bh.hide(this._messageContainer),this._decorationsManager=new qk(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((function(t){return e._tree.rerender(t)}))),this._disposeOnNewModel.add(this._preview.onMouseDown((function(t){var n=t.event,i=t.target;if(2===n.detail){var r=e._getFocusedReference();r&&e._onDidSelectReference.fire({element:{uri:r.uri,range:i.range},kind:n.ctrlKey||n.metaKey||n.altKey?"side":"open",source:"editor"})}}))),this.container.classList.add("results-loaded"),Bh.show(this._treeContainer),Bh.show(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}},{key:"_getFocusedReference",value:function(){var e=(0,Ki.default)(this._tree.getFocus(),1)[0];return e instanceof lk.OneReference?e:e instanceof lk.FileReferences&&e.children.length>0?e.children[0]:void 0}},{key:"revealReference",value:function(e){return Kk(this,void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._revealReference(e,!1);case 2:this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_revealReference",value:function(e,t){return Kk(this,void 0,void 0,n(l).mark((function i(){var r,o,a,s,u;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._revealedReference!==e){n.next=2;break}return n.abrupt("return");case 2:if(this._revealedReference=e,e.uri.scheme!==Op.Schemas.inMemory?this.setTitle((0,mf.basenameOrAuthority)(e.uri),this._uriLabel.getUriLabel((0,mf.dirname)(e.uri))):this.setTitle(Jc.localize("peekView.alternateTitle","References")),r=this._textModelResolverService.createModelReference(e.uri),this._tree.getInput()!==e.parent){n.next=9;break}this._tree.reveal(e),n.next=13;break;case 9:return t&&this._tree.reveal(e.parent),n.next=12,this._tree.expand(e.parent);case 12:this._tree.reveal(e);case 13:return n.next=15,r;case 15:if(o=n.sent,this._model){n.next=19;break}return o.dispose(),n.abrupt("return");case 19:(0,vd.dispose)(this._previewModelReference),(a=o.object)?(s=this._preview.getModel()===a.textEditorModel?0:1,u=yd.Range.lift(e.range).collapseToStart(),this._previewModelReference=o,this._preview.setModel(a.textEditorModel),this._preview.setSelection(u),this._preview.revealRangeInCenter(u,s)):(this._preview.setModel(this._previewNotAvailableMessage),o.dispose());case 22:case"end":return n.stop()}}),i,this)})))}}]),i}(Hp.PeekViewWidget);Gk=Uk([Vk(3,Cd.IThemeService),Vk(4,Ly.ITextModelService),Vk(5,Oh.IInstantiationService),Vk(6,Hp.IPeekViewService),Vk(7,zg.ILabelService),Vk(8,Wk.IUndoRedoService),Vk(9,zh.IKeybindingService)],Gk),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(Hp.peekViewResultsMatchHighlight);n&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { background-color: ".concat(n,"; }"));var i=e.getColor(Hp.peekViewEditorMatchHighlight);i&&t.addRule(".monaco-editor .reference-zone-widget .preview .reference-decoration { background-color: ".concat(i,"; }"));var r=e.getColor(Hp.peekViewEditorMatchHighlightBorder);r&&t.addRule(".monaco-editor .reference-zone-widget .preview .reference-decoration { border: 2px solid ".concat(r,"; box-sizing: border-box; }"));var o=e.getColor(kd.activeContrastBorder);o&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight { border: 1px dotted ".concat(o,"; box-sizing: border-box; }"));var a=e.getColor(Hp.peekViewResultsBackground);a&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree { background-color: ".concat(a,"; }"));var s=e.getColor(Hp.peekViewResultsMatchForeground);s&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree { color: ".concat(s,"; }"));var l=e.getColor(Hp.peekViewResultsFileForeground);l&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .reference-file { color: ".concat(l,"; }"));var u=e.getColor(Hp.peekViewResultsSelectionBackground);u&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { background-color: ".concat(u,"; }"));var c=e.getColor(Hp.peekViewResultsSelectionForeground);c&&t.addRule(".monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) { color: ".concat(c," !important; }"));var d=e.getColor(Hp.peekViewEditorBackground);d&&t.addRule(".monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {"+"\tbackground-color: ".concat(d,";")+"}");var h=e.getColor(Hp.peekViewEditorGutterBackground);h&&t.addRule(".monaco-editor .reference-zone-widget .preview .monaco-editor .margin {"+"\tbackground-color: ".concat(h,";")+"}")}));yd=o("5MJfC"),md=o("kBBF2"),hf=o("93Ice"),gd=o("hJucn"),jk=o("bIBIv"),sb=o("8vTtk"),Zc=o("5LFig"),vh=o("j9pk1");var Zk=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$k=function(e,t){return function(n,i){t(n,i,e)}},Yk=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},Qk=new(0,$c.RawContextKey)("referenceSearchVisible",!1,Jc.localize("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),eC=function(){"use strict";function e(t,n,i,r,o,a,s,l){(0,u.default)(this,e),this._defaultTreeKeyboardSupport=t,this._editor=n,this._editorService=r,this._notificationService=o,this._instantiationService=a,this._storageService=s,this._configurationService=l,this._disposables=new(0,vd.DisposableStore),this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Qk.bindTo(i)}return(0,c.default)(e,[{key:"dispose",value:function(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}},{key:"toggleWidget",value:function(e,t,n){var i,r=this;if(this._widget&&(i=this._widget.position),this.closeWidget(),!i||!e.containsPosition(i)){this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){r.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((function(){r._ignoreModelChangeEvent||r.closeWidget()})));var o="peekViewLayout",a=Sk.LayoutData.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(Sk.ReferenceWidget,this._editor,this._defaultTreeKeyboardSupport,a),this._widget.setTitle(Jc.localize("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((function(){t.cancel(),r._widget&&(r._storageService.store(o,JSON.stringify(r._widget.layoutData),0,1),r._widget=void 0),r.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((function(e){var t=e.element,i=e.kind;if(t)switch(i){case"open":"editor"===e.source&&r._configurationService.getValue("editor.stablePeek")||r.openReference(t,!1,!1);break;case"side":r.openReference(t,!0,!1);break;case"goto":n?r._gotoReference(t):r.openReference(t,!1,!0)}})));var s=++this._requestIdPool;t.then((function(t){var n;if(s===r._requestIdPool&&r._widget)return null===(n=r._model)||void 0===n||n.dispose(),r._model=t,r._widget.setModel(r._model).then((function(){if(r._widget&&r._model&&r._editor.hasModel()){r._model.isEmpty?r._widget.setMetaTitle(""):r._widget.setMetaTitle(Jc.localize("metaTitle.N","{0} ({1})",r._model.title,r._model.references.length));var t=r._editor.getModel().uri,n=new(0,md.Position)(e.startLineNumber,e.startColumn),i=r._model.nearestReference(t,n);if(i)return r._widget.setSelection(i).then((function(){r._widget&&"editor"===r._editor.getOption(76)&&r._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(function(e){r._notificationService.error(e)}))}}},{key:"changeFocusBetweenPreviewAndReferences",value:function(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}},{key:"goToNextOrPreviousReference",value:function(e){return Yk(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a,s;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:if(i=this._widget.position){t.next=5;break}return t.abrupt("return");case 5:if(r=this._model.nearestReference(this._editor.getModel().uri,i)){t.next=8;break}return t.abrupt("return");case 8:return o=this._model.nextOrPreviousReference(r,e),a=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused(),t.next=13,this._widget.setSelection(o);case 13:return t.next=15,this._gotoReference(o);case 15:a?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor();case 16:case"end":return t.stop()}}),t,this)})))}},{key:"revealReference",value:function(e){return Yk(this,void 0,void 0,n(l).mark((function t(){return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._widget.revealReference(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"closeWidget",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,n&&this._editor.focus(),this._requestIdPool+=1}},{key:"_gotoReference",value:function(t){var n=this;this._widget&&this._widget.hide(),this._ignoreModelChangeEvent=!0;var i=yd.Range.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:i}},this._editor).then((function(t){var r;if(n._ignoreModelChangeEvent=!1,t&&n._widget)if(n._editor===t)n._widget.show(i),n._widget.focusOnReferenceTree();else{var o=e.get(t),a=n._model.clone();n.closeWidget(),t.focus(),o.toggleWidget(i,(0,gd.createCancelablePromise)((function(e){return Promise.resolve(a)})),null!==(r=n._peekMode)&&void 0!==r&&r)}else n.closeWidget()}),(function(e){n._ignoreModelChangeEvent=!1,(0,Yc.onUnexpectedError)(e)}))}},{key:"openReference",value:function(e,t,n){t||this.closeWidget();var i=e.uri,r=e.range;this._editorService.openCodeEditor({resource:i,options:{selection:r,pinned:n}},this._editor,t)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();function tC(e,t){var n=(0,Hp.getOuterEditor)(e);if(n){var i=eC.get(n);i&&t(i)}}eC.ID="editor.contrib.referencesController",eC=Zk([$k(2,$c.IContextKeyService),$k(3,jd.ICodeEditorService),$k(4,hf.INotificationService),$k(5,Oh.IInstantiationService),$k(6,Qf.IStorageService),$k(7,mp.IConfigurationService)],eC),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,Zc.KeyChord)(2089,60),when:$c.ContextKeyExpr.or(Qk,Hp.PeekContext.inPeekEditor),handler:function(e){tC(e,(function(e){e.changeFocusBetweenPreviewAndReferences()}))}}),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:$c.ContextKeyExpr.or(Qk,Hp.PeekContext.inPeekEditor),handler:function(e){tC(e,(function(e){e.goToNextOrPreviousReference(!0)}))}}),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:$c.ContextKeyExpr.or(Qk,Hp.PeekContext.inPeekEditor),handler:function(e){tC(e,(function(e){e.goToNextOrPreviousReference(!1)}))}}),vh.CommandsRegistry.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),vh.CommandsRegistry.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),vh.CommandsRegistry.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),vh.CommandsRegistry.registerCommand("closeReferenceSearch",(function(e){return tC(e,(function(e){return e.closeWidget()}))})),sb.KeybindingsRegistry.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:$c.ContextKeyExpr.and(Hp.PeekContext.inPeekEditor,$c.ContextKeyExpr.not("config.editor.stablePeek"))}),sb.KeybindingsRegistry.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:$c.ContextKeyExpr.and(Qk,$c.ContextKeyExpr.not("config.editor.stablePeek"))}),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:$c.ContextKeyExpr.and(Qk,jk.WorkbenchListFocusContextKey),handler:function(e){var t,n=null===(t=e.get(jk.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof lk.OneReference&&tC(e,(function(e){return e.revealReference(n[0])}))}}),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:$c.ContextKeyExpr.and(Qk,jk.WorkbenchListFocusContextKey),handler:function(e){var t,n=null===(t=e.get(jk.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof lk.OneReference&&tC(e,(function(e){return e.openReference(n[0],!0,!0)}))}}),vh.CommandsRegistry.registerCommand("openReference",(function(e){var t,n=null===(t=e.get(jk.IListService).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof lk.OneReference&&tC(e,(function(e){return e.openReference(n[0],!1,!0)}))}));Jc=o("faA3E"),xd=o("feTbe"),$c=o("efZ3W"),hf=o("93Ice"),gh=o("gkTZs"),vh=o("j9pk1"),sh=o("fLZJB");var nC={};e(nC,"ISymbolNavigationService",(function(){return aC}),(function(e){return aC=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),$c=o("efZ3W"),Oh=o("hm5an"),$f=o("2cK24"),sb=o("8vTtk"),qc=o("THDAR"),jd=o("1NzEb"),yd=o("5MJfC"),vd=o("dXCvL"),$h=o("neTVg"),Jc=o("faA3E"),zh=o("5H40S"),hf=o("93Ice"),mf=o("L9zbH");var iC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},rC=function(e,t){return function(n,i){t(n,i,e)}},oC=new(0,$c.RawContextKey)("hasSymbols",!1,(0,Jc.localize)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),aC=(0,Oh.createDecorator)("ISymbolNavigationService"),sC=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this._editorService=n,this._notificationService=i,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=oC.bindTo(t)}return(0,c.default)(e,[{key:"reset",value:function(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}},{key:"put",value:function(e){var t=this,n=e.parent.parent;if(n.references.length<=1)this.reset();else{this._currentModel=n,this._currentIdx=n.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();var i=new lC(this._editorService),r=i.onDidChange((function(e){if(!t._ignoreEditorChange){var i=t._editorService.getActiveCodeEditor();if(i){var r=i.getModel(),o=i.getPosition();if(r&&o){var a=!1,s=!1,l=!0,u=!1,c=void 0;try{for(var d,h=n.references[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value;if((0,mf.isEqual)(f.uri,r.uri))a=!0,s=s||yd.Range.containsPosition(f.range,o);else if(a)break}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}a&&s||t.reset()}}}}));this._currentState=(0,vd.combinedDisposable)(i,r)}}},{key:"revealNext",value:function(e){var t=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var n=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:n.uri,options:{selection:yd.Range.collapseToStart(n.range),selectionRevealType:3}},e).finally((function(){t._ignoreEditorChange=!1}))}},{key:"_showMessage",value:function(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();var t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?(0,Jc.localize)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,Jc.localize)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}}]),e}();sC=iC([rC(0,$c.IContextKeyService),rC(1,jd.ICodeEditorService),rC(2,hf.INotificationService),rC(3,zh.IKeybindingService)],sC),(0,$f.registerSingleton)(aC,sC,!0),(0,qc.registerEditorCommand)(new(function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.gotoNextSymbolFromResult",precondition:oC,kbOpts:{weight:100,primary:70}})}return(0,c.default)(n,[{key:"runEditorCommand",value:function(e,t){return e.get(aC).revealNext(t)}}]),n}(qc.EditorCommand))),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:oC,primary:9,handler:function(e){e.get(aC).reset()}});var lC=function(){"use strict";function e(t){(0,u.default)(this,e),this._listener=new Map,this._disposables=new(0,vd.DisposableStore),this._onDidChange=new(0,$h.Emitter),this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}return(0,c.default)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._onDidChange.dispose(),(0,vd.dispose)(this._listener.values())}},{key:"_onDidAddEditor",value:function(e){var t=this;this._listener.set(e,(0,vd.combinedDisposable)(e.onDidChangeCursorPosition((function(n){return t._onDidChange.fire({editor:e})})),e.onDidChangeModelContent((function(n){return t._onDidChange.fire({editor:e})}))))}},{key:"_onDidRemoveEditor",value:function(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}}]),e}();lC=iC([rC(0,jd.ICodeEditorService)],lC);Fd=o("dqfPV"),ah=o("iPPVB"),Oh=o("hm5an"),zf=o("jW8FZ");var uC,cC,dC,hC,fC,pC,gC,vC,mC=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};xd.MenuRegistry.appendMenuItem(xd.MenuId.EditorContext,{submenu:xd.MenuId.EditorContextPeek,title:Jc.localize("peek.submenu","Peek"),group:"navigation",order:100});var yC=new Set;function bC(e){var t=new e;return(0,qc.registerInstantiatedEditorAction)(t),yC.add(t.id),t}var _C=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this,n))._configuration=e,r}return(0,c.default)(i,[{key:"run",value:function(e,t){var i=this;if(!t.hasModel())return Promise.resolve(void 0);var r=e.get(hf.INotificationService),o=e.get(jd.ICodeEditorService),a=e.get(gh.IEditorProgressService),s=e.get(nC.ISymbolNavigationService),u=t.getModel(),c=t.getPosition(),d=new(0,sh.EditorStateCancellationTokenSource)(t,5),h=(0,gd.raceCancellation)(this._getLocationModel(u,c,d.token),d.token).then((function(e){return mC(i,void 0,void 0,n(l).mark((function i(){var r,a,h,f;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&!d.token.isCancellationRequested){n.next=2;break}return n.abrupt("return");case 2:if((0,od.alert)(e.ariaMessage),e.referenceAt(u.uri,c)&&(a=this._getAlternativeCommand(t))!==this.id&&yC.has(a)&&(r=t.getAction(a)),0!==(h=e.references.length)){n.next=10;break}this._configuration.muteMessage||(f=u.getWordAtPosition(c),Ih.MessageController.get(t).showMessage(this._getNoResultFoundMessage(f),c)),n.next=15;break;case 10:if(1!==h||!r){n.next=14;break}r.run(),n.next=15;break;case 14:return n.abrupt("return",this._onResult(o,s,t,e));case 15:case"end":return n.stop()}}),i,this)})))}),(function(e){r.error(e)})).finally((function(){d.dispose()}));return a.showWhile(h,250),h}},{key:"_onResult",value:function(e,t,i,r){return mC(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=this._getGoToPreference(i),i instanceof Wp.EmbeddedCodeEditorWidget||!(this._configuration.openInPeek||"peek"===a&&r.references.length>1)){n.next=5;break}this._openInPeek(i,r),n.next=12;break;case 5:return s=r.firstReference(),u=r.references.length>1&&"gotoAndPeek"===a,n.next=9,this._openReference(i,e,s,this._configuration.openToSide,!u);case 9:c=n.sent,u&&c?this._openInPeek(c,r):r.dispose(),"goto"===a&&t.put(s);case 12:case"end":return n.stop()}}),o,this)})))}},{key:"_openReference",value:function(e,t,i,r,o){return mC(this,void 0,void 0,n(l).mark((function a(){var s,u,c,d;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=void 0,(0,lh.isLocationLink)(i)&&(s=i.targetSelectionRange),s||(s=i.range),s){n.next=5;break}return n.abrupt("return",void 0);case 5:return n.next=7,t.openCodeEditor({resource:i.uri,options:{selection:yd.Range.collapseToStart(s),selectionRevealType:3}},e,r);case 7:if(u=n.sent){n.next=10;break}return n.abrupt("return",void 0);case 10:return o&&(c=u.getModel(),d=u.deltaDecorations([],[{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]),setTimeout((function(){u.getModel()===c&&u.deltaDecorations(d,[])}),350)),n.abrupt("return",u);case 12:case"end":return n.stop()}}),a)})))}},{key:"_openInPeek",value:function(e,t){var n=xk.ReferencesController.get(e);n&&e.hasModel()?n.toggleWidget(e.getSelection(),(0,gd.createCancelablePromise)((function(e){return Promise.resolve(t)})),this._configuration.openInPeek):t.dispose()}}]),i}(qc.EditorAction),wC=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=lk.ReferencesModel,n.next=3,(0,sk.getDefinitionsAtPosition)(e,t,i);case 3:return n.t1=n.sent,n.t2=Jc.localize("def.title","Definitions"),n.abrupt("return",new n.t0(n.t1,n.t2));case 6:case"end":return n.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Jc.localize("noResultWord","No definition found for '{0}'",e.word):Jc.localize("generic.noResults","No definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(49).alternativeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(49).multipleDefinitions}}]),i}(_C),kC=Bd.isWeb&&!Fd.isStandalone?2118:70;bC(((uC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){(0,u.default)(this,n);var e=t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,label:Jc.localize("actions.goToDecl.label","Go to Definition"),alias:"Go to Definition",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasDefinitionProvider,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:kC,weight:100},contextMenuOpts:{group:"navigation",order:1.1}});return vh.CommandsRegistry.registerCommandAlias("editor.action.goToDeclaration",n.id),e}return n}(wC)).id="editor.action.revealDefinition",uC)),bC(((cC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){(0,u.default)(this,n);var e=t.call(this,{openToSide:!0,openInPeek:!1,muteMessage:!1},{id:n.id,label:Jc.localize("actions.goToDeclToSide.label","Open Definition to the Side"),alias:"Open Definition to the Side",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasDefinitionProvider,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,kC),weight:100}});return vh.CommandsRegistry.registerCommandAlias("editor.action.openDeclarationToTheSide",n.id),e}return n}(wC)).id="editor.action.revealDefinitionAside",cC)),bC(((dC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){(0,u.default)(this,n);var e=t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.id,label:Jc.localize("actions.previewDecl.label","Peek Definition"),alias:"Peek Definition",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasDefinitionProvider,Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:582,linux:{primary:3140},weight:100},contextMenuOpts:{menuId:xd.MenuId.EditorContextPeek,group:"peek",order:2}});return vh.CommandsRegistry.registerCommandAlias("editor.action.previewDeclaration",n.id),e}return n}(wC)).id="editor.action.peekDefinition",dC));var CC=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=lk.ReferencesModel,n.next=3,(0,sk.getDeclarationsAtPosition)(e,t,i);case 3:return n.t1=n.sent,n.t2=Jc.localize("decl.title","Declarations"),n.abrupt("return",new n.t0(n.t1,n.t2));case 6:case"end":return n.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Jc.localize("decl.noResultWord","No declaration found for '{0}'",e.word):Jc.localize("decl.generic.noResults","No declaration found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(49).alternativeDeclarationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(49).multipleDeclarations}}]),i}(_C);bC(((hC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,label:Jc.localize("actions.goToDeclaration.label","Go to Declaration"),alias:"Go to Declaration",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasDeclarationProvider,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{group:"navigation",order:1.3}})}return(0,c.default)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Jc.localize("decl.noResultWord","No declaration found for '{0}'",e.word):Jc.localize("decl.generic.noResults","No declaration found")}}]),n}(CC)).id="editor.action.revealDeclaration",hC)),bC(function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",label:Jc.localize("actions.peekDecl.label","Peek Declaration"),alias:"Peek Declaration",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasDeclarationProvider,Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:xd.MenuId.EditorContextPeek,group:"peek",order:3}})}return n}(CC));var xC=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=lk.ReferencesModel,n.next=3,(0,sk.getTypeDefinitionsAtPosition)(e,t,i);case 3:return n.t1=n.sent,n.t2=Jc.localize("typedef.title","Type Definitions"),n.abrupt("return",new n.t0(n.t1,n.t2));case 6:case"end":return n.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Jc.localize("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):Jc.localize("goToTypeDefinition.generic.noResults","No type definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(49).alternativeTypeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(49).multipleTypeDefinitions}}]),i}(_C);bC(((fC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,label:Jc.localize("actions.goToTypeDefinition.label","Go to Type Definition"),alias:"Go to Type Definition",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasTypeDefinitionProvider,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:0,weight:100},contextMenuOpts:{group:"navigation",order:1.4}})}return n}(xC)).ID="editor.action.goToTypeDefinition",fC)),bC(((pC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,label:Jc.localize("actions.peekTypeDefinition.label","Peek Type Definition"),alias:"Peek Type Definition",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasTypeDefinitionProvider,Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:xd.MenuId.EditorContextPeek,group:"peek",order:4}})}return n}(xC)).ID="editor.action.peekTypeDefinition",pC));var SC=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=lk.ReferencesModel,n.next=3,(0,sk.getImplementationsAtPosition)(e,t,i);case 3:return n.t1=n.sent,n.t2=Jc.localize("impl.title","Implementations"),n.abrupt("return",new n.t0(n.t1,n.t2));case 6:case"end":return n.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?Jc.localize("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):Jc.localize("goToImplementation.generic.noResults","No implementation found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(49).alternativeImplementationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(49).multipleImplementations}}]),i}(_C);bC(((gC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,label:Jc.localize("actions.goToImplementation.label","Go to Implementations"),alias:"Go to Implementations",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasImplementationProvider,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2118,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}return n}(SC)).ID="editor.action.goToImplementation",gC)),bC(((vC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,label:Jc.localize("actions.peekImplementation.label","Peek Implementations"),alias:"Peek Implementations",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasImplementationProvider,Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3142,weight:100},contextMenuOpts:{menuId:xd.MenuId.EditorContextPeek,group:"peek",order:5}})}return n}(SC)).ID="editor.action.peekImplementation",vC));var EC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e?Jc.localize("references.no","No references found for '{0}'",e.word):Jc.localize("references.noGeneric","No references found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(49).alternativeReferenceCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(49).multipleReferences}}]),n}(_C);bC(function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",label:Jc.localize("goToReferences.label","Go to References"),alias:"Go to References",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasReferenceProvider,Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1094,weight:100},contextMenuOpts:{group:"navigation",order:1.45}})}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=lk.ReferencesModel,n.next=3,(0,sk.getReferencesAtPosition)(e,t,!0,i);case 3:return n.t1=n.sent,n.t2=Jc.localize("ref.title","References"),n.abrupt("return",new n.t0(n.t1,n.t2));case 6:case"end":return n.stop()}}),r)})))}}]),i}(EC)),bC(function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",label:Jc.localize("references.action.label","Peek References"),alias:"Peek References",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.hasReferenceProvider,Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated()),contextMenuOpts:{menuId:xd.MenuId.EditorContextPeek,group:"peek",order:6}})}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=lk.ReferencesModel,n.next=3,(0,sk.getReferencesAtPosition)(e,t,!1,i);case 3:return n.t1=n.sent,n.t2=Jc.localize("ref.title","References"),n.abrupt("return",new n.t0(n.t1,n.t2));case 6:case"end":return n.stop()}}),r)})))}}]),i}(EC));var DC=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r){var o;return(0,u.default)(this,i),(o=t.call(this,e,{id:"editor.action.goToLocation",label:Jc.localize("label.generic","Go To Any Symbol"),alias:"Go To Any Symbol",precondition:$c.ContextKeyExpr.and(Hp.PeekContext.notInPeekEditor,Xc.EditorContextKeys.isInWalkThroughSnippet.toNegated())}))._references=n,o._gotoMultipleBehaviour=r,o}return(0,c.default)(i,[{key:"_getLocationModel",value:function(e,t,i){return mC(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new(0,lk.ReferencesModel)(this._references,Jc.localize("generic.title","Locations")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&Jc.localize("generic.noResult","No results for '{0}'",e.word)||""}},{key:"_getGoToPreference",value:function(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(49).multipleReferences}},{key:"_getAlternativeCommand",value:function(){return""}}]),i}(_C);vh.CommandsRegistry.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ah.URI},{name:"position",description:"The position at which to start",constraint:md.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:function(e,t,i,r,o,a,s){return mC(void 0,void 0,void 0,n(l).mark((function f(){var p,g;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(0,zf.assertType)(ah.URI.isUri(t)),(0,zf.assertType)(md.Position.isIPosition(i)),(0,zf.assertType)(Array.isArray(r)),(0,zf.assertType)(void 0===o||"string"==typeof o),(0,zf.assertType)(void 0===s||"boolean"==typeof s),p=e.get(jd.ICodeEditorService),n.next=8,p.openCodeEditor({resource:t},p.getFocusedCodeEditor());case 8:if(g=n.sent,!(0,Ck.isCodeEditor)(g)){n.next=13;break}return g.setPosition(i),g.revealPositionInCenterIfOutsideViewport(i,0),n.abrupt("return",g.invokeWithinContext((function(e){var t=new(function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_getNoResultFoundMessage",value:function(e){return a||(0,zi.default)((0,Wi.default)(n.prototype),"_getNoResultFoundMessage",this).call(this,e)}}]),n}(DC))({muteMessage:!Boolean(a),openInPeek:Boolean(s),openToSide:!1},r,o);e.get(Oh.IInstantiationService).invokeFunction(t.run.bind(t),g)})));case 13:case"end":return n.stop()}}),f)})))}}),vh.CommandsRegistry.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:ah.URI},{name:"position",description:"The position at which to start",constraint:md.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:function(e,t,i,r,o){return mC(void 0,void 0,void 0,n(l).mark((function a(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.get(vh.ICommandService).executeCommand("editor.action.goToLocations",t,i,r,o,void 0,!0);case 1:case"end":return n.stop()}}),a)})))}}),vh.CommandsRegistry.registerCommand({id:"editor.action.findReferences",handler:function(e,t,n){(0,zf.assertType)(ah.URI.isUri(t)),(0,zf.assertType)(md.Position.isIPosition(n));var i=e.get(jd.ICodeEditorService);return i.openCodeEditor({resource:t},i.getFocusedCodeEditor()).then((function(e){if((0,Ck.isCodeEditor)(e)&&e.hasModel()){var t=xk.ReferencesController.get(e);if(t){var i=(0,gd.createCancelablePromise)((function(t){return(0,sk.getReferencesAtPosition)(e.getModel(),md.Position.lift(n),!1,t).then((function(e){return new(0,lk.ReferencesModel)(e,Jc.localize("ref.title","References"))}))})),r=new(0,yd.Range)(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(r,i,!1))}}}))}}),vh.CommandsRegistry.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations"),xd.MenuRegistry.appendMenuItems([{id:xd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.revealDefinition",title:Jc.localize({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},group:"4_symbol_nav",order:2}},{id:xd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.revealDeclaration",title:Jc.localize({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},group:"4_symbol_nav",order:3}},{id:xd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.goToTypeDefinition",title:Jc.localize({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},group:"4_symbol_nav",order:3}},{id:xd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.goToImplementation",title:Jc.localize({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},group:"4_symbol_nav",order:4}},{id:xd.MenuId.MenubarGoMenu,item:{command:{id:"editor.action.goToReferences",title:Jc.localize({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},group:"4_symbol_nav",order:5}}]);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),vd=o("dXCvL"),$h=o("neTVg"),Bd=o("5DBhW");function AC(e,t){return!!e[t]}var IC=function e(t,n){"use strict";(0,u.default)(this,e),this.target=t.target,this.hasTriggerModifier=AC(t.event,n.triggerModifier),this.hasSideBySideModifier=AC(t.event,n.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1},RC=function e(t,n){"use strict";(0,u.default)(this,e),this.keyCodeIsTriggerKey=t.keyCode===n.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===n.triggerSideBySideKey,this.hasTriggerModifier=AC(t,n.triggerModifier)},TC=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.triggerKey=t,this.triggerModifier=n,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=r}return(0,c.default)(e,[{key:"equals",value:function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}]),e}();function LC(e){return"altKey"===e?Bd.isMacintosh?new TC(57,"metaKey",6,"altKey"):new TC(5,"ctrlKey",6,"altKey"):Bd.isMacintosh?new TC(6,"altKey",57,"metaKey"):new TC(6,"altKey",5,"ctrlKey")}var MC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._onMouseMoveOrRelevantKeyDown=i._register(new(0,$h.Emitter)),i.onMouseMoveOrRelevantKeyDown=i._onMouseMoveOrRelevantKeyDown.event,i._onExecute=i._register(new(0,$h.Emitter)),i.onExecute=i._onExecute.event,i._onCancel=i._register(new(0,$h.Emitter)),i.onCancel=i._onCancel.event,i._editor=e,i._opts=LC(i._editor.getOption(69)),i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._register(i._editor.onDidChangeConfiguration((function(e){if(e.hasChanged(69)){var t=LC(i._editor.getOption(69));if(i._opts.equals(t))return;i._opts=t,i._lastMouseMoveEvent=null,i._hasTriggerKeyOnMouseDown=!1,i._lineNumberOnMouseDown=0,i._onCancel.fire()}}))),i._register(i._editor.onMouseMove((function(e){return i._onEditorMouseMove(new IC(e,i._opts))}))),i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(new IC(e,i._opts))}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(new IC(e,i._opts))}))),i._register(i._editor.onKeyDown((function(e){return i._onEditorKeyDown(new RC(e,i._opts))}))),i._register(i._editor.onKeyUp((function(e){return i._onEditorKeyUp(new RC(e,i._opts))}))),i._register(i._editor.onMouseDrag((function(){return i._resetHandler()}))),i._register(i._editor.onDidChangeCursorSelection((function(e){return i._onDidChangeCursorSelection(e)}))),i._register(i._editor.onDidChangeModel((function(e){return i._resetHandler()}))),i._register(i._editor.onDidChangeModelContent((function(){return i._resetHandler()}))),i._register(i._editor.onDidScrollChange((function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&i._resetHandler()}))),i}return(0,c.default)(n,[{key:"_onDidChangeCursorSelection",value:function(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}},{key:"_onEditorMouseMove",value:function(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}},{key:"_onEditorMouseDown",value:function(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}},{key:"_onEditorMouseUp",value:function(e){var t=e.target.position?e.target.position.lineNumber:0;this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}},{key:"_onEditorKeyDown",value:function(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}},{key:"_onEditorKeyUp",value:function(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}},{key:"_resetHandler",value:function(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}]),n}(vd.Disposable),NC=(md=o("kBBF2"),zf=o("jW8FZ"),$c=o("efZ3W"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),PC=function(e,t){return function(n,i){t(n,i,e)}},OC=function(){"use strict";function e(t,n,i){var r=this;(0,u.default)(this,e),this.textModelResolverService=n,this.modeService=i,this.toUnhook=new(0,vd.DisposableStore),this.toUnhookForKeyboard=new(0,vd.DisposableStore),this.linkDecorations=[],this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t;var o=new MC(t);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,Ki.default)(e,2),n=t[0],i=t[1];r.startFindDefinitionFromMouse(n,(0,zf.withNullAsUndefined)(i))}))),this.toUnhook.add(o.onExecute((function(e){r.isEnabled(e)&&r.gotoDefinition(e.target.position,e.hasSideBySideModifier).then((function(){r.removeLinkDecorations()}),(function(e){r.removeLinkDecorations(),(0,Yc.onUnexpectedError)(e)}))}))),this.toUnhook.add(o.onCancel((function(){r.removeLinkDecorations(),r.currentWordAtPosition=null})))}return(0,c.default)(e,[{key:"startFindDefinitionFromCursor",value:function(e){var t=this;return this.startFindDefinition(e).then((function(){t.toUnhookForKeyboard.add(t.editor.onDidChangeCursorPosition((function(){t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear()}))),t.toUnhookForKeyboard.add(t.editor.onKeyDown((function(e){e&&(t.currentWordAtPosition=null,t.removeLinkDecorations(),t.toUnhookForKeyboard.clear())})))}))}},{key:"startFindDefinitionFromMouse",value:function(e,t){if(!(9===e.target.type&&this.linkDecorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var n=e.target.position;this.startFindDefinition(n)}}},{key:"startFindDefinition",value:function(e){var t,n=this;this.toUnhookForKeyboard.clear();var i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,this.removeLinkDecorations(),Promise.resolve(0);if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return Promise.resolve(0);this.currentWordAtPosition=i;var r=new(0,sh.EditorState)(this.editor,15);return this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,gd.createCancelablePromise)((function(t){return n.findDefinition(e,t)})),this.previousPromise.then((function(t){if(t&&t.length&&r.validate(n.editor))if(t.length>1)n.addDecoration(new(0,yd.Range)(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),(new ed).appendText(Jc.localize("multipleResults","Click to show {0} definitions.",t.length)));else{var o=t[0];if(!o.uri)return;n.textModelResolverService.createModelReference(o.uri).then((function(t){if(t.object&&t.object.textEditorModel){var r=t.object.textEditorModel,a=o.range.startLineNumber;if(a<1||a>r.getLineCount())t.dispose();else{var s,l=n.getPreviewValue(r,a,o);s=o.originSelectionRange?yd.Range.lift(o.originSelectionRange):new(0,yd.Range)(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);var u=n.modeService.getModeIdByFilepathOrFirstLine(r.uri);n.addDecoration(s,(new ed).appendCodeblock(u||"",l)),t.dispose()}}else t.dispose()}))}else n.removeLinkDecorations()})).then(void 0,Yc.onUnexpectedError)}},{key:"getPreviewValue",value:function(t,n,i){var r=i.targetSelectionRange?i.range:this.getPreviewRangeBasedOnBrackets(t,n);return r.endLineNumber-r.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(t,n)),this.stripIndentationFromPreviewRange(t,n,r)}},{key:"stripIndentationFromPreviewRange",value:function(e,t,n){for(var i=e.getLineFirstNonWhitespaceColumn(t),r=t+1;r<n.endLineNumber;r++){var o=e.getLineFirstNonWhitespaceColumn(r);i=Math.min(i,o)}return e.getValueInRange(n).replace(new RegExp("^\\s{".concat(i-1,"}"),"gm"),"").trim()}},{key:"getPreviewRangeBasedOnIndentation",value:function(t,n){for(var i=t.getLineFirstNonWhitespaceColumn(n),r=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),o=n+1;o<r;o++){if(i===t.getLineFirstNonWhitespaceColumn(o))break}return new(0,yd.Range)(n,1,o+1,1)}},{key:"getPreviewRangeBasedOnBrackets",value:function(t,n){for(var i=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),r=[],o=!0,a=t.findNextBracket(new(0,md.Position)(n,1));null!==a;){if(0===r.length)r.push(a);else{var s=r[r.length-1];if(s.open[0]===a.open[0]&&s.isOpen&&!a.isOpen?r.pop():r.push(a),0===r.length){if(!o)return new(0,yd.Range)(n,1,a.range.endLineNumber+1,1);o=!1}}var l=t.getLineMaxColumn(n),u=a.range.endLineNumber,c=a.range.endColumn;if(l===a.range.endColumn&&(u++,c=1),u>i)return new(0,yd.Range)(n,1,i+1,1);a=t.findNextBracket(new(0,md.Position)(u,c))}return new(0,yd.Range)(n,1,i+1,1)}},{key:"addDecoration",value:function(e,t){var n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[n])}},{key:"removeLinkDecorations",value:function(){this.linkDecorations.length>0&&(this.linkDecorations=this.editor.deltaDecorations(this.linkDecorations,[]))}},{key:"isEnabled",value:function(e,t){return this.editor.hasModel()&&e.isNoneOrSingleMouseDown&&6===e.target.type&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&lh.DefinitionProviderRegistry.has(this.editor.getModel())}},{key:"findDefinition",value:function(e,t){var n=this.editor.getModel();return n?(0,sk.getDefinitionsAtPosition)(n,e,t):Promise.resolve(null)}},{key:"gotoDefinition",value:function(e,t){var n=this;return this.editor.setPosition(e),this.editor.invokeWithinContext((function(e){var i=!t&&n.editor.getOption(77)&&!n.isInPeekEditor(e);return new(0,kk.DefinitionAction)({openToSide:t,openInPeek:i,muteMessage:!0},{alias:"",label:"",id:"",precondition:void 0}).run(e,n.editor)}))}},{key:"isInPeekEditor",value:function(e){var t=e.get($c.IContextKeyService);return Hp.PeekContext.inPeekEditor.getValue(t)}},{key:"dispose",value:function(){this.toUnhook.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();OC.ID="editor.contrib.gotodefinitionatposition",OC.MAX_SOURCE_PREVIEW_LINES=8,OC=NC([PC(1,Ly.ITextModelService),PC(2,kp.IModeService)],OC),(0,qc.registerEditorContribution)(OC.ID,OC),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorActiveLinkForeground);n&&t.addRule(".monaco-editor .goto-definition-link { color: ".concat(n," !important; }"))}));$c=o("efZ3W"),Oh=o("hm5an");var FC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},BC=function(e,t){return function(n,i){t(n,i,e)}},HC=function(){"use strict";function e(t,n,i,r,o){var a=this;(0,u.default)(this,e),this._editor=t,this._instantiationService=n,this._openerService=i,this._modeService=r,this._toUnhook=new(0,vd.DisposableStore),this._isMouseDown=!1,this._hoverClicked=!1,this._contentWidget=null,this._glyphWidget=null,this._hookEvents(),this._didChangeConfigurationHandler=this._editor.onDidChangeConfiguration((function(e){e.hasChanged(52)&&(a._unhookEvents(),a._hookEvents())})),this._hoverVisibleKey=Xc.EditorContextKeys.hoverVisible.bindTo(o)}return(0,c.default)(e,[{key:"_hookEvents",value:function(){var e=this,t=function(){return e._hideWidgets()},n=this._editor.getOption(52);this._isHoverEnabled=n.enabled,this._isHoverSticky=n.sticky,this._isHoverEnabled?(this._toUnhook.add(this._editor.onMouseDown((function(t){return e._onEditorMouseDown(t)}))),this._toUnhook.add(this._editor.onMouseUp((function(t){return e._onEditorMouseUp(t)}))),this._toUnhook.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._toUnhook.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)}))),this._toUnhook.add(this._editor.onDidChangeModelDecorations((function(){return e._onModelDecorationsChanged()})))):(this._toUnhook.add(this._editor.onMouseMove((function(t){return e._onEditorMouseMove(t)}))),this._toUnhook.add(this._editor.onKeyDown((function(t){return e._onKeyDown(t)})))),this._toUnhook.add(this._editor.onMouseLeave(t)),this._toUnhook.add(this._editor.onDidChangeModel(t)),this._toUnhook.add(this._editor.onDidScrollChange((function(t){return e._onEditorScrollChanged(t)})))}},{key:"_unhookEvents",value:function(){this._toUnhook.clear()}},{key:"_onModelDecorationsChanged",value:function(){var e,t;null===(e=this._contentWidget)||void 0===e||e.onModelDecorationsChanged(),null===(t=this._glyphWidget)||void 0===t||t.onModelDecorationsChanged()}},{key:"_onEditorScrollChanged",value:function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}},{key:"_onEditorMouseDown",value:function(e){this._isMouseDown=!0;var t=e.target.type;9!==t||e.target.detail!==Cp.ModesContentHoverWidget.ID?12===t&&e.target.detail===ok.ID||(12!==t&&e.target.detail!==ok.ID&&(this._hoverClicked=!1),this._hideWidgets()):this._hoverClicked=!0}},{key:"_onEditorMouseUp",value:function(e){this._isMouseDown=!1}},{key:"_onEditorMouseMove",value:function(e){var t,n,i,r,o,a=e.target.type;if((!this._isMouseDown||!this._hoverClicked)&&(!this._isHoverSticky||9!==a||e.target.detail!==Cp.ModesContentHoverWidget.ID)&&(!this._isHoverSticky||(null===(n=null===(t=e.event.browserEvent.view)||void 0===t?void 0:t.getSelection())||void 0===n?void 0:n.isCollapsed))&&(this._isHoverSticky||9!==a||e.target.detail!==Cp.ModesContentHoverWidget.ID||!(null===(i=this._contentWidget)||void 0===i?void 0:i.isColorPickerVisible()))&&(!this._isHoverSticky||12!==a||e.target.detail!==ok.ID))if(this._isHoverEnabled){if(!this._getOrCreateContentWidget().maybeShowAt(e))return 2===a&&e.target.position?(null===(o=this._contentWidget)||void 0===o||o.hide(),this._glyphWidget||(this._glyphWidget=new ok(this._editor,this._modeService,this._openerService)),void this._glyphWidget.startShowingAt(e.target.position.lineNumber)):void this._hideWidgets();null===(r=this._glyphWidget)||void 0===r||r.hide()}else this._hideWidgets()}},{key:"_onKeyDown",value:function(e){5!==e.keyCode&&6!==e.keyCode&&57!==e.keyCode&&4!==e.keyCode&&this._hideWidgets()}},{key:"_hideWidgets",value:function(){var e,t,n;this._isMouseDown&&this._hoverClicked&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||(this._hoverClicked=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(n=this._contentWidget)||void 0===n||n.hide())}},{key:"_getOrCreateContentWidget",value:function(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(Cp.ModesContentHoverWidget,this._editor,this._hoverVisibleKey)),this._contentWidget}},{key:"isColorPickerVisible",value:function(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible())||!1}},{key:"showContentHover",value:function(e,t,n){this._getOrCreateContentWidget().startShowingAtRange(e,t,n)}},{key:"dispose",value:function(){var e,t;this._unhookEvents(),this._toUnhook.dispose(),this._didChangeConfigurationHandler.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();HC.ID="editor.contrib.hover",HC=FC([BC(1,Oh.IInstantiationService),BC(2,Lp.IOpenerService),BC(3,kp.IModeService),BC(4,$c.IContextKeyService)],HC);var jC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.showHover",label:Jc.localize({key:"showHover",comment:["Label for action that will trigger the showing of a hover in the editor.","This allows for users to show the hover without using the mouse."]},"Show Hover"),alias:"Show Hover",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2087),weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=HC.get(t);if(n){var i=t.getPosition(),r=new(0,yd.Range)(i.lineNumber,i.column,i.lineNumber,i.column),o=2===t.getOption(2);n.showContentHover(r,1,o)}}}}]),n}(qc.EditorAction),zC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.showDefinitionPreviewHover",label:Jc.localize({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=HC.get(t);if(n){var i=t.getPosition();if(i){var r=new(0,yd.Range)(i.lineNumber,i.column,i.lineNumber,i.column);ak.GotoDefinitionAtPositionEditorContribution.get(t).startFindDefinitionFromCursor(i).then((function(){n.showContentHover(r,1,!0)}))}}}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(HC.ID,HC),(0,qc.registerEditorAction)(jC),(0,qc.registerEditorAction)(zC),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorHoverHighlight);n&&t.addRule(".monaco-editor .hoverHighlight { background-color: ".concat(n,"; }"));var i=e.getColor(kd.editorHoverBackground);i&&t.addRule(".monaco-editor .monaco-hover { background-color: ".concat(i,"; }"));var r=e.getColor(kd.editorHoverBorder);r&&(t.addRule(".monaco-editor .monaco-hover { border: 1px solid ".concat(r,"; }")),t.addRule(".monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(r.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-top: 1px solid ".concat(r.transparent(.5),"; }")),t.addRule(".monaco-editor .monaco-hover hr { border-bottom: 0px solid ".concat(r.transparent(.5),"; }")));var o=e.getColor(kd.textLinkForeground);o&&t.addRule(".monaco-editor .monaco-hover a { color: ".concat(o,"; }"));var a=e.getColor(kd.textLinkActiveForeground);a&&t.addRule(".monaco-editor .monaco-hover a:hover { color: ".concat(a,"; }"));var s=e.getColor(kd.editorHoverForeground);s&&t.addRule(".monaco-editor .monaco-hover { color: ".concat(s,"; }"));var l=e.getColor(kd.editorHoverStatusBarBackground);l&&t.addRule(".monaco-editor .monaco-hover .hover-row .actions { background-color: ".concat(l,"; }"));var u=e.getColor(kd.textCodeBlockBackground);u&&t.addRule(".monaco-editor .monaco-hover code { background-color: ".concat(u,"; }"))}));yd=o("5MJfC");var WC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._editor=e,i._register(e.onMouseDown((function(e){return i.onMouseDown(e)}))),i}return(0,c.default)(n,[{key:"dispose",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"onMouseDown",value:function(e){var t;if(6===e.target.type&&((0,qi.default)((null===(t=e.target.element)||void 0===t?void 0:t.classList.values())||[]).find((function(e){return e.startsWith("ced-colorBox")}))&&e.target.range)){var n=this._editor.getContribution(wp.ModesHoverController.ID);if(!n.isColorPickerVisible()){var i=new(0,yd.Range)(e.target.range.startLineNumber,e.target.range.startColumn+1,e.target.range.endLineNumber,e.target.range.endColumn+1);n.showContentHover(i,0,!1)}}}}]),n}(vd.Disposable);WC.ID="editor.contrib.colorContribution",(0,qc.registerEditorContribution)(WC.ID,WC);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),Zc=o("5LFig"),qc=o("THDAR"),yd=o("5MJfC"),Xc=o("5cDyY"),u=o("4JAgF"),c=o("9HoHC"),xm=o("7NUhl"),md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y"),sy=o("k4Xpx");var UC=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._selection=t,this._insertSpace=n,this._usedEndToken=null}return(0,c.default)(e,[{key:"_createOperationsForBlockComment",value:function(t,n,i,r,o,a){var s,l=t.startLineNumber,u=t.startColumn,c=t.endLineNumber,d=t.endColumn,h=o.getLineContent(l),f=o.getLineContent(c),p=h.lastIndexOf(n,u-1+n.length),g=f.indexOf(i,d-1-i.length);if(-1!==p&&-1!==g)if(l===c){h.substring(p+n.length,g).indexOf(i)>=0&&(p=-1,g=-1)}else{var v=h.substring(p+n.length),m=f.substring(0,g);(v.indexOf(i)>=0||m.indexOf(i)>=0)&&(p=-1,g=-1)}-1!==p&&-1!==g?(r&&p+n.length<h.length&&32===h.charCodeAt(p+n.length)&&(n+=" "),r&&g>0&&32===f.charCodeAt(g-1)&&(i=" "+i,g-=1),s=e._createRemoveBlockCommentOperations(new(0,yd.Range)(l,p+n.length+1,c,g+1),n,i)):(s=e._createAddBlockCommentOperations(t,n,i,this._insertSpace),this._usedEndToken=1===s.length?i:null);var y=!0,b=!1,_=void 0;try{for(var w,k=s[Symbol.iterator]();!(y=(w=k.next()).done);y=!0){var C=w.value;a.addTrackedEditOperation(C.range,C.text)}}catch(e){b=!0,_=e}finally{try{y||null==k.return||k.return()}finally{if(b)throw _}}}},{key:"getEditOperations",value:function(e,t){var n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenizeIfCheap(n);var r=e.getLanguageIdAtPosition(n,i),o=sy.LanguageConfigurationRegistry.getComments(r);o&&o.blockCommentStartToken&&o.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,o.blockCommentStartToken,o.blockCommentEndToken,this._insertSpace,e,t)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations();if(2===n.length){var i=n[0],r=n[1];return new(0,Gc.Selection)(i.range.endLineNumber,i.range.endColumn,r.range.startLineNumber,r.range.startColumn)}var o=n[0].range,a=this._usedEndToken?-this._usedEndToken.length-1:0;return new(0,Gc.Selection)(o.endLineNumber,o.endColumn+a,o.endLineNumber,o.endColumn+a)}}],[{key:"_haystackHasNeedleAtOffset",value:function(e,t,n){if(n<0)return!1;var i=t.length;if(n+i>e.length)return!1;for(var r=0;r<i;r++){var o=e.charCodeAt(n+r),a=t.charCodeAt(r);if(o!==a&&!(o>=65&&o<=90&&o+32===a||a>=65&&a<=90&&a+32===o))return!1}return!0}},{key:"_createRemoveBlockCommentOperations",value:function(e,t,n){var i=[];return yd.Range.isEmpty(e)?i.push(xm.EditOperation.delete(new(0,yd.Range)(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(xm.EditOperation.delete(new(0,yd.Range)(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(xm.EditOperation.delete(new(0,yd.Range)(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}},{key:"_createAddBlockCommentOperations",value:function(e,t,n,i){var r=[];return yd.Range.isEmpty(e)?r.push(xm.EditOperation.replace(new(0,yd.Range)(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(r.push(xm.EditOperation.insert(new(0,md.Position)(e.startLineNumber,e.startColumn),t+(i?" ":""))),r.push(xm.EditOperation.insert(new(0,md.Position)(e.endLineNumber,e.endColumn),(i?" ":"")+n))),r}}]),e}(),VC=(u=o("4JAgF"),c=o("9HoHC"),nh=o("gTzCU"),xm=o("7NUhl"),md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y"),sy=o("k4Xpx"),function(){"use strict";function e(t,n,i,r,o,a){(0,u.default)(this,e),this._selection=t,this._tabSize=n,this._type=i,this._insertSpace=r,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=a||!1}return(0,c.default)(e,[{key:"_executeLineComments",value:function(t,n,i,r){var o;i.shouldRemoveComments?o=e._createRemoveLineCommentsOperations(i.lines,r.startLineNumber):(e._normalizeInsertionPoint(t,i.lines,r.startLineNumber,this._tabSize),o=this._createAddLineCommentsOperations(i.lines,r.startLineNumber));for(var a=new(0,md.Position)(r.positionLineNumber,r.positionColumn),s=0,l=o.length;s<l;s++){if(n.addEditOperation(o[s].range,o[s].text),yd.Range.isEmpty(o[s].range)&&yd.Range.getStartPosition(o[s].range).equals(a))t.getLineContent(a.lineNumber).length+1===a.column&&(this._deltaColumn=(o[s].text||"").length)}this._selectionId=n.trackSelection(r)}},{key:"_attemptRemoveBlockComment",value:function(e,t,n,i){var r=t.startLineNumber,o=t.endLineNumber,a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn),s=e.getLineContent(r).lastIndexOf(n,a-1),l=e.getLineContent(o).indexOf(i,t.endColumn-1-n.length);return-1!==s&&-1===l&&(l=e.getLineContent(r).indexOf(i,s+n.length),o=r),-1===s&&-1!==l&&(s=e.getLineContent(o).lastIndexOf(n,l),r=o),!t.isEmpty()||-1!==s&&-1!==l||-1!==(s=e.getLineContent(r).indexOf(n))&&(l=e.getLineContent(r).indexOf(i,s+n.length)),-1!==s&&32===e.getLineContent(r).charCodeAt(s+n.length)&&(n+=" "),-1!==l&&32===e.getLineContent(o).charCodeAt(l-1)&&(i=" "+i,l-=1),-1!==s&&-1!==l?UC._createRemoveBlockCommentOperations(new(0,yd.Range)(r,s+n.length+1,o,l+1),n,i):null}},{key:"_executeBlockComment",value:function(e,t,n){e.tokenizeIfCheap(n.startLineNumber);var i=e.getLanguageIdAtPosition(n.startLineNumber,1),r=sy.LanguageConfigurationRegistry.getComments(i);if(r&&r.blockCommentStartToken&&r.blockCommentEndToken){var o=r.blockCommentStartToken,a=r.blockCommentEndToken,s=this._attemptRemoveBlockComment(e,n,o,a);if(!s){if(n.isEmpty()){var l=e.getLineContent(n.startLineNumber),u=nh.firstNonWhitespaceIndex(l);-1===u&&(u=l.length),s=UC._createAddBlockCommentOperations(new(0,yd.Range)(n.startLineNumber,u+1,n.startLineNumber,l.length+1),o,a,this._insertSpace)}else s=UC._createAddBlockCommentOperations(new(0,yd.Range)(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),o,a,this._insertSpace);1===s.length&&(this._deltaColumn=o.length+1)}this._selectionId=t.trackSelection(n);var c=!0,d=!1,h=void 0;try{for(var f,p=s[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var g=f.value;t.addEditOperation(g.range,g.text)}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}}}},{key:"getEditOperations",value:function(t,n){var i=this._selection;if(this._moveEndPositionDown=!1,i.startLineNumber===i.endLineNumber&&this._ignoreFirstLine)return n.addEditOperation(new(0,yd.Range)(i.startLineNumber,t.getLineMaxColumn(i.startLineNumber),i.startLineNumber+1,1),i.startLineNumber===t.getLineCount()?"":"\n"),void(this._selectionId=n.trackSelection(i));i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,t.getLineMaxColumn(i.endLineNumber-1)));var r=e._gatherPreflightData(this._type,this._insertSpace,t,i.startLineNumber,i.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine);return r.supported?this._executeLineComments(t,n,r,i):this._executeBlockComment(t,n,i)}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new(0,Gc.Selection)(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}},{key:"_createAddLineCommentsOperations",value:function(e,t){for(var n=[],i=this._insertSpace?" ":"",r=0,o=e.length;r<o;r++){var a=e[r];a.ignore||n.push(xm.EditOperation.insert(new(0,md.Position)(t+r,a.commentStrOffset+1),a.commentStr+i))}return n}}],[{key:"_gatherPreflightCommentStrings",value:function(e,t,n){e.tokenizeIfCheap(t);var i=e.getLanguageIdAtPosition(t,1),r=sy.LanguageConfigurationRegistry.getComments(i),o=r?r.lineCommentToken:null;if(!o)return null;for(var a=[],s=0,l=n-t+1;s<l;s++)a[s]={ignore:!1,commentStr:o,commentStrOffset:0,commentStrLength:o.length};return a}},{key:"_analyzeLines",value:function(e,t,n,i,r,o,a){var s,l=!0;s=0===e||1!==e;for(var u=0,c=i.length;u<c;u++){var d=i[u],h=r+u;if(h===r&&a)d.ignore=!0;else{var f=n.getLineContent(h),p=nh.firstNonWhitespaceIndex(f);if(-1!==p){if(l=!1,d.ignore=!1,d.commentStrOffset=p,s&&!UC._haystackHasNeedleAtOffset(f,d.commentStr,p)&&(0===e?s=!1:1===e||(d.ignore=!0)),s&&t){var g=p+d.commentStrLength;g<f.length&&32===f.charCodeAt(g)&&(d.commentStrLength+=1)}}else d.ignore=o,d.commentStrOffset=f.length}}if(0===e&&l){s=!1;for(var v=0,m=i.length;v<m;v++)i[v].ignore=!1}return{supported:!0,shouldRemoveComments:s,lines:i}}},{key:"_gatherPreflightData",value:function(t,n,i,r,o,a,s){var l=e._gatherPreflightCommentStrings(i,r,o);return null===l?{supported:!1}:e._analyzeLines(t,n,i,l,r,a,s)}},{key:"_createRemoveLineCommentsOperations",value:function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i];o.ignore||n.push(xm.EditOperation.delete(new(0,yd.Range)(t+i,o.commentStrOffset+1,t+i,o.commentStrOffset+o.commentStrLength+1)))}return n}},{key:"nextVisibleColumn",value:function(e,t,n,i){return n?e+(t-e%t):e+i}},{key:"_normalizeInsertionPoint",value:function(t,n,i,r){for(var o,a,s=1073741824,l=0,u=n.length;l<u;l++)if(!n[l].ignore){for(var c=t.getLineContent(i+l),d=0,h=0,f=n[l].commentStrOffset;d<s&&h<f;h++)d=e.nextVisibleColumn(d,r,9===c.charCodeAt(h),1);d<s&&(s=d)}s=Math.floor(s/r)*r;for(var p=0,g=n.length;p<g;p++)if(!n[p].ignore){var v=t.getLineContent(i+p),m=0;for(o=0,a=n[p].commentStrOffset;m<s&&o<a;o++)m=e.nextVisibleColumn(m,r,9===v.charCodeAt(o),1);n[p].commentStrOffset=m>s?o-1:o}}}]),e}()),KC=(xd=o("feTbe"),function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i))._type=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=[],i=t.getModel().getOptions(),r=t.getOption(18),o=t.getSelections().map((function(e,t){return{selection:e,index:t,ignoreFirstLine:!1}}));o.sort((function(e,t){return yd.Range.compareRangesUsingStarts(e.selection,t.selection)}));for(var a=o[0],s=1;s<o.length;s++){var l=o[s];a.selection.endLineNumber===l.selection.startLineNumber&&(a.index<l.index?l.ignoreFirstLine=!0:(a.ignoreFirstLine=!0,a=l))}var u=!0,c=!1,d=void 0;try{for(var h,f=o[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;n.push(new VC(p.selection,i.tabSize,this._type,r.insertSpace,r.ignoreEmptyLines,p.ignoreFirstLine))}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}}]),n}(qc.EditorAction)),qC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,0,{id:"editor.action.commentLine",label:Jc.localize("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2133,weight:100},menuOpts:{menuId:xd.MenuId.MenubarEditMenu,group:"5_insert",title:Jc.localize({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}return n}(KC),JC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,1,{id:"editor.action.addCommentLine",label:Jc.localize("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2081),weight:100}})}return n}(KC),XC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,2,{id:"editor.action.removeCommentLine",label:Jc.localize("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2099),weight:100}})}return n}(KC),GC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.blockComment",label:Jc.localize("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:xd.MenuId.MenubarEditMenu,group:"5_insert",title:Jc.localize({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getOption(18),i=[],r=t.getSelections(),o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;i.push(new UC(c,n.insertSpace))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(qC),(0,qc.registerEditorAction)(JC),(0,qc.registerEditorAction)(XC),(0,qc.registerEditorAction)(GC);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),Jc=o("faA3E"),Bh=o("fTm33"),Hh=o("2NkhT"),vd=o("dXCvL"),qc=o("THDAR"),Xc=o("5cDyY"),xd=o("feTbe"),$c=o("efZ3W"),jh=o("1UyyS"),zh=o("5H40S"),rg=o("4JC3K"),Bd=o("5DBhW");var ZC=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$C=function(e,t){return function(n,i){t(n,i,e)}},YC=function(){"use strict";function e(t,n,i,r,o,a){var s=this;(0,u.default)(this,e),this._contextMenuService=n,this._contextViewService=i,this._contextKeyService=r,this._keybindingService=o,this._menuService=a,this._toDispose=new(0,vd.DisposableStore),this._contextMenuIsBeingShownCount=0,this._editor=t,this._toDispose.add(this._editor.onContextMenu((function(e){return s._onContextMenu(e)}))),this._toDispose.add(this._editor.onMouseWheel((function(e){if(s._contextMenuIsBeingShownCount>0){var t=s._contextViewService.getContextViewElement(),n=e.srcElement;n.shadowRoot&&Bh.getShadowRoot(t)===n.shadowRoot||s._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((function(e){58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),s.showContextMenu())})))}return(0,c.default)(e,[{key:"_onContextMenu",value:function(e){if(this._editor.hasModel()){if(!this._editor.getOption(19))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12!==e.target.type&&(e.event.preventDefault(),e.event.stopPropagation(),6===e.target.type||7===e.target.type||1===e.target.type)){if(this._editor.focus(),e.target.position){var t=!1,n=!0,i=!1,r=void 0;try{for(var o,a=this._editor.getSelections()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(o.value.containsPosition(e.target.position)){t=!0;break}}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}t||this._editor.setPosition(e.target.position)}var s=null;1!==e.target.type&&(s={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(s)}}}},{key:"showContextMenu",value:function(e){if(this._editor.getOption(19)&&this._editor.hasModel())if(this._contextMenuService){var t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?xd.MenuId.SimpleEditorContext:xd.MenuId.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}else this._editor.focus()}},{key:"_getMenuActions",value:function(e,t){var n=[],i=this._menuService.createMenu(t,this._contextKeyService),r=i.getActions({arg:e.uri});i.dispose();var o=!0,a=!1,s=void 0;try{for(var l,u=r[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=(0,Ki.default)(c,2)[1],h=0,f=!0,p=!1,g=void 0;try{for(var v,m=d[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=v.value;if(y instanceof xd.SubmenuItemAction){var b=this._getMenuActions(e,y.item.submenu);b.length>0&&(n.push(new(0,Hh.SubmenuAction)(y.id,y.label,b)),h++)}else n.push(y),h++}}catch(e){p=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw g}}h&&n.push(new(0,Hh.Separator))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}return n.length&&n.pop(),n}},{key:"_doShowContextMenu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;if(this._editor.hasModel()){var i=this._editor.getOption(52);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();var r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),o=Bh.getDomNodePagePosition(this._editor.getDomNode()),a=o.left+r.left,s=o.top+r.top+r.height;t={x:a,y:s}}var l=this._editor.getOption(114)&&!Bd.isIOS;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:function(){return t},getActions:function(){return e},getActionViewItem:function(e){var t=n._keybindingFor(e);if(t)return new(0,rg.ActionViewItem)(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});var i=e;return"function"==typeof i.getActionViewItem?i.getActionViewItem():new(0,rg.ActionViewItem)(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:function(e){return n._keybindingFor(e)},onHide:function(e){n._contextMenuIsBeingShownCount--,n._editor.focus(),n._editor.updateOptions({hover:i})}})}}},{key:"_keybindingFor",value:function(e){return this._keybindingService.lookupKeybinding(e.id)}},{key:"dispose",value:function(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();YC.ID="editor.contrib.contextmenu",YC=ZC([$C(1,jh.IContextMenuService),$C(2,jh.IContextViewService),$C(3,$c.IContextKeyService),$C(4,zh.IKeybindingService),$C(5,xd.IMenuService)],YC);var QC=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.showContextMenu",label:Jc.localize("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:1092,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){YC.get(t).showContextMenu()}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(YC.ID,YC),(0,qc.registerEditorAction)(QC);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),vd=o("dXCvL"),qc=o("THDAR"),Xc=o("5cDyY");var ex=function(){"use strict";function e(t){(0,u.default)(this,e),this.selections=t}return(0,c.default)(e,[{key:"equals",value:function(e){var t=this.selections.length;if(t!==e.selections.length)return!1;for(var n=0;n<t;n++)if(!this.selections[n].equalsSelection(e.selections[n]))return!1;return!0}}]),e}(),tx=function e(t,n,i){"use strict";(0,u.default)(this,e),this.cursorState=t,this.scrollTop=n,this.scrollLeft=i},nx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._editor=e,i._isCursorUndoRedo=!1,i._undoStack=[],i._redoStack=[],i._register(e.onDidChangeModel((function(e){i._undoStack=[],i._redoStack=[]}))),i._register(e.onDidChangeModelContent((function(e){i._undoStack=[],i._redoStack=[]}))),i._register(e.onDidChangeCursorSelection((function(t){if(!i._isCursorUndoRedo&&t.oldSelections&&t.oldModelVersionId===t.modelVersionId){var n=new ex(t.oldSelections);i._undoStack.length>0&&i._undoStack[i._undoStack.length-1].cursorState.equals(n)||(i._undoStack.push(new tx(n,e.getScrollTop(),e.getScrollLeft())),i._redoStack=[],i._undoStack.length>50&&i._undoStack.shift())}}))),i}return(0,c.default)(n,[{key:"cursorUndo",value:function(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new tx(new ex(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}},{key:"cursorRedo",value:function(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new tx(new ex(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}},{key:"_applyState",value:function(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);nx.ID="editor.contrib.cursorUndoRedoController";var ix=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"cursorUndo",label:Jc.localize("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2099,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){nx.get(t).cursorUndo()}}]),n}(qc.EditorAction),rx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"cursorRedo",label:Jc.localize("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){nx.get(t).cursorRedo()}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(nx.ID,nx),(0,qc.registerEditorAction)(ix),(0,qc.registerEditorAction)(rx);u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),vd=o("dXCvL"),Bd=o("5DBhW"),qc=o("THDAR"),md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y"),u=o("4JAgF"),c=o("9HoHC"),Gc=o("3WP4Y"),yd=o("5MJfC");var ox=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.selection=t,this.targetPosition=n,this.copy=i,this.targetSelection=null}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){var n=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new(0,yd.Range)(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new(0,Gc.Selection)(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new(0,Gc.Selection)(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new(0,Gc.Selection)(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new(0,Gc.Selection)(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new(0,Gc.Selection)(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();_d=o("60ELr");function ax(e){return Bd.isMacintosh?e.altKey:e.ctrlKey}var sx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._editor=e,i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(e)}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(e)}))),i._register(i._editor.onMouseDrag((function(e){return i._onEditorMouseDrag(e)}))),i._register(i._editor.onMouseDrop((function(e){return i._onEditorMouseDrop(e)}))),i._register(i._editor.onMouseDropCanceled((function(){return i._onEditorMouseDropCanceled()}))),i._register(i._editor.onKeyDown((function(e){return i.onEditorKeyDown(e)}))),i._register(i._editor.onKeyUp((function(e){return i.onEditorKeyUp(e)}))),i._register(i._editor.onDidBlurEditorWidget((function(){return i.onEditorBlur()}))),i._register(i._editor.onDidBlurEditorText((function(){return i.onEditorBlur()}))),i._dndDecorationIds=[],i._mouseDown=!1,i._modifierPressed=!1,i._dragSelection=null,i}return(0,c.default)(n,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(30)&&!this._editor.getOption(17)&&(ax(e)&&(this._modifierPressed=!0),this._mouseDown&&ax(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(30)&&!this._editor.getOption(17)&&(ax(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===n.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var n=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==n.length)return;this._dragSelection=n[0]}ax(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var t=new(0,md.Position)(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var i=null;if(e.event.shiftKey){var r=this._editor.getSelection();if(r){var o=r.selectionStartLineNumber,a=r.selectionStartColumn;i=[new(0,Gc.Selection)(o,a,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(t)?new(0,Gc.Selection)(t.lineNumber,t.column,t.lineNumber,t.column):e}));this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(ax(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(n.ID,new ox(this._dragSelection,t,ax(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){var t=[{range:new(0,yd.Range)(e.lineNumber,e.column,e.lineNumber,e.column),options:n._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}}]),n}(vd.Disposable);sx.ID="editor.contrib.dragAndDrop",sx.TRIGGER_KEY_VALUE=Bd.isMacintosh?6:5,sx._DECORATION_OPTIONS=_d.ModelDecorationOptions.register({description:"dnd-target",className:"dnd-target"}),(0,qc.registerEditorContribution)(sx.ID,sx);var lx={};e(lx,"CommonFindController",(function(){return US}),(function(e){return US=e}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),gd=o("hJucn"),vd=o("dXCvL"),nh=o("gTzCU"),qc=o("THDAR"),Xc=o("5cDyY"),u=o("4JAgF"),c=o("9HoHC"),gd=o("hJucn"),vd=o("dXCvL"),Nd=o("jxlHx"),md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y");var ux=o("4kneA"),cx=(u=o("4JAgF"),c=o("9HoHC"),qi=o("caN7I"),yd=o("5MJfC"),bd=o("7wGTu"),_d=o("60ELr"),kd=o("ht8QC"),Cd=o("4ET02"),function(){"use strict";function e(t){(0,u.default)(this,e),this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return(0,c.default)(e,[{key:"dispose",value:function(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"reset",value:function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"getCount",value:function(){return this._decorations.length}},{key:"getFindScope",value:function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}},{key:"getFindScopes",value:function(){var e=this;if(this._findScopeDecorationIds.length){var t=this._findScopeDecorationIds.map((function(t){return e._editor.getModel().getDecorationRange(t)})).filter((function(e){return!!e}));if(t.length)return t}return null}},{key:"getStartPosition",value:function(){return this._startPosition}},{key:"setStartPosition",value:function(e){this._startPosition=e,this.setCurrentFindMatch(null)}},{key:"_getDecorationIndex",value:function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1}},{key:"getCurrentMatchesPosition",value:function(t){var n=this._editor.getModel().getDecorationsInRange(t),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=l.options;if(u===e._FIND_MATCH_DECORATION||u===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(l.id)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return 0}},{key:"setCurrentFindMatch",value:function(t){var n=this,i=null,r=0;if(t)for(var o=0,a=this._decorations.length;o<a;o++){var s=this._editor.getModel().getDecorationRange(this._decorations[o]);if(t.equalsRange(s)){i=this._decorations[o],r=o+1;break}}return null===this._highlightedDecorationId&&null===i||this._editor.changeDecorations((function(t){if(null!==n._highlightedDecorationId&&(t.changeDecorationOptions(n._highlightedDecorationId,e._FIND_MATCH_DECORATION),n._highlightedDecorationId=null),null!==i&&(n._highlightedDecorationId=i,t.changeDecorationOptions(n._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==n._rangeHighlightDecorationId&&(t.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),null!==i){var r=n._editor.getModel().getDecorationRange(i);if(r.startLineNumber!==r.endLineNumber&&1===r.endColumn){var o=r.endLineNumber-1,a=n._editor.getModel().getLineMaxColumn(o);r=new(0,yd.Range)(r.startLineNumber,r.startColumn,o,a)}n._rangeHighlightDecorationId=t.addDecoration(r,e._RANGE_HIGHLIGHT_DECORATION)}})),r}},{key:"set",value:function(t,n){var i=this;this._editor.changeDecorations((function(r){var o=e._FIND_MATCH_DECORATION,a=[];if(t.length>1e3){o=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var s=i._editor.getModel().getLineCount(),l=i._editor.getLayoutInfo().height/s,u=Math.max(2,Math.ceil(3/l)),c=t[0].range.startLineNumber,d=t[0].range.endLineNumber,h=1,f=t.length;h<f;h++){var p=t[h].range;d+u>=p.startLineNumber?p.endLineNumber>d&&(d=p.endLineNumber):(a.push({range:new(0,yd.Range)(c,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),c=p.startLineNumber,d=p.endLineNumber)}a.push({range:new(0,yd.Range)(c,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var g=new Array(t.length),v=0,m=t.length;v<m;v++)g[v]={range:t[v].range,options:o};i._decorations=r.deltaDecorations(i._decorations,g),i._overviewRulerApproximateDecorations=r.deltaDecorations(i._overviewRulerApproximateDecorations,a),i._rangeHighlightDecorationId&&(r.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),i._findScopeDecorationIds.length&&(i._findScopeDecorationIds.forEach((function(e){return r.removeDecoration(e)})),i._findScopeDecorationIds=[]),(null==n?void 0:n.length)&&(i._findScopeDecorationIds=n.map((function(t){return r.addDecoration(t,e._FIND_SCOPE_DECORATION)})))}))}},{key:"matchBeforePosition",value:function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(i&&!(i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}},{key:"matchAfterPosition",value:function(e){if(0===this._decorations.length)return null;for(var t=0,n=this._decorations.length;t<n;t++){var i=this._decorations[t],r=this._editor.getModel().getDecorationRange(i);if(r&&!(r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}},{key:"_allDecorations",value:function(){var e,t=[];return t=(t=t.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&(e=t).push.apply(e,(0,qi.default)(this._findScopeDecorationIds)),this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}]),e}());cx._CURRENT_FIND_MATCH_DECORATION=_d.ModelDecorationOptions.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,Cd.themeColorFromId)(kd.overviewRulerFindMatchForeground),position:bd.OverviewRulerLane.Center},minimap:{color:(0,Cd.themeColorFromId)(kd.minimapFindMatch),position:bd.MinimapPosition.Inline}}),cx._FIND_MATCH_DECORATION=_d.ModelDecorationOptions.register({description:"find-match",stickiness:1,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,Cd.themeColorFromId)(kd.overviewRulerFindMatchForeground),position:bd.OverviewRulerLane.Center},minimap:{color:(0,Cd.themeColorFromId)(kd.minimapFindMatch),position:bd.MinimapPosition.Inline}}),cx._FIND_MATCH_NO_OVERVIEW_DECORATION=_d.ModelDecorationOptions.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),cx._FIND_MATCH_ONLY_OVERVIEW_DECORATION=_d.ModelDecorationOptions.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,Cd.themeColorFromId)(kd.overviewRulerFindMatchForeground),position:bd.OverviewRulerLane.Center}}),cx._RANGE_HIGHLIGHT_DECORATION=_d.ModelDecorationOptions.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),cx._FIND_SCOPE_DECORATION=_d.ModelDecorationOptions.register({description:"find-scope",className:"findScope",isWholeLine:!0});u=o("4JAgF"),c=o("9HoHC"),yd=o("5MJfC");var dx=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._editorSelection=t,this._ranges=n,this._replaceStrings=i,this._trackedEditorSelectionId=null}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){if(this._ranges.length>0){for(var n=[],i=0;i<this._ranges.length;i++)n.push({range:this._ranges[i],text:this._replaceStrings[i]});n.sort((function(e,t){return yd.Range.compareRangesUsingStarts(e.range,t.range)}));for(var r=[],o=n[0],a=1;a<n.length;a++)o.range.endLineNumber===n[a].range.startLineNumber&&o.range.endColumn===n[a].range.startColumn?(o.range=o.range.plusRange(n[a].range),o.text=o.text+n[a].text):(r.push(o),o=n[a]);r.push(o);var s=!0,l=!1,u=void 0;try{for(var c,d=r[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;t.addEditOperation(h.range,h.text)}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}]),e}();u=o("4JAgF"),c=o("9HoHC"),nh=o("gTzCU");function hx(e,t){if(e&&""!==e[0]){var n=fx(e,t,"-"),i=fx(e,t,"_");return n&&!i?px(e,t,"-"):!n&&i?px(e,t,"_"):e[0].toUpperCase()===e[0]?t.toUpperCase():e[0].toLowerCase()===e[0]?t.toLowerCase():nh.containsUppercaseCharacter(e[0][0])&&t.length>0?t[0].toUpperCase()+t.substr(1):e[0][0].toUpperCase()!==e[0][0]&&t.length>0?t[0].toLowerCase()+t.substr(1):t}return t}function fx(e,t,n){return-1!==e[0].indexOf(n)&&-1!==t.indexOf(n)&&e[0].split(n).length===t.split(n).length}function px(e,t,n){var i=t.split(n),r=e[0].split(n),o="";return i.forEach((function(e,t){o+=hx([r[t]],e)+n})),o.slice(0,-1)}var gx=function e(t){"use strict";(0,u.default)(this,e),this.staticValue=t,this.kind=0},vx=function e(t){"use strict";(0,u.default)(this,e),this.pieces=t,this.kind=1},mx=function(){"use strict";function e(t){(0,u.default)(this,e),t&&0!==t.length?1===t.length&&null!==t[0].staticValue?this._state=new gx(t[0].staticValue):this._state=new vx(t):this._state=new gx("")}return(0,c.default)(e,[{key:"hasReplacementPatterns",get:function(){return 1===this._state.kind}},{key:"buildReplaceString",value:function(t,n){if(0===this._state.kind)return n?hx(t,this._state.staticValue):this._state.staticValue;for(var i="",r=0,o=this._state.pieces.length;r<o;r++){var a=this._state.pieces[r];if(null===a.staticValue){var s=e._substitute(a.matchIndex,t);if(null!==a.caseOps&&a.caseOps.length>0){for(var l=[],u=a.caseOps.length,c=0,d=0,h=s.length;d<h;d++){if(c>=u){l.push(s.slice(d));break}switch(a.caseOps[c]){case"U":l.push(s[d].toUpperCase());break;case"u":l.push(s[d].toUpperCase()),c++;break;case"L":l.push(s[d].toLowerCase());break;case"l":l.push(s[d].toLowerCase()),c++;break;default:l.push(s[d])}}s=l.join("")}i+=s}else i+=a.staticValue}return i}}],[{key:"fromStaticValue",value:function(t){return new e([yx.staticValue(t)])}},{key:"_substitute",value:function(e,t){if(null===t)return"";if(0===e)return t[0];for(var n="";e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}]),e}(),yx=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this.staticValue=t,this.matchIndex=n,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}return(0,c.default)(e,null,[{key:"staticValue",value:function(t){return new e(t,-1,null)}},{key:"caseOps",value:function(t,n){return new e(null,t,n)}}]),e}(),bx=function(){"use strict";function e(t){(0,u.default)(this,e),this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return(0,c.default)(e,[{key:"emitUnchanged",value:function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}},{key:"emitStatic",value:function(e,t){this._emitStatic(e),this._lastCharIndex=t}},{key:"_emitStatic",value:function(e){0!==e.length&&(this._currentStaticPiece+=e)}},{key:"emitMatchIndex",value:function(e,t,n){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=yx.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=yx.caseOps(e,n),this._lastCharIndex=t}},{key:"finalize",value:function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=yx.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new mx(this._result)}}]),e}();function _x(e){if(!e||0===e.length)return new mx(null);for(var t=[],n=new bx(e),i=0,r=e.length;i<r;i++){var o=e.charCodeAt(i);if(92!==o){if(36===o){if(++i>=r)break;var a=e.charCodeAt(i);if(36===a){n.emitUnchanged(i-1),n.emitStatic("$",i+1);continue}if(48===a||38===a){n.emitUnchanged(i-1),n.emitMatchIndex(0,i+1,t),t.length=0;continue}if(49<=a&&a<=57){var s=a-48;if(i+1<r){var l=e.charCodeAt(i+1);if(48<=l&&l<=57){i++,s=10*s+(l-48),n.emitUnchanged(i-2),n.emitMatchIndex(s,i+1,t),t.length=0;continue}}n.emitUnchanged(i-1),n.emitMatchIndex(s,i+1,t),t.length=0;continue}}}else{if(++i>=r)break;var u=e.charCodeAt(i);switch(u){case 92:n.emitUnchanged(i-1),n.emitStatic("\\",i+1);break;case 110:n.emitUnchanged(i-1),n.emitStatic("\n",i+1);break;case 116:n.emitUnchanged(i-1),n.emitStatic("\t",i+1);break;case 117:case 85:case 108:case 76:n.emitUnchanged(i-1),n.emitStatic("",i+1),t.push(String.fromCharCode(u))}}}return n.finalize()}$c=o("efZ3W"),oh=o("2ZBuK");var wx=new(0,$c.RawContextKey)("findWidgetVisible",!1),kx=new(0,$c.RawContextKey)("findInputFocussed",!1),Cx=new(0,$c.RawContextKey)("replaceInputFocussed",!1),xx={primary:545,mac:{primary:2593}},Sx={primary:565,mac:{primary:2613}},Ex={primary:560,mac:{primary:2608}},Dx={primary:554,mac:{primary:2602}},Ax={primary:558,mac:{primary:2606}},Ix={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Rx=19999,Tx=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._toDispose=new(0,vd.DisposableStore),this._editor=t,this._state=n,this._isDisposed=!1,this._startSearchingTimer=new(0,gd.TimeoutTimer),this._decorations=new cx(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new(0,gd.RunOnceScheduler)((function(){return i.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||i._decorations.setStartPosition(i._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(e){i._ignoreModelContentChanged||(e.isFlush&&i._decorations.reset(),i._decorations.setStartPosition(i._editor.getPosition()),i._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(e){return i._onStateChanged(e)}))),this.research(!1,this._state.searchScope)}return(0,c.default)(e,[{key:"dispose",value:function(){this._isDisposed=!0,(0,vd.dispose)(this._startSearchingTimer),this._toDispose.dispose()}},{key:"_onStateChanged",value:function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}},{key:"research",value:function(e,t){var n=this,i=null;void 0!==t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map((function(e){if(e.startLineNumber!==e.endLineNumber){var t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new(0,yd.Range)(e.startLineNumber,1,t,n._editor.getModel().getLineMaxColumn(t))}return e})));var r=this._findMatches(i,!1,Rx);this._decorations.set(r,i);var o=this._editor.getSelection(),a=this._decorations.getCurrentMatchesPosition(o);if(0===a&&r.length>0){var s=(0,oh.findFirstInSorted)(r.map((function(e){return e.range})),(function(e){return yd.Range.compareRangesUsingStarts(e,o)>=0}));a=s>0?s-1+1:a}this._state.changeMatchInfo(a,this._decorations.getCount(),void 0),e&&this._editor.getOption(34).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}},{key:"_hasMatches",value:function(){return this._state.matchesCount>0}},{key:"_cannotFind",value:function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}},{key:"_setCurrentFindMatch",value:function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}},{key:"_prevSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),n=e.lineNumber,i=e.column,r=this._editor.getModel();return t||1===i?(1===n?n=r.getLineCount():n--,i=r.getLineMaxColumn(n)):i--,new(0,md.Position)(n,i)}},{key:"_moveToPrevMatch",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._state.canNavigateBack()){if(this._decorations.getCount()<Rx){var i=this._decorations.matchBeforePosition(t);return i&&i.isEmpty()&&i.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),i=this._decorations.matchBeforePosition(t)),void(i&&this._setCurrentFindMatch(i))}if(!this._cannotFind()){var r=this._decorations.getFindScope(),o=e._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(t)&&(t=o.getEndPosition()),t.isBefore(o.getStartPosition())&&(t=o.getEndPosition());var a=t.lineNumber,s=t.column,l=this._editor.getModel(),u=new(0,md.Position)(a,s),c=l.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),c=l.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,!1)),c)return n||o.containsRange(c.range)?void this._setCurrentFindMatch(c.range):this._moveToPrevMatch(c.range.getStartPosition(),!0)}}else{var d=this._decorations.matchAfterPosition(t);d&&this._setCurrentFindMatch(d)}}},{key:"moveToPrevMatch",value:function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}},{key:"_nextSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),n=e.lineNumber,i=e.column,r=this._editor.getModel();return t||i===r.getLineMaxColumn(n)?(n===r.getLineCount()?n=1:n++,i=1):i++,new(0,md.Position)(n,i)}},{key:"_moveToNextMatch",value:function(e){if(this._state.canNavigateForward()){if(this._decorations.getCount()<Rx){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var n=this._getNextMatch(e,!1,!0);n&&this._setCurrentFindMatch(n.range)}else{var i=this._decorations.matchBeforePosition(e);i&&this._setCurrentFindMatch(i)}}},{key:"_getNextMatch",value:function(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;var o=this._decorations.getFindScope(),a=e._getSearchRange(this._editor.getModel(),o);a.getEndPosition().isBefore(t)&&(t=a.getStartPosition()),t.isBefore(a.getStartPosition())&&(t=a.getStartPosition());var s=t.lineNumber,l=t.column,u=this._editor.getModel(),c=new(0,md.Position)(s,l),d=u.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,n);return i&&d&&d.range.isEmpty()&&d.range.getStartPosition().equals(c)&&(c=this._nextSearchPosition(c),d=u.findNextMatch(this._state.searchString,c,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,n)),d?r||a.containsRange(d.range)?d:this._getNextMatch(d.range.getEndPosition(),n,i,!0):null}},{key:"moveToNextMatch",value:function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}},{key:"_getReplacePattern",value:function(){return this._state.isRegex?_x(this._state.replaceString):mx.fromStaticValue(this._state.replaceString)}},{key:"replace",value:function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){var i=e.buildReplaceString(n.matches,this._state.preserveCase),r=new(0,Nd.ReplaceCommand)(t,i);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new(0,md.Position)(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}}},{key:"_findMatches",value:function(t,n,i){var r=this,o=(t||[null]).map((function(t){return e._getSearchRange(r._editor.getModel(),t)}));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null,n,i)}},{key:"replaceAll",value:function(){if(this._hasMatches()){var e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=Rx?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}}},{key:"_largeReplaceAll",value:function(){var e=new(0,ux.SearchParams)(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(116):null).parseSearchRequest();if(e){var t=e.regex;if(!t.multiline){var n="mu";t.ignoreCase&&(n+="i"),t.global&&(n+="g"),t=new RegExp(t.source,n)}var i,r=this._editor.getModel(),o=r.getValue(1),a=r.getFullModelRange(),s=this._getReplacePattern(),l=this._state.preserveCase;i=s.hasReplacementPatterns||l?o.replace(t,(function(){return s.buildReplaceString(arguments,l)})):o.replace(t,s.buildReplaceString(null,l));var u=new(0,Nd.ReplaceCommandThatPreservesSelection)(a,i,this._editor.getSelection());this._executeEditorCommand("replaceAll",u)}}},{key:"_regularReplaceAll",value:function(e){for(var t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[],r=0,o=n.length;r<o;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);var a=new dx(this._editor.getSelection(),n.map((function(e){return e.range})),i);this._executeEditorCommand("replaceAll",a)}},{key:"selectAllMatches",value:function(){if(this._hasMatches()){for(var e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((function(e){return new(0,Gc.Selection)(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})),n=this._editor.getSelection(),i=0,r=t.length;i<r;i++){if(t[i].equalsRange(n)){t=[n].concat(t.slice(0,i)).concat(t.slice(i+1));break}}this._editor.setSelections(t)}}},{key:"_executeEditorCommand",value:function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}],[{key:"_getSearchRange",value:function(e,t){return t||e.getFullModelRange()}}]),e}(),Lx=(Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),u=o("4JAgF"),d=o("gNsil"),h=o("8rJSp"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),Sp=o("c9lKY"),Qh=o("8bO6F"),pp=o("8ta7j"),$h=o("neTVg"),{inputActiveOptionBorder:pp.Color.fromHex("#007ACC00"),inputActiveOptionForeground:pp.Color.fromHex("#FFFFFF"),inputActiveOptionBackground:pp.Color.fromHex("#0E639C50")}),Mx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i,r,o,a;(0,u.default)(this,n),(a=t.call(this))._onChange=a._register(new(0,$h.Emitter)),a.onChange=a._onChange.event,a._onKeyDown=a._register(new(0,$h.Emitter)),a.onKeyDown=a._onKeyDown.event,a._opts=Object.assign(Object.assign({},Lx),e),a._checked=a._opts.isChecked;var s=["monaco-custom-checkbox"];return a._opts.icon&&(i=s).push.apply(i,(0,qi.default)(Qh.CSSIcon.asClassNameArray(a._opts.icon))),a._opts.actionClassName&&(r=s).push.apply(r,(0,qi.default)(a._opts.actionClassName.split(" "))),a._checked&&s.push("checked"),a.domNode=document.createElement("div"),a.domNode.title=a._opts.title,(o=a.domNode.classList).add.apply(o,(0,qi.default)(s)),a._opts.notFocusable||(a.domNode.tabIndex=0),a.domNode.setAttribute("role","checkbox"),a.domNode.setAttribute("aria-checked",String(a._checked)),a.domNode.setAttribute("aria-label",a._opts.title),a.applyStyles(),a.onclick(a.domNode,(function(e){a.checked=!a._checked,a._onChange.fire(!1),e.preventDefault()})),a.ignoreGesture(a.domNode),a.onkeydown(a.domNode,(function(e){if(10===e.keyCode||3===e.keyCode)return a.checked=!a._checked,a._onChange.fire(!0),void e.preventDefault();a._onKeyDown.fire(e)})),a}return(0,c.default)(n,[{key:"enabled",get:function(){return"true"!==this.domNode.getAttribute("aria-disabled")}},{key:"focus",value:function(){this.domNode.focus()}},{key:"checked",get:function(){return this._checked},set:function(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}},{key:"width",value:function(){return 22}},{key:"style",value:function(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}},{key:"applyStyles",value:function(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"transparent",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"transparent")}},{key:"enable",value:function(){this.domNode.setAttribute("aria-disabled",String(!1))}},{key:"disable",value:function(){this.domNode.setAttribute("aria-disabled",String(!0))}}]),n}(Sp.Widget),Nx=(Qh=o("8bO6F"),(Jc=o("faA3E")).localize("caseDescription","Match Case")),Px=Jc.localize("wordsDescription","Match Whole Word"),Ox=Jc.localize("regexDescription","Use Regular Expression"),Fx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){return(0,u.default)(this,n),t.call(this,{icon:Qh.Codicon.caseSensitive,title:Nx+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}return n}(Mx),Bx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){return(0,u.default)(this,n),t.call(this,{icon:Qh.Codicon.wholeWord,title:Px+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}return n}(Mx),Hx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){return(0,u.default)(this,n),t.call(this,{icon:Qh.Codicon.regex,title:Ox+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}return n}(Mx),jx=(Sp=o("c9lKY"),gd=o("hJucn"),kd=o("ht8QC"),Cd=o("4ET02"),function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;(0,u.default)(this,n),(a=t.call(this))._hideSoon=a._register(new(0,gd.RunOnceScheduler)((function(){return a._hide()}),2e3)),a._isVisible=!1,a._editor=e,a._state=i,a._keybindingService=r,a._domNode=document.createElement("div"),a._domNode.className="findOptionsWidget",a._domNode.style.display="none",a._domNode.style.top="10px",a._domNode.setAttribute("role","presentation"),a._domNode.setAttribute("aria-hidden","true");var s=o.getColorTheme().getColor(kd.inputActiveOptionBorder),l=o.getColorTheme().getColor(kd.inputActiveOptionForeground),c=o.getColorTheme().getColor(kd.inputActiveOptionBackground);return a.caseSensitive=a._register(new Fx({appendTitle:a._keybindingLabelFor(Ix.ToggleCaseSensitiveCommand),isChecked:a._state.matchCase,inputActiveOptionBorder:s,inputActiveOptionForeground:l,inputActiveOptionBackground:c})),a._domNode.appendChild(a.caseSensitive.domNode),a._register(a.caseSensitive.onChange((function(){a._state.change({matchCase:a.caseSensitive.checked},!1)}))),a.wholeWords=a._register(new Bx({appendTitle:a._keybindingLabelFor(Ix.ToggleWholeWordCommand),isChecked:a._state.wholeWord,inputActiveOptionBorder:s,inputActiveOptionForeground:l,inputActiveOptionBackground:c})),a._domNode.appendChild(a.wholeWords.domNode),a._register(a.wholeWords.onChange((function(){a._state.change({wholeWord:a.wholeWords.checked},!1)}))),a.regex=a._register(new Hx({appendTitle:a._keybindingLabelFor(Ix.ToggleRegexCommand),isChecked:a._state.isRegex,inputActiveOptionBorder:s,inputActiveOptionForeground:l,inputActiveOptionBackground:c})),a._domNode.appendChild(a.regex.domNode),a._register(a.regex.onChange((function(){a._state.change({isRegex:a.regex.checked},!1)}))),a._editor.addOverlayWidget((0,Hi.default)(a)),a._register(a._state.onFindReplaceStateChange((function(e){var t=!1;e.isRegex&&(a.regex.checked=a._state.isRegex,t=!0),e.wholeWord&&(a.wholeWords.checked=a._state.wholeWord,t=!0),e.matchCase&&(a.caseSensitive.checked=a._state.matchCase,t=!0),!a._state.isRevealed&&t&&a._revealTemporarily()}))),a._register(Bh.addDisposableNonBubblingMouseOutListener(a._domNode,(function(e){return a._onMouseOut()}))),a._register(Bh.addDisposableListener(a._domNode,"mouseover",(function(e){return a._onMouseOver()}))),a._applyTheme(o.getColorTheme()),a._register(o.onDidColorThemeChange(a._applyTheme.bind((0,Hi.default)(a)))),a}return(0,c.default)(n,[{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:0}}},{key:"highlightFindOptions",value:function(){this._revealTemporarily()}},{key:"_revealTemporarily",value:function(){this._show(),this._hideSoon.schedule()}},{key:"_onMouseOut",value:function(){this._hideSoon.schedule()}},{key:"_onMouseOver",value:function(){this._hideSoon.cancel()}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}},{key:"_applyTheme",value:function(e){var t={inputActiveOptionBorder:e.getColor(kd.inputActiveOptionBorder),inputActiveOptionForeground:e.getColor(kd.inputActiveOptionForeground),inputActiveOptionBackground:e.getColor(kd.inputActiveOptionBackground)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}]),n}(Sp.Widget));jx.ID="editor.contrib.findOptionsWidget",(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorWidgetBackground);n&&t.addRule(".monaco-editor .findOptionsWidget { background-color: ".concat(n,"; }"));var i=e.getColor(kd.editorWidgetForeground);i&&t.addRule(".monaco-editor .findOptionsWidget { color: ".concat(i,"; }"));var r=e.getColor(kd.widgetShadow);r&&t.addRule(".monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ".concat(r,"; }"));var o=e.getColor(kd.contrastBorder);o&&t.addRule(".monaco-editor .findOptionsWidget { border: 2px solid ".concat(o,"; }"))}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),$h=o("neTVg"),vd=o("dXCvL"),yd=o("5MJfC");function zx(e,t){return 1===e||2!==e&&t}var Wx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this))._onFindReplaceStateChange=e._register(new(0,$h.Emitter)),e.onFindReplaceStateChange=e._onFindReplaceStateChange.event,e._searchString="",e._replaceString="",e._isRevealed=!1,e._isReplaceRevealed=!1,e._isRegex=!1,e._isRegexOverride=0,e._wholeWord=!1,e._wholeWordOverride=0,e._matchCase=!1,e._matchCaseOverride=0,e._preserveCase=!1,e._preserveCaseOverride=0,e._searchScope=null,e._matchesPosition=0,e._matchesCount=0,e._currentMatch=null,e._loop=!0,e}return(0,c.default)(n,[{key:"searchString",get:function(){return this._searchString}},{key:"replaceString",get:function(){return this._replaceString}},{key:"isRevealed",get:function(){return this._isRevealed}},{key:"isReplaceRevealed",get:function(){return this._isReplaceRevealed}},{key:"isRegex",get:function(){return zx(this._isRegexOverride,this._isRegex)}},{key:"wholeWord",get:function(){return zx(this._wholeWordOverride,this._wholeWord)}},{key:"matchCase",get:function(){return zx(this._matchCaseOverride,this._matchCase)}},{key:"preserveCase",get:function(){return zx(this._preserveCaseOverride,this._preserveCase)}},{key:"actualIsRegex",get:function(){return this._isRegex}},{key:"actualWholeWord",get:function(){return this._wholeWord}},{key:"actualMatchCase",get:function(){return this._matchCase}},{key:"actualPreserveCase",get:function(){return this._preserveCase}},{key:"searchScope",get:function(){return this._searchScope}},{key:"matchesPosition",get:function(){return this._matchesPosition}},{key:"matchesCount",get:function(){return this._matchesCount}},{key:"currentMatch",get:function(){return this._currentMatch}},{key:"changeMatchInfo",value:function(e,t,n){var i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},r=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,r=!0),void 0!==n&&(yd.Range.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(i)}},{key:"change",value:function(e,t){var n,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this,o={moveCursor:t,updateHistory:i,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1},a=!1,s=this.isRegex,l=this.wholeWord,u=this.matchCase,c=this.preserveCase;void 0!==e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,a=!0),void 0!==e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,a=!0),void 0!==e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,a=!0),void 0!==e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,a=!0),void 0!==e.isRegex&&(this._isRegex=e.isRegex),void 0!==e.wholeWord&&(this._wholeWord=e.wholeWord),void 0!==e.matchCase&&(this._matchCase=e.matchCase),void 0!==e.preserveCase&&(this._preserveCase=e.preserveCase),void 0!==e.searchScope&&((null===(n=e.searchScope)||void 0===n?void 0:n.every((function(e){var t;return null===(t=r._searchScope)||void 0===t?void 0:t.some((function(t){return!yd.Range.equalsRange(t,e)}))})))||(this._searchScope=e.searchScope,o.searchScope=!0,a=!0)),void 0!==e.loop&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,a=!0),this._isRegexOverride=void 0!==e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride=void 0!==e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride=void 0!==e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride=void 0!==e.preserveCaseOverride?e.preserveCaseOverride:0,s!==this.isRegex&&(a=!0,o.isRegex=!0),l!==this.wholeWord&&(a=!0,o.wholeWord=!0),u!==this.matchCase&&(a=!0,o.matchCase=!0),c!==this.preserveCase&&(a=!0,o.preserveCase=!0),a&&this._onFindReplaceStateChange.fire(o)}},{key:"canNavigateBack",value:function(){return this.canNavigateInLoop()||1!==this.matchesPosition}},{key:"canNavigateForward",value:function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}},{key:"canNavigateInLoop",value:function(){return this._loop||this.matchesCount>=Rx}}]),n}(vd.Disposable),Ux={};e(Ux,"FindWidget",(function(){return OS}),(function(e){return OS=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),Bh=o("fTm33"),od=o("3xPLG"),Xp=o("cNfER"),Sp=o("c9lKY"),gd=o("hJucn"),Yc=o("2NkmB"),vd=o("dXCvL"),Bd=o("5DBhW"),nh=o("gTzCU"),yd=o("5MJfC"),kd=o("ht8QC"),Cd=o("4ET02");var Vx={};e(Vx,"ContextScopedFindInput",(function(){return oS}),(function(e){return oS=e})),e(Vx,"ContextScopedReplaceInput",(function(){return aS}),(function(e){return aS=e}));u=o("4JAgF"),d=o("gNsil"),h=o("8rJSp"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33");var Kx=o("if040"),qx=(Sp=o("c9lKY"),$h=o("neTVg"),(Jc=o("faA3E")).localize("defaultLabel","input")),Jx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;(0,u.default)(this,n),(a=t.call(this))._showOptionButtons=r,a.fixFocusOnOptionClickEnabled=!0,a.imeSessionInProgress=!1,a._onDidOptionChange=a._register(new(0,$h.Emitter)),a.onDidOptionChange=a._onDidOptionChange.event,a._onKeyDown=a._register(new(0,$h.Emitter)),a.onKeyDown=a._onKeyDown.event,a._onMouseDown=a._register(new(0,$h.Emitter)),a.onMouseDown=a._onMouseDown.event,a._onInput=a._register(new(0,$h.Emitter)),a._onKeyUp=a._register(new(0,$h.Emitter)),a._onCaseSensitiveKeyDown=a._register(new(0,$h.Emitter)),a.onCaseSensitiveKeyDown=a._onCaseSensitiveKeyDown.event,a._onRegexKeyDown=a._register(new(0,$h.Emitter)),a.onRegexKeyDown=a._onRegexKeyDown.event,a._lastHighlightFindOptions=0,a.contextViewProvider=i,a.placeholder=o.placeholder||"",a.validation=o.validation,a.label=o.label||qx,a.inputActiveOptionBorder=o.inputActiveOptionBorder,a.inputActiveOptionForeground=o.inputActiveOptionForeground,a.inputActiveOptionBackground=o.inputActiveOptionBackground,a.inputBackground=o.inputBackground,a.inputForeground=o.inputForeground,a.inputBorder=o.inputBorder,a.inputValidationInfoBorder=o.inputValidationInfoBorder,a.inputValidationInfoBackground=o.inputValidationInfoBackground,a.inputValidationInfoForeground=o.inputValidationInfoForeground,a.inputValidationWarningBorder=o.inputValidationWarningBorder,a.inputValidationWarningBackground=o.inputValidationWarningBackground,a.inputValidationWarningForeground=o.inputValidationWarningForeground,a.inputValidationErrorBorder=o.inputValidationErrorBorder,a.inputValidationErrorBackground=o.inputValidationErrorBackground,a.inputValidationErrorForeground=o.inputValidationErrorForeground;var s=o.appendCaseSensitiveLabel||"",l=o.appendWholeWordsLabel||"",c=o.appendRegexLabel||"",d=o.history||[],h=!!o.flexibleHeight,f=!!o.flexibleWidth,p=o.flexibleMaxHeight;a.domNode=document.createElement("div"),a.domNode.classList.add("monaco-findInput"),a.inputBox=a._register(new(0,Kx.HistoryInputBox)(a.domNode,a.contextViewProvider,{placeholder:a.placeholder||"",ariaLabel:a.label||"",validationOptions:{validation:a.validation},inputBackground:a.inputBackground,inputForeground:a.inputForeground,inputBorder:a.inputBorder,inputValidationInfoBackground:a.inputValidationInfoBackground,inputValidationInfoForeground:a.inputValidationInfoForeground,inputValidationInfoBorder:a.inputValidationInfoBorder,inputValidationWarningBackground:a.inputValidationWarningBackground,inputValidationWarningForeground:a.inputValidationWarningForeground,inputValidationWarningBorder:a.inputValidationWarningBorder,inputValidationErrorBackground:a.inputValidationErrorBackground,inputValidationErrorForeground:a.inputValidationErrorForeground,inputValidationErrorBorder:a.inputValidationErrorBorder,history:d,flexibleHeight:h,flexibleWidth:f,flexibleMaxHeight:p})),a.regex=a._register(new Hx({appendTitle:c,isChecked:!1,inputActiveOptionBorder:a.inputActiveOptionBorder,inputActiveOptionForeground:a.inputActiveOptionForeground,inputActiveOptionBackground:a.inputActiveOptionBackground})),a._register(a.regex.onChange((function(e){a._onDidOptionChange.fire(e),!e&&a.fixFocusOnOptionClickEnabled&&a.inputBox.focus(),a.validate()}))),a._register(a.regex.onKeyDown((function(e){a._onRegexKeyDown.fire(e)}))),a.wholeWords=a._register(new Bx({appendTitle:l,isChecked:!1,inputActiveOptionBorder:a.inputActiveOptionBorder,inputActiveOptionForeground:a.inputActiveOptionForeground,inputActiveOptionBackground:a.inputActiveOptionBackground})),a._register(a.wholeWords.onChange((function(e){a._onDidOptionChange.fire(e),!e&&a.fixFocusOnOptionClickEnabled&&a.inputBox.focus(),a.validate()}))),a.caseSensitive=a._register(new Fx({appendTitle:s,isChecked:!1,inputActiveOptionBorder:a.inputActiveOptionBorder,inputActiveOptionForeground:a.inputActiveOptionForeground,inputActiveOptionBackground:a.inputActiveOptionBackground})),a._register(a.caseSensitive.onChange((function(e){a._onDidOptionChange.fire(e),!e&&a.fixFocusOnOptionClickEnabled&&a.inputBox.focus(),a.validate()}))),a._register(a.caseSensitive.onKeyDown((function(e){a._onCaseSensitiveKeyDown.fire(e)}))),a._showOptionButtons&&(a.inputBox.paddingRight=a.caseSensitive.width()+a.wholeWords.width()+a.regex.width());var g=[a.caseSensitive.domNode,a.wholeWords.domNode,a.regex.domNode];a.onkeydown(a.domNode,(function(e){if(e.equals(15)||e.equals(17)||e.equals(9)){var t=g.indexOf(document.activeElement);if(t>=0){var n=-1;e.equals(17)?n=(t+1)%g.length:e.equals(15)&&(n=0===t?g.length-1:t-1),e.equals(9)?(g[t].blur(),a.inputBox.focus()):n>=0&&g[n].focus(),Bh.EventHelper.stop(e,!0)}}}));var v=document.createElement("div");return v.className="controls",v.style.display=a._showOptionButtons?"block":"none",v.appendChild(a.caseSensitive.domNode),v.appendChild(a.wholeWords.domNode),v.appendChild(a.regex.domNode),a.domNode.appendChild(v),e&&e.appendChild(a.domNode),a._register(Bh.addDisposableListener(a.inputBox.inputElement,"compositionstart",(function(e){a.imeSessionInProgress=!0}))),a._register(Bh.addDisposableListener(a.inputBox.inputElement,"compositionend",(function(e){a.imeSessionInProgress=!1,a._onInput.fire()}))),a.onkeydown(a.inputBox.inputElement,(function(e){return a._onKeyDown.fire(e)})),a.onkeyup(a.inputBox.inputElement,(function(e){return a._onKeyUp.fire(e)})),a.oninput(a.inputBox.inputElement,(function(e){return a._onInput.fire()})),a.onmousedown(a.inputBox.inputElement,(function(e){return a._onMouseDown.fire(e)})),a}return(0,c.default)(n,[{key:"enable",value:function(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex.enable(),this.wholeWords.enable(),this.caseSensitive.enable()}},{key:"disable",value:function(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex.disable(),this.wholeWords.disable(),this.caseSensitive.disable()}},{key:"setFocusInputOnOptionClick",value:function(e){this.fixFocusOnOptionClickEnabled=e}},{key:"setEnabled",value:function(e){e?this.enable():this.disable()}},{key:"getValue",value:function(){return this.inputBox.value}},{key:"setValue",value:function(e){this.inputBox.value!==e&&(this.inputBox.value=e)}},{key:"style",value:function(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}},{key:"applyStyles",value:function(){if(this.domNode){var e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.regex.style(e),this.wholeWords.style(e),this.caseSensitive.style(e);var t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}},{key:"select",value:function(){this.inputBox.select()}},{key:"focus",value:function(){this.inputBox.focus()}},{key:"getCaseSensitive",value:function(){return this.caseSensitive.checked}},{key:"setCaseSensitive",value:function(e){this.caseSensitive.checked=e}},{key:"getWholeWords",value:function(){return this.wholeWords.checked}},{key:"setWholeWords",value:function(e){this.wholeWords.checked=e}},{key:"getRegex",value:function(){return this.regex.checked}},{key:"setRegex",value:function(e){this.regex.checked=e,this.validate()}},{key:"focusOnCaseSensitive",value:function(){this.caseSensitive.focus()}},{key:"highlightFindOptions",value:function(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}},{key:"validate",value:function(){this.inputBox.validate()}},{key:"clearMessage",value:function(){this.inputBox.hideMessage()}}]),n}(Sp.Widget),Xx=(u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),Kx=o("if040"),Sp=o("c9lKY"),Qh=o("8bO6F"),$h=o("neTVg"),(Jc=o("faA3E")).localize("defaultLabel","input")),Gx=Jc.localize("label.preserveCaseCheckbox","Preserve Case"),Zx=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){return(0,u.default)(this,n),t.call(this,{icon:Qh.Codicon.preserveCase,title:Gx+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}return n}(Mx),$x=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;(0,u.default)(this,n),(a=t.call(this))._showOptionButtons=r,a.fixFocusOnOptionClickEnabled=!0,a.cachedOptionsWidth=0,a._onDidOptionChange=a._register(new(0,$h.Emitter)),a.onDidOptionChange=a._onDidOptionChange.event,a._onKeyDown=a._register(new(0,$h.Emitter)),a.onKeyDown=a._onKeyDown.event,a._onMouseDown=a._register(new(0,$h.Emitter)),a._onInput=a._register(new(0,$h.Emitter)),a._onKeyUp=a._register(new(0,$h.Emitter)),a._onPreserveCaseKeyDown=a._register(new(0,$h.Emitter)),a.onPreserveCaseKeyDown=a._onPreserveCaseKeyDown.event,a.contextViewProvider=i,a.placeholder=o.placeholder||"",a.validation=o.validation,a.label=o.label||Xx,a.inputActiveOptionBorder=o.inputActiveOptionBorder,a.inputActiveOptionForeground=o.inputActiveOptionForeground,a.inputActiveOptionBackground=o.inputActiveOptionBackground,a.inputBackground=o.inputBackground,a.inputForeground=o.inputForeground,a.inputBorder=o.inputBorder,a.inputValidationInfoBorder=o.inputValidationInfoBorder,a.inputValidationInfoBackground=o.inputValidationInfoBackground,a.inputValidationInfoForeground=o.inputValidationInfoForeground,a.inputValidationWarningBorder=o.inputValidationWarningBorder,a.inputValidationWarningBackground=o.inputValidationWarningBackground,a.inputValidationWarningForeground=o.inputValidationWarningForeground,a.inputValidationErrorBorder=o.inputValidationErrorBorder,a.inputValidationErrorBackground=o.inputValidationErrorBackground,a.inputValidationErrorForeground=o.inputValidationErrorForeground;var s=o.appendPreserveCaseLabel||"",l=o.history||[],c=!!o.flexibleHeight,d=!!o.flexibleWidth,h=o.flexibleMaxHeight;a.domNode=document.createElement("div"),a.domNode.classList.add("monaco-findInput"),a.inputBox=a._register(new(0,Kx.HistoryInputBox)(a.domNode,a.contextViewProvider,{ariaLabel:a.label||"",placeholder:a.placeholder||"",validationOptions:{validation:a.validation},inputBackground:a.inputBackground,inputForeground:a.inputForeground,inputBorder:a.inputBorder,inputValidationInfoBackground:a.inputValidationInfoBackground,inputValidationInfoForeground:a.inputValidationInfoForeground,inputValidationInfoBorder:a.inputValidationInfoBorder,inputValidationWarningBackground:a.inputValidationWarningBackground,inputValidationWarningForeground:a.inputValidationWarningForeground,inputValidationWarningBorder:a.inputValidationWarningBorder,inputValidationErrorBackground:a.inputValidationErrorBackground,inputValidationErrorForeground:a.inputValidationErrorForeground,inputValidationErrorBorder:a.inputValidationErrorBorder,history:l,flexibleHeight:c,flexibleWidth:d,flexibleMaxHeight:h})),a.preserveCase=a._register(new Zx({appendTitle:s,isChecked:!1,inputActiveOptionBorder:a.inputActiveOptionBorder,inputActiveOptionForeground:a.inputActiveOptionForeground,inputActiveOptionBackground:a.inputActiveOptionBackground})),a._register(a.preserveCase.onChange((function(e){a._onDidOptionChange.fire(e),!e&&a.fixFocusOnOptionClickEnabled&&a.inputBox.focus(),a.validate()}))),a._register(a.preserveCase.onKeyDown((function(e){a._onPreserveCaseKeyDown.fire(e)}))),a._showOptionButtons?a.cachedOptionsWidth=a.preserveCase.width():a.cachedOptionsWidth=0;var f=[a.preserveCase.domNode];a.onkeydown(a.domNode,(function(e){if(e.equals(15)||e.equals(17)||e.equals(9)){var t=f.indexOf(document.activeElement);if(t>=0){var n=-1;e.equals(17)?n=(t+1)%f.length:e.equals(15)&&(n=0===t?f.length-1:t-1),e.equals(9)?(f[t].blur(),a.inputBox.focus()):n>=0&&f[n].focus(),Bh.EventHelper.stop(e,!0)}}}));var p=document.createElement("div");return p.className="controls",p.style.display=a._showOptionButtons?"block":"none",p.appendChild(a.preserveCase.domNode),a.domNode.appendChild(p),e&&e.appendChild(a.domNode),a.onkeydown(a.inputBox.inputElement,(function(e){return a._onKeyDown.fire(e)})),a.onkeyup(a.inputBox.inputElement,(function(e){return a._onKeyUp.fire(e)})),a.oninput(a.inputBox.inputElement,(function(e){return a._onInput.fire()})),a.onmousedown(a.inputBox.inputElement,(function(e){return a._onMouseDown.fire(e)})),a}return(0,c.default)(n,[{key:"enable",value:function(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}},{key:"disable",value:function(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}},{key:"setEnabled",value:function(e){e?this.enable():this.disable()}},{key:"style",value:function(e){this.inputActiveOptionBorder=e.inputActiveOptionBorder,this.inputActiveOptionForeground=e.inputActiveOptionForeground,this.inputActiveOptionBackground=e.inputActiveOptionBackground,this.inputBackground=e.inputBackground,this.inputForeground=e.inputForeground,this.inputBorder=e.inputBorder,this.inputValidationInfoBackground=e.inputValidationInfoBackground,this.inputValidationInfoForeground=e.inputValidationInfoForeground,this.inputValidationInfoBorder=e.inputValidationInfoBorder,this.inputValidationWarningBackground=e.inputValidationWarningBackground,this.inputValidationWarningForeground=e.inputValidationWarningForeground,this.inputValidationWarningBorder=e.inputValidationWarningBorder,this.inputValidationErrorBackground=e.inputValidationErrorBackground,this.inputValidationErrorForeground=e.inputValidationErrorForeground,this.inputValidationErrorBorder=e.inputValidationErrorBorder,this.applyStyles()}},{key:"applyStyles",value:function(){if(this.domNode){var e={inputActiveOptionBorder:this.inputActiveOptionBorder,inputActiveOptionForeground:this.inputActiveOptionForeground,inputActiveOptionBackground:this.inputActiveOptionBackground};this.preserveCase.style(e);var t={inputBackground:this.inputBackground,inputForeground:this.inputForeground,inputBorder:this.inputBorder,inputValidationInfoBackground:this.inputValidationInfoBackground,inputValidationInfoForeground:this.inputValidationInfoForeground,inputValidationInfoBorder:this.inputValidationInfoBorder,inputValidationWarningBackground:this.inputValidationWarningBackground,inputValidationWarningForeground:this.inputValidationWarningForeground,inputValidationWarningBorder:this.inputValidationWarningBorder,inputValidationErrorBackground:this.inputValidationErrorBackground,inputValidationErrorForeground:this.inputValidationErrorForeground,inputValidationErrorBorder:this.inputValidationErrorBorder};this.inputBox.style(t)}}},{key:"select",value:function(){this.inputBox.select()}},{key:"focus",value:function(){this.inputBox.focus()}},{key:"getPreserveCase",value:function(){return this.preserveCase.checked}},{key:"setPreserveCase",value:function(e){this.preserveCase.checked=e}},{key:"focusOnPreserve",value:function(){this.preserveCase.focus()}},{key:"validate",value:function(){this.inputBox&&this.inputBox.validate()}},{key:"width",set:function(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.inputBox.width=e,this.domNode.style.width=e+"px"}},{key:"dispose",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}}]),n}(Sp.Widget),Yx=($c=o("efZ3W"),sb=o("8vTtk"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),Qx=function(e,t){return function(n,i){t(n,i,e)}},eS="historyNavigationWidget",tS="historyNavigationForwardsEnabled",nS="historyNavigationBackwardsEnabled";function iS(e,t){return e.getContext(document.activeElement).getValue(t)}function rS(e,t){var n=function(e,t){return e.createScoped(t.target)}(e,t);return function(e,t,n){new(0,$c.RawContextKey)(n,t).bindTo(e)}(n,t,eS),{scopedContextKeyService:n,historyNavigationForwardsEnablement:new(0,$c.RawContextKey)(tS,!0).bindTo(n),historyNavigationBackwardsEnablement:new(0,$c.RawContextKey)(nS,!0).bindTo(n)}}var oS=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,u.default)(this,n),(a=t.call(this,e,i,s,r))._register(rS(o,{target:a.inputBox.element,historyNavigator:a.inputBox}).scopedContextKeyService),a}return n}(Jx);oS=Yx([Qx(3,$c.IContextKeyService)],oS);var aS=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(0,u.default)(this,n),(a=t.call(this,e,i,s,r))._register(rS(o,{target:a.inputBox.element,historyNavigator:a.inputBox}).scopedContextKeyService),a}return n}($x);aS=Yx([Qx(3,$c.IContextKeyService)],aS),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:$c.ContextKeyExpr.and($c.ContextKeyExpr.has(eS),$c.ContextKeyExpr.equals(nS,!0)),primary:16,secondary:[528],handler:function(e){var t=iS(e.get($c.IContextKeyService),eS);t&&t.historyNavigator.showPreviousValue()}}),sb.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:$c.ContextKeyExpr.and($c.ContextKeyExpr.has(eS),$c.ContextKeyExpr.equals(tS,!0)),primary:18,secondary:[530],handler:function(e){var t=iS(e.get($c.IContextKeyService),eS);t&&t.historyNavigator.showNextValue()}});Qh=o("8bO6F"),cv=o("9uoQH");var sS=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},lS=(0,cv.registerIcon)("find-selection",Qh.Codicon.selection,Jc.localize("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),uS=(0,cv.registerIcon)("find-collapsed",Qh.Codicon.chevronRight,Jc.localize("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),cS=(0,cv.registerIcon)("find-expanded",Qh.Codicon.chevronDown,Jc.localize("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),dS=(0,cv.registerIcon)("find-replace",Qh.Codicon.replace,Jc.localize("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),hS=(0,cv.registerIcon)("find-replace-all",Qh.Codicon.replaceAll,Jc.localize("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),fS=(0,cv.registerIcon)("find-previous-match",Qh.Codicon.arrowUp,Jc.localize("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),pS=(0,cv.registerIcon)("find-next-match",Qh.Codicon.arrowDown,Jc.localize("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),gS=Jc.localize("label.find","Find"),vS=Jc.localize("placeholder.find","Find"),mS=Jc.localize("label.previousMatchButton","Previous Match"),yS=Jc.localize("label.nextMatchButton","Next Match"),bS=Jc.localize("label.toggleSelectionFind","Find in Selection"),_S=Jc.localize("label.closeButton","Close"),wS=Jc.localize("label.replace","Replace"),kS=Jc.localize("placeholder.replace","Replace"),CS=Jc.localize("label.replaceButton","Replace"),xS=Jc.localize("label.replaceAllButton","Replace All"),SS=Jc.localize("label.toggleReplaceButton","Toggle Replace"),ES=Jc.localize("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Rx),DS=Jc.localize("label.matchesLocation","{0} of {1}"),AS=Jc.localize("label.noResults","No results"),IS=419,RS=69,TS="ctrlEnterReplaceAll.windows.donotask",LS=Bd.isMacintosh?256:2048,MS=function e(t){"use strict";(0,u.default)(this,e),this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"};function NS(e,t,n){var i=!!t.match(/\n/);n&&i&&n.selectionStart>0&&e.stopPropagation()}function PS(e,t,n){var i=!!t.match(/\n/);n&&i&&n.selectionEnd<n.value.length&&e.stopPropagation()}var OS=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,r,o,a,s,c,d,h,f){var p;return(0,u.default)(this,i),(p=t.call(this))._cachedHeight=null,p._revealTimeouts=[],p._codeEditor=e,p._controller=r,p._state=o,p._contextViewProvider=a,p._keybindingService=s,p._contextKeyService=c,p._storageService=h,p._notificationService=f,p._ctrlEnterReplaceAllWarningPrompted=!!h.getBoolean(TS,0),p._isVisible=!1,p._isReplaceVisible=!1,p._ignoreChangeEvent=!1,p._updateHistoryDelayer=new(0,gd.Delayer)(500),p._register((0,vd.toDisposable)((function(){return p._updateHistoryDelayer.cancel()}))),p._register(p._state.onFindReplaceStateChange((function(e){return p._onStateChanged(e)}))),p._buildDomNode(),p._updateButtons(),p._tryUpdateWidgetWidth(),p._findInput.inputBox.layout(),p._register(p._codeEditor.onDidChangeConfiguration((function(e){if(e.hasChanged(80)&&(p._codeEditor.getOption(80)&&p._state.change({isReplaceRevealed:!1},!1),p._updateButtons()),e.hasChanged(130)&&p._tryUpdateWidgetWidth(),e.hasChanged(2)&&p.updateAccessibilitySupport(),e.hasChanged(34)){var t=p._codeEditor.getOption(34).addExtraSpaceOnTop;t&&!p._viewZone&&(p._viewZone=new MS(0),p._showViewZone()),!t&&p._viewZone&&p._removeViewZone()}}))),p.updateAccessibilitySupport(),p._register(p._codeEditor.onDidChangeCursorSelection((function(){p._isVisible&&p._updateToggleSelectionFindButton()}))),p._register(p._codeEditor.onDidFocusEditorWidget((function(){return sS((0,Hi.default)(p),void 0,void 0,n(l).mark((function e(){var t;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isVisible){e.next=5;break}return e.next=3,this._controller.getGlobalBufferTerm();case 3:(t=e.sent)&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select());case 5:case"end":return e.stop()}}),e,this)})))}))),p._findInputFocused=kx.bindTo(c),p._findFocusTracker=p._register(Bh.trackFocus(p._findInput.inputBox.inputElement)),p._register(p._findFocusTracker.onDidFocus((function(){p._findInputFocused.set(!0),p._updateSearchScope()}))),p._register(p._findFocusTracker.onDidBlur((function(){p._findInputFocused.set(!1)}))),p._replaceInputFocused=Cx.bindTo(c),p._replaceFocusTracker=p._register(Bh.trackFocus(p._replaceInput.inputBox.inputElement)),p._register(p._replaceFocusTracker.onDidFocus((function(){p._replaceInputFocused.set(!0),p._updateSearchScope()}))),p._register(p._replaceFocusTracker.onDidBlur((function(){p._replaceInputFocused.set(!1)}))),p._codeEditor.addOverlayWidget((0,Hi.default)(p)),p._codeEditor.getOption(34).addExtraSpaceOnTop&&(p._viewZone=new MS(0)),p._applyTheme(d.getColorTheme()),p._register(d.onDidColorThemeChange(p._applyTheme.bind((0,Hi.default)(p)))),p._register(p._codeEditor.onDidChangeModel((function(){p._isVisible&&(p._viewZoneId=void 0)}))),p._register(p._codeEditor.onDidScrollChange((function(e){e.scrollTopChanged?p._layoutViewZone():setTimeout((function(){p._layoutViewZone()}),0)}))),p}return(0,c.default)(i,[{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._isVisible?{preference:0}:null}},{key:"_onStateChanged",value:function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(80)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=Bh.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}},{key:"_delayedUpdateHistory",value:function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Yc.onUnexpectedError)}},{key:"_updateHistory",value:function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}},{key:"_updateMatchesCount",value:function(){var e;if(this._matchesCount.style.minWidth=RS+"px",this._state.matchesCount>=Rx?this._matchesCount.title=ES:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=Rx&&(t+="+");var n=String(this._state.matchesPosition);"0"===n&&(n="?"),e=nh.format(DS,n,t)}else e=AS;this._matchesCount.appendChild(document.createTextNode(e)),(0,od.alert)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),RS=Math.max(RS,this._matchesCount.clientWidth)}},{key:"_getAriaLabel",value:function(e,t,n){if(e===AS)return""===n?Jc.localize("ariaSearchNoResultEmpty","{0} found",e):Jc.localize("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){var i=Jc.localize("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();if(r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1){var o=r.getLineContent(t.startLineNumber);return"".concat(o,", ").concat(i)}return i}return Jc.localize("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}},{key:"_updateToggleSelectionFindButton",value:function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}},{key:"_updateButtons",value:function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var n=!this._codeEditor.getOption(80);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}},{key:"_reveal",value:function(){var e=this;if(this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(34).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":var n=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=n}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){e._domNode.classList.add("visible"),e._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){e._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var i=!0;if(this._codeEditor.getOption(34).seedSearchStringFromSelection&&t){var r=this._codeEditor.getDomNode();if(r){var o=Bh.getDomNodePagePosition(r),a=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),s=o.left+(a?a.left:0),l=a?a.top:0;if(this._viewZone&&l<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(i=!1);var u=Bh.getTopLeftOffset(this._domNode).left;s>u&&(i=!1);var c=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());o.left+(c?c.left:0)>u&&(i=!1)}}}this._showViewZone(i)}}},{key:"_hide",value:function(e){this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}},{key:"_layoutViewZone",value:function(e){var t=this;if(this._codeEditor.getOption(34).addExtraSpaceOnTop){if(this._isVisible){var n=this._viewZone;void 0===this._viewZoneId&&n&&this._codeEditor.changeViewZones((function(i){n.heightInPx=t._getHeight(),t._viewZoneId=i.addZone(n),t._codeEditor.setScrollTop(e||t._codeEditor.getScrollTop()+n.heightInPx)}))}}else this._removeViewZone()}},{key:"_showViewZone",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this;if(this._isVisible){var n=this._codeEditor.getOption(34).addExtraSpaceOnTop;if(n){void 0===this._viewZone&&(this._viewZone=new MS(0));var i=this._viewZone;this._codeEditor.changeViewZones((function(n){if(void 0!==t._viewZoneId){var r=t._getHeight();if(r===i.heightInPx)return;var o=r-i.heightInPx;return i.heightInPx=r,n.layoutZone(t._viewZoneId),void(e&&t._codeEditor.setScrollTop(t._codeEditor.getScrollTop()+o))}var a=t._getHeight();(a-=t._codeEditor.getOption(74).top)<=0||(i.heightInPx=a,t._viewZoneId=n.addZone(i),e&&t._codeEditor.setScrollTop(t._codeEditor.getScrollTop()+a))}))}}}},{key:"_removeViewZone",value:function(){var e=this;this._codeEditor.changeViewZones((function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))}))}},{key:"_applyTheme",value:function(e){var t={inputActiveOptionBorder:e.getColor(kd.inputActiveOptionBorder),inputActiveOptionBackground:e.getColor(kd.inputActiveOptionBackground),inputActiveOptionForeground:e.getColor(kd.inputActiveOptionForeground),inputBackground:e.getColor(kd.inputBackground),inputForeground:e.getColor(kd.inputForeground),inputBorder:e.getColor(kd.inputBorder),inputValidationInfoBackground:e.getColor(kd.inputValidationInfoBackground),inputValidationInfoForeground:e.getColor(kd.inputValidationInfoForeground),inputValidationInfoBorder:e.getColor(kd.inputValidationInfoBorder),inputValidationWarningBackground:e.getColor(kd.inputValidationWarningBackground),inputValidationWarningForeground:e.getColor(kd.inputValidationWarningForeground),inputValidationWarningBorder:e.getColor(kd.inputValidationWarningBorder),inputValidationErrorBackground:e.getColor(kd.inputValidationErrorBackground),inputValidationErrorForeground:e.getColor(kd.inputValidationErrorForeground),inputValidationErrorBorder:e.getColor(kd.inputValidationErrorBorder)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}},{key:"_tryUpdateWidgetWidth",value:function(){if(this._isVisible&&Bh.isInDOM(this._domNode)){var e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)this._domNode.classList.add("hiddenEditor");else{this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var t=e.width,n=e.minimap.minimapWidth,i=!1,r=!1,o=!1;if(this._resized)if(Bh.getTotalWidth(this._domNode)>IS)return this._domNode.style.maxWidth="".concat(t-28-n-15,"px"),void(this._replaceInput.width=Bh.getTotalWidth(this._findInput.domNode));if(447+n>=t&&(r=!0),447+n-RS>=t&&(o=!0),447+n-RS>=t+50&&(i=!0),this._domNode.classList.toggle("collapsed-find-widget",i),this._domNode.classList.toggle("narrow-find-widget",o),this._domNode.classList.toggle("reduced-find-widget",r),o||i||(this._domNode.style.maxWidth="".concat(t-28-n-15,"px")),this._resized){this._findInput.inputBox.layout();var a=this._findInput.inputBox.element.clientWidth;a>0&&(this._replaceInput.width=a)}else this._isReplaceVisible&&(this._replaceInput.width=Bh.getTotalWidth(this._findInput.domNode))}}}},{key:"_getHeight",value:function(){var e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4}},{key:"_tryUpdateHeight",value:function(){var e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}},{key:"focusFindInput",value:function(){this._findInput.select(),this._findInput.focus()}},{key:"focusReplaceInput",value:function(){this._replaceInput.select(),this._replaceInput.focus()}},{key:"highlightFindOptions",value:function(){this._findInput.highlightFindOptions()}},{key:"_updateSearchScope",value:function(){var e=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelections();t.map((function(t){1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var n=e._state.currentMatch;return t.startLineNumber===t.endLineNumber||yd.Range.equalsRange(t,n)?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"_onFindInputMouseDown",value:function(e){e.middleButton&&e.stopPropagation()}},{key:"_onFindInputKeyDown",value:function(e){return e.equals(3|LS)?(this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?NS(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?PS(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}},{key:"_onReplaceInputKeyDown",value:function(e){return e.equals(3|LS)?(Bd.isWindows&&Bd.isNative&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Jc.localize("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(TS,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?NS(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?PS(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}},{key:"getVerticalSashLeft",value:function(e){return 0}},{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"_buildDomNode",value:function(){var e=this;this._findInput=this._register(new(0,Vx.ContextScopedFindInput)(null,this._contextViewProvider,{width:221,label:gS,placeholder:vS,appendCaseSensitiveLabel:this._keybindingLabelFor(Ix.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Ix.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Ix.ToggleRegexCommand),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t,"gu"),null}catch(e){return{content:e.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(t){return e._onFindInputKeyDown(t)}))),this._register(this._findInput.inputBox.onDidChange((function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(t){e._tryUpdateHeight()&&e._showViewZone()}))),Bd.isLinux&&this._register(this._findInput.onMouseDown((function(t){return e._onFindInputMouseDown(t)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new FS({label:mS+this._keybindingLabelFor(Ix.PreviousMatchFindAction),icon:fS,onTrigger:function(){e._codeEditor.getAction(Ix.PreviousMatchFindAction).run().then(void 0,Yc.onUnexpectedError)}})),this._nextBtn=this._register(new FS({label:yS+this._keybindingLabelFor(Ix.NextMatchFindAction),icon:pS,onTrigger:function(){e._codeEditor.getAction(Ix.NextMatchFindAction).run().then(void 0,Yc.onUnexpectedError)}}));var t=document.createElement("div");t.className="find-part",t.appendChild(this._findInput.domNode);var n=document.createElement("div");n.className="find-actions",t.appendChild(n),n.appendChild(this._matchesCount),n.appendChild(this._prevBtn.domNode),n.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Mx({icon:lS,title:bS+this._keybindingLabelFor(Ix.ToggleSearchScopeCommand),isChecked:!1})),this._register(this._toggleSelectionFind.onChange((function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}))),n.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new FS({label:_S+this._keybindingLabelFor(Ix.CloseFindWidgetCommand),icon:cv.widgetClose,onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),n.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new(0,Vx.ContextScopedReplaceInput)(null,void 0,{label:wS,placeholder:kS,appendPreserveCaseLabel:this._keybindingLabelFor(Ix.TogglePreserveCaseCommand),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(t){return e._onReplaceInputKeyDown(t)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){e._state.change({replaceString:e._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(t){e._isReplaceVisible&&e._tryUpdateHeight()&&e._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){e._state.change({preserveCase:e._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(t){t.equals(2)&&(e._prevBtn.isEnabled()?e._prevBtn.focus():e._nextBtn.isEnabled()?e._nextBtn.focus():e._toggleSelectionFind.enabled?e._toggleSelectionFind.focus():e._closeBtn.isEnabled()&&e._closeBtn.focus(),t.preventDefault())}))),this._replaceBtn=this._register(new FS({label:CS+this._keybindingLabelFor(Ix.ReplaceOneAction),icon:dS,onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new FS({label:xS+this._keybindingLabelFor(Ix.ReplaceAllAction),icon:hS,onTrigger:function(){e._controller.replaceAll()}}));var i=document.createElement("div");i.className="replace-part",i.appendChild(this._replaceInput.domNode);var r=document.createElement("div");r.className="replace-actions",i.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new FS({label:SS,className:"codicon toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInput.width=Bh.getTotalWidth(e._findInput.domNode),e._replaceInput.inputBox.layout()),e._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="".concat(IS,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(i),this._resizeSash=new(0,Xp.Sash)(this._domNode,this,{orientation:0,size:2}),this._resized=!1;var o=IS;this._register(this._resizeSash.onDidStart((function(){o=Bh.getTotalWidth(e._domNode)}))),this._register(this._resizeSash.onDidChange((function(t){e._resized=!0;var n=o+t.startX-t.currentX;n<IS||(n>(parseFloat(Bh.getComputedStyle(e._domNode).maxWidth)||0)||(e._domNode.style.width="".concat(n,"px"),e._isReplaceVisible&&(e._replaceInput.width=Bh.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout(),e._tryUpdateHeight()))}))),this._register(this._resizeSash.onDidReset((function(){var t=Bh.getTotalWidth(e._domNode);if(!(t<IS)){var n=IS;if(!e._resized||t===IS){var i=e._codeEditor.getLayoutInfo();n=i.width-28-i.minimap.minimapWidth-15,e._resized=!0}e._domNode.style.width="".concat(n,"px"),e._isReplaceVisible&&(e._replaceInput.width=Bh.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout()}})))}},{key:"updateAccessibilitySupport",value:function(){var e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}]),i}(Sp.Widget);OS.ID="editor.contrib.findWidget";var FS=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;(0,u.default)(this,n),(i=t.call(this))._opts=e;var r="button";return i._opts.className&&(r=r+" "+i._opts.className),i._opts.icon&&(r=r+" "+Cd.ThemeIcon.asClassName(i._opts.icon)),i._domNode=document.createElement("div"),i._domNode.title=i._opts.label,i._domNode.tabIndex=0,i._domNode.className=r,i._domNode.setAttribute("role","button"),i._domNode.setAttribute("aria-label",i._opts.label),i.onclick(i._domNode,(function(e){i._opts.onTrigger(),e.preventDefault()})),i.onkeydown(i._domNode,(function(e){if(e.equals(10)||e.equals(3))return i._opts.onTrigger(),void e.preventDefault();i._opts.onKeyDown&&i._opts.onKeyDown(e)})),i}return(0,c.default)(n,[{key:"domNode",get:function(){return this._domNode}},{key:"isEnabled",value:function(){return this._domNode.tabIndex>=0}},{key:"focus",value:function(){this._domNode.focus()}},{key:"setEnabled",value:function(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}},{key:"setExpanded",value:function(e){var t,n,i,r;(this._domNode.setAttribute("aria-expanded",String(!!e)),e)?((t=this._domNode.classList).remove.apply(t,(0,qi.default)(Cd.ThemeIcon.asClassNameArray(uS))),(n=this._domNode.classList).add.apply(n,(0,qi.default)(Cd.ThemeIcon.asClassNameArray(cS)))):((i=this._domNode.classList).remove.apply(i,(0,qi.default)(Cd.ThemeIcon.asClassNameArray(cS))),(r=this._domNode.classList).add.apply(r,(0,qi.default)(Cd.ThemeIcon.asClassNameArray(uS))))}}]),n}(Sp.Widget);(0,Cd.registerThemingParticipant)((function(e,t){var n=function(e,n){n&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(n,"; }"))};n(".findMatch",e.getColor(kd.editorFindMatchHighlight)),n(".currentFindMatch",e.getColor(kd.editorFindMatch)),n(".findScope",e.getColor(kd.editorFindRangeHighlight)),n(".find-widget",e.getColor(kd.editorWidgetBackground));var i=e.getColor(kd.widgetShadow);i&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 0 8px 2px ".concat(i,"; }"));var r=e.getColor(kd.editorFindMatchHighlightBorder);r&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat("hc"===e.type?"dotted":"solid"," ").concat(r,"; box-sizing: border-box; }"));var o=e.getColor(kd.editorFindMatchBorder);o&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid ".concat(o,"; padding: 1px; box-sizing: border-box; }"));var a=e.getColor(kd.editorFindRangeHighlightBorder);a&&t.addRule(".monaco-editor .findScope { border: 1px ".concat("hc"===e.type?"dashed":"solid"," ").concat(a,"; }"));var s=e.getColor(kd.contrastBorder);s&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(s,"; }"));var l=e.getColor(kd.editorWidgetForeground);l&&t.addRule(".monaco-editor .find-widget { color: ".concat(l,"; }"));var u=e.getColor(kd.errorForeground);u&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: ".concat(u,"; }"));var c=e.getColor(kd.editorWidgetResizeBorder);if(c)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(c,"; }"));else{var d=e.getColor(kd.editorWidgetBorder);d&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(d,"; }"))}var h=e.getColor(kd.toolbarHoverBackground);h&&t.addRule("\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ".concat(h," !important;\n\t\t}\n\t"));var f=e.getColor(kd.focusBorder);f&&t.addRule(".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ".concat(f,"; }"))}));xd=o("feTbe"),zd=o("k8rlj"),$c=o("efZ3W"),jh=o("1UyyS"),zh=o("5H40S"),Qf=o("6TN8i"),Cd=o("4ET02"),hf=o("93Ice");var BS=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},HS=function(e,t){return function(n,i){t(n,i,e)}},jS=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},zS=524288;function WS(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;var i=e.getSelection();if("single"===t&&i.startLineNumber===i.endLineNumber||"multiple"===t)if(i.isEmpty()){var r=e.getConfiguredWordAtPosition(i.getStartPosition());if(r&&!1===n)return r.word}else if(e.getModel().getValueLengthInRange(i)<zS)return e.getModel().getValueInRange(i);return null}var US=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o){var a;return(0,u.default)(this,i),(a=t.call(this))._editor=e,a._findWidgetVisible=wx.bindTo(n),a._contextKeyService=n,a._storageService=r,a._clipboardService=o,a._updateHistoryDelayer=new(0,gd.Delayer)(500),a._state=a._register(new Wx),a.loadQueryState(),a._register(a._state.onFindReplaceStateChange((function(e){return a._onStateChanged(e)}))),a._model=null,a._register(a._editor.onDidChangeModel((function(){var e=a._editor.getModel()&&a._state.isRevealed;a.disposeModel(),a._state.change({searchScope:null,matchCase:a._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:a._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:a._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:a._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&a._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:a._editor.getOption(34).loop})}))),a}return(0,c.default)(i,[{key:"editor",get:function(){return this._editor}},{key:"dispose",value:function(){this.disposeModel(),(0,zi.default)((0,Wi.default)(i.prototype),"dispose",this).call(this)}},{key:"disposeModel",value:function(){this._model&&(this._model.dispose(),this._model=null)}},{key:"_onStateChanged",value:function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}},{key:"saveQueryState",value:function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}},{key:"loadQueryState",value:function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}},{key:"isFindInputFocused",value:function(){return!!kx.getValue(this._contextKeyService)}},{key:"getState",value:function(){return this._state}},{key:"closeFindWidget",value:function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}},{key:"toggleCaseSensitive",value:function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleWholeWords",value:function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleRegex",value:function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"togglePreserveCase",value:function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleSearchScope",value:function(){var e=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"setSearchString",value:function(e){this._state.isRegex&&(e=nh.escapeRegExpCharacters(e)),this._state.change({searchString:e},!1)}},{key:"highlightFindOptions",value:function(){}},{key:"_start",value:function(e){return jS(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a,s;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.disposeModel(),this._editor.hasModel()){t.next=3;break}return t.abrupt("return");case 3:if(i={isRevealed:!0},"single"===e.seedSearchStringFromSelection?(r=WS(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection))&&(this._state.isRegex?i.searchString=nh.escapeRegExpCharacters(r):i.searchString=r):"multiple"!==e.seedSearchStringFromSelection||e.updateSearchScope||(o=WS(this._editor,e.seedSearchStringFromSelection))&&(i.searchString=o),i.searchString||!e.seedSearchStringFromGlobalClipboard){t.next=12;break}return t.next=8,this.getGlobalBufferTerm();case 8:if(a=t.sent,this._editor.hasModel()){t.next=11;break}return t.abrupt("return");case 11:a&&(i.searchString=a);case 12:e.forceRevealReplace?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope&&(s=this._editor.getSelections()).some((function(e){return!e.isEmpty()}))&&(i.searchScope=s),i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new Tx(this._editor,this._state));case 17:case"end":return t.stop()}}),t,this)})))}},{key:"start",value:function(e){return this._start(e)}},{key:"moveToNextMatch",value:function(){return!!this._model&&(this._model.moveToNextMatch(),!0)}},{key:"moveToPrevMatch",value:function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}},{key:"replace",value:function(){return!!this._model&&(this._model.replace(),!0)}},{key:"replaceAll",value:function(){return!!this._model&&(this._model.replaceAll(),!0)}},{key:"selectAllMatches",value:function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}},{key:"getGlobalBufferTerm",value:function(){return jS(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._editor.getOption(34).globalFindClipboard||!this._editor.hasModel()||this._editor.getModel().isTooLargeForSyncing()){e.next=2;break}return e.abrupt("return",this._clipboardService.readFindText());case 2:return e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setGlobalBufferTerm",value:function(e){this._editor.getOption(34).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(vd.Disposable);US.ID="editor.contrib.findController";var VS=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a,s,l,c){var d;return(0,u.default)(this,i),(d=t.call(this,e,r,l,c))._contextViewService=n,d._keybindingService=o,d._themeService=a,d._notificationService=s,d._widget=null,d._findOptionsWidget=null,d}return(0,c.default)(i,[{key:"_start",value:function(e){var t=this,r=Object.create(null,{_start:{get:function(){return(0,zi.default)((0,Wi.default)(i.prototype),"_start",t)}}});return jS(this,void 0,void 0,n(l).mark((function t(){var i,o,a;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._widget||this._createFindWidget(),i=this._editor.getSelection(),o=!1,t.t0=this._editor.getOption(34).autoFindInSelection,t.next="always"===t.t0?6:"never"===t.t0?8:"multiline"===t.t0?10:13;break;case 6:return o=!0,t.abrupt("break",14);case 8:return o=!1,t.abrupt("break",14);case 10:return a=!!i&&i.startLineNumber!==i.endLineNumber,o=a,t.abrupt("break",14);case 13:return t.abrupt("break",14);case 14:return e.updateSearchScope=o,t.next=17,r._start.call(this,e);case 17:this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput());case 18:case"end":return t.stop()}}),t,this)})))}},{key:"highlightFindOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}},{key:"_createFindWidget",value:function(){this._widget=this._register(new(0,Ux.FindWidget)(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new jx(this._editor,this._state,this._keybindingService,this._themeService))}}]),i}(US=BS([HS(1,$c.IContextKeyService),HS(2,Qf.IStorageService),HS(3,zd.IClipboardService)],US));VS=BS([HS(1,jh.IContextViewService),HS(2,$c.IContextKeyService),HS(3,zh.IKeybindingService),HS(4,Cd.IThemeService),HS(5,hf.INotificationService),HS(6,Qf.IStorageService),HS(7,zd.IClipboardService)],VS),(0,qc.registerMultiEditorAction)(new(0,qc.MultiEditorAction)({id:Ix.StartFindAction,label:Jc.localize("startFindAction","Find"),alias:"Find",precondition:$c.ContextKeyExpr.or(Xc.EditorContextKeys.focus,$c.ContextKeyExpr.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:xd.MenuId.MenubarEditMenu,group:"3_find",title:Jc.localize({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})).addImplementation(0,(function(e,t,n){var i=US.get(t);return!!i&&i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(34).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop})}));var KS=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:Ix.StartFindWithSelection,label:Jc.localize("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return jS(this,void 0,void 0,n(l).mark((function e(){var i;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=US.get(t))){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop});case 4:i.setGlobalBufferTerm(i.getState().searchString);case 5:case"end":return e.stop()}}),e)})))}}]),i}(qc.EditorAction),qS=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"run",value:function(e,t){return jS(this,void 0,void 0,n(l).mark((function e(){var i;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=US.get(t))||this._run(i)){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===i.getState().searchString.length&&"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop});case 4:this._run(i);case 5:case"end":return e.stop()}}),e,this)})))}}]),i}(qc.EditorAction),JS=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:Ix.NextMatchFindAction,label:Jc.localize("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:Xc.EditorContextKeys.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.focus,kx),primary:3,weight:100}]})}return(0,c.default)(n,[{key:"_run",value:function(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}]),n}(qS),XS=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:Ix.PreviousMatchFindAction,label:Jc.localize("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:Xc.EditorContextKeys.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.focus,kx),primary:1027,weight:100}]})}return(0,c.default)(n,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),n}(qS),GS=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.apply(this,arguments)}return(0,c.default)(i,[{key:"run",value:function(e,t){return jS(this,void 0,void 0,n(l).mark((function e(){var i,r,o;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=US.get(t)){e.next=3;break}return e.abrupt("return");case 3:if(r="selection"===t.getOption(34).seedSearchStringFromSelection,o=null,"never"!==t.getOption(34).seedSearchStringFromSelection&&(o=WS(t,"single",r)),o&&i.setSearchString(o),this._run(i)){e.next=11;break}return e.next=10,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(34).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:r,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop});case 10:this._run(i);case 11:case"end":return e.stop()}}),e,this)})))}}]),i}(qc.EditorAction),ZS=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:Ix.NextSelectionMatchFindAction,label:Jc.localize("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:2109,weight:100}})}return(0,c.default)(n,[{key:"_run",value:function(e){return e.moveToNextMatch()}}]),n}(GS),$S=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:Ix.PreviousSelectionMatchFindAction,label:Jc.localize("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:3133,weight:100}})}return(0,c.default)(n,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),n}(GS);(0,qc.registerMultiEditorAction)(new(0,qc.MultiEditorAction)({id:Ix.StartFindReplaceAction,label:Jc.localize("startReplace","Replace"),alias:"Replace",precondition:$c.ContextKeyExpr.or(Xc.EditorContextKeys.focus,$c.ContextKeyExpr.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:xd.MenuId.MenubarEditMenu,group:"3_find",title:Jc.localize({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})).addImplementation(0,(function(e,t,n){if(!t.hasModel()||t.getOption(80))return!1;var i=US.get(t);if(!i)return!1;var r=t.getSelection(),o=i.isFindInputFocused(),a=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&"never"!==t.getOption(34).seedSearchStringFromSelection&&!o,s=o||a?2:1;return i.start({forceRevealReplace:!0,seedSearchStringFromSelection:a?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(34).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(34).seedSearchStringFromSelection,shouldFocus:s,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(34).loop})})),(0,qc.registerEditorContribution)(US.ID,VS),(0,qc.registerEditorAction)(KS),(0,qc.registerEditorAction)(JS),(0,qc.registerEditorAction)(XS),(0,qc.registerEditorAction)(ZS),(0,qc.registerEditorAction)($S);var YS=qc.EditorCommand.bindToContribution(US.get);(0,qc.registerEditorCommand)(new YS({id:Ix.CloseFindWidgetCommand,precondition:wx,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.focus,$c.ContextKeyExpr.not("isComposing")),primary:9,secondary:[1033]}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ToggleCaseSensitiveCommand,precondition:void 0,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:xx.primary,mac:xx.mac,win:xx.win,linux:xx.linux}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ToggleWholeWordCommand,precondition:void 0,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:Sx.primary,mac:Sx.mac,win:Sx.win,linux:Sx.linux}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ToggleRegexCommand,precondition:void 0,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:Ex.primary,mac:Ex.mac,win:Ex.win,linux:Ex.linux}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ToggleSearchScopeCommand,precondition:void 0,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:Dx.primary,mac:Dx.mac,win:Dx.win,linux:Dx.linux}})),(0,qc.registerEditorCommand)(new YS({id:Ix.TogglePreserveCaseCommand,precondition:void 0,handler:function(e){return e.togglePreserveCase()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:Ax.primary,mac:Ax.mac,win:Ax.win,linux:Ax.linux}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ReplaceOneAction,precondition:wx,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:3094}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ReplaceOneAction,precondition:wx,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.focus,Cx),primary:3}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ReplaceAllAction,precondition:wx,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:2563}})),(0,qc.registerEditorCommand)(new YS({id:Ix.ReplaceAllAction,precondition:wx,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.focus,Cx),primary:void 0,mac:{primary:2051}}})),(0,qc.registerEditorCommand)(new YS({id:Ix.SelectAllMatchesAction,precondition:wx,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:Xc.EditorContextKeys.focus,primary:515}}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),Jc=o("faA3E"),zf=o("jW8FZ"),nh=o("gTzCU"),gd=o("hJucn"),Zc=o("5LFig"),vd=o("dXCvL"),qc=o("THDAR"),u=o("4JAgF"),c=o("9HoHC"),qi=o("caN7I"),$h=o("neTVg"),u=o("4JAgF"),c=o("9HoHC");var QS=16777215,eE=4278190080,tE=function(){"use strict";function e(t,n,i){if((0,u.default)(this,e),t.length!==n.length||t.length>65535)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=t,this._endIndexes=n,this._collapseStates=new Uint32Array(Math.ceil(t.length/32)),this._types=i,this._parentsComputed=!1}return(0,c.default)(e,[{key:"ensureParentIndices",value:function(){var e=this;if(!this._parentsComputed){this._parentsComputed=!0;for(var t=[],n=function(n,i){var r=t[t.length-1];return e.getStartLineNumber(r)<=n&&e.getEndLineNumber(r)>=i},i=0,r=this._startIndexes.length;i<r;i++){var o=this._startIndexes[i],a=this._endIndexes[i];if(o>QS||a>QS)throw new Error("startLineNumber or endLineNumber must not exceed 16777215");for(;t.length>0&&!n(o,a);)t.pop();var s=t.length>0?t[t.length-1]:-1;t.push(i),this._startIndexes[i]=o+((255&s)<<24),this._endIndexes[i]=a+((65280&s)<<16)}}}},{key:"length",get:function(){return this._startIndexes.length}},{key:"getStartLineNumber",value:function(e){return this._startIndexes[e]&QS}},{key:"getEndLineNumber",value:function(e){return this._endIndexes[e]&QS}},{key:"getType",value:function(e){return this._types?this._types[e]:void 0}},{key:"hasTypes",value:function(){return!!this._types}},{key:"isCollapsed",value:function(e){var t=e/32|0,n=e%32;return 0!=(this._collapseStates[t]&1<<n)}},{key:"setCollapsed",value:function(e,t){var n=e/32|0,i=e%32,r=this._collapseStates[n];this._collapseStates[n]=t?r|1<<i:r&~(1<<i)}},{key:"setCollapsedAllOfType",value:function(e,t){var n=!1;if(this._types)for(var i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}},{key:"toRegion",value:function(e){return new nE(this,e)}},{key:"getParentIndex",value:function(e){this.ensureParentIndices();var t=((this._startIndexes[e]&eE)>>>24)+((this._endIndexes[e]&eE)>>>16);return 65535===t?-1:t}},{key:"contains",value:function(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}},{key:"findIndex",value:function(e){var t=0,n=this._startIndexes.length;if(0===n)return-1;for(;t<n;){var i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}},{key:"findRange",value:function(e){var t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);-1!==t;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}},{key:"toString",value:function(){for(var e=[],t=0;t<this.length;t++)e[t]="[".concat(this.isCollapsed(t)?"+":"-","] ").concat(this.getStartLineNumber(t),"/").concat(this.getEndLineNumber(t));return e.join(", ")}}]),e}(),nE=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.ranges=t,this.index=n}return(0,c.default)(e,[{key:"startLineNumber",get:function(){return this.ranges.getStartLineNumber(this.index)}},{key:"endLineNumber",get:function(){return this.ranges.getEndLineNumber(this.index)}},{key:"regionIndex",get:function(){return this.index}},{key:"parentIndex",get:function(){return this.ranges.getParentIndex(this.index)}},{key:"isCollapsed",get:function(){return this.ranges.isCollapsed(this.index)}},{key:"containedBy",value:function(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}},{key:"containsLine",value:function(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}]),e}(),iE=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._updateEventEmitter=new(0,$h.Emitter),this.onDidChange=this._updateEventEmitter.event,this._textModel=t,this._decorationProvider=n,this._regions=new tE(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[],this._isInitialized=!1}return(0,c.default)(e,[{key:"regions",get:function(){return this._regions}},{key:"textModel",get:function(){return this._textModel}},{key:"isInitialized",get:function(){return this._isInitialized}},{key:"toggleCollapseState",value:function(e){var t=this;if(e.length){e=e.sort((function(e,t){return e.regionIndex-t.regionIndex}));var n={};this._decorationProvider.changeDecorations((function(i){var r=0,o=-1,a=-1,s=function(e){for(;r<e;){var n=t._regions.getEndLineNumber(r),s=t._regions.isCollapsed(r);n<=o&&i.changeDecorationOptions(t._editorDecorationIds[r],t._decorationProvider.getDecorationOption(s,n<=a)),s&&n>a&&(a=n),r++}},l=!0,u=!1,c=void 0;try{for(var d,h=e[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var f=d.value.regionIndex,p=t._editorDecorationIds[f];if(p&&!n[p]){n[p]=!0,s(f);var g=!t._regions.isCollapsed(f);t._regions.setCollapsed(f,g),o=Math.max(o,t._regions.getEndLineNumber(f))}}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}s(t._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}}},{key:"update",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this,i=[],r=function(e,n){var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(e<l&&l<=n)return!0}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return!1},o=-1,a=function(t,a){var s=e.getStartLineNumber(t),l=e.getEndLineNumber(t);a||(a=e.isCollapsed(t)),a&&r(s,l)&&(a=!1),e.setCollapsed(t,a);var u=n._textModel.getLineMaxColumn(s),c={startLineNumber:s,startColumn:Math.max(u-1,1),endLineNumber:s,endColumn:u};i.push({range:c,options:n._decorationProvider.getDecorationOption(a,l<=o)}),a&&l>o&&(o=l)},s=0,l=function(){for(;s<n._regions.length;){var e=n._regions.isCollapsed(s);if(s++,e)return s-1}return-1},u=0,c=l();-1!==c&&u<e.length;){var d=this._textModel.getDecorationRange(this._editorDecorationIds[c]);if(d){var h=d.startLineNumber;if(d.startColumn===Math.max(d.endColumn-1,1)&&this._textModel.getLineMaxColumn(h)===d.endColumn)for(;u<e.length;){var f=e.getStartLineNumber(u);if(!(h>=f))break;a(u,h===f),u++}}c=l()}for(;u<e.length;)a(u,!1),u++;this._editorDecorationIds=this._decorationProvider.deltaDecorations(this._editorDecorationIds,i),this._regions=e,this._isInitialized=!0,this._updateEventEmitter.fire({model:this})}},{key:"getMemento",value:function(){for(var e=[],t=0;t<this._regions.length;t++)if(this._regions.isCollapsed(t)){var n=this._textModel.getDecorationRange(this._editorDecorationIds[t]);if(n){var i=n.startLineNumber,r=n.endLineNumber+this._regions.getEndLineNumber(t)-this._regions.getStartLineNumber(t);e.push({startLineNumber:i,endLineNumber:r})}}if(e.length>0)return e}},{key:"applyMemento",value:function(e){if(Array.isArray(e)){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.getRegionAtLine(s.startLineNumber);l&&!l.isCollapsed&&t.push(l)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this.toggleCollapseState(t)}}},{key:"dispose",value:function(){this._decorationProvider.deltaDecorations(this._editorDecorationIds,[])}},{key:"getAllRegionsAtLine",value:function(e,t){var n=[];if(this._regions)for(var i=this._regions.findRange(e),r=1;i>=0;){var o=this._regions.toRegion(i);t&&!t(o,r)||n.push(o),r++,i=o.parentIndex}return n}},{key:"getRegionAtLine",value:function(e){if(this._regions){var t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}},{key:"getRegionsInside",value:function(e,t){var n=[],i=e?e.regionIndex+1:0,r=e?e.endLineNumber:Number.MAX_VALUE;if(t&&2===t.length)for(var o=[],a=i,s=this._regions.length;a<s;a++){var l=this._regions.toRegion(a);if(!(this._regions.getStartLineNumber(a)<r))break;for(;o.length>0&&!l.containedBy(o[o.length-1]);)o.pop();o.push(l),t(l,o.length)&&n.push(l)}else for(var u=i,c=this._regions.length;u<c;u++){var d=this._regions.toRegion(u);if(!(this._regions.getStartLineNumber(u)<r))break;t&&!t(d)||n.push(d)}return n}}]),e}();function rE(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(n,r){var o=r.value,a=e.getRegionAtLine(o);if(a){var s=!a.isCollapsed;if(i.push(a),t>1){var l,u=e.getRegionsInside(a,(function(e,n){return e.isCollapsed!==s&&n<t}));(l=i).push.apply(l,(0,qi.default)(u))}}},u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l(0,s)}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}e.toggleCollapseState(i)}function oE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE,i=arguments.length>3?arguments[3]:void 0,r=[],o=!0,a=!1,s=void 0;if(i&&i.length>0)try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=e.getRegionAtLine(c);if(d&&(d.isCollapsed!==t&&r.push(d),n>1)){var h,f=e.getRegionsInside(d,(function(e,i){return e.isCollapsed!==t&&i<n}));(h=r).push.apply(h,(0,qi.default)(f))}}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}else{var p,g=e.getRegionsInside(null,(function(e,i){return e.isCollapsed!==t&&i<n}));(p=r).push.apply(p,(0,qi.default)(g))}e.toggleCollapseState(r)}function aE(e,t,n,i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d=l.value,h=e.getAllRegionsAtLine(d,(function(e,i){return e.isCollapsed!==t&&i<=n}));(c=r).push.apply(c,(0,qi.default)(h))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}e.toggleCollapseState(r)}function sE(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=e.getAllRegionsAtLine(u,(function(e){return e.isCollapsed!==t}));c.length>0&&i.push(c[0])}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}e.toggleCollapseState(i)}function lE(e,t,n,i){var r=e.getRegionsInside(null,(function(e,r){return r===t&&e.isCollapsed!==n&&!i.some((function(t){return e.containsLine(t)}))}));e.toggleCollapseState(r)}function uE(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.push(e.getAllRegionsAtLine(u,void 0)[0])}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}var c=e.getRegionsInside(null,(function(e){return i.every((function(t){return!t.containedBy(e)&&!e.containedBy(t)}))&&e.isCollapsed!==t}));e.toggleCollapseState(c)}function cE(e,t,n){for(var i=e.textModel,r=e.regions,o=[],a=r.length-1;a>=0;a--)if(n!==r.isCollapsed(a)){var s=r.getStartLineNumber(a);t.test(i.getLineContent(s))&&o.push(r.toRegion(a))}e.toggleCollapseState(o)}function dE(e,t,n){for(var i=e.regions,r=[],o=i.length-1;o>=0;o--)n!==i.isCollapsed(o)&&t===i.getType(o)&&r.push(i.toRegion(o));e.toggleCollapseState(r)}function hE(e,t){var n=null,i=t.getRegionAtLine(e);if(null!==i&&e===(n=i.startLineNumber)){var r=i.parentIndex;n=-1!==r?t.regions.getStartLineNumber(r):null}return n}function fE(e,t){var n=t.getRegionAtLine(e);if(null!==n){if(e!==n.startLineNumber)return n.startLineNumber;var i=n.parentIndex,r=0;for(-1!==i&&(r=t.regions.getStartLineNumber(n.parentIndex));null!==n;){if(!(n.regionIndex>0))return null;if((n=t.regions.toRegion(n.regionIndex-1)).startLineNumber<=r)return null;if(n.parentIndex===i)return n.startLineNumber}}else if(t.regions.length>0)for(n=t.regions.toRegion(t.regions.length-1);null!==n;){if(-1===n.parentIndex&&n.startLineNumber<e)return n.startLineNumber;n=n.regionIndex>0?t.regions.toRegion(n.regionIndex-1):null}return null}function pE(e,t){var n=t.getRegionAtLine(e);if(null!==n){var i=n.parentIndex,r=0;if(-1!==i)r=t.regions.getEndLineNumber(n.parentIndex);else{if(0===t.regions.length)return null;r=t.regions.getEndLineNumber(t.regions.length-1)}for(;null!==n;){if(!(n.regionIndex<t.regions.length))return null;if((n=t.regions.toRegion(n.regionIndex+1)).startLineNumber>=r)return null;if(n.parentIndex===i)return n.startLineNumber}}else if(t.regions.length>0)for(n=t.regions.toRegion(0);null!==n;){if(-1===n.parentIndex&&n.startLineNumber>e)return n.startLineNumber;n=n.regionIndex<t.regions.length?t.regions.toRegion(n.regionIndex+1):null}return null}u=o("4JAgF"),c=o("9HoHC"),_d=o("60ELr"),Qh=o("8bO6F"),Jc=o("faA3E"),cv=o("9uoQH"),Cd=o("4ET02");var gE=(0,cv.registerIcon)("folding-expanded",Qh.Codicon.chevronDown,(0,Jc.localize)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),vE=(0,cv.registerIcon)("folding-collapsed",Qh.Codicon.chevronRight,(0,Jc.localize)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),mE=function(){"use strict";function e(t){(0,u.default)(this,e),this.editor=t,this.autoHideFoldingControls=!0,this.showFoldingHighlights=!0}return(0,c.default)(e,[{key:"getDecorationOption",value:function(t,n){return n?e.HIDDEN_RANGE_DECORATION:t?this.showFoldingHighlights?e.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:e.COLLAPSED_VISUAL_DECORATION:this.autoHideFoldingControls?e.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:e.EXPANDED_VISUAL_DECORATION}},{key:"deltaDecorations",value:function(e,t){return this.editor.deltaDecorations(e,t)}},{key:"changeDecorations",value:function(e){return this.editor.changeDecorations(e)}}]),e}();mE.COLLAPSED_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-collapsed-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:Cd.ThemeIcon.asClassName(vE)}),mE.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:1,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:Cd.ThemeIcon.asClassName(vE)}),mE.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:Cd.ThemeIcon.asClassName(gE)}),mE.EXPANDED_VISUAL_DECORATION=_d.ModelDecorationOptions.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+Cd.ThemeIcon.asClassName(gE)}),mE.HIDDEN_RANGE_DECORATION=_d.ModelDecorationOptions.register({description:"folding-hidden-range-decoration",stickiness:1});Xc=o("5cDyY"),u=o("4JAgF"),c=o("9HoHC"),$h=o("neTVg"),yd=o("5MJfC"),oh=o("2ZBuK");var yE=function(){"use strict";function e(t){var n=this;(0,u.default)(this,e),this._updateEventEmitter=new(0,$h.Emitter),this._foldingModel=t,this._foldingModelListener=t.onDidChange((function(e){return n.updateHiddenRanges()})),this._hiddenRanges=[],t.regions.length&&this.updateHiddenRanges()}return(0,c.default)(e,[{key:"onDidChange",get:function(){return this._updateEventEmitter.event}},{key:"hiddenRanges",get:function(){return this._hiddenRanges}},{key:"updateHiddenRanges",value:function(){for(var e=!1,t=[],n=0,i=0,r=Number.MAX_VALUE,o=-1,a=this._foldingModel.regions;n<a.length;n++)if(a.isCollapsed(n)){var s=a.getStartLineNumber(n)+1,l=a.getEndLineNumber(n);r<=s&&l<=o||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===s&&this._hiddenRanges[i].endLineNumber===l?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new(0,yd.Range)(s,1,l,1))),r=s,o=l)}(e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}},{key:"applyMemento",value:function(e){if(!Array.isArray(e)||0===e.length)return!1;var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!s.startLineNumber||!s.endLineNumber)return!1;t.push(new(0,yd.Range)(s.startLineNumber+1,1,s.endLineNumber,1))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return this.applyHiddenRanges(t),!0}},{key:"getMemento",value:function(){return this._hiddenRanges.map((function(e){return{startLineNumber:e.startLineNumber-1,endLineNumber:e.endLineNumber}}))}},{key:"applyHiddenRanges",value:function(e){this._hiddenRanges=e,this._updateEventEmitter.fire(e)}},{key:"hasRanges",value:function(){return this._hiddenRanges.length>0}},{key:"isHidden",value:function(e){return null!==bE(this._hiddenRanges,e)}},{key:"adjustSelections",value:function(e){for(var t=this,n=!1,i=this._foldingModel.textModel,r=null,o=function(e){return r&&function(e,t){return e>=t.startLineNumber&&e<=t.endLineNumber}(e,r)||(r=bE(t._hiddenRanges,e)),r?r.startLineNumber-1:null},a=0,s=e.length;a<s;a++){var l=e[a],u=o(l.startLineNumber);u&&(l=l.setStartPosition(u,i.getLineMaxColumn(u)),n=!0);var c=o(l.endLineNumber);c&&(l=l.setEndPosition(c,i.getLineMaxColumn(c)),n=!0),e[a]=l}return n}},{key:"dispose",value:function(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}]),e}();function bE(e,t){var n=(0,oh.findFirstInSorted)(e,(function(e){return t<e.startLineNumber}))-1;return n>=0&&e[n].endLineNumber>=t?e[n]:null}sy=o("k4Xpx"),u=o("4JAgF"),c=o("9HoHC"),_d=o("60ELr"),sy=o("k4Xpx");var _E=5e3,wE=function(){"use strict";function e(t){(0,u.default)(this,e),this.editorModel=t,this.id="indent"}return(0,c.default)(e,[{key:"dispose",value:function(){}},{key:"compute",value:function(e){var t=sy.LanguageConfigurationRegistry.getFoldingRules(this.editorModel.getLanguageIdentifier().id),n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_E,r=e.getOptions().tabSize,o=new kE(i),a=void 0;n&&(a=new RegExp("(".concat(n.start.source,")|(?:").concat(n.end.source,")")));var s=[],l=e.getLineCount()+1;s.push({indent:-1,endAbove:l,line:l});for(var u=e.getLineCount();u>0;u--){var c=e.getLineContent(u),d=_d.TextModel.computeIndentLevel(c,r),h=s[s.length-1];if(-1!==d){var f=void 0;if(a&&(f=c.match(a))){if(!f[1]){s.push({indent:-2,endAbove:u,line:u});continue}for(var p=s.length-1;p>0&&-2!==s[p].indent;)p--;if(p>0){s.length=p+1,h=s[p],o.insertFirst(u,h.line,d),h.line=u,h.indent=d,h.endAbove=u;continue}}if(h.indent>d){do{s.pop(),h=s[s.length-1]}while(h.indent>d);var g=h.endAbove-1;g-u>=1&&o.insertFirst(u,g,d)}h.indent===d?h.endAbove=u:s.push({indent:d,endAbove:u,line:u})}else t&&(h.endAbove=u)}return o.toIndentRanges(e)}(this.editorModel,n,i))}}]),e}(),kE=function(){"use strict";function e(t){(0,u.default)(this,e),this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=t}return(0,c.default)(e,[{key:"insertFirst",value:function(e,t,n){if(!(e>QS||t>QS)){var i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}}},{key:"toIndentRanges",value:function(e){if(this._length<=this._foldingRangesLimit){for(var t=new Uint32Array(this._length),n=new Uint32Array(this._length),i=this._length-1,r=0;i>=0;i--,r++)t[r]=this._startIndexes[i],n[r]=this._endIndexes[i];return new tE(t,n)}for(var o=0,a=this._indentOccurrences.length,s=0;s<this._indentOccurrences.length;s++){var l=this._indentOccurrences[s];if(l){if(l+o>this._foldingRangesLimit){a=s;break}o+=l}}for(var u=e.getOptions().tabSize,c=new Uint32Array(this._foldingRangesLimit),d=new Uint32Array(this._foldingRangesLimit),h=this._length-1,f=0;h>=0;h--){var p=this._startIndexes[h],g=e.getLineContent(p),v=_d.TextModel.computeIndentLevel(g,u);(v<a||v===a&&o++<this._foldingRangesLimit)&&(c[f]=p,d[f]=this._endIndexes[h],f++)}return new tE(c,d)}}]),e}();lh=o("chpjt"),u=o("4JAgF"),c=o("9HoHC"),Yc=o("2NkmB"),vd=o("dXCvL");var CE={},xE="syntax",SE=function(){"use strict";function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;(0,u.default)(this,e),this.editorModel=t,this.providers=n,this.limit=r,this.id=xE;var o=!0,a=!1,s=void 0;try{for(var l,c=n[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;"function"==typeof d.onDidChange&&(this.disposables||(this.disposables=new(0,vd.DisposableStore)),this.disposables.add(d.onDidChange(i)))}}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}}return(0,c.default)(e,[{key:"compute",value:function(e){var t=this;return function(e,t,n){var i=null,r=e.map((function(e,r){return Promise.resolve(e.provideFoldingRanges(t,CE,n)).then((function(e){if(!n.isCancellationRequested&&Array.isArray(e)){Array.isArray(i)||(i=[]);var o=t.getLineCount(),a=!0,s=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;d.start>0&&d.end>d.start&&d.end<=o&&i.push({start:d.start,end:d.end,rank:r,kind:d.kind})}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}}}),Yc.onUnexpectedExternalError)}));return Promise.all(r).then((function(e){return i}))}(this.providers,this.editorModel,e).then((function(e){return e?DE(e,t.limit):null}))}},{key:"dispose",value:function(){var e;null===(e=this.disposables)||void 0===e||e.dispose()}}]),e}();var EE=function(){"use strict";function e(t){(0,u.default)(this,e),this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=t}return(0,c.default)(e,[{key:"add",value:function(e,t,n,i){if(!(e>QS||t>QS)){var r=this._length;this._startIndexes[r]=e,this._endIndexes[r]=t,this._nestingLevels[r]=i,this._types[r]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}}},{key:"toIndentRanges",value:function(){if(this._length<=this._foldingRangesLimit){for(var e=new Uint32Array(this._length),t=new Uint32Array(this._length),n=0;n<this._length;n++)e[n]=this._startIndexes[n],t[n]=this._endIndexes[n];return new tE(e,t,this._types)}for(var i=0,r=this._nestingLevelCounts.length,o=0;o<this._nestingLevelCounts.length;o++){var a=this._nestingLevelCounts[o];if(a){if(a+i>this._foldingRangesLimit){r=o;break}i+=a}}for(var s=new Uint32Array(this._foldingRangesLimit),l=new Uint32Array(this._foldingRangesLimit),u=[],c=0,d=0;c<this._length;c++){var h=this._nestingLevels[c];(h<r||h===r&&i++<this._foldingRangesLimit)&&(s[d]=this._startIndexes[c],l[d]=this._endIndexes[c],u[d]=this._types[c],d++)}return new tE(s,l,u)}}]),e}();function DE(e,t){var n=e.sort((function(e,t){var n=e.start-t.start;return 0===n&&(n=e.rank-t.rank),n})),i=new EE(t),r=void 0,o=[],a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(r){if(d.start>r.start)if(d.end<=r.end)o.push(r),r=d,i.add(d.start,d.end,d.kind&&d.kind.value,o.length);else{if(d.start>r.end){do{r=o.pop()}while(r&&d.start>r.end);r&&o.push(r),r=d}i.add(d.start,d.end,d.kind&&d.kind.value,o.length)}}else r=d,i.add(d.start,d.end,d.kind&&d.kind.value,o.length)}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return i.toIndentRanges()}u=o("4JAgF"),c=o("9HoHC");var AE="init",IE=function(){"use strict";function e(t,n,i,r){if((0,u.default)(this,e),this.editorModel=t,this.id=AE,n.length){this.decorationIds=t.deltaDecorations([],n.map((function(e){return{range:{startLineNumber:e.startLineNumber,startColumn:0,endLineNumber:e.endLineNumber,endColumn:t.getLineLength(e.endLineNumber)},options:{description:"folding-initializing-range-provider",stickiness:1}}}))),this.timeout=setTimeout(i,r)}}return(0,c.default)(e,[{key:"dispose",value:function(){this.decorationIds&&(this.editorModel.deltaDecorations(this.decorationIds,[]),this.decorationIds=void 0),"number"==typeof this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}},{key:"compute",value:function(e){var t=[],n=!0,i=!1,r=void 0;if(this.decorationIds)try{for(var o,a=this.decorationIds[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.editorModel.getDecorationRange(s);l&&t.push({start:l.startLineNumber,end:l.endLineNumber,rank:1})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return Promise.resolve(DE(t,Number.MAX_VALUE))}}]),e}(),RE=(Yc=o("2NkmB"),$c=o("efZ3W"),Cd=o("4ET02"),kd=o("ht8QC"),sh=o("fLZJB"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),TE=function(e,t){return function(n,i){t(n,i,e)}},LE=new(0,$c.RawContextKey)("foldingEnabled",!1),ME=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;(0,u.default)(this,n),(r=t.call(this)).contextKeyService=i,r.localToDispose=r._register(new(0,vd.DisposableStore)),r.editor=e;var o=r.editor.getOptions();return r._isEnabled=o.get(36),r._useFoldingProviders="indentation"!==o.get(37),r._unfoldOnClickAfterEndOfLine=o.get(40),r._restoringViewState=!1,r._currentModelHasFoldedImports=!1,r._foldingImportsByDefault=o.get(39),r.foldingModel=null,r.hiddenRangeModel=null,r.rangeProvider=null,r.foldingRegionPromise=null,r.foldingStateMemento=null,r.foldingModelPromise=null,r.updateScheduler=null,r.cursorChangedScheduler=null,r.mouseDownInfo=null,r.foldingDecorationProvider=new mE(e),r.foldingDecorationProvider.autoHideFoldingControls="mouseover"===o.get(99),r.foldingDecorationProvider.showFoldingHighlights=o.get(38),r.foldingEnabled=LE.bindTo(r.contextKeyService),r.foldingEnabled.set(r._isEnabled),r._register(r.editor.onDidChangeModel((function(){return r.onModelChanged()}))),r._register(r.editor.onDidChangeConfiguration((function(e){if(e.hasChanged(36)&&(r._isEnabled=r.editor.getOptions().get(36),r.foldingEnabled.set(r._isEnabled),r.onModelChanged()),e.hasChanged(99)||e.hasChanged(38)){var t=r.editor.getOptions();r.foldingDecorationProvider.autoHideFoldingControls="mouseover"===t.get(99),r.foldingDecorationProvider.showFoldingHighlights=t.get(38),r.onModelContentChanged()}e.hasChanged(37)&&(r._useFoldingProviders="indentation"!==r.editor.getOptions().get(37),r.onFoldingStrategyChanged()),e.hasChanged(40)&&(r._unfoldOnClickAfterEndOfLine=r.editor.getOptions().get(40)),e.hasChanged(39)&&(r._foldingImportsByDefault=r.editor.getOptions().get(39))}))),r.onModelChanged(),r}return(0,c.default)(n,[{key:"saveViewState",value:function(){var e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){var t=this.foldingModel.isInitialized?this.foldingModel.getMemento():this.hiddenRangeModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}},{key:"restoreViewState",value:function(e){var t=this,n=this.editor.getModel();if(n&&this._isEnabled&&!n.isTooLargeForTokenization()&&this.hiddenRangeModel&&e&&e.lineCount===n.getLineCount()&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions)){e.provider!==xE&&e.provider!==AE||(this.foldingStateMemento=e);var i=e.collapsedRegions;if(this.hiddenRangeModel.applyMemento(i)){var r=this.getFoldingModel();r&&r.then((function(e){if(e){t._restoringViewState=!0;try{e.applyMemento(i)}finally{t._restoringViewState=!1}}})).then(void 0,Yc.onUnexpectedError)}}}},{key:"onModelChanged",value:function(){var e=this;this.localToDispose.clear();var t=this.editor.getModel();this._isEnabled&&t&&!t.isTooLargeForTokenization()&&(this._currentModelHasFoldedImports=!1,this.foldingModel=new iE(t,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new yE(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange((function(t){return e.onHiddenRangesChanges(t)}))),this.updateScheduler=new(0,gd.Delayer)(200),this.cursorChangedScheduler=new(0,gd.RunOnceScheduler)((function(){return e.revealCursor()}),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(lh.FoldingRangeProviderRegistry.onDidChange((function(){return e.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration((function(){return e.onFoldingStrategyChanged()}))),this.localToDispose.add(this.editor.onDidChangeModelContent((function(){return e.onModelContentChanged()}))),this.localToDispose.add(this.editor.onDidChangeCursorPosition((function(){return e.onCursorPositionChanged()}))),this.localToDispose.add(this.editor.onMouseDown((function(t){return e.onEditorMouseDown(t)}))),this.localToDispose.add(this.editor.onMouseUp((function(t){return e.onEditorMouseUp(t)}))),this.localToDispose.add({dispose:function(){e.foldingRegionPromise&&(e.foldingRegionPromise.cancel(),e.foldingRegionPromise=null),e.updateScheduler&&e.updateScheduler.cancel(),e.updateScheduler=null,e.foldingModel=null,e.foldingModelPromise=null,e.hiddenRangeModel=null,e.cursorChangedScheduler=null,e.foldingStateMemento=null,e.rangeProvider&&e.rangeProvider.dispose(),e.rangeProvider=null}}),this.onModelContentChanged())}},{key:"onFoldingStrategyChanged",value:function(){this.rangeProvider&&this.rangeProvider.dispose(),this.rangeProvider=null,this.onModelContentChanged()}},{key:"getRangeProvider",value:function(e){var t=this;if(this.rangeProvider)return this.rangeProvider;if(this.rangeProvider=new wE(e),this._useFoldingProviders&&this.foldingModel){var n=lh.FoldingRangeProviderRegistry.ordered(this.foldingModel.textModel);if(0===n.length&&this.foldingStateMemento&&this.foldingStateMemento.collapsedRegions)return this.rangeProvider=new IE(e,this.foldingStateMemento.collapsedRegions,(function(){t.foldingStateMemento=null,t.onFoldingStrategyChanged()}),3e4);n.length>0&&(this.rangeProvider=new SE(e,n,(function(){return t.onModelContentChanged()})))}return this.foldingStateMemento=null,this.rangeProvider}},{key:"getFoldingModel",value:function(){return this.foldingModelPromise}},{key:"onModelContentChanged",value:function(){var e=this;this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger((function(){var t=e.foldingModel;if(!t)return null;var n=e.getRangeProvider(t.textModel),i=e.foldingRegionPromise=(0,gd.createCancelablePromise)((function(e){return n.compute(e)}));return i.then((function(n){if(n&&i===e.foldingRegionPromise){var r;if(e._foldingImportsByDefault&&!e._currentModelHasFoldedImports){var o=n.setCollapsedAllOfType(lh.FoldingRangeKind.Imports.value,!0);o&&(r=sh.StableEditorScrollState.capture(e.editor),e._currentModelHasFoldedImports=o)}var a=e.editor.getSelections(),s=a?a.map((function(e){return e.startLineNumber})):[];t.update(n,s),r&&r.restore(e.editor)}return t}))})).then(void 0,(function(e){return(0,Yc.onUnexpectedError)(e),null})))}},{key:"onHiddenRangesChanges",value:function(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){var t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e)}},{key:"onCursorPositionChanged",value:function(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}},{key:"revealCursor",value:function(){var e=this,t=this.getFoldingModel();t&&t.then((function(t){if(t){var n=e.editor.getSelections();if(n&&n.length>0){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(n,r){var o,a=r.value.selectionStartLineNumber;e.hiddenRangeModel&&e.hiddenRangeModel.isHidden(a)&&(o=i).push.apply(o,(0,qi.default)(t.getAllRegionsAtLine(a,(function(e){return e.isCollapsed&&a>e.startLineNumber}))))},u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l(0,s)}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}i.length&&(t.toggleCollapseState(i),e.reveal(n[0].getPosition()))}}})).then(void 0,Yc.onUnexpectedError)}},{key:"onEditorMouseDown",value:function(e){if(this.mouseDownInfo=null,this.hiddenRangeModel&&e.target&&e.target.range&&(e.event.leftButton||e.event.middleButton)){var t=e.target.range,n=!1;switch(e.target.type){case 4:var i=e.target.detail,r=e.target.element.offsetLeft;if(i.offsetX-r<5)return;n=!0;break;case 7:if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges())if(!e.target.detail.isAfterLines)break;return;case 6:if(this.hiddenRangeModel.hasRanges()){var o=this.editor.getModel();if(o&&t.startColumn===o.getLineMaxColumn(t.startLineNumber))break}return;default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}}},{key:"onEditorMouseUp",value:function(e){var t=this,n=this.getFoldingModel();if(n&&this.mouseDownInfo&&e.target){var i=this.mouseDownInfo.lineNumber,r=this.mouseDownInfo.iconClicked,o=e.target.range;if(o&&o.startLineNumber===i){if(r){if(4!==e.target.type)return}else{var a=this.editor.getModel();if(!a||o.startColumn!==a.getLineMaxColumn(i))return}n.then((function(n){if(n){var o=n.getRegionAtLine(i);if(o&&o.startLineNumber===i){var a=o.isCollapsed;if(r||a){var s=[];if(e.event.altKey){var l=n.getRegionsInside(null,(function(e){return!e.containedBy(o)&&!o.containedBy(e)})),u=!0,c=!1,d=void 0;try{for(var h,f=l[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;p.isCollapsed&&s.push(p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}0===s.length&&(s=l)}else{var g=e.event.middleButton||e.event.shiftKey;if(g){var v=!0,m=!1,y=void 0;try{for(var b,_=n.getRegionsInside(o)[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=b.value;w.isCollapsed===a&&s.push(w)}}catch(e){m=!0,y=e}finally{try{v||null==_.return||_.return()}finally{if(m)throw y}}}!a&&g&&0!==s.length||s.push(o)}n.toggleCollapseState(s),t.reveal({lineNumber:i,column:1})}}}})).then(void 0,Yc.onUnexpectedError)}}}},{key:"reveal",value:function(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);ME.ID="editor.contrib.folding",ME=RE([TE(1,$c.IContextKeyService)],ME);var NE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"runEditorCommand",value:function(e,t,n){var i=this,r=ME.get(t);if(r){var o=r.getFoldingModel();return o?(this.reportTelemetry(e,t),o.then((function(e){if(e){i.invoke(r,e,t,n);var o=t.getSelection();o&&r.reveal(o.getStartPosition())}}))):void 0}}},{key:"getSelectedLines",value:function(e){var t=e.getSelections();return t?t.map((function(e){return e.startLineNumber})):[]}},{key:"getLineNumbers",value:function(e,t){return e&&e.selectionLines?e.selectionLines.map((function(e){return e+1})):this.getSelectedLines(t)}},{key:"run",value:function(e,t){}}]),n}(qc.EditorAction);function PE(e){if(!zf.isUndefined(e)){if(!zf.isObject(e))return!1;var t=e;if(!zf.isUndefined(t.levels)&&!zf.isNumber(t.levels))return!1;if(!zf.isUndefined(t.direction)&&!zf.isString(t.direction))return!1;if(!(zf.isUndefined(t.selectionLines)||zf.isArray(t.selectionLines)&&t.selectionLines.every(zf.isNumber)))return!1}return!0}var OE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.unfold",label:Jc.localize("unfoldAction.label","Unfold"),alias:"Unfold",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3161,mac:{primary:2649},weight:100},description:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t* 'levels': Number of levels to unfold. If not set, defaults to 1.\n\t\t\t\t\t\t* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.\n\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t",constraint:PE,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n,i){var r=i&&i.levels||1,o=this.getLineNumbers(i,n);i&&"up"===i.direction?aE(t,!1,r,o):oE(t,!1,r,o)}}]),n}(NE),FE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.unfoldRecursively",label:Jc.localize("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2137),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n,i){oE(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}]),n}(NE),BE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.fold",label:Jc.localize("foldAction.label","Fold"),alias:"Fold",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3159,mac:{primary:2647},weight:100},description:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t\t\t* 'levels': Number of levels to fold.\n\t\t\t\t\t\t\t* 'direction': If 'up', folds given number of levels up otherwise folds down.\n\t\t\t\t\t\t\t* 'selectionLines': The start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.\n\t\t\t\t\t\t\tIf no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.\n\t\t\t\t\t\t",constraint:PE,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n,i){var r=this.getLineNumbers(i,n),o=i&&i.levels,a=i&&i.direction;"number"!=typeof o&&"string"!=typeof a?sE(t,!0,r):"up"===a?aE(t,!0,o||1,r):oE(t,!0,o||1,r)}}]),n}(NE),HE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.toggleFold",label:Jc.localize("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2090),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){rE(t,1,this.getSelectedLines(n))}}]),n}(NE),jE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.foldRecursively",label:Jc.localize("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2135),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);oE(t,!0,Number.MAX_VALUE,i)}}]),n}(NE),zE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.foldAllBlockComments",label:Jc.localize("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2133),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){if(t.regions.hasTypes())dE(t,lh.FoldingRangeKind.Comment.value,!0);else{var i=n.getModel();if(!i)return;var r=sy.LanguageConfigurationRegistry.getComments(i.getLanguageIdentifier().id);if(r&&r.blockCommentStartToken)cE(t,new RegExp("^\\s*"+(0,nh.escapeRegExpCharacters)(r.blockCommentStartToken)),!0)}}}]),n}(NE),WE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.foldAllMarkerRegions",label:Jc.localize("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2077),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){if(t.regions.hasTypes())dE(t,lh.FoldingRangeKind.Region.value,!0);else{var i=n.getModel();if(!i)return;var r=sy.LanguageConfigurationRegistry.getFoldingRules(i.getLanguageIdentifier().id);if(r&&r.markers&&r.markers.start)cE(t,new RegExp(r.markers.start),!0)}}}]),n}(NE),UE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.unfoldAllMarkerRegions",label:Jc.localize("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2078),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){if(t.regions.hasTypes())dE(t,lh.FoldingRangeKind.Region.value,!1);else{var i=n.getModel();if(!i)return;var r=sy.LanguageConfigurationRegistry.getFoldingRules(i.getLanguageIdentifier().id);if(r&&r.markers&&r.markers.start)cE(t,new RegExp(r.markers.start),!1)}}}]),n}(NE),VE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.foldAllExcept",label:Jc.localize("foldAllExcept.label","Fold All Regions Except Selected"),alias:"Fold All Regions Except Selected",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2131),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){uE(t,!0,this.getSelectedLines(n))}}]),n}(NE),KE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.unfoldAllExcept",label:Jc.localize("unfoldAllExcept.label","Unfold All Regions Except Selected"),alias:"Unfold All Regions Except Selected",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2129),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){uE(t,!1,this.getSelectedLines(n))}}]),n}(NE),qE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.foldAll",label:Jc.localize("foldAllAction.label","Fold All"),alias:"Fold All",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2069),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){oE(t,!0)}}]),n}(NE),JE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.unfoldAll",label:Jc.localize("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2088),weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){oE(t,!1)}}]),n}(NE),XE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"getFoldingLevel",value:function(){return parseInt(this.id.substr(n.ID_PREFIX.length))}},{key:"invoke",value:function(e,t,n){lE(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}}]),n}(NE);XE.ID_PREFIX="editor.foldLevel",XE.ID=function(e){return XE.ID_PREFIX+e};var GE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.gotoParentFold",label:Jc.localize("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);if(i.length>0){var r=hE(i[0],t);null!==r&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),n}(NE),ZE=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.gotoPreviousFold",label:Jc.localize("gotoPreviousFold.label","Go to Previous Fold"),alias:"Go to Previous Fold",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);if(i.length>0){var r=fE(i[0],t);null!==r&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),n}(NE),$E=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.gotoNextFold",label:Jc.localize("gotoNextFold.label","Go to Next Fold"),alias:"Go to Next Fold",precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,weight:100}})}return(0,c.default)(n,[{key:"invoke",value:function(e,t,n){var i=this.getSelectedLines(n);if(i.length>0){var r=pE(i[0],t);null!==r&&n.setSelection({startLineNumber:r,startColumn:1,endLineNumber:r,endColumn:1})}}}]),n}(NE);(0,qc.registerEditorContribution)(ME.ID,ME),(0,qc.registerEditorAction)(OE),(0,qc.registerEditorAction)(FE),(0,qc.registerEditorAction)(BE),(0,qc.registerEditorAction)(jE),(0,qc.registerEditorAction)(qE),(0,qc.registerEditorAction)(JE),(0,qc.registerEditorAction)(zE),(0,qc.registerEditorAction)(WE),(0,qc.registerEditorAction)(UE),(0,qc.registerEditorAction)(VE),(0,qc.registerEditorAction)(KE),(0,qc.registerEditorAction)(HE),(0,qc.registerEditorAction)(GE),(0,qc.registerEditorAction)(ZE),(0,qc.registerEditorAction)($E);for(var YE=1;YE<=7;YE++)(0,qc.registerInstantiatedEditorAction)(new XE({id:XE.ID(YE),label:Jc.localize("foldLevelAction.label","Fold Level {0}",YE),alias:"Fold Level ".concat(YE),precondition:LE,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2048|21+YE),weight:100}}));var QE=(0,kd.registerColor)("editor.foldBackground",{light:(0,kd.transparent)(kd.editorSelectionBackground,.3),dark:(0,kd.transparent)(kd.editorSelectionBackground,.3),hc:null},Jc.localize("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0),eD=(0,kd.registerColor)("editorGutter.foldingControlForeground",{dark:kd.iconForeground,light:kd.iconForeground,hc:kd.iconForeground},Jc.localize("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(QE);n&&t.addRule(".monaco-editor .folded-background { background-color: ".concat(n,"; }"));var i=e.getColor(eD);i&&t.addRule("\n\t\t.monaco-editor .cldr".concat(Cd.ThemeIcon.asCSSSelector(gE),",\n\t\t.monaco-editor .cldr").concat(Cd.ThemeIcon.asCSSSelector(vE)," {\n\t\t\tcolor: ").concat(i," !important;\n\t\t}\n\t\t"))}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),qc=o("THDAR");var tD=o("bOwkk"),nD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.fontZoomIn",label:Jc.localize("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){tD.EditorZoom.setZoomLevel(tD.EditorZoom.getZoomLevel()+1)}}]),n}(qc.EditorAction),iD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.fontZoomOut",label:Jc.localize("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){tD.EditorZoom.setZoomLevel(tD.EditorZoom.getZoomLevel()-1)}}]),n}(qc.EditorAction),rD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.fontZoomReset",label:Jc.localize("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){tD.EditorZoom.setZoomLevel(0)}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(nD),(0,qc.registerEditorAction)(iD),(0,qc.registerEditorAction)(rD);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),l=o("1JCPQ"),oh=o("2ZBuK"),eh=o("j6sHb"),Zc=o("5LFig"),vd=o("dXCvL"),qc=o("THDAR"),jd=o("1NzEb"),ew=o("5AAsZ"),yd=o("5MJfC"),Xc=o("5cDyY"),lh=o("chpjt"),pb=o("1BgEP");var oD=o("eVl6e"),aD=o("ePbpx"),sD=(Jc=o("faA3E"),vh=o("j9pk1"),$c=o("efZ3W"),Oh=o("hm5an"),Yc=o("2NkmB"),gh=o("gkTZs"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),lD=function(e,t){return function(n,i){t(n,i,e)}},uD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},cD=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this._workerService=n,this._callOnDispose=new(0,vd.DisposableStore),this._callOnModel=new(0,vd.DisposableStore),this._editor=t,this._callOnDispose.add(t.onDidChangeConfiguration((function(){return i._update()}))),this._callOnDispose.add(t.onDidChangeModel((function(){return i._update()}))),this._callOnDispose.add(t.onDidChangeModelLanguage((function(){return i._update()}))),this._callOnDispose.add(lh.OnTypeFormattingEditProviderRegistry.onDidChange(this._update,this))}return(0,c.default)(e,[{key:"dispose",value:function(){this._callOnDispose.dispose(),this._callOnModel.dispose()}},{key:"_update",value:function(){var e=this;if(this._callOnModel.clear(),this._editor.getOption(47)&&this._editor.hasModel()){var t=this._editor.getModel(),n=(0,Ki.default)(lh.OnTypeFormattingEditProviderRegistry.ordered(t),1)[0];if(n&&n.autoFormatTriggerCharacters){var i=new(0,ew.CharacterSet),r=!0,o=!1,a=void 0;try{for(var s,l=n.autoFormatTriggerCharacters[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i.add(u.charCodeAt(0))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}this._callOnModel.add(this._editor.onDidType((function(t){var n=t.charCodeAt(t.length-1);i.has(n)&&e._trigger(String.fromCharCode(n))})))}}}},{key:"_trigger",value:function(e){var t=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)){var n=this._editor.getModel(),i=this._editor.getPosition(),r=!1,o=this._editor.onDidChangeModelContent((function(e){if(e.isFlush)return r=!0,void o.dispose();for(var t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return r=!0,void o.dispose()}}));(0,oD.getOnTypeFormattingEdits)(this._workerService,n,i,e,n.getFormattingOptions()).then((function(e){o.dispose(),r||(0,oh.isNonEmptyArray)(e)&&(aD.FormattingEdit.execute(t._editor,e,!0),(0,oD.alertFormattingEdits)(e))}),(function(e){throw o.dispose(),e}))}}}]),e}();cD.ID="editor.contrib.autoFormat",cD=sD([lD(1,pb.IEditorWorkerService)],cD);var dD=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this.editor=t,this._instantiationService=n,this._callOnDispose=new(0,vd.DisposableStore),this._callOnModel=new(0,vd.DisposableStore),this._callOnDispose.add(t.onDidChangeConfiguration((function(){return i._update()}))),this._callOnDispose.add(t.onDidChangeModel((function(){return i._update()}))),this._callOnDispose.add(t.onDidChangeModelLanguage((function(){return i._update()}))),this._callOnDispose.add(lh.DocumentRangeFormattingEditProviderRegistry.onDidChange(this._update,this))}return(0,c.default)(e,[{key:"dispose",value:function(){this._callOnDispose.dispose(),this._callOnModel.dispose()}},{key:"_update",value:function(){var e=this;this._callOnModel.clear(),this.editor.getOption(46)&&this.editor.hasModel()&&lh.DocumentRangeFormattingEditProviderRegistry.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;return e._trigger(n)})))}},{key:"_trigger",value:function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(oD.formatDocumentRangesWithSelectedProvider,this.editor,e,2,gh.Progress.None,eh.CancellationToken.None).catch(Yc.onUnexpectedError))}}]),e}();dD.ID="editor.contrib.formatOnPaste",dD=sD([lD(1,Oh.IInstantiationService)],dD);var hD=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.formatDocument",label:Jc.localize("formatDocument.label","Format Document"),alias:"Format Document",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.notInCompositeEditor,Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasDocumentFormattingProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return uD(this,void 0,void 0,n(l).mark((function i(){var r,o;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hasModel()){n.next=5;break}return r=e.get(Oh.IInstantiationService),o=e.get(gh.IEditorProgressService),n.next=5,o.showWhile(r.invokeFunction(oD.formatDocumentWithSelectedProvider,t,1,gh.Progress.None,eh.CancellationToken.None),250);case 5:case"end":return n.stop()}}),i)})))}}]),i}(qc.EditorAction),fD=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){return(0,u.default)(this,i),t.call(this,{id:"editor.action.formatSelection",label:Jc.localize("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2084),weight:100},contextMenuOpts:{when:Xc.EditorContextKeys.hasNonEmptySelection,group:"1_modification",order:1.31}})}return(0,c.default)(i,[{key:"run",value:function(e,t){return uD(this,void 0,void 0,n(l).mark((function i(){var r,o,a,s;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.hasModel()){n.next=2;break}return n.abrupt("return");case 2:return r=e.get(Oh.IInstantiationService),o=t.getModel(),a=t.getSelections().map((function(e){return e.isEmpty()?new(0,yd.Range)(e.startLineNumber,1,e.startLineNumber,o.getLineMaxColumn(e.startLineNumber)):e})),s=e.get(gh.IEditorProgressService),n.next=8,s.showWhile(r.invokeFunction(oD.formatDocumentRangesWithSelectedProvider,t,a,1,gh.Progress.None,eh.CancellationToken.None),250);case 8:case"end":return n.stop()}}),i)})))}}]),i}(qc.EditorAction);(0,qc.registerEditorContribution)(cD.ID,cD),(0,qc.registerEditorContribution)(dD.ID,dD),(0,qc.registerEditorAction)(hD),(0,qc.registerEditorAction)(fD),vh.CommandsRegistry.registerCommand("editor.action.format",(function(e){return uD(void 0,void 0,void 0,n(l).mark((function t(){var i,r;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.get(jd.ICodeEditorService).getFocusedCodeEditor())&&i.hasModel()){t.next=3;break}return t.abrupt("return");case 3:if(r=e.get(vh.ICommandService),!i.getSelection().isEmpty()){t.next=9;break}return t.next=7,r.executeCommand("editor.action.formatDocument");case 7:t.next=11;break;case 9:return t.next=11,r.executeCommand("editor.action.formatSelection");case 11:case"end":return t.stop()}}),t)})))}));Ki=o("dVhHy"),l=o("1JCPQ"),ah=o("iPPVB"),uh=o("gPDld"),eh=o("j6sHb"),Ly=o("fTO0K"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),oh=o("2ZBuK"),eh=o("j6sHb"),Yc=o("2NkmB"),Yf=o("728Ww"),yd=o("5MJfC"),lh=o("chpjt");var pD=o("3DGM3"),gD=(lp=o("fe9Gx"),function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"remove",value:function(){this.parent&&this.parent.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var n;"string"==typeof e?n="".concat(t.id,"/").concat(e):(n="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(n)&&(n="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var i=n,r=0;void 0!==t.children.get(i);r++)i="".concat(n,"_").concat(r);return i}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}()),vD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this)).id=e,o.parent=i,o.symbol=r,o.children=new Map,o}return n}(gD),mD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this)).id=e,a.parent=i,a.label=r,a.order=o,a.children=new Map,a}return n}(gD),yD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).uri=e,i.id="root",i.parent=void 0,i._groups=new Map,i.children=new Map,i.id="root",i.parent=void 0,i}return(0,c.default)(n,[{key:"_compact",value:function(){var e=0,t=!0,n=!1,i=void 0;try{for(var r,o=this._groups[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=(0,Ki.default)(r.value,2),s=a[0];0===a[1].children.size?this._groups.delete(s):e+=1}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}if(1!==e)this.children=this._groups;else{var l=pD.Iterable.first(this._groups.values()),u=!0,c=!1,d=void 0;try{for(var h,f=l.children[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=(0,Ki.default)(h.value,2)[1];p.parent=this,this.children.set(p.id,p)}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}return this}},{key:"getTopLevelSymbols",value:function(){var e,t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this.children.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s instanceof vD?t.push(s.symbol):(e=t).push.apply(e,(0,qi.default)(pD.Iterable.map(s.children.values(),(function(e){return e.symbol}))))}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t.sort((function(e,t){return yd.Range.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),t=[];return n._flattenDocumentSymbols(t,e,""),t.sort((function(e,t){return yd.Range.compareRangesUsingStarts(e.range,t.range)}))}}],[{key:"create",value:function(e,t){var i=this,r=this._keys.for(e,!0),o=n._requests.get(r);if(!o){var a=new(0,eh.CancellationTokenSource);o={promiseCnt:0,source:a,promise:n._create(e,a.token),model:void 0},n._requests.set(r,o);var s=Date.now();o.promise.then((function(){i._requestDurations.update(e,Date.now()-s)}))}return o.model?Promise.resolve(o.model):(o.promiseCnt+=1,t.onCancellationRequested((function(){0==--o.promiseCnt&&(o.source.cancel(),n._requests.delete(r))})),new Promise((function(e,t){o.promise.then((function(t){o.model=t,e(t)}),(function(e){n._requests.delete(r),t(e)}))})))}},{key:"_create",value:function(e,t){var i=new(0,eh.CancellationTokenSource)(t),r=new n(e.uri),o=lh.DocumentSymbolProviderRegistry.ordered(e),a=o.map((function(t,o){var a,s=gD.findId("provider_".concat(o),r),l=new mD(s,r,null!==(a=t.displayName)&&void 0!==a?a:"Unknown Outline Provider",o);return Promise.resolve(t.provideDocumentSymbols(e,i.token)).then((function(e){var t=!0,i=!1,r=void 0;try{for(var o,a=(e||[])[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=o.value;n._makeOutlineElement(s,l)}}catch(e){i=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw r}}return l}),(function(e){return(0,Yc.onUnexpectedExternalError)(e),l})).then((function(e){gD.empty(e)?e.remove():r._groups.set(s,e)}))})),s=lh.DocumentSymbolProviderRegistry.onDidChange((function(){var t=lh.DocumentSymbolProviderRegistry.ordered(e);(0,oh.equals)(t,o)||i.cancel()}));return Promise.all(a).then((function(){return i.token.isCancellationRequested&&!t.isCancellationRequested?n._create(e,t):r._compact()})).finally((function(){s.dispose()}))}},{key:"_makeOutlineElement",value:function(e,t){var i=gD.findId(e,t),r=new vD(i,t,e),o=!0,a=!1,s=void 0;if(e.children)try{for(var l,u=e.children[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n._makeOutlineElement(c,r)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}t.children.set(r.id,r)}},{key:"_flattenDocumentSymbols",value:function(e,t,i){var r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;e.push({kind:u.kind,tags:u.tags,name:u.name,detail:u.detail,containerName:u.containerName||i,range:u.range,selectionRange:u.selectionRange,children:void 0}),u.children&&n._flattenDocumentSymbols(e,u.children,u.name)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}]),n}(gD);yD._requestDurations=new(0,lp.LanguageFeatureRequestDelays)(lh.DocumentSymbolProviderRegistry,350),yD._requests=new(0,Yf.LRUCache)(9,.75),yD._keys=new(function(){"use strict";function e(){(0,u.default)(this,e),this._counter=1,this._data=new WeakMap}return(0,c.default)(e,[{key:"for",value:function(e,t){return"".concat(e.id,"/").concat(t?e.getVersionId():"","/").concat(this._hash(lh.DocumentSymbolProviderRegistry.all(e)))}},{key:"_hash",value:function(e){var t="",n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this._data.get(s);void 0===l&&(l=this._counter++,this._data.set(s,l)),t+=l}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}}]),e}());vh=o("j9pk1"),zf=o("jW8FZ");var bD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};function _D(e,t,i){return bD(this,void 0,void 0,n(l).mark((function r(){var o;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yD.create(e,i);case 2:return o=n.sent,n.abrupt("return",t?o.asListOfDocumentSymbols():o.getTopLevelSymbols());case 4:case"end":return n.stop()}}),r)})))}vh.CommandsRegistry.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return bD(this,void 0,void 0,n(l).mark((function t(){var r,o,a,s;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,Ki.default)(i,1),o=r[0],(0,zf.assertType)(ah.URI.isUri(o)),!(a=e.get(uh.IModelService).getModel(o))){t.next=5;break}return t.abrupt("return",_D(a,!1,eh.CancellationToken.None));case 5:return t.next=7,e.get(Ly.ITextModelService).createModelReference(o);case 7:return s=t.sent,t.prev=8,t.next=11,_D(s.object.textEditorModel,!1,eh.CancellationToken.None);case 11:return t.abrupt("return",t.sent);case 12:return t.prev=12,s.dispose(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[8,,12,15]])})))}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),qi=o("caN7I"),h=o("8rJSp"),Jc=o("faA3E"),vd=o("dXCvL"),nh=o("gTzCU"),qc=o("THDAR");var wD=o("klRy4");xm=o("7NUhl"),yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY"),_d=o("60ELr"),sy=o("k4Xpx"),uh=o("gPDld");function kD(e,t){for(var n=0,i=0;i<e.length;i++)"\t"===e.charAt(i)?n+=t:n++;return n}function CD(e,t,n){e=e<0?0:e;var i="";if(!n){var r=Math.floor(e/t);e%=t;for(var o=0;o<r;o++)i+="\t"}for(var a=0;a<e;a++)i+=" ";return i}sp=o("8l08w");function xD(e,t,n,i){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];var r=sy.LanguageConfigurationRegistry.getIndentationRules(e.getLanguageIdentifier().id);if(!r)return[];for(n=Math.min(n,e.getLineCount());t<=n&&r.unIndentedLinePattern;){var o=e.getLineContent(t);if(!r.unIndentedLinePattern.test(o))break;t++}if(t>n-1)return[];var a,s=e.getOptions(),l=s.tabSize,u=s.indentSize,c=s.insertSpaces,d=function(e,t){return t=t||1,wD.ShiftCommand.shiftIndent(e,e.length+t,l,u,c)},h=function(e,t){return t=t||1,wD.ShiftCommand.unshiftIndent(e,e.length+t,l,u,c)},f=[],p=e.getLineContent(t),g=p;if(null!=i){a=i;var v=nh.getLeadingWhitespace(p);g=a+p.substring(v.length),r.decreaseIndentPattern&&r.decreaseIndentPattern.test(g)&&(g=(a=h(a))+p.substring(v.length)),p!==g&&f.push(xm.EditOperation.replaceMove(new(0,Gc.Selection)(t,1,t,v.length+1),_d.TextModel.normalizeIndentation(a,u,c)))}else a=nh.getLeadingWhitespace(p);var m=a;r.increaseIndentPattern&&r.increaseIndentPattern.test(g)?(m=d(m),a=d(a)):r.indentNextLinePattern&&r.indentNextLinePattern.test(g)&&(m=d(m));for(var y=++t;y<=n;y++){var b=e.getLineContent(y),_=nh.getLeadingWhitespace(b),w=m+b.substring(_.length);r.decreaseIndentPattern&&r.decreaseIndentPattern.test(w)&&(m=h(m),a=h(a)),_!==m&&f.push(xm.EditOperation.replaceMove(new(0,Gc.Selection)(y,1,y,_.length+1),_d.TextModel.normalizeIndentation(m,u,c))),r.unIndentedLinePattern&&r.unIndentedLinePattern.test(b)||(m=r.increaseIndentPattern&&r.increaseIndentPattern.test(w)?a=d(a):r.indentNextLinePattern&&r.indentNextLinePattern.test(w)?d(m):a)}return f}var SD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.ID,label:Jc.localize("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new OD(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}}}}]),n}(qc.EditorAction);SD.ID="editor.action.indentationToSpaces";var ED=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.ID,label:Jc.localize("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=n.getOptions(),r=t.getSelection();if(r){var o=new FD(r,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}}}}]),n}(qc.EditorAction);ED.ID="editor.action.indentationToTabs";var DD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i)).insertSpaces=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=this,i=e.get(sp.IQuickInputService),r=e.get(uh.IModelService),o=t.getModel();if(o){var a=r.getCreationOptions(o.getLanguageIdentifier().language,o.uri,o.isForSimpleWidget),s=[1,2,3,4,5,6,7,8].map((function(e){return{id:e.toString(),label:e.toString(),description:e===a.tabSize?Jc.localize("configuredTabSize","Configured Tab Size"):void 0}})),l=Math.min(o.getOptions().tabSize-1,7);setTimeout((function(){i.pick(s,{placeHolder:Jc.localize({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:s[l]}).then((function(e){e&&o&&!o.isDisposed()&&o.updateOptions({tabSize:parseInt(e.label,10),insertSpaces:n.insertSpaces})}))}),50)}}}]),n}(qc.EditorAction),AD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:n.ID,label:Jc.localize("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0})}return n}(DD);AD.ID="editor.action.indentUsingTabs";var ID=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:n.ID,label:Jc.localize("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0})}return n}(DD);ID.ID="editor.action.indentUsingSpaces";var RD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.ID,label:Jc.localize("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=e.get(uh.IModelService),i=t.getModel();if(i){var r=n.getCreationOptions(i.getLanguageIdentifier().language,i.uri,i.isForSimpleWidget);i.detectIndentation(r.insertSpaces,r.tabSize)}}}]),n}(qc.EditorAction);RD.ID="editor.action.detectIndentation";var TD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.reindentlines",label:Jc.localize("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=xD(n,1,n.getLineCount());i.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,i),t.pushUndoStop())}}}]),n}(qc.EditorAction),LD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.reindentselectedlines",label:Jc.localize("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getModel();if(n){var i=t.getSelections();if(null!==i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c,d=l.value,h=d.startLineNumber,f=d.endLineNumber;if(h!==f&&1===d.endColumn&&f--,1===h){if(h===f)continue}else h--;var p=xD(n,h,f);(c=r).push.apply(c,(0,qi.default)(p))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}}}]),n}(qc.EditorAction),MD=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._initialSelection=n,this._edits=[],this._selectionId=null;var i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.range&&"string"==typeof l.text&&this._edits.push(l)}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._edits[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.addEditOperation(yd.Range.lift(s.range),s.text)}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}var l=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(l=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(l=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),l||(this._selectionId=t.trackSelection(this._initialSelection))}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}(),ND=function(){"use strict";function e(t){var n=this;(0,u.default)(this,e),this.callOnDispose=new(0,vd.DisposableStore),this.callOnModel=new(0,vd.DisposableStore),this.editor=t,this.callOnDispose.add(t.onDidChangeConfiguration((function(){return n.update()}))),this.callOnDispose.add(t.onDidChangeModel((function(){return n.update()}))),this.callOnDispose.add(t.onDidChangeModelLanguage((function(){return n.update()})))}return(0,c.default)(e,[{key:"update",value:function(){var e=this;this.callOnModel.clear(),this.editor.getOption(9)<4||this.editor.getOption(46)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;e.trigger(n)})))}},{key:"trigger",value:function(e){var t=this.editor.getSelections();if(!(null===t||t.length>1)){var n=this.editor.getModel();if(n&&n.isCheapToTokenize(e.getStartPosition().lineNumber)){for(var i=this.editor.getOption(9),r=n.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,l=[],u={shiftIndent:function(e){return wD.ShiftCommand.shiftIndent(e,e.length+1,o,a,s)},unshiftIndent:function(e){return wD.ShiftCommand.unshiftIndent(e,e.length+1,o,a,s)}},c=e.startLineNumber;c<=e.endLineNumber&&this.shouldIgnoreLine(n,c);)c++;if(!(c>e.endLineNumber)){var d=n.getLineContent(c);if(!/\S/.test(d.substring(0,e.startColumn-1))){var h=sy.LanguageConfigurationRegistry.getGoodIndentForLine(i,n,n.getLanguageIdentifier().id,c,u);if(null!==h){var f=nh.getLeadingWhitespace(d),p=kD(h,o);if(p!==kD(f,o)){var g=CD(p,o,s);l.push({range:new(0,yd.Range)(c,1,c,f.length+1),text:g}),d=g+d.substr(f.length)}else{var v=sy.LanguageConfigurationRegistry.getIndentMetadata(n,c);if(0===v||8===v)return}}}for(var m=c;c<e.endLineNumber&&!/\S/.test(n.getLineContent(c+1));)c++;if(c!==e.endLineNumber){var y={getLineTokens:function(e){return n.getLineTokens(e)},getLanguageIdentifier:function(){return n.getLanguageIdentifier()},getLanguageIdAtPosition:function(e,t){return n.getLanguageIdAtPosition(e,t)},getLineContent:function(e){return e===m?d:n.getLineContent(e)}},b=sy.LanguageConfigurationRegistry.getGoodIndentForLine(i,y,n.getLanguageIdentifier().id,c+1,u);if(null!==b){var _=kD(b,o),w=kD(nh.getLeadingWhitespace(n.getLineContent(c+1)),o);if(_!==w)for(var k=_-w,C=c+1;C<=e.endLineNumber;C++){var x=n.getLineContent(C),S=nh.getLeadingWhitespace(x),E=CD(kD(S,o)+k,o,s);E!==S&&l.push({range:new(0,yd.Range)(C,1,C,S.length+1),text:E})}}}if(l.length>0){this.editor.pushUndoStop();var D=new MD(l,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",D),this.editor.pushUndoStop()}}}}}},{key:"shouldIgnoreLine",value:function(e,t){e.forceTokenization(t);var n=e.getLineFirstNonWhitespaceColumn(t);if(0===n)return!0;var i=e.getLineTokens(t);if(i.getCount()>0){var r=i.findTokenIndexAtOffset(n);if(r>=0&&1===i.getStandardTokenType(r))return!0}return!1}},{key:"dispose",value:function(){this.callOnDispose.dispose(),this.callOnModel.dispose()}}]),e}();function PD(e,t,n,i){if(1!==e.getLineCount()||1!==e.getLineMaxColumn(1)){for(var r="",o=0;o<n;o++)r+=" ";for(var a=new RegExp(r,"gi"),s=1,l=e.getLineCount();s<=l;s++){var u=e.getLineFirstNonWhitespaceColumn(s);if(0===u&&(u=e.getLineMaxColumn(s)),1!==u){var c=new(0,yd.Range)(s,1,s,u),d=e.getValueInRange(c),h=i?d.replace(/\t/gi,r):d.replace(a,"\t");t.addEditOperation(c,h)}}}}ND.ID="editor.contrib.autoIndentOnPaste";var OD=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),PD(e,t,this.tabSize,!0)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}(),FD=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.selection=t,this.tabSize=n,this.selectionId=null}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){this.selectionId=t.trackSelection(this.selection),PD(e,t,this.tabSize,!1)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}]),e}();(0,qc.registerEditorContribution)(ND.ID,ND),(0,qc.registerEditorAction)(SD),(0,qc.registerEditorAction)(ED),(0,qc.registerEditorAction)(AD),(0,qc.registerEditorAction)(ID),(0,qc.registerEditorAction)(RD),(0,qc.registerEditorAction)(TD),(0,qc.registerEditorAction)(LD);u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),l=o("1JCPQ"),gd=o("hJucn"),Yc=o("2NkmB"),ap=o("jrm6V"),vd=o("dXCvL"),qc=o("THDAR"),jd=o("1NzEb"),lh=o("chpjt"),oh=o("2ZBuK"),kd=o("ht8QC"),eh=o("j6sHb"),Cd=o("4ET02"),yd=o("5MJfC"),lp=o("fe9Gx"),vh=o("j9pk1"),ah=o("iPPVB"),zf=o("jW8FZ"),Ly=o("fTO0K"),md=o("kBBF2"),mp=o("fnqF9");var BD=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},HD=function(e,t){return function(n,i){t(n,i,e)}},jD=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};function zD(e,t,i){return jD(this,void 0,void 0,n(l).mark((function r(){var o,a,s;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=[],a=lh.InlayHintsProviderRegistry.ordered(e).reverse(),s=(0,oh.flatten)(a.map((function(n){return t.map((function(t){return Promise.resolve(n.provideInlayHints(e,t,i)).then((function(e){var i=null==e?void 0:e.filter((function(e){return t.containsPosition(e.position)}));(null==i?void 0:i.length)&&o.push({list:i,provider:n})}),(function(e){(0,Yc.onUnexpectedExternalError)(e)}))}))}))),n.next=5,Promise.all(s);case 5:return n.abrupt("return",o);case 6:case"end":return n.stop()}}),r)})))}var WD=function(){"use strict";function e(t,n,i,r){var o=this;(0,u.default)(this,e),this._editor=t,this._codeEditorService=n,this._themeService=i,this._configurationService=r,this._disposables=new(0,vd.DisposableStore),this._sessionDisposables=new(0,vd.DisposableStore),this._getInlayHintsDelays=new(0,lp.LanguageFeatureRequestDelays)(lh.InlayHintsProviderRegistry,25,2500),this._decorationsTypeIds=[],this._decorationIds=[],this._disposables.add(lh.InlayHintsProviderRegistry.onDidChange((function(){return o._update()}))),this._disposables.add(i.onDidColorThemeChange((function(){return o._update()}))),this._disposables.add(t.onDidChangeModel((function(){return o._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return o._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(126)&&o._update()}))),this._update()}return(0,c.default)(e,[{key:"dispose",value:function(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}},{key:"_update",value:function(){var e=this;if(this._sessionDisposables.clear(),this._editor.getOption(126).enabled){var t=this._editor.getModel();if(t&&lh.InlayHintsProviderRegistry.has(t)){var i=new(0,gd.RunOnceScheduler)((function(){return jD(e,void 0,void 0,n(l).mark((function e(){var r,o,a,s,u;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),o=new(0,eh.CancellationTokenSource),this._sessionDisposables.add((0,vd.toDisposable)((function(){return o.dispose(!0)}))),a=this._editor.getVisibleRangesPlusViewportAboveBelow(),e.next=6,zD(t,a,o.token);case 6:s=e.sent,u=this._getInlayHintsDelays.update(t,Date.now()-r),i.delay=u,this._updateHintsDecorators(s);case 10:case"end":return e.stop()}}),e,this)})))}),this._getInlayHintsDelays.get(t));this._sessionDisposables.add(i),this._sessionDisposables.add(this._editor.onDidChangeModelContent((function(){return i.schedule()}))),this._disposables.add(this._editor.onDidScrollChange((function(){return i.schedule()}))),i.schedule();var r=new(0,vd.DisposableStore);this._sessionDisposables.add(r);var o=!0,a=!1,s=void 0;try{for(var u,c=lh.InlayHintsProviderRegistry.all(t)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;"function"==typeof d.onDidChangeInlayHints&&r.add(d.onDidChangeInlayHints((function(){return i.schedule()})))}}catch(e){a=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}}else this._removeAllDecorations()}else this._removeAllDecorations()}},{key:"_updateHintsDecorators",value:function(e){var t=this._getLayoutInfo(),n=t.fontSize,i=t.fontFamily,r=this._themeService.getColorTheme().getColor(kd.editorInlayHintBackground),o=this._themeService.getColorTheme().getColor(kd.editorInlayHintForeground),a=[],s=[],l="--inlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(l,i);var u=this._configurationService.getValue("editor.useInjectedText"),c=void 0===u||!!u,d=!0,h=!1,f=void 0;try{for(var p,g=e[Symbol.iterator]();!(d=(p=g.next()).done);d=!0)for(var v=p.value.list,m=0;m<v.length&&s.length<500;m++){var y=v[m],b=y.text,_=y.position,w=y.whitespaceBefore,k=y.whitespaceAfter,C=w?n/3|0:0,x=k?n/3|0:0,S={contentText:(void 0,"",b.replace(/[ \t]/g,"")),backgroundColor:"".concat(r),color:"".concat(o),margin:"0px ".concat(x,"px 0px ").concat(C,"px"),fontSize:"".concat(n,"px"),fontFamily:"var(".concat(l,")"),padding:"0px ".concat(n/4|0,"px"),borderRadius:"".concat(n/4|0,"px"),verticalAlign:"middle"},E="inlayHints-"+(0,ap.hash)(S).toString(16);this._codeEditorService.registerDecorationType("inlay-hints-controller",E,c?{beforeInjectedText:Object.assign(Object.assign({},S),{affectsLetterSpacing:!0})}:{before:S},void 0,this._editor),a.push(E);var D=this._codeEditorService.resolveDecorationOptions(E,!0);s.push({range:yd.Range.fromPositions(_),options:D})}}catch(e){h=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}this._decorationsTypeIds.forEach(this._codeEditorService.removeDecorationType,this._codeEditorService),this._decorationsTypeIds=a,this._decorationIds=this._editor.deltaDecorations(this._decorationIds,s)}},{key:"_getLayoutInfo",value:function(){var e=this._editor.getOption(126),t=this._editor.getOption(44),n=e.fontSize;return(!n||n<5||n>t)&&(n=.9*t|0),{fontSize:n,fontFamily:e.fontFamily||this._editor.getOption(41)}}},{key:"_removeAllDecorations",value:function(){this._decorationIds=this._editor.deltaDecorations(this._decorationIds,[]),this._decorationsTypeIds.forEach(this._codeEditorService.removeDecorationType,this._codeEditorService),this._decorationsTypeIds=[]}}]),e}();WD.ID="editor.contrib.InlayHints",WD=BD([HD(1,jd.ICodeEditorService),HD(2,Cd.IThemeService),HD(3,mp.IConfigurationService)],WD),(0,qc.registerEditorContribution)(WD.ID,WD),vh.CommandsRegistry.registerCommand("_executeInlayHintProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return jD(void 0,void 0,void 0,n(l).mark((function t(){var r,o,a,s,u;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,Ki.default)(i,2),o=r[0],a=r[1],(0,zf.assertType)(ah.URI.isUri(o)),(0,zf.assertType)(yd.Range.isIRange(a)),t.next=5,e.get(Ly.ITextModelService).createModelReference(o);case 5:return s=t.sent,t.prev=6,t.next=9,zD(s.object.textEditorModel,[yd.Range.lift(a)],eh.CancellationToken.None);case 9:return u=t.sent,t.abrupt("return",(0,oh.flatten)(u.map((function(e){return e.list}))).sort((function(e,t){return md.Position.compare(e.position,t.position)})));case 11:return t.prev=11,s.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[6,,11,14]])})))}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY"),qc=o("THDAR"),pb=o("1BgEP"),u=o("4JAgF"),c=o("9HoHC"),Gc=o("3WP4Y");var UD=function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._editRange=t,this._originalSelection=n,this._text=i}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){t.addTrackedEditOperation(this._editRange,this._text)}},{key:"computeCursorState",value:function(e,t){var n=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new(0,Gc.Selection)(n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn),n.endLineNumber,Math.min(this._originalSelection.positionColumn,n.endColumn)):new(0,Gc.Selection)(n.endLineNumber,n.endColumn-this._text.length,n.endLineNumber,n.endColumn)}}]),e}(),VD=(sh=o("fLZJB"),Cd=o("4ET02"),wd=o("a6Ojp"),_d=o("60ELr"),gd=o("hJucn"),Yc=o("2NkmB"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),KD=function(e,t){return function(n,i){t(n,i,e)}},qD=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.decorationIds=[],this.editor=t,this.editorWorkerService=n}return(0,c.default)(e,[{key:"dispose",value:function(){}},{key:"run",value:function(t,n){var i=this;this.currentRequest&&this.currentRequest.cancel();var r=this.editor.getSelection(),o=this.editor.getModel();if(o&&r){var a=r;if(a.startLineNumber===a.endLineNumber){var s=new(0,sh.EditorState)(this.editor,5),l=o.uri;return this.editorWorkerService.canNavigateValueSet(l)?(this.currentRequest=(0,gd.createCancelablePromise)((function(e){return i.editorWorkerService.navigateValueSet(l,a,n)})),this.currentRequest.then((function(n){if(n&&n.range&&n.value&&s.validate(i.editor)){var r=yd.Range.lift(n.range),o=n.range,l=n.value.length-(a.endColumn-a.startColumn);o={startLineNumber:o.startLineNumber,startColumn:o.startColumn,endLineNumber:o.endLineNumber,endColumn:o.startColumn+n.value.length},l>1&&(a=new(0,Gc.Selection)(a.startLineNumber,a.startColumn,a.endLineNumber,a.endColumn+l-1));var u=new UD(r,a,n.value);i.editor.pushUndoStop(),i.editor.executeCommand(t,u),i.editor.pushUndoStop(),i.decorationIds=i.editor.deltaDecorations(i.decorationIds,[{range:o,options:e.DECORATION}]),i.decorationRemover&&i.decorationRemover.cancel(),i.decorationRemover=(0,gd.timeout)(350),i.decorationRemover.then((function(){return i.decorationIds=i.editor.deltaDecorations(i.decorationIds,[])})).catch(Yc.onUnexpectedError)}})).catch(Yc.onUnexpectedError)):Promise.resolve(void 0)}}}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();qD.ID="editor.contrib.inPlaceReplaceController",qD.DECORATION=_d.ModelDecorationOptions.register({description:"in-place-replace",className:"valueSetReplacement"}),qD=VD([KD(1,pb.IEditorWorkerService)],qD);var JD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.inPlaceReplace.up",label:Jc.localize("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3154,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=qD.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}]),n}(qc.EditorAction),XD=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.inPlaceReplace.down",label:Jc.localize("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3156,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=qD.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(qD.ID,qD),(0,qc.registerEditorAction)(JD),(0,qc.registerEditorAction)(XD),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(wd.editorBracketMatchBorder);n&&t.addRule(".monaco-editor.vs .valueSetReplacement { outline: solid 2px ".concat(n,"; }"))}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),Zc=o("5LFig"),Sm=o("1IvIe"),qc=o("THDAR"),Nd=o("jxlHx"),u=o("4JAgF"),c=o("9HoHC"),nh=o("gTzCU"),xm=o("7NUhl"),yd=o("5MJfC");var GD=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._selection=t,this._cursors=n,this._selectionId=null}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){for(var n=function(e,t){t.sort((function(e,t){return e.lineNumber===t.lineNumber?e.column-t.column:e.lineNumber-t.lineNumber}));for(var n=t.length-2;n>=0;n--)t[n].lineNumber===t[n+1].lineNumber&&t.splice(n,1);for(var i=[],r=0,o=0,a=t.length,s=1,l=e.getLineCount();s<=l;s++){var u=e.getLineContent(s),c=u.length+1,d=0;if(!(o<a&&t[o].lineNumber===s&&(d=t[o].column,o++,d===c))&&0!==u.length){var h=nh.lastNonWhitespaceIndex(u),f=0;if(-1===h)f=1;else{if(h===u.length-1)continue;f=h+2}f=Math.max(d,f),i[r++]=xm.EditOperation.delete(new(0,yd.Range)(s,f,s,c))}}return i}(e,this._cursors),i=0,r=n.length;i<r;i++){var o=n[i];t.addEditOperation(o.range,o.text)}this._selectionId=t.trackSelection(this._selection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._selectionId)}}]),e}();var ZD=o("lltvs"),$D=(xm=o("7NUhl"),md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY"),u=o("4JAgF"),c=o("9HoHC"),yd=o("5MJfC"),Gc=o("3WP4Y"),function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._selection=t,this._isCopyingDown=n,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){var n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));for(var i=[],r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));var o=i.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new(0,yd.Range)(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new(0,yd.Range)(n.startLineNumber,1,n.startLineNumber,1),o+"\n"):t.addEditOperation(new(0,yd.Range)(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){var i=n.startLineNumber,r=n.startColumn,o=n.endLineNumber,a=n.endColumn;0!==this._startLineNumberDelta&&(i+=this._startLineNumberDelta,r=1),0!==this._endLineNumberDelta&&(o+=this._endLineNumberDelta,a=1),n=Gc.Selection.createWithDirection(i,r,o,a,this._selectionDirection)}return n}}]),e}()),YD=(u=o("4JAgF"),c=o("9HoHC"),nh=o("gTzCU"),wD=o("klRy4"),yd=o("5MJfC"),Gc=o("3WP4Y"),o("aDbPc")),QD=(sy=o("k4Xpx"),function(){"use strict";function e(t,n,i){(0,u.default)(this,e),this._selection=t,this._isMovingDown=n,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){var n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n)this._selectionId=t.trackSelection(this._selection);else if(this._isMovingDown||1!==this._selection.startLineNumber){this._moveEndPositionDown=!1;var i=this._selection;i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._moveEndPositionDown=!0,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));var r=e.getOptions(),o=r.tabSize,a=r.indentSize,s=r.insertSpaces,l=this.buildIndentConverter(o,a,s),u={getLineTokens:function(t){return e.getLineTokens(t)},getLanguageIdentifier:function(){return e.getLanguageIdentifier()},getLanguageIdAtPosition:function(t,n){return e.getLanguageIdAtPosition(t,n)},getLineContent:null};if(i.startLineNumber===i.endLineNumber&&1===e.getLineMaxColumn(i.startLineNumber)){var c=i.startLineNumber,d=this._isMovingDown?c+1:c-1;1===e.getLineMaxColumn(d)?t.addEditOperation(new(0,yd.Range)(1,1,1,1),null):(t.addEditOperation(new(0,yd.Range)(c,1,c,1),e.getLineContent(d)),t.addEditOperation(new(0,yd.Range)(d,1,d,e.getLineMaxColumn(d)),null)),i=new(0,Gc.Selection)(d,1,d,1)}else{var h,f;if(this._isMovingDown){h=i.endLineNumber+1,f=e.getLineContent(h),t.addEditOperation(new(0,yd.Range)(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);var p=f;if(this.shouldAutoIndent(e,i)){var g=this.matchEnterRule(e,l,o,h,i.startLineNumber-1);if(null!==g){var v=CD(g+kD(nh.getLeadingWhitespace(e.getLineContent(h)),o),o,s);p=v+this.trimLeft(f)}else{u.getLineContent=function(t){return t===i.startLineNumber?e.getLineContent(h):e.getLineContent(t)};var m=sy.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(h,1),i.startLineNumber,l);if(null!==m){var y=nh.getLeadingWhitespace(e.getLineContent(h)),b=kD(m,o);if(b!==kD(y,o)){var _=CD(b,o,s);p=_+this.trimLeft(f)}}}t.addEditOperation(new(0,yd.Range)(i.startLineNumber,1,i.startLineNumber,1),p+"\n");var w=this.matchEnterRuleMovingDown(e,l,o,i.startLineNumber,h,p);if(null!==w)0!==w&&this.getIndentEditsOfMovingBlock(e,t,i,o,s,w);else{u.getLineContent=function(t){return t===i.startLineNumber?p:t>=i.startLineNumber+1&&t<=i.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)};var k=sy.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(h,1),i.startLineNumber+1,l);if(null!==k){var C=nh.getLeadingWhitespace(e.getLineContent(i.startLineNumber)),x=kD(k,o),S=kD(C,o);if(x!==S){var E=x-S;this.getIndentEditsOfMovingBlock(e,t,i,o,s,E)}}}}else t.addEditOperation(new(0,yd.Range)(i.startLineNumber,1,i.startLineNumber,1),p+"\n")}else if(h=i.startLineNumber-1,f=e.getLineContent(h),t.addEditOperation(new(0,yd.Range)(h,1,h+1,1),null),t.addEditOperation(new(0,yd.Range)(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+f),this.shouldAutoIndent(e,i)){u.getLineContent=function(t){return t===h?e.getLineContent(i.startLineNumber):e.getLineContent(t)};var D=this.matchEnterRule(e,l,o,i.startLineNumber,i.startLineNumber-2);if(null!==D)0!==D&&this.getIndentEditsOfMovingBlock(e,t,i,o,s,D);else{var A=sy.LanguageConfigurationRegistry.getGoodIndentForLine(this._autoIndent,u,e.getLanguageIdAtPosition(i.startLineNumber,1),h,l);if(null!==A){var I=nh.getLeadingWhitespace(e.getLineContent(i.startLineNumber)),R=kD(A,o),T=kD(I,o);if(R!==T){var L=R-T;this.getIndentEditsOfMovingBlock(e,t,i,o,s,L)}}}}}this._selectionId=t.trackSelection(i)}else this._selectionId=t.trackSelection(this._selection)}},{key:"buildIndentConverter",value:function(e,t,n){return{shiftIndent:function(i){return wD.ShiftCommand.shiftIndent(i,i.length+1,e,t,n)},unshiftIndent:function(i){return wD.ShiftCommand.unshiftIndent(i,i.length+1,e,t,n)}}}},{key:"parseEnterResult",value:function(e,t,n,i,r){if(r){var o=r.indentation;r.indentAction===YD.IndentAction.None||r.indentAction===YD.IndentAction.Indent?o=r.indentation+r.appendText:r.indentAction===YD.IndentAction.IndentOutdent?o=r.indentation:r.indentAction===YD.IndentAction.Outdent&&(o=t.unshiftIndent(r.indentation)+r.appendText);var a=e.getLineContent(i);if(this.trimLeft(a).indexOf(this.trimLeft(o))>=0){var s=nh.getLeadingWhitespace(e.getLineContent(i)),l=nh.getLeadingWhitespace(o),u=sy.LanguageConfigurationRegistry.getIndentMetadata(e,i);return null!==u&&2&u&&(l=t.unshiftIndent(l)),kD(l,n)-kD(s,n)}}return null}},{key:"matchEnterRuleMovingDown",value:function(e,t,n,i,r,o){if(nh.lastNonWhitespaceIndex(o)>=0){var a=e.getLineMaxColumn(r),s=sy.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,e,new(0,yd.Range)(r,a,r,a));return this.parseEnterResult(e,t,n,i,s)}for(var l=i-1;l>=1;){var u=e.getLineContent(l);if(nh.lastNonWhitespaceIndex(u)>=0)break;l--}if(l<1||i>e.getLineCount())return null;var c=e.getLineMaxColumn(l),d=sy.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,e,new(0,yd.Range)(l,c,l,c));return this.parseEnterResult(e,t,n,i,d)}},{key:"matchEnterRule",value:function(e,t,n,i,r,o){for(var a=r;a>=1;){var s=void 0;if(s=a===r&&void 0!==o?o:e.getLineContent(a),nh.lastNonWhitespaceIndex(s)>=0)break;a--}if(a<1||i>e.getLineCount())return null;var l=e.getLineMaxColumn(a),u=sy.LanguageConfigurationRegistry.getEnterAction(this._autoIndent,e,new(0,yd.Range)(a,l,a,l));return this.parseEnterResult(e,t,n,i,u)}},{key:"trimLeft",value:function(e){return e.replace(/^\s+/,"")}},{key:"shouldAutoIndent",value:function(e,t){if(this._autoIndent<4)return!1;if(!e.isCheapToTokenize(t.startLineNumber))return!1;var n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==sy.LanguageConfigurationRegistry.getIndentRulesSupport(n)}},{key:"getIndentEditsOfMovingBlock",value:function(e,t,n,i,r,o){for(var a=n.startLineNumber;a<=n.endLineNumber;a++){var s=e.getLineContent(a),l=nh.getLeadingWhitespace(s),u=CD(kD(l,i)+o,i,r);u!==l&&(t.addEditOperation(new(0,yd.Range)(a,1,a,l.length+1),u),a===n.endLineNumber&&n.endColumn<=l.length+1&&""===u&&(this._moveEndLineSelectionShrink=!0))}}},{key:"computeCursorState",value:function(e,t){var n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}}]),e}()),eA=(u=o("4JAgF"),c=o("9HoHC"),xm=o("7NUhl"),yd=o("5MJfC"),function(){"use strict";function e(t,n){(0,u.default)(this,e),this.selection=t,this.descending=n,this.selectionId=null}return(0,c.default)(e,[{key:"getEditOperations",value:function(e,t){var n=function(e,t,n){var i=tA(e,t,n);return i?xm.EditOperation.replace(new(0,yd.Range)(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),i.after.join("\n")):null}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this.selectionId)}}],[{key:"getCollator",value:function(){return e._COLLATOR||(e._COLLATOR=new Intl.Collator),e._COLLATOR}},{key:"canRun",value:function(e,t,n){if(null===e)return!1;var i=tA(e,t,n);if(!i)return!1;for(var r=0,o=i.before.length;r<o;r++)if(i.before[r]!==i.after[r])return!0;return!1}}]),e}());function tA(e,t,n){var i=t.startLineNumber,r=t.endLineNumber;if(1===t.endColumn&&r--,i>=r)return null;for(var o=[],a=i;a<=r;a++)o.push(e.getLineContent(a));var s=o.slice(0);return s.sort(eA.getCollator().compare),!0===n&&(s=s.reverse()),{startLineNumber:i,endLineNumber:r,before:o,after:s}}eA._COLLATOR=null;xd=o("feTbe");var nA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i)).down=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getSelections().map((function(e,t){return{selection:e,index:t,ignore:!1}}));n.sort((function(e,t){return yd.Range.compareRangesUsingStarts(e.selection,t.selection)}));for(var i=n[0],r=1;r<n.length;r++){var o=n[r];i.selection.endLineNumber===o.selection.startLineNumber&&(i.index<o.index?o.ignore=!0:(i.ignore=!0,i=o))}var a=[],s=!0,l=!1,u=void 0;try{for(var c,d=n[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;a.push(new $D(h.selection,this.down,h.ignore))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}}]),n}(qc.EditorAction),iA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:"editor.action.copyLinesUpAction",label:Jc.localize("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"2_line",title:Jc.localize({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}return n}(nA),rA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:"editor.action.copyLinesDownAction",label:Jc.localize("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"2_line",title:Jc.localize({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}return n}(nA),oA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.duplicateSelection",label:Jc.localize("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:Xc.EditorContextKeys.writable,menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"2_line",title:Jc.localize({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=[],r=t.getSelections(),o=t.getModel(),a=!0,s=!1,l=void 0;try{for(var u,c=r[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.isEmpty())i.push(new $D(d,!0));else{var h=new(0,Gc.Selection)(d.endLineNumber,d.endColumn,d.endLineNumber,d.endColumn);i.push(new(0,Nd.ReplaceCommandThatSelectsText)(h,o.getValueInRange(d)))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}}]),n}(qc.EditorAction),aA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i)).down=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=[],i=t.getSelections()||[],r=t.getOption(9),o=!0,a=!1,s=void 0;try{for(var l,u=i[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;n.push(new QD(c,this.down,r))}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}]),n}(qc.EditorAction),sA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:"editor.action.moveLinesUpAction",label:Jc.localize("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"2_line",title:Jc.localize({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}return n}(aA),lA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:"editor.action.moveLinesDownAction",label:Jc.localize("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"2_line",title:Jc.localize({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}return n}(aA),uA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i)).descending=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getSelections()||[],i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(!eA.canRun(t.getModel(),l,this.descending))return}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}for(var u=[],c=0,d=n.length;c<d;c++)u[c]=new eA(n[c],this.descending);t.pushUndoStop(),t.executeCommands(this.id,u),t.pushUndoStop()}}]),n}(qc.EditorAction),cA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:"editor.action.sortLinesAscending",label:Jc.localize("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:Xc.EditorContextKeys.writable})}return n}(uA),dA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:"editor.action.sortLinesDescending",label:Jc.localize("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:Xc.EditorContextKeys.writable})}return n}(uA),hA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.ID,label:Jc.localize("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:(0,Zc.KeyChord)(2089,2102),weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){var i=[];"auto-save"===n.reason&&(i=(t.getSelections()||[]).map((function(e){return new(0,md.Position)(e.positionLineNumber,e.positionColumn)})));var r=t.getSelection();if(null!==r){var o=new GD(r,i);t.pushUndoStop(),t.executeCommands(this.id,[o]),t.pushUndoStop()}}}]),n}(qc.EditorAction);hA.ID="editor.action.trimTrailingWhitespace";var fA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.deleteLines",label:Jc.localize("lines.delete","Delete Line"),alias:"Delete Line",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:3113,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=this._getLinesToRemove(t),i=t.getModel();if(1!==i.getLineCount()||1!==i.getLineMaxColumn(1)){for(var r=0,o=[],a=[],s=0,l=n.length;s<l;s++){var u=n[s],c=u.startLineNumber,d=u.endLineNumber,h=1,f=i.getLineMaxColumn(d);d<i.getLineCount()?(d+=1,f=1):c>1&&(c-=1,h=i.getLineMaxColumn(c)),o.push(xm.EditOperation.replace(new(0,Gc.Selection)(c,h,d,f),"")),a.push(new(0,Gc.Selection)(c-r,u.positionColumn,c-r,u.positionColumn)),r+=u.endLineNumber-u.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,a),t.pushUndoStop()}}}},{key:"_getLinesToRemove",value:function(e){var t=e.getSelections().map((function(e){var t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort((function(e,t){return e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber}));for(var n=[],i=t[0],r=1;r<t.length;r++)i.endLineNumber+1>=t[r].startLineNumber?i.endLineNumber=t[r].endLineNumber:(n.push(i),i=t[r]);return n.push(i),n}}]),n}(qc.EditorAction),pA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.indentLines",label:Jc.localize("lines.indent","Indent Line"),alias:"Indent Line",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2137,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,ZD.TypeOperations.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}]),n}(qc.EditorAction),gA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.outdentLines",label:Jc.localize("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2135,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){Sm.CoreEditingCommands.Outdent.runEditorCommand(e,t,null)}}]),n}(qc.EditorAction),vA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.insertLineBefore",label:Jc.localize("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3075,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,ZD.TypeOperations.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}]),n}(qc.EditorAction),mA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.insertLineAfter",label:Jc.localize("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2051,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,ZD.TypeOperations.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}]),n}(qc.EditorAction),yA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelection(),i=this._getRangesToDelete(t),r=[],o=0,a=i.length-1;o<a;o++){var s=i[o],l=i[o+1];null===yd.Range.intersectRanges(s,l)?r.push(s):i[o+1]=yd.Range.plusRange(s,l)}r.push(i[i.length-1]);var u=this._getEndCursorState(n,r),c=r.map((function(e){return xm.EditOperation.replace(e,"")}));t.pushUndoStop(),t.executeEdits(this.id,c,u),t.pushUndoStop()}}}]),n}(qc.EditorAction),bA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"deleteAllLeft",label:Jc.localize("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}return(0,c.default)(n,[{key:"_getEndCursorState",value:function(e,t){var n=null,i=[],r=0;return t.forEach((function(t){var o;if(1===t.endColumn&&r>0){var a=t.startLineNumber-r;o=new(0,Gc.Selection)(a,t.startColumn,a,t.startColumn)}else o=new(0,Gc.Selection)(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);r+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=o:i.push(o)})),n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getSelections();if(null===t)return[];var n=t,i=e.getModel();return null===i?[]:(n.sort(yd.Range.compareRangesUsingStarts),n=n.map((function(e){if(e.isEmpty()){if(1===e.startColumn){var t=Math.max(1,e.startLineNumber-1),n=1===e.startLineNumber?1:i.getLineContent(t).length+1;return new(0,yd.Range)(t,n,e.startLineNumber,1)}return new(0,yd.Range)(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new(0,yd.Range)(e.startLineNumber,1,e.endLineNumber,e.endColumn)})))}}]),n}(yA),_A=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"deleteAllRight",label:Jc.localize("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}return(0,c.default)(n,[{key:"_getEndCursorState",value:function(e,t){for(var n=null,i=[],r=0,o=t.length;r<o;r++){var a=t[r],s=new(0,Gc.Selection)(a.startLineNumber-0,a.startColumn,a.startLineNumber-0,a.startColumn);a.intersectRanges(e)?n=s:i.push(s)}return n&&i.unshift(n),i}},{key:"_getRangesToDelete",value:function(e){var t=e.getModel();if(null===t)return[];var n=e.getSelections();if(null===n)return[];var i=n.map((function(e){if(e.isEmpty()){var n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new(0,yd.Range)(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new(0,yd.Range)(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e}));return i.sort(yd.Range.compareRangesUsingStarts),i}}]),n}(yA),wA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.joinLines",label:Jc.localize("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getSelection();if(null!==i){n.sort(yd.Range.compareRangesUsingStarts);var r=[],o=n.reduce((function(e,t){return e.isEmpty()?e.endLineNumber===t.startLineNumber?(i.equalsSelection(e)&&(i=t),t):t.startLineNumber>e.endLineNumber+1?(r.push(e),t):new(0,Gc.Selection)(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(r.push(e),t):new(0,Gc.Selection)(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)}));r.push(o);var a=t.getModel();if(null!==a){for(var s=[],l=[],u=i,c=0,d=0,h=r.length;d<h;d++){var f=r[d],p=f.startLineNumber,g=0,v=void 0,m=void 0,y=a.getLineContent(f.endLineNumber).length-f.endColumn;if(f.isEmpty()||f.startLineNumber===f.endLineNumber){var b=f.getStartPosition();b.lineNumber<a.getLineCount()?(v=p+1,m=a.getLineMaxColumn(v)):(v=b.lineNumber,m=a.getLineMaxColumn(b.lineNumber))}else v=f.endLineNumber,m=a.getLineMaxColumn(v);for(var _=a.getLineContent(p),w=p+1;w<=v;w++){var k=a.getLineContent(w),C=a.getLineFirstNonWhitespaceColumn(w);if(C>=1){var x=!0;""===_&&(x=!1),!x||" "!==_.charAt(_.length-1)&&"\t"!==_.charAt(_.length-1)||(x=!1,_=_.replace(/[\s\uFEFF\xA0]+$/g," "));var S=k.substr(C-1);_+=(x?" ":"")+S,g=x?S.length+1:S.length}else g=0}var E=new(0,yd.Range)(p,1,v,m);if(!E.isEmpty()){var D=void 0;f.isEmpty()?(s.push(xm.EditOperation.replace(E,_)),D=new(0,Gc.Selection)(E.startLineNumber-c,_.length-g+1,p-c,_.length-g+1)):f.startLineNumber===f.endLineNumber?(s.push(xm.EditOperation.replace(E,_)),D=new(0,Gc.Selection)(f.startLineNumber-c,f.startColumn,f.endLineNumber-c,f.endColumn)):(s.push(xm.EditOperation.replace(E,_)),D=new(0,Gc.Selection)(f.startLineNumber-c,f.startColumn,f.startLineNumber-c,_.length-y)),null!==yd.Range.intersectRanges(E,i)?u=D:l.push(D)}c+=E.endLineNumber-E.startLineNumber}l.unshift(u),t.pushUndoStop(),t.executeEdits(this.id,s,l),t.pushUndoStop()}}}}}]),n}(qc.EditorAction),kA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.transpose",label:Jc.localize("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){for(var r=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s.isEmpty()){var l=s.getStartPosition(),u=i.getLineMaxColumn(l.lineNumber);if(l.column>=u){if(l.lineNumber===i.getLineCount())continue;var c=new(0,yd.Range)(l.lineNumber,Math.max(1,l.column-1),l.lineNumber+1,1),d=i.getValueInRange(c).split("").reverse().join("");r.push(new(0,Nd.ReplaceCommand)(new(0,Gc.Selection)(l.lineNumber,Math.max(1,l.column-1),l.lineNumber+1,1),d))}else{var h=new(0,yd.Range)(l.lineNumber,Math.max(1,l.column-1),l.lineNumber,l.column+1),f=i.getValueInRange(h).split("").reverse().join("");r.push(new(0,Nd.ReplaceCommandThatPreservesSelection)(h,f,new(0,Gc.Selection)(l.lineNumber,l.column+1,l.lineNumber,l.column+1)))}}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}}}]),n}(qc.EditorAction),CA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=t.getSelections();if(null!==n){var i=t.getModel();if(null!==i){var r=t.getOption(116),o=[],a=!0,s=!1,l=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;if(d.isEmpty()){var h=d.getStartPosition(),f=t.getConfiguredWordAtPosition(h);if(!f)continue;var p=new(0,yd.Range)(h.lineNumber,f.startColumn,h.lineNumber,f.endColumn),g=i.getValueInRange(p);o.push(xm.EditOperation.replace(p,this._modifyText(g,r)))}else{var v=i.getValueInRange(d);o.push(xm.EditOperation.replace(d,this._modifyText(v,r)))}}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}}}]),n}(qc.EditorAction),xA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.transformToUppercase",label:Jc.localize("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"_modifyText",value:function(e,t){return e.toLocaleUpperCase()}}]),n}(CA),SA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.transformToLowercase",label:Jc.localize("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"_modifyText",value:function(e,t){return e.toLocaleLowerCase()}}]),n}(CA),EA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.transformToTitlecase",label:Jc.localize("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"_modifyText",value:function(e,t){for(var n=("\r\n\t "+t).split(""),i="",r=!0,o=0;o<e.length;o++){var a=e[o];n.indexOf(a)>=0?(r=!0,i+=a):r?(r=!1,i+=a.toLocaleUpperCase()):i+=a.toLocaleLowerCase()}return i}}]),n}(CA),DA=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._pattern=t,this._flags=n,this._actual=null,this._evaluated=!1}return(0,c.default)(e,[{key:"get",value:function(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}},{key:"isSupported",value:function(){return null!==this.get()}}]),e}(),AA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.transformToSnakecase",label:Jc.localize("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:Xc.EditorContextKeys.writable})}return(0,c.default)(n,[{key:"_modifyText",value:function(e,t){var i=n.regExp1.get(),r=n.regExp2.get();return i&&r?e.replace(i,"$1_$2").replace(r,"$1_$2$3").toLocaleLowerCase():e}}]),n}(CA);AA.regExp1=new DA("(\\p{Ll})(\\p{Lu})","gmu"),AA.regExp2=new DA("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu"),(0,qc.registerEditorAction)(iA),(0,qc.registerEditorAction)(rA),(0,qc.registerEditorAction)(oA),(0,qc.registerEditorAction)(sA),(0,qc.registerEditorAction)(lA),(0,qc.registerEditorAction)(cA),(0,qc.registerEditorAction)(dA),(0,qc.registerEditorAction)(hA),(0,qc.registerEditorAction)(fA),(0,qc.registerEditorAction)(pA),(0,qc.registerEditorAction)(gA),(0,qc.registerEditorAction)(vA),(0,qc.registerEditorAction)(mA),(0,qc.registerEditorAction)(bA),(0,qc.registerEditorAction)(_A),(0,qc.registerEditorAction)(wA),(0,qc.registerEditorAction)(kA),(0,qc.registerEditorAction)(xA),(0,qc.registerEditorAction)(SA),(0,qc.registerEditorAction)(EA),AA.regExp1.isSupported()&&AA.regExp2.isSupported()&&(0,qc.registerEditorAction)(AA);u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),qc=o("THDAR"),oh=o("2ZBuK"),vd=o("dXCvL"),md=o("kBBF2"),eh=o("j6sHb"),yd=o("5MJfC"),lh=o("chpjt"),gd=o("hJucn"),_d=o("60ELr"),$c=o("efZ3W"),Xc=o("5cDyY"),ah=o("iPPVB"),jd=o("1NzEb"),Yc=o("2NkmB"),nh=o("gTzCU"),kd=o("ht8QC"),Cd=o("4ET02"),pp=o("8ta7j"),sy=o("k4Xpx");var IA=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},RA=function(e,t){return function(n,i){t(n,i,e)}},TA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},LA=new(0,$c.RawContextKey)("LinkedEditingInputVisible",!1),MA="linked-editing-decoration",NA=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this))._debounceDuration=200,r._localToDispose=r._register(new(0,vd.DisposableStore)),r._editor=e,r._enabled=!1,r._visibleContextKey=LA.bindTo(n),r._currentDecorations=[],r._languageWordPattern=null,r._currentWordPattern=null,r._ignoreChangeEvent=!1,r._localToDispose=r._register(new(0,vd.DisposableStore)),r._rangeUpdateTriggerPromise=null,r._rangeSyncTriggerPromise=null,r._currentRequest=null,r._currentRequestPosition=null,r._currentRequestModelVersion=null,r._register(r._editor.onDidChangeModel((function(){return r.reinitialize(!0)}))),r._register(r._editor.onDidChangeConfiguration((function(e){(e.hasChanged(61)||e.hasChanged(81))&&r.reinitialize(!1)}))),r._register(lh.LinkedEditingRangeProviderRegistry.onDidChange((function(){return r.reinitialize(!1)}))),r._register(r._editor.onDidChangeModelLanguage((function(){return r.reinitialize(!0)}))),r.reinitialize(!0),r}return(0,c.default)(i,[{key:"reinitialize",value:function(e){var t=this,n=this._editor.getModel(),i=null!==n&&(this._editor.getOption(61)||this._editor.getOption(81))&&lh.LinkedEditingRangeProviderRegistry.has(n);if((i!==this._enabled||e)&&(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),i&&null!==n)){this._languageWordPattern=sy.LanguageConfigurationRegistry.getWordDefinition(n.getLanguageIdentifier().id),this._localToDispose.add(n.onDidChangeLanguageConfiguration((function(){t._languageWordPattern=sy.LanguageConfigurationRegistry.getWordDefinition(n.getLanguageIdentifier().id)})));var r=new(0,gd.Delayer)(this._debounceDuration),o=function(){t._rangeUpdateTriggerPromise=r.trigger((function(){return t.updateRanges()}),t._debounceDuration)},a=new(0,gd.Delayer)(0);this._localToDispose.add(this._editor.onDidChangeCursorPosition((function(){o()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((function(e){if(!t._ignoreChangeEvent&&t._currentDecorations.length>0){var i=n.getDecorationRange(t._currentDecorations[0]);if(i&&e.changes.every((function(e){return i.intersectRanges(e.range)})))return r=t._currentDecorations,void(t._rangeSyncTriggerPromise=a.trigger((function(){return t._syncRanges(r)})))}var r;o()}))),this._localToDispose.add({dispose:function(){r.cancel(),a.cancel()}}),this.updateRanges()}}},{key:"_syncRanges",value:function(e){if(this._editor.hasModel()&&e===this._currentDecorations&&0!==e.length){var t=this._editor.getModel(),n=t.getDecorationRange(e[0]);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();var i=t.getValueInRange(n);if(this._currentWordPattern){var r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}for(var o=[],a=1,s=e.length;a<s;a++){var l=t.getDecorationRange(e[a]);if(l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:i});else{var u=t.getValueInRange(l),c=i,d=l.startColumn,h=l.endColumn,f=nh.commonPrefixLength(u,c);d+=f,u=u.substr(f),c=c.substr(f);var p=nh.commonSuffixLength(u,c);h-=p,u=u.substr(0,u.length-p),c=c.substr(0,c.length-p),d===h&&0===c.length||o.push({range:new(0,yd.Range)(l.startLineNumber,d,l.endLineNumber,h),text:c})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;var g=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(g)}finally{this._ignoreChangeEvent=!1}}}},{key:"dispose",value:function(){this.clearRanges(),(0,zi.default)((0,Wi.default)(i.prototype),"dispose",this).call(this)}},{key:"clearRanges",value:function(){this._visibleContextKey.set(!1),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,[]),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}},{key:"updateRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return TA(this,void 0,void 0,n(l).mark((function t(){var r,o,a,s,u,c;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this,this._editor.hasModel()){t.next=4;break}return this.clearRanges(),t.abrupt("return");case 4:if(o=this._editor.getPosition(),!(!this._enabled&&!e||this._editor.getSelections().length>1)){t.next=8;break}return this.clearRanges(),t.abrupt("return");case 8:if(a=this._editor.getModel(),s=a.getVersionId(),!this._currentRequestPosition||this._currentRequestModelVersion!==s){t.next=17;break}if(!o.equals(this._currentRequestPosition)){t.next=13;break}return t.abrupt("return");case 13:if(!(this._currentDecorations&&this._currentDecorations.length>0)){t.next=17;break}if(!(u=a.getDecorationRange(this._currentDecorations[0]))||!u.containsPosition(o)){t.next=17;break}return t.abrupt("return");case 17:return this._currentRequestPosition=o,this._currentRequestModelVersion=s,c=(0,gd.createCancelablePromise)((function(e){return TA(r,void 0,void 0,n(l).mark((function t(){var r,u,d,h,f,p,g;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,FA(a,o,e);case 3:if(r=t.sent,c===this._currentRequest){t.next=6;break}return t.abrupt("return");case 6:if(this._currentRequest=null,s===a.getVersionId()){t.next=9;break}return t.abrupt("return");case 9:u=[],(null==r?void 0:r.ranges)&&(u=r.ranges),this._currentWordPattern=(null==r?void 0:r.wordPattern)||this._languageWordPattern,d=!1,h=0,f=u.length;case 14:if(!(h<f)){t.next=22;break}if(!yd.Range.containsPosition(u[h],o)){t.next=19;break}return d=!0,0!==h&&(p=u[h],u.splice(h,1),u.unshift(p)),t.abrupt("break",22);case 19:h++,t.next=14;break;case 22:if(d){t.next=25;break}return this.clearRanges(),t.abrupt("return");case 25:g=u.map((function(e){return{range:e,options:i.DECORATION}})),this._visibleContextKey.set(!0),this._currentDecorations=this._editor.deltaDecorations(this._currentDecorations,g),t.next=34;break;case 30:t.prev=30,t.t0=t.catch(0),(0,Yc.isPromiseCanceledError)(t.t0)||(0,Yc.onUnexpectedError)(t.t0),this._currentRequest!==c&&this._currentRequest||this.clearRanges();case 34:case"end":return t.stop()}}),t,this,[[0,30]])})))})),this._currentRequest=c,t.abrupt("return",c);case 22:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(vd.Disposable);NA.ID="editor.contrib.linkedEditing",NA.DECORATION=_d.ModelDecorationOptions.register({description:"linked-editing",stickiness:0,className:MA}),NA=IA([RA(1,$c.IContextKeyService)],NA);var PA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.linkedEditing",label:Jc.localize("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasRenameProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3132,weight:100}})}return(0,c.default)(n,[{key:"runCommand",value:function(e,t){var i=this,r=e.get(jd.ICodeEditorService),o=(0,Ki.default)(Array.isArray(t)&&t||[void 0,void 0],2),a=o[0],s=o[1];return ah.URI.isUri(a)&&md.Position.isIPosition(s)?r.openCodeEditor({resource:a},r.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(s),e.invokeWithinContext((function(t){return i.reportTelemetry(t,e),i.run(t,e)})))}),Yc.onUnexpectedError):(0,zi.default)((0,Wi.default)(n.prototype),"runCommand",this).call(this,e,t)}},{key:"run",value:function(e,t){var n=NA.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}]),n}(qc.EditorAction),OA=qc.EditorCommand.bindToContribution(NA.get);function FA(e,t,i){var r=this,o=lh.LinkedEditingRangeProviderRegistry.ordered(e);return(0,gd.first)(o.map((function(o){return function(){return TA(r,void 0,void 0,n(l).mark((function r(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.provideLinkedEditingRanges(e,t,i);case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),(0,Yc.onUnexpectedExternalError)(n.t0),n.abrupt("return",void 0);case 10:case"end":return n.stop()}}),r,null,[[0,6]])})))}})),(function(e){return!!e&&oh.isNonEmptyArray(null==e?void 0:e.ranges)}))}(0,qc.registerEditorCommand)(new OA({id:"cancelLinkedEditingInput",precondition:LA,handler:function(e){return e.clearRanges()},kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));var BA=(0,kd.registerColor)("editor.linkedEditingBackground",{dark:pp.Color.fromHex("#f00").transparent(.3),light:pp.Color.fromHex("#f00").transparent(.3),hc:pp.Color.fromHex("#f00").transparent(.3)},Jc.localize("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(BA);n&&t.addRule(".monaco-editor .".concat(MA," { background: ").concat(n,"; border-left-color: ").concat(n,"; }"))})),(0,qc.registerModelAndPositionCommand)("_executeLinkedEditingProvider",(function(e,t){return FA(e,t,eh.CancellationToken.None)})),(0,qc.registerEditorContribution)(NA.ID,NA),(0,qc.registerEditorAction)(PA);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),gd=o("hJucn"),eh=o("j6sHb"),Yc=o("2NkmB"),vd=o("dXCvL"),Bd=o("5DBhW"),qc=o("THDAR"),_d=o("60ELr"),lh=o("chpjt");var HA={};e(HA,"getLinks",(function(){return UA}),(function(e){return UA=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),l=o("1JCPQ"),eh=o("j6sHb"),Yc=o("2NkmB"),ah=o("iPPVB"),yd=o("5MJfC"),lh=o("chpjt"),uh=o("gPDld"),vh=o("j9pk1"),vd=o("dXCvL"),oh=o("2ZBuK"),zf=o("jW8FZ");var jA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},zA=function(){"use strict";function e(t,n){(0,u.default)(this,e),this._link=t,this._provider=n}return(0,c.default)(e,[{key:"toJSON",value:function(){return{range:this.range,url:this.url,tooltip:this.tooltip}}},{key:"range",get:function(){return this._link.range}},{key:"url",get:function(){return this._link.url}},{key:"tooltip",get:function(){return this._link.tooltip}},{key:"resolve",value:function(e){return jA(this,void 0,void 0,n(l).mark((function t(){var i;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this,!this._link.url){t.next=3;break}return t.abrupt("return",this._link.url);case 3:if("function"!=typeof this._provider.resolveLink){t.next=5;break}return t.abrupt("return",Promise.resolve(this._provider.resolveLink(this._link,e)).then((function(t){return i._link=t||i._link,i._link.url?i.resolve(e):Promise.reject(new Error("missing"))})));case 5:return t.abrupt("return",Promise.reject(new Error("missing")));case 6:case"end":return t.stop()}}),t,this)})))}}]),e}(),WA=function(){"use strict";function e(t){(0,u.default)(this,e),this._disposables=new(0,vd.DisposableStore);var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this,l=function(t,i){var r=(0,Ki.default)(i.value,2),o=r[0],a=r[1],l=o.links.map((function(e){return new zA(e,a)}));n=e._union(n,l),(0,vd.isDisposable)(o)&&s._disposables.add(o)},c=t[Symbol.iterator]();!(i=(a=c.next()).done);i=!0)l(0,a)}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}this.links=n}return(0,c.default)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this.links.length=0}}],[{key:"_union",value:function(e,t){var n,i,r,o,a=[];for(n=0,r=0,i=e.length,o=t.length;n<i&&r<o;){var s=e[n],l=t[r];if(yd.Range.areIntersectingOrTouching(s.range,l.range))n++;else yd.Range.compareRangesUsingStarts(s.range,l.range)<0?(a.push(s),n++):(a.push(l),r++)}for(;n<i;n++)a.push(e[n]);for(;r<o;r++)a.push(t[r]);return a}}]),e}();function UA(e,t){var n=[],i=lh.LinkProviderRegistry.ordered(e).reverse().map((function(i,r){return Promise.resolve(i.provideLinks(e,t)).then((function(e){e&&(n[r]=[e,i])}),Yc.onUnexpectedExternalError)}));return Promise.all(i).then((function(){var e=new WA((0,oh.coalesce)(n));return t.isCancellationRequested?(e.dispose(),new WA([])):e}))}vh.CommandsRegistry.registerCommand("_executeLinkProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return jA(void 0,void 0,void 0,n(l).mark((function t(){var r,o,a,s,u,c,d;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=(0,Ki.default)(i,2),o=r[0],a=r[1],(0,zf.assertType)(o instanceof ah.URI),"number"!=typeof a&&(a=0),s=e.get(uh.IModelService).getModel(o)){t.next=6;break}return t.abrupt("return",[]);case 6:return t.next=8,UA(s,eh.CancellationToken.None);case 8:if(u=t.sent){t.next=11;break}return t.abrupt("return",[]);case 11:c=0;case 12:if(!(c<Math.min(a,u.links.length))){t.next=18;break}return t.next=15,u.links[c].resolve(eh.CancellationToken.None);case 15:c++,t.next=12;break;case 18:return d=u.links.slice(0),u.dispose(),t.abrupt("return",d);case 21:case"end":return t.stop()}}),t)})))}));hf=o("93Ice"),Lp=o("j1CnT"),kd=o("ht8QC"),Cd=o("4ET02"),ah=o("iPPVB"),Op=o("knZKL"),mf=o("L9zbH");var VA=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},KA=function(e,t){return function(n,i){t(n,i,e)}},qA=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};var JA={general:_d.ModelDecorationOptions.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:_d.ModelDecorationOptions.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})},XA=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.link=t,this.decorationId=n}return(0,c.default)(e,[{key:"activate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!0))}},{key:"deactivate",value:function(t,n){t.changeDecorationOptions(this.decorationId,e._getOptions(this.link,n,!1))}}],[{key:"decoration",value:function(t,n){return{range:t.range,options:e._getOptions(t,n,!1)}}},{key:"_getOptions",value:function(e,t,n){var i=Object.assign({},n?JA.active:JA.general);return i.hoverMessage=function(e,t){var n=e.url&&/^command:/i.test(e.url.toString()),i=e.tooltip?e.tooltip:n?Jc.localize("links.navigate.executeCmd","Execute command"):Jc.localize("links.navigate.follow","Follow link"),r=t?Bd.isMacintosh?Jc.localize("links.navigate.kb.meta.mac","cmd + click"):Jc.localize("links.navigate.kb.meta","ctrl + click"):Bd.isMacintosh?Jc.localize("links.navigate.kb.alt.mac","option + click"):Jc.localize("links.navigate.kb.alt","alt + click");if(e.url){var o="";if(/^command:/i.test(e.url.toString())){var a=e.url.toString().match(/^command:([^?#]+)/);if(a){var s=a[1],l=Jc.localize("tooltip.explanation","Execute command {0}",s);o=' "'.concat(l,'"')}}return new ed("",!0).appendMarkdown("[".concat(i,"](").concat(e.url.toString(!0)).concat(o,") (").concat(r,")"))}return(new ed).appendText("".concat(i," (").concat(r,")"))}(e,t),i}}]),e}(),GA=function(){"use strict";function e(t,n,i){var r=this;(0,u.default)(this,e),this.listenersToRemove=new(0,vd.DisposableStore),this.editor=t,this.openerService=n,this.notificationService=i;var o=new MC(t);this.listenersToRemove.add(o),this.listenersToRemove.add(o.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,Ki.default)(e,2),n=t[0],i=t[1];r._onEditorMouseMove(n,i)}))),this.listenersToRemove.add(o.onExecute((function(e){r.onEditorMouseUp(e)}))),this.listenersToRemove.add(o.onCancel((function(e){r.cleanUpActiveLinkDecoration()}))),this.enabled=t.getOption(62),this.listenersToRemove.add(t.onDidChangeConfiguration((function(e){var n=t.getOption(62);r.enabled!==n&&(r.enabled=n,r.updateDecorations([]),r.stop(),r.beginCompute())}))),this.listenersToRemove.add(t.onDidChangeModelContent((function(e){return r.onChange()}))),this.listenersToRemove.add(t.onDidChangeModel((function(e){return r.onModelChanged()}))),this.listenersToRemove.add(t.onDidChangeModelLanguage((function(e){return r.onModelModeChanged()}))),this.listenersToRemove.add(lh.LinkProviderRegistry.onDidChange((function(e){return r.onModelModeChanged()}))),this.timeout=new gd.TimeoutTimer,this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null,this.beginCompute()}return(0,c.default)(e,[{key:"onModelChanged",value:function(){this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.beginCompute()}},{key:"onModelModeChanged",value:function(){this.stop(),this.beginCompute()}},{key:"onChange",value:function(){var t=this;this.timeout.setIfNotSet((function(){return t.beginCompute()}),e.RECOMPUTE_TIME)}},{key:"beginCompute",value:function(){return qA(this,void 0,void 0,n(l).mark((function e(){var t;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.editor.hasModel()&&this.enabled){e.next=2;break}return e.abrupt("return");case 2:if(t=this.editor.getModel(),lh.LinkProviderRegistry.has(t)){e.next=5;break}return e.abrupt("return");case 5:return this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=gd.createCancelablePromise((function(e){return(0,HA.getLinks)(t,e)})),e.prev=7,e.next=10,this.computePromise;case 10:this.activeLinksList=e.sent,this.updateDecorations(this.activeLinksList.links),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),(0,Yc.onUnexpectedError)(e.t0);case 17:return e.prev=17,this.computePromise=null,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[7,14,17,20]])})))}},{key:"updateDecorations",value:function(e){for(var t="altKey"===this.editor.getOption(69),n=[],i=Object.keys(this.currentOccurrences),r=0,o=i.length;r<o;r++){var a=i[r],s=this.currentOccurrences[a];n.push(s.decorationId)}var l=[],u=!0,c=!1,d=void 0;if(e)try{for(var h,f=e[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value;l.push(XA.decoration(p,t))}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}var g=this.editor.deltaDecorations(n,l);this.currentOccurrences={},this.activeLinkDecorationId=null;for(var v=0,m=g.length;v<m;v++){var y=new XA(e[v],g[v]);this.currentOccurrences[y.decorationId]=y}}},{key:"_onEditorMouseMove",value:function(e,t){var n=this,i="altKey"===this.editor.getOption(69);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();var r=this.getLinkOccurrence(e.target.position);r&&this.editor.changeDecorations((function(e){r.activate(e,i),n.activeLinkDecorationId=r.decorationId}))}else this.cleanUpActiveLinkDecoration()}},{key:"cleanUpActiveLinkDecoration",value:function(){var e="altKey"===this.editor.getOption(69);if(this.activeLinkDecorationId){var t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((function(n){t.deactivate(n,e)})),this.activeLinkDecorationId=null}}},{key:"onEditorMouseUp",value:function(e){if(this.isEnabled(e)){var t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}}},{key:"openLinkOccurrence",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this;if(this.openerService){var r=e.link;r.resolve(eh.CancellationToken.None).then((function(e){if("string"==typeof e&&i.editor.hasModel()){var r=i.editor.getModel().uri;if(r.scheme===Op.Schemas.file&&e.startsWith("".concat(Op.Schemas.file,":"))){var o=ah.URI.parse(e);if(o.scheme===Op.Schemas.file){var a=mf.originalFSPath(o),s=null;a.startsWith("/./")?s=".".concat(a.substr(1)):a.startsWith("//./")&&(s=".".concat(a.substr(2))),s&&(e=mf.joinPath(r,s))}}}return i.openerService.open(e,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0})}),(function(e){var t=e instanceof Error?e.message:e;"invalid"===t?i.notificationService.warn(Jc.localize("invalid.url","Failed to open this link because it is not well-formed: {0}",r.url.toString())):"missing"===t?i.notificationService.warn(Jc.localize("missing.url","Failed to open this link because its target is missing.")):(0,Yc.onUnexpectedError)(e)}))}}},{key:"getLinkOccurrence",value:function(e){if(!this.editor.hasModel()||!e)return null;var t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this.currentOccurrences[s.id];if(l)return l}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return null}},{key:"isEnabled",value:function(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}},{key:"stop",value:function(){var e;this.timeout.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}},{key:"dispose",value:function(){this.listenersToRemove.dispose(),this.stop(),this.timeout.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();GA.ID="editor.linkDetector",GA.RECOMPUTE_TIME=1e3,GA=VA([KA(1,Lp.IOpenerService),KA(2,hf.INotificationService)],GA);var ZA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.openLink",label:Jc.localize("label","Open Link"),alias:"Open Link",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=GA.get(t);if(n&&t.hasModel()){var i=t.getSelections(),r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=n.getLinkOccurrence(u.getEndPosition());c&&n.openLinkOccurrence(c,!1)}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}}}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(GA.ID,GA),(0,qc.registerEditorAction)(ZA),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorActiveLinkForeground);n&&t.addRule(".monaco-editor .detected-link-active { color: ".concat(n," !important; }"))}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),gd=o("hJucn"),Zc=o("5LFig"),vd=o("dXCvL"),od=o("3xPLG"),qc=o("THDAR");var $A=o("iqilx");yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY"),bd=o("7wGTu"),_d=o("60ELr"),lh=o("chpjt"),xd=o("feTbe"),kd=o("ht8QC"),Cd=o("4ET02"),$c=o("efZ3W");function YA(e,t){var n=t.filter((function(t){return!e.find((function(e){return e.equals(t)}))}));if(n.length>=1){var i=n.map((function(e){return"line ".concat(e.viewState.position.lineNumber," column ").concat(e.viewState.position.column)})).join(", "),r=1===n.length?Jc.localize("cursorAdded","Cursor added: {0}",i):Jc.localize("cursorsAdded","Cursors added: {0}",i);(0,od.status)(r)}}var QA=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.insertCursorAbove",label:Jc.localize("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Jc.localize({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=n&&!0===n.logicalLine,r=t._getViewModel();if(!r.cursorConfig.readOnly){r.pushStackElement();var o=r.getCursorStates();r.setCursorStates(n.source,3,$A.CursorMoveCommands.addCursorUp(r,o,i)),r.revealTopMostCursor(n.source),YA(o,r.getCursorStates())}}}}]),n}(qc.EditorAction),eI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.insertCursorBelow",label:Jc.localize("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Jc.localize({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=n&&!0===n.logicalLine,r=t._getViewModel();if(!r.cursorConfig.readOnly){r.pushStackElement();var o=r.getCursorStates();r.setCursorStates(n.source,3,$A.CursorMoveCommands.addCursorDown(r,o,i)),r.revealBottomMostCursor(n.source),YA(o,r.getCursorStates())}}}}]),n}(qc.EditorAction),tI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.insertCursorAtEndOfEachLineSelected",label:Jc.localize("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Jc.localize({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}return(0,c.default)(n,[{key:"getCursorsForSelection",value:function(e,t,n){if(!e.isEmpty()){for(var i=e.startLineNumber;i<e.endLineNumber;i++){var r=t.getLineMaxColumn(i);n.push(new(0,Gc.Selection)(i,r,i,r))}e.endColumn>1&&n.push(new(0,Gc.Selection)(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}},{key:"run",value:function(e,t){var n=this;if(t.hasModel()){var i=t.getModel(),r=t.getSelections(),o=t._getViewModel(),a=o.getCursorStates(),s=[];r.forEach((function(e){return n.getCursorsForSelection(e,i,s)})),s.length>0&&t.setSelections(s),YA(a,o.getCursorStates())}}}]),n}(qc.EditorAction),nI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.addCursorsToBottom",label:Jc.localize("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelections(),i=t.getModel().getLineCount(),r=[],o=n[0].startLineNumber;o<=i;o++)r.push(new(0,Gc.Selection)(o,n[0].startColumn,o,n[0].endColumn));var a=t._getViewModel(),s=a.getCursorStates();r.length>0&&t.setSelections(r),YA(s,a.getCursorStates())}}}]),n}(qc.EditorAction),iI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.addCursorsToTop",label:Jc.localize("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){for(var n=t.getSelections(),i=[],r=n[0].startLineNumber;r>=1;r--)i.push(new(0,Gc.Selection)(r,n[0].startColumn,r,n[0].endColumn));var o=t._getViewModel(),a=o.getCursorStates();i.length>0&&t.setSelections(i),YA(a,o.getCursorStates())}}}]),n}(qc.EditorAction),rI=function e(t,n,i){"use strict";(0,u.default)(this,e),this.selections=t,this.revealRange=n,this.revealScrollType=i},oI=function(){"use strict";function e(t,n,i,r,o,a,s){(0,u.default)(this,e),this._editor=t,this.findController=n,this.isDisconnectedFromFindController=i,this.searchText=r,this.wholeWord=o,this.matchCase=a,this.currentMatch=s}return(0,c.default)(e,[{key:"addSelectionToNextFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new rI(t.concat(e),e,0)}},{key:"moveSelectionToNextFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getNextMatch();if(!e)return null;var t=this._editor.getSelections();return new rI(t.slice(0,t.length-1).concat(e),e,0)}},{key:"_getNextMatch",value:function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),n=t[t.length-1],i=this._editor.getModel().findNextMatch(this.searchText,n.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return i?new(0,Gc.Selection)(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}},{key:"addSelectionToPreviousFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new rI(t.concat(e),e,0)}},{key:"moveSelectionToPreviousFindMatch",value:function(){if(!this._editor.hasModel())return null;var e=this._getPreviousMatch();if(!e)return null;var t=this._editor.getSelections();return new rI(t.slice(0,t.length-1).concat(e),e,0)}},{key:"_getPreviousMatch",value:function(){if(!this._editor.hasModel())return null;if(this.currentMatch){var e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();var t=this._editor.getSelections(),n=t[t.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,n.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1);return i?new(0,Gc.Selection)(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}},{key:"selectAll",value:function(){return this._editor.hasModel()?(this.findController.highlightFindOptions(),this._editor.getModel().findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(116):null,!1,1073741824)):[]}}],[{key:"create",value:function(t,n){if(!t.hasModel())return null;var i=n.getState();if(!t.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new e(t,n,!1,i.searchString,i.wholeWord,i.matchCase,null);var r,o,a=!1,s=t.getSelections();1===s.length&&s[0].isEmpty()?(a=!0,r=!0,o=!0):(r=i.wholeWord,o=i.matchCase);var l,u=t.getSelection(),c=null;if(u.isEmpty()){var d=t.getConfiguredWordAtPosition(u.getStartPosition());if(!d)return null;l=d.word,c=new(0,Gc.Selection)(u.startLineNumber,d.startColumn,u.startLineNumber,d.endColumn)}else l=t.getModel().getValueInRange(u).replace(/\r\n/g,"\n");return new e(t,n,a,l,r,o,c)}}]),e}(),aI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this))._sessionDispose=i._register(new(0,vd.DisposableStore)),i._editor=e,i._ignoreSelectionChange=!1,i._session=null,i}return(0,c.default)(n,[{key:"dispose",value:function(){this._endSession(),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"_beginSessionIfNeeded",value:function(e){var t=this;if(!this._session){var n=oI.create(this._editor,e);if(!n)return;this._session=n;var i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((function(e){t._ignoreSelectionChange||t._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((function(){t._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((function(e){(e.matchCase||e.wholeWord)&&t._endSession()})))}}},{key:"_endSession",value:function(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){this._session.findController.getState().change({wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0},!1)}this._session=null}},{key:"_setSelections",value:function(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}},{key:"_expandEmptyToWord",value:function(e,t){if(!t.isEmpty())return t;var n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new(0,Gc.Selection)(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}},{key:"_applySessionResult",value:function(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}},{key:"getSession",value:function(e){return this._session}},{key:"addSelectionToNextFindMatch",value:function(e){if(this._editor.hasModel()){if(!this._session){var t=this._editor.getSelections();if(t.length>1){var n=e.getState().matchCase;if(!vI(this._editor.getModel(),t,n)){for(var i=this._editor.getModel(),r=[],o=0,a=t.length;o<a;o++)r[o]=this._expandEmptyToWord(i,t[o]);return void this._editor.setSelections(r)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}},{key:"addSelectionToPreviousFindMatch",value:function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}},{key:"moveSelectionToNextFindMatch",value:function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}},{key:"moveSelectionToPreviousFindMatch",value:function(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}},{key:"selectAll",value:function(e){if(this._editor.hasModel()){var t=null,n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex)t=this._editor.getModel().findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(116):null,!1,1073741824);else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll()}if(n.searchScope){var i=n.searchScope,r=[];t.forEach((function(e){i.forEach((function(t){e.range.endLineNumber<=t.endLineNumber&&e.range.startLineNumber>=t.startLineNumber&&r.push(e)}))})),t=r}if(t.length>0){for(var o=this._editor.getSelection(),a=0,s=t.length;a<s;a++){var l=t[a];if(l.range.intersectRanges(o)){t[a]=t[0],t[0]=l;break}}this._setSelections(t.map((function(e){return new(0,Gc.Selection)(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})))}}}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);aI.ID="editor.contrib.multiCursorController";var sI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=aI.get(t);if(n){var i=lx.CommonFindController.get(t);if(i){var r=t._getViewModel();if(r){var o=r.getCursorStates();this._run(n,i),YA(o,r.getCursorStates())}}}}}]),n}(qc.EditorAction),lI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.addSelectionToNextFindMatch",label:Jc.localize("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:2082,weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Jc.localize({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}return(0,c.default)(n,[{key:"_run",value:function(e,t){e.addSelectionToNextFindMatch(t)}}]),n}(sI),uI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.addSelectionToPreviousFindMatch",label:Jc.localize("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Jc.localize({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}return(0,c.default)(n,[{key:"_run",value:function(e,t){e.addSelectionToPreviousFindMatch(t)}}]),n}(sI),cI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.moveSelectionToNextFindMatch",label:Jc.localize("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:(0,Zc.KeyChord)(2089,2082),weight:100}})}return(0,c.default)(n,[{key:"_run",value:function(e,t){e.moveSelectionToNextFindMatch(t)}}]),n}(sI),dI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.moveSelectionToPreviousFindMatch",label:Jc.localize("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}return(0,c.default)(n,[{key:"_run",value:function(e,t){e.moveSelectionToPreviousFindMatch(t)}}]),n}(sI),hI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.selectHighlights",label:Jc.localize("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:3114,weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"3_multi",title:Jc.localize({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}return(0,c.default)(n,[{key:"_run",value:function(e,t){e.selectAll(t)}}]),n}(sI),fI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.changeAll",label:Jc.localize("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.editorTextFocus),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}return(0,c.default)(n,[{key:"_run",value:function(e,t){e.selectAll(t)}}]),n}(sI),pI=function(){"use strict";function e(t,n,i,r){(0,u.default)(this,e),this.searchText=t,this.matchCase=n,this.wordSeparators=i,this.modelVersionId=r}return(0,c.default)(e,null,[{key:"softEquals",value:function(e,t){return!e&&!t||!(!e||!t)&&(e.searchText===t.searchText&&e.matchCase===t.matchCase&&e.wordSeparators===t.wordSeparators&&e.modelVersionId===t.modelVersionId)}}]),e}(),gI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).editor=e,i._isEnabled=e.getOption(97),i.decorations=[],i.updateSoon=i._register(new(0,gd.RunOnceScheduler)((function(){return i._update()}),300)),i.state=null,i._register(e.onDidChangeConfiguration((function(t){i._isEnabled=e.getOption(97)}))),i._register(e.onDidChangeCursorSelection((function(e){i._isEnabled&&(e.selection.isEmpty()?3===e.reason?(i.state&&i._setState(null),i.updateSoon.schedule()):i._setState(null):i._update())}))),i._register(e.onDidChangeModel((function(e){i._setState(null)}))),i._register(e.onDidChangeModelContent((function(e){i._isEnabled&&i.updateSoon.schedule()}))),i._register(lx.CommonFindController.get(e).getState().onFindReplaceStateChange((function(e){i._update()}))),i}return(0,c.default)(n,[{key:"_update",value:function(){this._setState(n._createState(this._isEnabled,this.editor))}},{key:"_setState",value:function(e){if(pI.softEquals(this.state,e))this.state=e;else if(this.state=e,this.state){if(this.editor.hasModel()){var t=this.editor.getModel();if(!t.isTooLargeForTokenization()){var i=lh.DocumentHighlightProviderRegistry.has(t)&&this.editor.getOption(71),r=t.findMatches(this.state.searchText,!0,!1,this.state.matchCase,this.state.wordSeparators,!1).map((function(e){return e.range}));r.sort(yd.Range.compareRangesUsingStarts);var o=this.editor.getSelections();o.sort(yd.Range.compareRangesUsingStarts);for(var a=[],s=0,l=0,u=r.length,c=o.length;s<u;){var d=r[s];if(l>=c)a.push(d),s++;else{var h=yd.Range.compareRangesUsingStarts(d,o[l]);h<0?(!o[l].isEmpty()&&yd.Range.areIntersecting(d,o[l])||a.push(d),s++):(h>0||s++,l++)}}var f=a.map((function(e){return{range:e,options:i?n._SELECTION_HIGHLIGHT:n._SELECTION_HIGHLIGHT_OVERVIEW}}));this.decorations=this.editor.deltaDecorations(this.decorations,f)}}}else this.decorations=this.editor.deltaDecorations(this.decorations,[])}},{key:"dispose",value:function(){this._setState(null),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}}],[{key:"_createState",value:function(e,t){if(!e)return null;if(!t.hasModel())return null;var n=t.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;var i=aI.get(t);if(!i)return null;var r=lx.CommonFindController.get(t);if(!r)return null;var o=i.getSession(r);if(!o){var a=t.getSelections();if(a.length>1){var s=r.getState().matchCase;if(!vI(t.getModel(),a,s))return null}o=oI.create(t,r)}if(!o)return null;if(o.currentMatch)return null;if(/^[ \t]+$/.test(o.searchText))return null;if(o.searchText.length>200)return null;var l=r.getState(),u=l.matchCase;if(l.isRevealed){var c=l.searchString;u||(c=c.toLowerCase());var d=o.searchText;if(u||(d=d.toLowerCase()),c===d&&o.matchCase===l.matchCase&&o.wholeWord===l.wholeWord&&!l.isRegex)return null}return new pI(o.searchText,o.matchCase,o.wholeWord?t.getOption(116):null,t.getModel().getVersionId())}}]),n}(vd.Disposable);function vI(e,t,n){for(var i=mI(e,t[0],!n),r=1,o=t.length;r<o;r++){var a=t[r];if(a.isEmpty())return!1;if(i!==mI(e,a,!n))return!1}return!0}function mI(e,t,n){var i=e.getValueInRange(t);return n?i.toLowerCase():i}gI.ID="editor.contrib.selectionHighlighter",gI._SELECTION_HIGHLIGHT_OVERVIEW=_d.ModelDecorationOptions.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,Cd.themeColorFromId)(kd.overviewRulerSelectionHighlightForeground),position:bd.OverviewRulerLane.Center}}),gI._SELECTION_HIGHLIGHT=_d.ModelDecorationOptions.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),(0,qc.registerEditorContribution)(aI.ID,aI),(0,qc.registerEditorContribution)(gI.ID,gI),(0,qc.registerEditorAction)(QA),(0,qc.registerEditorAction)(eI),(0,qc.registerEditorAction)(tI),(0,qc.registerEditorAction)(lI),(0,qc.registerEditorAction)(uI),(0,qc.registerEditorAction)(cI),(0,qc.registerEditorAction)(dI),(0,qc.registerEditorAction)(hI),(0,qc.registerEditorAction)(fI),(0,qc.registerEditorAction)(nI),(0,qc.registerEditorAction)(iI);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),vd=o("dXCvL"),Oh=o("hm5an"),Xc=o("5cDyY"),$c=o("efZ3W"),qc=o("THDAR");var yI={};e(yI,"ParameterHintsWidget",(function(){return MI}),(function(e){return MI=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),Bh=o("fTm33"),od=o("3xPLG"),Ep=o("5uupw"),$h=o("neTVg"),vd=o("dXCvL"),kp=o("8Eens");var bI={};e(bI,"Context",(function(){return wI}),(function(e){return wI=e})),e(bI,"provideSignatureHelp",(function(){return kI}),(function(e){return kI=e}));Ki=o("dVhHy"),l=o("1JCPQ"),Yc=o("2NkmB"),md=o("kBBF2"),lh=o("chpjt"),$c=o("efZ3W"),eh=o("j6sHb"),vh=o("j9pk1"),ah=o("iPPVB"),zf=o("jW8FZ"),Ly=o("fTO0K");var _I=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},wI={Visible:new(0,$c.RawContextKey)("parameterHintsVisible",!1),MultipleSignatures:new(0,$c.RawContextKey)("parameterHintsMultipleSignatures",!1)};function kI(e,t,i,r){return _I(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c,d,h,f,p;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=lh.SignatureHelpProviderRegistry.ordered(e),s=!0,u=!1,c=void 0,n.prev=2,d=a[Symbol.iterator]();case 4:if(s=(h=d.next()).done){n.next=20;break}return f=h.value,n.prev=6,n.next=9,f.provideSignatureHelp(e,t,r,i);case 9:if(!(p=n.sent)){n.next=12;break}return n.abrupt("return",p);case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(6),(0,Yc.onUnexpectedExternalError)(n.t0);case 17:s=!0,n.next=4;break;case 20:n.next=26;break;case 22:n.prev=22,n.t1=n.catch(2),u=!0,c=n.t1;case 26:n.prev=26,n.prev=27,s||null==d.return||d.return();case 29:if(n.prev=29,!u){n.next=32;break}throw c;case 32:return n.finish(29);case 33:return n.finish(26);case 34:return n.abrupt("return",void 0);case 35:case"end":return n.stop()}}),o,null,[[2,22,26,34],[6,14],[27,,29,33]])})))}vh.CommandsRegistry.registerCommand("_executeSignatureHelpProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return _I(void 0,void 0,void 0,n(l).mark((function t(){var r,o,a,s,u,c;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,Ki.default)(i,3),o=r[0],a=r[1],s=r[2],(0,zf.assertType)(ah.URI.isUri(o)),(0,zf.assertType)(md.Position.isIPosition(a)),(0,zf.assertType)("string"==typeof s||!s),t.next=6,e.get(Ly.ITextModelService).createModelReference(o);case 6:return u=t.sent,t.prev=7,t.next=10,kI(u.object.textEditorModel,md.Position.lift(a),{triggerKind:lh.SignatureHelpTriggerKind.Invoke,isRetrigger:!1,triggerCharacter:s},eh.CancellationToken.None);case 10:if(c=t.sent){t.next=13;break}return t.abrupt("return",void 0);case 13:return setTimeout((function(){return c.dispose()}),0),t.abrupt("return",c.value);case 15:return t.prev=15,u.dispose(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[7,,15,18]])})))}));Jc=o("faA3E"),$c=o("efZ3W"),Lp=o("j1CnT"),kd=o("ht8QC"),Cd=o("4ET02");var CI={};e(CI,"ParameterHintsModel",(function(){return EI}),(function(e){return EI=e}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),gd=o("hJucn"),Yc=o("2NkmB"),$h=o("neTVg"),vd=o("dXCvL"),ew=o("5AAsZ"),lh=o("chpjt");var xI,SI=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};!function(e){e.Default={type:0};e.Pending=function e(t,n){"use strict";(0,u.default)(this,e),this.request=t,this.previouslyActiveHints=n,this.type=2};e.Active=function e(t){"use strict";(0,u.default)(this,e),this.hints=t,this.type=1}}(xI||(xI={}));var EI=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.DEFAULT_DELAY;return(0,u.default)(this,i),(n=t.call(this))._onChangedHints=n._register(new(0,$h.Emitter)),n.onChangedHints=n._onChangedHints.event,n.triggerOnType=!1,n._state=xI.Default,n._pendingTriggers=[],n._lastSignatureHelpResult=n._register(new(0,vd.MutableDisposable)),n.triggerChars=new(0,ew.CharacterSet),n.retriggerChars=new(0,ew.CharacterSet),n.triggerId=0,n.editor=e,n.throttledDelayer=new(0,gd.Delayer)(r),n._register(n.editor.onDidBlurEditorWidget((function(){return n.cancel()}))),n._register(n.editor.onDidChangeConfiguration((function(){return n.onEditorConfigurationChange()}))),n._register(n.editor.onDidChangeModel((function(e){return n.onModelChanged()}))),n._register(n.editor.onDidChangeModelLanguage((function(e){return n.onModelChanged()}))),n._register(n.editor.onDidChangeCursorSelection((function(e){return n.onCursorChange(e)}))),n._register(n.editor.onDidChangeModelContent((function(e){return n.onModelContentChange()}))),n._register(lh.SignatureHelpProviderRegistry.onDidChange(n.onModelChanged,(0,Hi.default)(n))),n._register(n.editor.onDidType((function(e){return n.onDidType(e)}))),n.onEditorConfigurationChange(),n.onModelChanged(),n}return(0,c.default)(i,[{key:"state",get:function(){return this._state},set:function(e){2===this._state.type&&this._state.request.cancel(),this._state=e}},{key:"cancel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state=xI.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}},{key:"trigger",value:function(e,t){var n=this,i=this.editor.getModel();if(i&&lh.SignatureHelpProviderRegistry.has(i)){var r=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((function(){return n.doTrigger(r)}),t).catch(Yc.onUnexpectedError)}}},{key:"next",value:function(){if(1===this.state.type){var e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e==e-1,i=this.editor.getOption(75).cycle;!(e<2||n)||i?this.updateActiveSignature(n&&i?0:t+1):this.cancel()}}},{key:"previous",value:function(){if(1===this.state.type){var e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=0===t,i=this.editor.getOption(75).cycle;!(e<2||n)||i?this.updateActiveSignature(n&&i?e-1:t-1):this.cancel()}}},{key:"updateActiveSignature",value:function(e){1===this.state.type&&(this.state=new xI.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:e})),this._onChangedHints.fire(this.state.hints))}},{key:"doTrigger",value:function(e){return SI(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a,s,u,c;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1===this.state.type||2===this.state.type,r=this.getLastActiveHints(),this.cancel(!0),0!==this._pendingTriggers.length){t.next=5;break}return t.abrupt("return",!1);case 5:if(o=this._pendingTriggers.reduce(DI),this._pendingTriggers=[],a={triggerKind:o.triggerKind,triggerCharacter:o.triggerCharacter,isRetrigger:i,activeSignatureHelp:r},this.editor.hasModel()){t.next=10;break}return t.abrupt("return",!1);case 10:return s=this.editor.getModel(),u=this.editor.getPosition(),this.state=new xI.Pending((0,gd.createCancelablePromise)((function(e){return(0,bI.provideSignatureHelp)(s,u,a,e)})),r),t.prev=13,t.next=16,this.state.request;case 16:if(c=t.sent,e===this.triggerId){t.next=20;break}return null==c||c.dispose(),t.abrupt("return",!1);case 20:if(c&&c.value.signatures&&0!==c.value.signatures.length){t.next=27;break}return null==c||c.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),t.abrupt("return",!1);case 27:return this.state=new xI.Active(c.value),this._lastSignatureHelpResult.value=c,this._onChangedHints.fire(this.state.hints),t.abrupt("return",!0);case 31:t.next=38;break;case 33:return t.prev=33,t.t0=t.catch(13),e===this.triggerId&&(this.state=xI.Default),(0,Yc.onUnexpectedError)(t.t0),t.abrupt("return",!1);case 38:case"end":return t.stop()}}),t,this,[[13,33]])})))}},{key:"getLastActiveHints",value:function(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}},{key:"isTriggered",get:function(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}},{key:"onModelChanged",value:function(){this.cancel(),this.triggerChars=new(0,ew.CharacterSet),this.retriggerChars=new(0,ew.CharacterSet);var e=this.editor.getModel();if(e){var t=!0,n=!1,i=void 0;try{for(var r,o=lh.SignatureHelpProviderRegistry.ordered(e)[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=!0,l=!1,u=void 0;try{for(var c,d=(a.signatureHelpTriggerCharacters||[])[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;this.triggerChars.add(h.charCodeAt(0)),this.retriggerChars.add(h.charCodeAt(0))}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}var f=!0,p=!1,g=void 0;try{for(var v,m=(a.signatureHelpRetriggerCharacters||[])[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var y=v.value;this.retriggerChars.add(y.charCodeAt(0))}}catch(e){p=!0,g=e}finally{try{f||null==m.return||m.return()}finally{if(p)throw g}}}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}}},{key:"onDidType",value:function(e){if(this.triggerOnType){var t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:lh.SignatureHelpTriggerKind.TriggerCharacter,triggerCharacter:e.charAt(t)})}}},{key:"onCursorChange",value:function(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:lh.SignatureHelpTriggerKind.ContentChange})}},{key:"onModelContentChange",value:function(){this.isTriggered&&this.trigger({triggerKind:lh.SignatureHelpTriggerKind.ContentChange})}},{key:"onEditorConfigurationChange",value:function(){this.triggerOnType=this.editor.getOption(75).enabled,this.triggerOnType||this.cancel()}},{key:"dispose",value:function(){this.cancel(!0),(0,zi.default)((0,Wi.default)(i.prototype),"dispose",this).call(this)}}]),i}(vd.Disposable);function DI(e,t){switch(t.triggerKind){case lh.SignatureHelpTriggerKind.Invoke:return t;case lh.SignatureHelpTriggerKind.ContentChange:return e;case lh.SignatureHelpTriggerKind.TriggerCharacter:default:return t}}EI.DEFAULT_DELAY=120;nh=o("gTzCU"),Qh=o("8bO6F"),zf=o("jW8FZ"),Rh=o("kXURg"),cv=o("9uoQH");var AI=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},II=function(e,t){return function(n,i){t(n,i,e)}},RI=Bh.$,TI=(0,cv.registerIcon)("parameter-hints-next",Qh.Codicon.chevronDown,Jc.localize("parameterHintsNextIcon","Icon for show next parameter hint.")),LI=(0,cv.registerIcon)("parameter-hints-previous",Qh.Codicon.chevronUp,Jc.localize("parameterHintsPreviousIcon","Icon for show previous parameter hint.")),MI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this)).editor=e,a.renderDisposeables=a._register(new(0,vd.DisposableStore)),a.visible=!1,a.announcedLabel=null,a.allowEditorOverflow=!0,a.markdownRenderer=a._register(new(0,Iv.MarkdownRenderer)({editor:e},o,r)),a.model=a._register(new(0,CI.ParameterHintsModel)(e)),a.keyVisible=bI.Context.Visible.bindTo(i),a.keyMultipleSignatures=bI.Context.MultipleSignatures.bindTo(i),a._register(a.model.onChangedHints((function(e){e?(a.show(),a.render(e)):a.hide()}))),a}return(0,c.default)(n,[{key:"createParameterHintDOMNodes",value:function(){var e=this,t=RI(".editor-widget.parameter-hints-widget"),n=Bh.append(t,RI(".phwrapper"));n.tabIndex=-1;var i=Bh.append(n,RI(".controls")),r=Bh.append(i,RI(".button"+Cd.ThemeIcon.asCSSSelector(LI))),o=Bh.append(i,RI(".overloads")),a=Bh.append(i,RI(".button"+Cd.ThemeIcon.asCSSSelector(TI)));this._register(Bh.addDisposableListener(r,"click",(function(t){Bh.EventHelper.stop(t),e.previous()}))),this._register(Bh.addDisposableListener(a,"click",(function(t){Bh.EventHelper.stop(t),e.next()})));var s=RI(".body"),l=new(0,Ep.DomScrollableElement)(s,{});this._register(l),n.appendChild(l.getDomNode());var u=Bh.append(s,RI(".signature")),c=Bh.append(s,RI(".docs"));t.style.userSelect="text",this.domNodes={element:t,signature:u,overloads:o,docs:c,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((function(t){e.visible&&e.editor.layoutContentWidget(e)})));var d=function(){if(e.domNodes){var t=e.editor.getOption(42);e.domNodes.element.style.fontSize="".concat(t.fontSize,"px")}};d(),this._register($h.Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter((function(e){return e.hasChanged(42)})).on(d,null)),this._register(this.editor.onDidLayoutChange((function(t){return e.updateMaxHeight()}))),this.updateMaxHeight()}},{key:"show",value:function(){var e=this;this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((function(){e.domNodes&&e.domNodes.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}},{key:"hide",value:function(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes&&this.domNodes.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}},{key:"getPosition",value:function(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}},{key:"render",value:function(e){var t;if(this.renderDisposeables.clear(),this.domNodes){var n=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",n),this.keyMultipleSignatures.set(n),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";var i=e.signatures[e.activeSignature];if(i){var r=Bh.append(this.domNodes.signature,RI(".code")),o=this.editor.getOption(42);r.style.fontSize="".concat(o.fontSize,"px"),r.style.fontFamily=o.fontFamily;var a=i.parameters.length>0,s=null!==(t=i.activeParameter)&&void 0!==t?t:e.activeParameter;if(a)this.renderParameters(r,i,s);else Bh.append(r,RI("span")).textContent=i.label;var l=i.parameters[s];if(null==l?void 0:l.documentation){var u=RI("span.documentation");if("string"==typeof l.documentation)u.textContent=l.documentation;else{var c=this.renderMarkdownDocs(l.documentation);u.appendChild(c.element)}Bh.append(this.domNodes.docs,RI("p",{},u))}if(void 0===i.documentation);else if("string"==typeof i.documentation)Bh.append(this.domNodes.docs,RI("p",{},i.documentation));else{var d=this.renderMarkdownDocs(i.documentation);Bh.append(this.domNodes.docs,d.element)}var h=this.hasDocs(i,l);if(this.domNodes.signature.classList.toggle("has-docs",h),this.domNodes.docs.classList.toggle("empty",!h),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,l){var f="",p=i.parameters[s];f=Array.isArray(p.label)?i.label.substring(p.label[0],p.label[1]):p.label,p.documentation&&(f+="string"==typeof p.documentation?", ".concat(p.documentation):", ".concat(p.documentation.value)),i.documentation&&(f+="string"==typeof i.documentation?", ".concat(i.documentation):", ".concat(i.documentation.value)),this.announcedLabel!==f&&(od.alert(Jc.localize("hint","{0}, hint",f)),this.announcedLabel=f)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}}}},{key:"renderMarkdownDocs",value:function(e){var t=this,n=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:function(){var e;null===(e=t.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return n.element.classList.add("markdown-docs"),n}},{key:"hasDocs",value:function(e,t){return!!(t&&"string"==typeof t.documentation&&(0,zf.assertIsDefined)(t.documentation).length>0)||(!!(t&&"object"==typeof t.documentation&&(0,zf.assertIsDefined)(t.documentation).value.length>0)||(!!(e.documentation&&"string"==typeof e.documentation&&(0,zf.assertIsDefined)(e.documentation).length>0)||!!(e.documentation&&"object"==typeof e.documentation&&(0,zf.assertIsDefined)(e.documentation.value).length>0)))}},{key:"renderParameters",value:function(e,t,n){var i=(0,Ki.default)(this.getParameterLabelOffsets(t,n),2),r=i[0],o=i[1],a=document.createElement("span");a.textContent=t.label.substring(0,r);var s=document.createElement("span");s.textContent=t.label.substring(r,o),s.className="parameter active";var l=document.createElement("span");l.textContent=t.label.substring(o),Bh.append(e,a,s,l)}},{key:"getParameterLabelOffsets",value:function(e,t){var n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){var i=new RegExp("(\\W|^)".concat((0,nh.escapeRegExpCharacters)(n.label),"(?=\\W|$)"),"g");i.test(e.label);var r=i.lastIndex-n.label.length;return r>=0?[r,i.lastIndex]:[0,0]}return[0,0]}return[0,0]}},{key:"next",value:function(){this.editor.focus(),this.model.next()}},{key:"previous",value:function(){this.editor.focus(),this.model.previous()}},{key:"cancel",value:function(){this.model.cancel()}},{key:"getDomNode",value:function(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}},{key:"getId",value:function(){return n.ID}},{key:"trigger",value:function(e){this.model.trigger(e,0)}},{key:"updateMaxHeight",value:function(){if(this.domNodes){var e=Math.max(this.editor.getLayoutInfo().height/4,250),t="".concat(e,"px");this.domNodes.element.style.maxHeight=t;var n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}}}]),n}(vd.Disposable);MI.ID="editor.widget.parameterHintsWidget",MI=AI([II(1,$c.IContextKeyService),II(2,Lp.IOpenerService),II(3,kp.IModeService)],MI),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorHoverBorder);if(n){var i=e.type===Rh.ColorScheme.HIGH_CONTRAST?2:1;t.addRule(".monaco-editor .parameter-hints-widget { border: ".concat(i,"px solid ").concat(n,"; }")),t.addRule(".monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ".concat(n.transparent(.5),"; }")),t.addRule(".monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ".concat(n.transparent(.5),"; }"))}var r=e.getColor(kd.editorHoverBackground);r&&t.addRule(".monaco-editor .parameter-hints-widget { background-color: ".concat(r,"; }"));var o=e.getColor(kd.textLinkForeground);o&&t.addRule(".monaco-editor .parameter-hints-widget a { color: ".concat(o,"; }"));var a=e.getColor(kd.textLinkActiveForeground);a&&t.addRule(".monaco-editor .parameter-hints-widget a:hover { color: ".concat(a,"; }"));var s=e.getColor(kd.editorHoverForeground);s&&t.addRule(".monaco-editor .parameter-hints-widget { color: ".concat(s,"; }"));var l=e.getColor(kd.textCodeBlockBackground);l&&t.addRule(".monaco-editor .parameter-hints-widget code { background-color: ".concat(l,"; }"))}));lh=o("chpjt");var NI=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},PI=function(e,t){return function(n,i){t(n,i,e)}},OI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this)).editor=e,r.widget=r._register(i.createInstance(yI.ParameterHintsWidget,r.editor)),r}return(0,c.default)(n,[{key:"cancel",value:function(){this.widget.cancel()}},{key:"previous",value:function(){this.widget.previous()}},{key:"next",value:function(){this.widget.next()}},{key:"trigger",value:function(e){this.widget.trigger(e)}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);OI.ID="editor.controller.parameterHints",OI=NI([PI(1,Oh.IInstantiationService)],OI);var FI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.triggerParameterHints",label:Jc.localize("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:Xc.EditorContextKeys.hasSignatureHelpProvider,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:3082,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=OI.get(t);n&&n.trigger({triggerKind:lh.SignatureHelpTriggerKind.Invoke})}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(OI.ID,OI),(0,qc.registerEditorAction)(FI);var BI=qc.EditorCommand.bindToContribution(OI.get);(0,qc.registerEditorCommand)(new BI({id:"closeParameterHints",precondition:bI.Context.Visible,handler:function(e){return e.cancel()},kbOpts:{weight:175,kbExpr:Xc.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,qc.registerEditorCommand)(new BI({id:"showPrevParameterHint",precondition:$c.ContextKeyExpr.and(bI.Context.Visible,bI.Context.MultipleSignatures),handler:function(e){return e.previous()},kbOpts:{weight:175,kbExpr:Xc.EditorContextKeys.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,qc.registerEditorCommand)(new BI({id:"showNextParameterHint",precondition:$c.ContextKeyExpr.and(bI.Context.Visible,bI.Context.MultipleSignatures),handler:function(e){return e.next()},kbOpts:{weight:175,kbExpr:Xc.EditorContextKeys.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),Yc=o("2NkmB"),$c=o("efZ3W"),gh=o("gkTZs"),qc=o("THDAR"),Xc=o("5cDyY");var HI={};e(HI,"CONTEXT_RENAME_INPUT_VISIBLE",(function(){return WI}),(function(e){return WI=e})),e(HI,"RenameInputField",(function(){return UI}),(function(e){return UI=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),vd=o("dXCvL"),md=o("kBBF2"),Jc=o("faA3E"),$c=o("efZ3W"),kd=o("ht8QC"),Cd=o("4ET02"),zh=o("5H40S");var jI=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},zI=function(e,t){return function(n,i){t(n,i,e)}},WI=new(0,$c.RawContextKey)("renameInputVisible",!1,(0,Jc.localize)("renameInputVisible","Whether the rename input widget is visible")),UI=function(){"use strict";function e(t,n,i,r,o){var a=this;(0,u.default)(this,e),this._editor=t,this._acceptKeybindings=n,this._themeService=i,this._keybindingService=r,this._disposables=new(0,vd.DisposableStore),this.allowEditorOverflow=!0,this._visibleContextKey=WI.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(42)&&a._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}return(0,c.default)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._editor.removeContentWidget(this)}},{key:"getId",value:function(){return"__renameInputWidget"}},{key:"getDomNode",value:function(){var e=this;if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,Jc.localize)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);var t=function(){var t,n,i=(0,Ki.default)(e._acceptKeybindings,2),r=i[0],o=i[1];e._keybindingService.lookupKeybinding(r),e._label.innerText=(0,Jc.localize)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(t=e._keybindingService.lookupKeybinding(r))||void 0===t?void 0:t.getLabel(),null===(n=e._keybindingService.lookupKeybinding(o))||void 0===n?void 0:n.getLabel())};t(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(t)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}},{key:"_updateStyles",value:function(e){var t,n,i,r;if(this._input&&this._domNode){var o=e.getColor(kd.widgetShadow);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(kd.editorWidgetBackground))&&void 0!==t?t:""),this._domNode.style.boxShadow=o?" 0 0 8px 2px ".concat(o):"",this._domNode.style.color=String(null!==(n=e.getColor(kd.inputForeground))&&void 0!==n?n:""),this._input.style.backgroundColor=String(null!==(i=e.getColor(kd.inputBackground))&&void 0!==i?i:"");var a=e.getColor(kd.inputBorder);this._input.style.borderWidth=a?"1px":"0px",this._input.style.borderStyle=a?"solid":"none",this._input.style.borderColor=null!==(r=null==a?void 0:a.toString())&&void 0!==r?r:"none"}}},{key:"_updateFont",value:function(){if(this._input&&this._label){var e=this._editor.getOption(42);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize="".concat(e.fontSize,"px"),this._label.style.fontSize="".concat(.8*e.fontSize,"px")}}},{key:"getPosition",value:function(){return this._visible?{position:this._position,preference:[2,1]}:null}},{key:"afterRender",value:function(e){e||this.cancelInput(!0)}},{key:"acceptInput",value:function(e){this._currentAcceptInput&&this._currentAcceptInput(e)}},{key:"cancelInput",value:function(e){this._currentCancelInput&&this._currentCancelInput(e)}},{key:"getInput",value:function(e,t,n,i,r,o){var a=this;this._domNode.classList.toggle("preview",r),this._position=new(0,md.Position)(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",n.toString()),this._input.setAttribute("selectionEnd",i.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);var s=new(0,vd.DisposableStore);return new Promise((function(e){a._currentCancelInput=function(t){return a._currentAcceptInput=void 0,a._currentCancelInput=void 0,e(t),!0},a._currentAcceptInput=function(n){0!==a._input.value.trim().length&&a._input.value!==t?(a._currentAcceptInput=void 0,a._currentCancelInput=void 0,e({newName:a._input.value,wantsPreview:r&&n})):a.cancelInput(!0)},o.onCancellationRequested((function(){return a.cancelInput(!0)})),s.add(a._editor.onDidBlurEditorWidget((function(){return a.cancelInput(!1)}))),a._show()})).finally((function(){s.dispose(),a._hide()}))}},{key:"_show",value:function(){var e=this;this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((function(){e._input.focus(),e._input.setSelectionRange(parseInt(e._input.getAttribute("selectionStart")),parseInt(e._input.getAttribute("selectionEnd")))}),100)}},{key:"_hide",value:function(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}}]),e}();UI=jI([zI(2,Cd.IThemeService),zI(3,zh.IKeybindingService),zI(4,$c.IContextKeyService)],UI);lh=o("chpjt"),md=o("kBBF2"),od=o("3xPLG"),yd=o("5MJfC"),sh=o("fLZJB"),hf=o("93Ice"),ih=o("2IqeR"),ah=o("iPPVB"),jd=o("1NzEb"),eh=o("j6sHb"),vd=o("dXCvL"),gd=o("hJucn"),qy=o("04xCG"),Oh=o("hm5an");var VI=o("8r0dr"),KI=o("a7pK6"),qI=o("9ewnD"),JI=(zf=o("jW8FZ"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),XI=function(e,t){return function(n,i){t(n,i,e)}},GI=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},ZI=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.model=t,this.position=n,this._providerRenameIdx=0,this._providers=lh.RenameProviderRegistry.ordered(t)}return(0,c.default)(e,[{key:"hasProvider",value:function(){return this._providers.length>0}},{key:"resolveRenameLocation",value:function(e){return GI(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[],this._providerRenameIdx=0;case 2:if(!(this._providerRenameIdx<this._providers.length)){t.next=18;break}if((r=this._providers[this._providerRenameIdx]).resolveRenameLocation){t.next=6;break}return t.abrupt("break",18);case 6:return t.next=8,r.resolveRenameLocation(this.model,this.position,e);case 8:if(o=t.sent){t.next=11;break}return t.abrupt("continue",15);case 11:if(!o.rejectReason){t.next=14;break}return i.push(o.rejectReason),t.abrupt("continue",15);case 14:return t.abrupt("return",o);case 15:this._providerRenameIdx++,t.next=2;break;case 18:if(a=this.model.getWordAtPosition(this.position)){t.next=21;break}return t.abrupt("return",{range:yd.Range.fromPositions(this.position),text:"",rejectReason:i.length>0?i.join("\n"):void 0});case 21:return t.abrupt("return",{range:new(0,yd.Range)(this.position.lineNumber,a.startColumn,this.position.lineNumber,a.endColumn),text:a.word,rejectReason:i.length>0?i.join("\n"):void 0});case 22:case"end":return t.stop()}}),t,this)})))}},{key:"provideRenameEdits",value:function(e,t){return GI(this,void 0,void 0,n(l).mark((function i(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._provideRenameEdits(e,this._providerRenameIdx,[],t));case 1:case"end":return n.stop()}}),i,this)})))}},{key:"_provideRenameEdits",value:function(e,t,i,r){return GI(this,void 0,void 0,n(l).mark((function o(){var a,s;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=this._providers[t]){n.next=3;break}return n.abrupt("return",{edits:[],rejectReason:i.join("\n")});case 3:return n.next=5,a.provideRenameEdits(this.model,this.position,e,r);case 5:if(s=n.sent){n.next=10;break}return n.abrupt("return",this._provideRenameEdits(e,t+1,i.concat(Jc.localize("no result","No result.")),r));case 10:if(!s.rejectReason){n.next=12;break}return n.abrupt("return",this._provideRenameEdits(e,t+1,i.concat(s.rejectReason),r));case 12:return n.abrupt("return",s);case 13:case"end":return n.stop()}}),o,this)})))}}]),e}();function $I(e,t,i){return GI(this,void 0,void 0,n(l).mark((function r(){var o,a;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new ZI(e,t),n.next=3,o.resolveRenameLocation(eh.CancellationToken.None);case 3:if(!(null==(a=n.sent)?void 0:a.rejectReason)){n.next=6;break}return n.abrupt("return",{edits:[],rejectReason:a.rejectReason});case 6:return n.abrupt("return",o.provideRenameEdits(i,eh.CancellationToken.None));case 7:case"end":return n.stop()}}),r)})))}var YI=function(){"use strict";function e(t,n,i,r,o,a,s){var l=this;(0,u.default)(this,e),this.editor=t,this._instaService=n,this._notificationService=i,this._bulkEditService=r,this._progressService=o,this._logService=a,this._configService=s,this._dispoableStore=new(0,vd.DisposableStore),this._cts=new(0,eh.CancellationTokenSource),this._renameInputField=this._dispoableStore.add(new(0,gd.IdleValue)((function(){return l._dispoableStore.add(l._instaService.createInstance(HI.RenameInputField,l.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))})))}return(0,c.default)(e,[{key:"dispose",value:function(){this._dispoableStore.dispose(),this._cts.dispose(!0)}},{key:"run",value:function(){return GI(this,void 0,void 0,n(l).mark((function e(){var t,i,r,o,a,s,u,c,d,h,f;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,this._cts.dispose(!0),this.editor.hasModel()){e.next=4;break}return e.abrupt("return",void 0);case 4:if(i=this.editor.getPosition(),(r=new ZI(this.editor.getModel(),i)).hasProvider()){e.next=8;break}return e.abrupt("return",void 0);case 8:return this._cts=new(0,sh.EditorStateCancellationTokenSource)(this.editor,5),e.prev=10,a=r.resolveRenameLocation(this._cts.token),this._progressService.showWhile(a,250),e.next=15,a;case 15:o=e.sent,e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(10),Ih.MessageController.get(this.editor).showMessage(e.t0||Jc.localize("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),i),e.abrupt("return",void 0);case 22:if(o){e.next=24;break}return e.abrupt("return",void 0);case 24:if(!o.rejectReason){e.next=27;break}return Ih.MessageController.get(this.editor).showMessage(o.rejectReason,i),e.abrupt("return",void 0);case 27:if(!this._cts.token.isCancellationRequested){e.next=29;break}return e.abrupt("return",void 0);case 29:return this._cts.dispose(),this._cts=new(0,sh.EditorStateCancellationTokenSource)(this.editor,5,o.range),s=this.editor.getSelection(),u=0,c=o.text.length,yd.Range.isEmpty(s)||yd.Range.spansMultipleLines(s)||!yd.Range.containsRange(o.range,s)||(u=Math.max(0,s.startColumn-o.range.startColumn),c=Math.min(o.range.endColumn,s.endColumn)-o.range.startColumn),d=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),e.next=38,this._renameInputField.value.getInput(o.range,o.text,u,c,d,this._cts.token);case 38:if("boolean"!=typeof(h=e.sent)){e.next=42;break}return h&&this.editor.focus(),e.abrupt("return",void 0);case 42:return this.editor.focus(),f=(0,gd.raceCancellation)(r.provideRenameEdits(h.newName,this._cts.token),this._cts.token).then((function(e){return GI(t,void 0,void 0,n(l).mark((function t(){var i;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this,e&&this.editor.hasModel()){t.next=3;break}return t.abrupt("return");case 3:if(!e.rejectReason){t.next=6;break}return this._notificationService.info(e.rejectReason),t.abrupt("return");case 6:this._bulkEditService.apply(ih.ResourceEdit.convert(e),{editor:this.editor,showPreview:h.wantsPreview,label:Jc.localize("label","Renaming '{0}'",null==o?void 0:o.text),quotableLabel:Jc.localize("quotableLabel","Renaming {0}",null==o?void 0:o.text)}).then((function(e){e.ariaSummary&&(0,od.alert)(Jc.localize("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,h.newName,e.ariaSummary))})).catch((function(e){i._notificationService.error(Jc.localize("rename.failedApply","Rename failed to apply edits")),i._logService.error(e)}));case 7:case"end":return t.stop()}}),t,this)})))}),(function(e){t._notificationService.error(Jc.localize("rename.failed","Rename failed to compute edits")),t._logService.error(e)})),this._progressService.showWhile(f,250),e.abrupt("return",f);case 46:case"end":return e.stop()}}),e,this,[[10,18]])})))}},{key:"acceptRenameInput",value:function(e){this._renameInputField.value.acceptInput(e)}},{key:"cancelRenameInput",value:function(){this._renameInputField.value.cancelInput(!0)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();YI.ID="editor.contrib.renameController",YI=JI([XI(1,Oh.IInstantiationService),XI(2,hf.INotificationService),XI(3,ih.IBulkEditService),XI(4,gh.IEditorProgressService),XI(5,qy.ILogService),XI(6,qI.ITextResourceConfigurationService)],YI);var QI=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.rename",label:Jc.localize("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:$c.ContextKeyExpr.and(Xc.EditorContextKeys.writable,Xc.EditorContextKeys.hasRenameProvider),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}return(0,c.default)(n,[{key:"runCommand",value:function(e,t){var i=this,r=e.get(jd.ICodeEditorService),o=(0,Ki.default)(Array.isArray(t)&&t||[void 0,void 0],2),a=o[0],s=o[1];return ah.URI.isUri(a)&&md.Position.isIPosition(s)?r.openCodeEditor({resource:a},r.getActiveCodeEditor()).then((function(e){e&&(e.setPosition(s),e.invokeWithinContext((function(t){return i.reportTelemetry(t,e),i.run(t,e)})))}),Yc.onUnexpectedError):(0,zi.default)((0,Wi.default)(n.prototype),"runCommand",this).call(this,e,t)}},{key:"run",value:function(e,t){var n=YI.get(t);return n?n.run():Promise.resolve()}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(YI.ID,YI),(0,qc.registerEditorAction)(QI);var eR=qc.EditorCommand.bindToContribution(YI.get);(0,qc.registerEditorCommand)(new eR({id:"acceptRenameInput",precondition:HI.CONTEXT_RENAME_INPUT_VISIBLE,handler:function(e){return e.acceptRenameInput(!1)},kbOpts:{weight:199,kbExpr:Xc.EditorContextKeys.focus,primary:3}})),(0,qc.registerEditorCommand)(new eR({id:"acceptRenameInputWithPreview",precondition:$c.ContextKeyExpr.and(HI.CONTEXT_RENAME_INPUT_VISIBLE,$c.ContextKeyExpr.has("config.editor.rename.enablePreview")),handler:function(e){return e.acceptRenameInput(!0)},kbOpts:{weight:199,kbExpr:Xc.EditorContextKeys.focus,primary:1027}})),(0,qc.registerEditorCommand)(new eR({id:"cancelRenameInput",precondition:HI.CONTEXT_RENAME_INPUT_VISIBLE,handler:function(e){return e.cancelRenameInput()},kbOpts:{weight:199,kbExpr:Xc.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,qc.registerModelAndPositionCommand)("_executeDocumentRenameProvider",(function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=(0,Ki.default)(i,1),a=o[0];return(0,zf.assertType)("string"==typeof a),$I(e,t,a)})),VI.Registry.as(KI.Extensions.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:Jc.localize("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),l=o("1JCPQ"),oh=o("2ZBuK"),eh=o("j6sHb"),qc=o("THDAR"),md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY"),lh=o("chpjt"),Jc=o("faA3E"),xd=o("feTbe"),u=o("4JAgF"),c=o("9HoHC"),yd=o("5MJfC"),nh=o("gTzCU");var tR=function(){"use strict";function e(){(0,u.default)(this,e)}return(0,c.default)(e,[{key:"provideSelectionRanges",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=[];n.push(u),this._addInWordRanges(u,e,l),this._addWordRanges(u,e,l),this._addWhitespaceLine(u,e,l),u.push({range:e.getFullModelRange()})}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}},{key:"_addInWordRanges",value:function(e,t,n){var i=t.getWordAtPosition(n);if(i){for(var r=i.word,o=i.startColumn,a=n.column-o,s=a,l=a,u=0;s>=0;s--){var c=r.charCodeAt(s);if(s!==a&&(95===c||45===c))break;if((0,nh.isLowerAsciiLetter)(c)&&(0,nh.isUpperAsciiLetter)(u))break;u=c}for(s+=1;l<r.length;l++){var d=r.charCodeAt(l);if((0,nh.isUpperAsciiLetter)(d)&&(0,nh.isLowerAsciiLetter)(u))break;if(95===d||45===d)break;u=d}s<l&&e.push({range:new(0,yd.Range)(n.lineNumber,o+s,n.lineNumber,o+l)})}}},{key:"_addWordRanges",value:function(e,t,n){var i=t.getWordAtPosition(n);i&&e.push({range:new(0,yd.Range)(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}},{key:"_addWhitespaceLine",value:function(e,t,n){t.getLineLength(n.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(n.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(n.lineNumber)&&e.push({range:new(0,yd.Range)(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}]),e}(),nR=(vh=o("j9pk1"),Yc=o("2NkmB"),function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))}),iR=function(){"use strict";function e(t,n){(0,u.default)(this,e),this.index=t,this.ranges=n}return(0,c.default)(e,[{key:"mov",value:function(t){var n=this.index+(t?1:-1);if(n<0||n>=this.ranges.length)return this;var i=new e(n,this.ranges);return i.ranges[n].equalsRange(this.ranges[this.index])?i.mov(t):i}}]),e}(),rR=function(){"use strict";function e(t){(0,u.default)(this,e),this._editor=t,this._ignoreSelection=!1}return(0,c.default)(e,[{key:"dispose",value:function(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}},{key:"run",value:function(e){return nR(this,void 0,void 0,n(l).mark((function t(){var i,r,o,a;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this,this._editor.hasModel()){t.next=3;break}return t.abrupt("return");case 3:if(r=this._editor.getSelections(),o=this._editor.getModel(),lh.SelectionRangeRegistry.has(o)){t.next=7;break}return t.abrupt("return");case 7:if(this._state){t.next=10;break}return t.next=10,lR(o,r.map((function(e){return e.getPosition()})),this._editor.getOption(102),eh.CancellationToken.None).then((function(e){var t,n=function(t){e[t]=e[t].filter((function(e){return e.containsPosition(r[t].getStartPosition())&&e.containsPosition(r[t].getEndPosition())})),e[t].unshift(r[t])};if(oh.isNonEmptyArray(e)&&e.length===r.length&&i._editor.hasModel()&&oh.equals(i._editor.getSelections(),r,(function(e,t){return e.equalsSelection(t)}))){for(var o=0;o<e.length;o++)n(o);i._state=e.map((function(e){return new iR(0,e)})),null===(t=i._selectionListener)||void 0===t||t.dispose(),i._selectionListener=i._editor.onDidChangeCursorPosition((function(){var e;i._ignoreSelection||(null===(e=i._selectionListener)||void 0===e||e.dispose(),i._state=void 0)}))}}));case 10:if(this._state){t.next=12;break}return t.abrupt("return");case 12:this._state=this._state.map((function(t){return t.mov(e)})),a=this._state.map((function(e){return Gc.Selection.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())})),this._ignoreSelection=!0;try{this._editor.setSelections(a)}finally{this._ignoreSelection=!1}case 16:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();rR.ID="editor.contrib.smartSelectController";var oR=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this,n))._forward=e,r}return(0,c.default)(i,[{key:"run",value:function(e,t){return nR(this,void 0,void 0,n(l).mark((function e(){var i;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=rR.get(t))){e.next=4;break}return e.next=4,i.run(this._forward);case 4:case"end":return e.stop()}}),e,this)})))}}]),i}(qc.EditorAction),aR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:"editor.action.smartSelect.expand",label:Jc.localize("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"1_basic",title:Jc.localize({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}return n}(oR);vh.CommandsRegistry.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var sR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:"editor.action.smartSelect.shrink",label:Jc.localize("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:xd.MenuId.MenubarSelectionMenu,group:"1_basic",title:Jc.localize({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}return n}(oR);function lR(e,t,i,r){return nR(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c,d,h,f,p,g;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(1===(a=lh.SelectionRangeRegistry.all(e)).length&&a.unshift(new(0,vb.BracketSelectionRangeProvider)),s=[],u=[],c=!0,d=!1,h=void 0,n.prev=5,f=a[Symbol.iterator]();!(c=(p=f.next()).done);c=!0)g=p.value,s.push(Promise.resolve(g.provideSelectionRanges(e,t,r)).then((function(e){if(oh.isNonEmptyArray(e)&&e.length===t.length)for(var n=0;n<t.length;n++){u[n]||(u[n]=[]);var i=!0,r=!1,o=void 0;try{for(var a,s=e[n][Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;yd.Range.isIRange(l.range)&&yd.Range.containsPosition(l.range,t[n])&&u[n].push(yd.Range.lift(l.range))}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}}}),Yc.onUnexpectedExternalError));n.next=13;break;case 9:n.prev=9,n.t0=n.catch(5),d=!0,h=n.t0;case 13:n.prev=13,n.prev=14,c||null==f.return||f.return();case 16:if(n.prev=16,!d){n.next=19;break}throw h;case 19:return n.finish(16);case 20:return n.finish(13);case 21:return n.next=23,Promise.all(s);case 23:return n.abrupt("return",u.map((function(t){if(0===t.length)return[];t.sort((function(e,t){return md.Position.isBefore(e.getStartPosition(),t.getStartPosition())?1:md.Position.isBefore(t.getStartPosition(),e.getStartPosition())||md.Position.isBefore(e.getEndPosition(),t.getEndPosition())?-1:md.Position.isBefore(t.getEndPosition(),e.getEndPosition())?1:0}));var n,r=[],o=!0,a=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;(!n||yd.Range.containsRange(c,n)&&!yd.Range.equalsRange(c,n))&&(r.push(c),n=c)}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}if(!i.selectLeadingAndTrailingWhitespace)return r;for(var d=[r[0]],h=1;h<r.length;h++){var f=r[h-1],p=r[h];if(p.startLineNumber!==f.startLineNumber||p.endLineNumber!==f.endLineNumber){var g=new(0,yd.Range)(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));g.containsRange(f)&&!g.equalsRange(f)&&p.containsRange(g)&&!p.equalsRange(g)&&d.push(g);var v=new(0,yd.Range)(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));v.containsRange(f)&&!v.equalsRange(g)&&p.containsRange(v)&&!p.equalsRange(v)&&d.push(v)}d.push(p)}return d})));case 24:case"end":return n.stop()}}),o,null,[[5,9,13,21],[14,,16,20]])})))}(0,qc.registerEditorContribution)(rR.ID,rR),(0,qc.registerEditorAction)(aR),(0,qc.registerEditorAction)(sR),lh.SelectionRangeRegistry.register("*",new tR),(0,qc.registerModelCommand)("_executeSelectionRangeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=(0,Ki.default)(n,1),o=r[0];return lR(e,o,{selectLeadingAndTrailingWhitespace:!0},eh.CancellationToken.None)}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),qc=o("THDAR"),Ty=o("dwv6L");var uR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.forceRetokenize",label:Jc.localize("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){if(t.hasModel()){var n=t.getModel();n.resetTokenization();var i=new(0,Ty.StopWatch)(!0);n.forceTokenization(n.getLineCount()),i.stop(),console.log("tokenization took ".concat(i.elapsed()))}}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(uR);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),od=o("3xPLG"),qc=o("THDAR");var cR=o("jrTiH"),dR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:n.ID,label:Jc.localize({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),alias:"Toggle Tab Key Moves Focus",precondition:void 0,kbOpts:{kbExpr:null,primary:2091,mac:{primary:1323},weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=!cR.TabFocus.getTabFocusMode();cR.TabFocus.setTabFocusMode(n),n?(0,od.alert)(Jc.localize("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,od.alert)(Jc.localize("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}]),n}(qc.EditorAction);dR.ID="editor.action.toggleTabFocusMode",(0,qc.registerEditorAction)(dR);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),vd=o("dXCvL"),qc=o("THDAR"),jd=o("1NzEb");var hR=o("5xzYa"),fR=(mf=o("L9zbH"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),pR=function(e,t){return function(n,i){t(n,i,e)}},gR=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},vR="ignoreUnusualLineTerminators";function mR(e,t,n){e.setModelProperty(t.uri,vR,n)}function yR(e,t){return e.getModelProperty(t.uri,vR)}var bR=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r){var o;return(0,u.default)(this,i),(o=t.call(this))._editor=e,o._dialogService=n,o._codeEditorService=r,o._config=o._editor.getOption(113),o._register(o._editor.onDidChangeConfiguration((function(e){e.hasChanged(113)&&(o._config=o._editor.getOption(113),o._checkForUnusualLineTerminators())}))),o._register(o._editor.onDidChangeModel((function(){o._checkForUnusualLineTerminators()}))),o._register(o._editor.onDidChangeModelContent((function(e){e.isUndoing||o._checkForUnusualLineTerminators()}))),o}return(0,c.default)(i,[{key:"_checkForUnusualLineTerminators",value:function(){return gR(this,void 0,void 0,n(l).mark((function e(){var t;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("off"!==this._config){e.next=2;break}return e.abrupt("return");case 2:if(this._editor.hasModel()){e.next=4;break}return e.abrupt("return");case 4:if((t=this._editor.getModel()).mightContainUnusualLineTerminators()){e.next=7;break}return e.abrupt("return");case 7:if(!0!==yR(this._codeEditorService,t)){e.next=10;break}return e.abrupt("return");case 10:if(!this._editor.getOption(80)){e.next=12;break}return e.abrupt("return");case 12:if("auto"!==this._config){e.next=15;break}return t.removeUnusualLineTerminators(this._editor.getSelections()),e.abrupt("return");case 15:return e.next=17,this._dialogService.confirm({title:Jc.localize("unusualLineTerminators.title","Unusual Line Terminators"),message:Jc.localize("unusualLineTerminators.message","Detected unusual line terminators"),detail:Jc.localize("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,mf.basename)(t.uri)),primaryButton:Jc.localize("unusualLineTerminators.fix","Remove Unusual Line Terminators"),secondaryButton:Jc.localize("unusualLineTerminators.ignore","Ignore")});case 17:if(e.sent.confirmed){e.next=21;break}return mR(this._codeEditorService,t,!0),e.abrupt("return");case 21:t.removeUnusualLineTerminators(this._editor.getSelections());case 22:case"end":return e.stop()}}),e,this)})))}}]),i}(vd.Disposable);bR.ID="editor.contrib.unusualLineTerminatorsDetector",bR=fR([pR(1,hR.IDialogService),pR(2,jd.ICodeEditorService)],bR),(0,qc.registerEditorContribution)(bR.ID,bR);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),gd=o("hJucn"),vd=o("dXCvL"),qc=o("THDAR"),lh=o("chpjt"),uh=o("gPDld");var _R=o("bzfJJ"),wR=(Cd=o("4ET02"),mp=o("fnqF9"),o("6Ojaw")),kR=o("cinbb"),CR=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},xR=function(e,t){return function(n,i){t(n,i,e)}},SR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this))._modelService=i,a._themeService=r,a._configurationService=o,a._editor=e,a._tokenizeViewport=new(0,gd.RunOnceScheduler)((function(){return a._tokenizeViewportNow()}),100),a._outstandingRequests=[],a._register(a._editor.onDidScrollChange((function(){a._tokenizeViewport.schedule()}))),a._register(a._editor.onDidChangeModel((function(){a._cancelAll(),a._tokenizeViewport.schedule()}))),a._register(a._editor.onDidChangeModelContent((function(e){a._cancelAll(),a._tokenizeViewport.schedule()}))),a._register(lh.DocumentRangeSemanticTokensProviderRegistry.onDidChange((function(){a._cancelAll(),a._tokenizeViewport.schedule()}))),a._register(a._configurationService.onDidChangeConfiguration((function(e){e.affectsConfiguration(wR.SEMANTIC_HIGHLIGHTING_SETTING_ID)&&(a._cancelAll(),a._tokenizeViewport.schedule())}))),a._register(a._themeService.onDidColorThemeChange((function(){a._cancelAll(),a._tokenizeViewport.schedule()}))),a}return(0,c.default)(n,[{key:"_cancelAll",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._outstandingRequests[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){i.value.cancel()}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}this._outstandingRequests=[]}},{key:"_removeOutstandingRequest",value:function(e){for(var t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}},{key:"_tokenizeViewportNow",value:function(){var e=this;if(this._editor.hasModel()){var t=this._editor.getModel();if(!t.hasCompleteSemanticTokens())if((0,wR.isSemanticColoringEnabled)(t,this._themeService,this._configurationService)){var n=(0,kR.getDocumentRangeSemanticTokensProvider)(t);if(n){var i=this._modelService.getSemanticTokensProviderStyling(n),r=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(r.map((function(r){return e._requestRange(t,r,n,i)})))}else t.hasSomeSemanticTokens()&&t.setSemanticTokens(null,!1)}else t.hasSomeSemanticTokens()&&t.setSemanticTokens(null,!1)}}},{key:"_requestRange",value:function(e,t,n,i){var r=this,o=e.getVersionId(),a=(0,gd.createCancelablePromise)((function(i){return Promise.resolve(n.provideDocumentRangeSemanticTokens(e,t,i))}));return a.then((function(n){n&&!e.isDisposed()&&e.getVersionId()===o&&e.setPartialSemanticTokens(t,(0,_R.toMultilineTokens2)(n,i,e.getLanguageIdentifier()))})).then((function(){return r._removeOutstandingRequest(a)}),(function(){return r._removeOutstandingRequest(a)})),a}}]),n}(vd.Disposable);SR.ID="editor.contrib.viewportSemanticTokens",SR=CR([xR(1,uh.IModelService),xR(2,Cd.IThemeService),xR(3,mp.IConfigurationService)],SR),(0,qc.registerEditorContribution)(SR.ID,SR);u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),oh=o("2ZBuK"),gd=o("hJucn"),eh=o("j6sHb"),Yc=o("2NkmB"),vd=o("dXCvL"),qc=o("THDAR"),yd=o("5MJfC"),Xc=o("5cDyY"),bd=o("7wGTu"),_d=o("60ELr"),lh=o("chpjt"),$c=o("efZ3W"),kd=o("ht8QC"),Cd=o("4ET02"),od=o("3xPLG");var ER=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},DR=function(e,t){return function(n,i){t(n,i,e)}},AR=(0,kd.registerColor)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hc:null},Jc.localize("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0),IR=(0,kd.registerColor)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hc:null},Jc.localize("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),RR=(0,kd.registerColor)("editor.wordHighlightBorder",{light:null,dark:null,hc:kd.activeContrastBorder},Jc.localize("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable.")),TR=(0,kd.registerColor)("editor.wordHighlightStrongBorder",{light:null,dark:null,hc:kd.activeContrastBorder},Jc.localize("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable.")),LR=(0,kd.registerColor)("editorOverviewRuler.wordHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hc:"#A0A0A0CC"},Jc.localize("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),MR=(0,kd.registerColor)("editorOverviewRuler.wordHighlightStrongForeground",{dark:"#C0A0C0CC",light:"#C0A0C0CC",hc:"#C0A0C0CC"},Jc.localize("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),NR=new(0,$c.RawContextKey)("hasWordHighlights",!1);function PR(e,t,n){var i=lh.DocumentHighlightProviderRegistry.ordered(e);return(0,gd.first)(i.map((function(i){return function(){return Promise.resolve(i.provideDocumentHighlights(e,t,n)).then(void 0,Yc.onUnexpectedExternalError)}})),oh.isNonEmptyArray)}var OR=function(){"use strict";function e(t,n,i){var r=this;(0,u.default)(this,e),this._wordRange=this._getCurrentWordRange(t,n),this.result=(0,gd.createCancelablePromise)((function(e){return r._compute(t,n,i,e)}))}return(0,c.default)(e,[{key:"_getCurrentWordRange",value:function(e,t){var n=e.getWordAtPosition(t.getPosition());return n?new(0,yd.Range)(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}},{key:"isValid",value:function(e,t,n){for(var i=t.startLineNumber,r=t.startColumn,o=t.endColumn,a=this._getCurrentWordRange(e,t),s=Boolean(this._wordRange&&this._wordRange.equalsRange(a)),l=0,u=n.length;!s&&l<u;l++){var c=e.getDecorationRange(n[l]);c&&c.startLineNumber===i&&c.startColumn<=r&&c.endColumn>=o&&(s=!0)}return s}},{key:"cancel",value:function(){this.result.cancel()}}]),e}(),FR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_compute",value:function(e,t,n,i){return PR(e,t.getPosition(),i).then((function(e){return e||[]}))}}]),n}(OR),BR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this,e,i,r))._selectionIsEmpty=i.isEmpty(),o}return(0,c.default)(n,[{key:"_compute",value:function(e,t,n,i){return(0,gd.timeout)(250,i).then((function(){if(!t.isEmpty())return[];var i=e.getWordAtPosition(t.getPosition());return!i||i.word.length>1e3?[]:e.findMatches(i.word,!0,!1,!0,n,!1).map((function(e){return{range:e.range,kind:lh.DocumentHighlightKind.Text}}))}))}},{key:"isValid",value:function(e,t,i){var r=t.isEmpty();return this._selectionIsEmpty===r&&(0,zi.default)((0,Wi.default)(n.prototype),"isValid",this).call(this,e,t,i)}}]),n}(OR);(0,qc.registerModelAndPositionCommand)("_executeDocumentHighlights",(function(e,t){return PR(e,t,eh.CancellationToken.None)}));var HR=function(){"use strict";function e(t,n){var i=this;(0,u.default)(this,e),this.toUnhook=new(0,vd.DisposableStore),this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=[],this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=t,this._hasWordHighlights=NR.bindTo(n),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(71),this.model=this.editor.getModel(),this.toUnhook.add(t.onDidChangeCursorPosition((function(e){i._ignorePositionChangeEvent||i.occurrencesHighlight&&i._onPositionChanged(e)}))),this.toUnhook.add(t.onDidChangeModelContent((function(e){i._stopAll()}))),this.toUnhook.add(t.onDidChangeConfiguration((function(e){var t=i.editor.getOption(71);i.occurrencesHighlight!==t&&(i.occurrencesHighlight=t,i._stopAll())}))),this._decorationIds=[],this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1}return(0,c.default)(e,[{key:"hasDecorations",value:function(){return this._decorationIds.length>0}},{key:"restore",value:function(){this.occurrencesHighlight&&this._run()}},{key:"_getSortedHighlights",value:function(){var e=this;return oh.coalesce(this._decorationIds.map((function(t){return e.model.getDecorationRange(t)})).sort(yd.Range.compareRangesUsingStarts))}},{key:"moveNext",value:function(){var e=this,t=this._getSortedHighlights(),n=(t.findIndex((function(t){return t.containsPosition(e.editor.getPosition())}))+1)%t.length,i=t[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);var r=this._getWord();if(r){var o=this.editor.getModel().getLineContent(i.startLineNumber);(0,od.alert)("".concat(o,", ").concat(n+1," of ").concat(t.length," for '").concat(r.word,"'"))}}finally{this._ignorePositionChangeEvent=!1}}},{key:"moveBack",value:function(){var e=this,t=this._getSortedHighlights(),n=(t.findIndex((function(t){return t.containsPosition(e.editor.getPosition())}))-1+t.length)%t.length,i=t[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);var r=this._getWord();if(r){var o=this.editor.getModel().getLineContent(i.startLineNumber);(0,od.alert)("".concat(o,", ").concat(n+1," of ").concat(t.length," for '").concat(r.word,"'"))}}finally{this._ignorePositionChangeEvent=!1}}},{key:"_removeDecorations",value:function(){this._decorationIds.length>0&&(this._decorationIds=this.editor.deltaDecorations(this._decorationIds,[]),this._hasWordHighlights.set(!1))}},{key:"_stopAll",value:function(){this._removeDecorations(),-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),null!==this.workerRequest&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}},{key:"_onPositionChanged",value:function(e){this.occurrencesHighlight&&3===e.reason?this._run():this._stopAll()}},{key:"_getWord",value:function(){var e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.getWordAtPosition({lineNumber:t,column:n})}},{key:"_run",value:function(){var e=this,t=this.editor.getSelection();if(t.startLineNumber===t.endLineNumber){var n=t.startColumn,i=t.endColumn,r=this._getWord();if(!r||r.startColumn>n||r.endColumn<i)this._stopAll();else{var o,a,s,l=this.workerRequest&&this.workerRequest.isValid(this.model,t,this._decorationIds);if(this.lastCursorPositionChangeTime=(new Date).getTime(),l)this.workerRequestCompleted&&-1!==this.renderDecorationsTimer&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();var u=++this.workerRequestTokenId;this.workerRequestCompleted=!1,this.workerRequest=(o=this.model,a=this.editor.getSelection(),s=this.editor.getOption(116),lh.DocumentHighlightProviderRegistry.has(o)?new FR(o,a,s):new BR(o,a,s)),this.workerRequest.result.then((function(t){u===e.workerRequestTokenId&&(e.workerRequestCompleted=!0,e.workerRequestValue=t||[],e._beginRenderDecorations())}),Yc.onUnexpectedError)}}}else this._stopAll()}},{key:"_beginRenderDecorations",value:function(){var e=this,t=(new Date).getTime(),n=this.lastCursorPositionChangeTime+250;t>=n?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout((function(){e.renderDecorations()}),n-t)}},{key:"renderDecorations",value:function(){this.renderDecorationsTimer=-1;var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this.workerRequestValue[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.range&&t.push({range:s.range,options:e._getDecorationOptions(s.kind)})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}this._decorationIds=this.editor.deltaDecorations(this._decorationIds,t),this._hasWordHighlights.set(this.hasDecorations())}},{key:"dispose",value:function(){this._stopAll(),this.toUnhook.dispose()}}],[{key:"_getDecorationOptions",value:function(e){return e===lh.DocumentHighlightKind.Write?this._WRITE_OPTIONS:e===lh.DocumentHighlightKind.Text?this._TEXT_OPTIONS:this._REGULAR_OPTIONS}}]),e}();HR._WRITE_OPTIONS=_d.ModelDecorationOptions.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,Cd.themeColorFromId)(MR),position:bd.OverviewRulerLane.Center}}),HR._TEXT_OPTIONS=_d.ModelDecorationOptions.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,Cd.themeColorFromId)(kd.overviewRulerSelectionHighlightForeground),position:bd.OverviewRulerLane.Center}}),HR._REGULAR_OPTIONS=_d.ModelDecorationOptions.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,Cd.themeColorFromId)(LR),position:bd.OverviewRulerLane.Center}});var jR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;(0,u.default)(this,n),(r=t.call(this)).wordHighlighter=null;var o=function(){e.hasModel()&&(r.wordHighlighter=new HR(e,i))};return r._register(e.onDidChangeModel((function(e){r.wordHighlighter&&(r.wordHighlighter.dispose(),r.wordHighlighter=null),o()}))),o(),r}return(0,c.default)(n,[{key:"saveViewState",value:function(){return!(!this.wordHighlighter||!this.wordHighlighter.hasDecorations())}},{key:"moveNext",value:function(){this.wordHighlighter&&this.wordHighlighter.moveNext()}},{key:"moveBack",value:function(){this.wordHighlighter&&this.wordHighlighter.moveBack()}},{key:"restoreViewState",value:function(e){this.wordHighlighter&&e&&this.wordHighlighter.restore()}},{key:"dispose",value:function(){this.wordHighlighter&&(this.wordHighlighter.dispose(),this.wordHighlighter=null),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);jR.ID="editor.contrib.wordHighlighter",jR=ER([DR(1,$c.IContextKeyService)],jR);var zR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this,i))._isNext=e,r}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=jR.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}]),n}(qc.EditorAction),WR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!0,{id:"editor.action.wordHighlight.next",label:Jc.localize("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:NR,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:65,weight:100}})}return n}(zR),UR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,!1,{id:"editor.action.wordHighlight.prev",label:Jc.localize("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:NR,kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:1089,weight:100}})}return n}(zR),VR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.wordHighlight.trigger",label:Jc.localize("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:NR.toNegated(),kbOpts:{kbExpr:Xc.EditorContextKeys.editorTextFocus,primary:0,weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){var i=jR.get(t);i&&i.restoreViewState(!0)}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(jR.ID,jR),(0,qc.registerEditorAction)(WR),(0,qc.registerEditorAction)(UR),(0,qc.registerEditorAction)(VR),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorSelectionHighlight);n&&(t.addRule(".monaco-editor .focused .selectionHighlight { background-color: ".concat(n,"; }")),t.addRule(".monaco-editor .selectionHighlight { background-color: ".concat(n.transparent(.5),"; }")));var i=e.getColor(AR);i&&t.addRule(".monaco-editor .wordHighlight { background-color: ".concat(i,"; }"));var r=e.getColor(IR);r&&t.addRule(".monaco-editor .wordHighlightStrong { background-color: ".concat(r,"; }"));var o=e.getColor(kd.editorSelectionHighlightBorder);o&&t.addRule(".monaco-editor .selectionHighlight { border: 1px ".concat("hc"===e.type?"dotted":"solid"," ").concat(o,"; box-sizing: border-box; }"));var a=e.getColor(RR);a&&t.addRule(".monaco-editor .wordHighlight { border: 1px ".concat("hc"===e.type?"dashed":"solid"," ").concat(a,"; box-sizing: border-box; }"));var s=e.getColor(TR);s&&t.addRule(".monaco-editor .wordHighlightStrong { border: 1px ".concat("hc"===e.type?"dashed":"solid"," ").concat(s,"; box-sizing: border-box; }"))}));u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Jc=o("faA3E"),qc=o("THDAR"),Nd=o("jxlHx"),dm=o("4gyIT");var KR=o("guGBL"),qR=o("a41cC"),JR=(md=o("kBBF2"),yd=o("5MJfC"),Gc=o("3WP4Y"),Xc=o("5cDyY"),Vp=o("eUW5n"),$c=o("efZ3W"),sm=o("3HfO4"),sy=o("k4Xpx"),o("8Q2LF")),XR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this,e))._inSelectionMode=e.inSelectionMode,i._wordNavigationType=e.wordNavigationType,i}return(0,c.default)(n,[{key:"runEditorCommand",value:function(e,t,n){var i=this;if(t.hasModel()){var r=(0,qR.getMapForWordSeparators)(t.getOption(116)),o=t.getModel(),a=t.getSelections().map((function(e){var t=new(0,md.Position)(e.positionLineNumber,e.positionColumn),n=i._move(r,o,t,i._wordNavigationType);return i._moveTo(e,n,i._inSelectionMode)}));if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,a.map((function(e){return dm.CursorState.fromModelSelection(e)}))),1===a.length){var s=new(0,md.Position)(a[0].positionLineNumber,a[0].positionColumn);t.revealPosition(s,0)}}}},{key:"_moveTo",value:function(e,t,n){return n?new(0,Gc.Selection)(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new(0,Gc.Selection)(t.lineNumber,t.column,t.lineNumber,t.column)}}]),n}(qc.EditorCommand),GR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_move",value:function(e,t,n,i){return KR.WordOperations.moveWordLeft(e,t,n,i)}}]),n}(XR),ZR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_move",value:function(e,t,n,i){return KR.WordOperations.moveWordRight(e,t,n,i)}}]),n}(XR),$R=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}return n}(GR),YR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}return n}(GR),QR=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,null===(e=$c.ContextKeyExpr.and(Vp.CONTEXT_ACCESSIBILITY_MODE_ENABLED,JR.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}return n}(GR),eT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}return n}(GR),tT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}return n}(GR),nT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,null===(e=$c.ContextKeyExpr.and(Vp.CONTEXT_ACCESSIBILITY_MODE_ENABLED,JR.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}return n}(GR),iT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}return(0,c.default)(n,[{key:"_move",value:function(e,t,i,r){return(0,zi.default)((0,Wi.default)(n.prototype),"_move",this).call(this,(0,qR.getMapForWordSeparators)(sm.EditorOptions.wordSeparators.defaultValue),t,i,r)}}]),n}(GR),rT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}return(0,c.default)(n,[{key:"_move",value:function(e,t,i,r){return(0,zi.default)((0,Wi.default)(n.prototype),"_move",this).call(this,(0,qR.getMapForWordSeparators)(sm.EditorOptions.wordSeparators.defaultValue),t,i,r)}}]),n}(GR),oT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}return n}(ZR),aT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,null===(e=$c.ContextKeyExpr.and(Vp.CONTEXT_ACCESSIBILITY_MODE_ENABLED,JR.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}return n}(ZR),sT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}return n}(ZR),lT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}return n}(ZR),uT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:$c.ContextKeyExpr.and(Xc.EditorContextKeys.textInputFocus,null===(e=$c.ContextKeyExpr.and(Vp.CONTEXT_ACCESSIBILITY_MODE_ENABLED,JR.IsWindowsContext))||void 0===e?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}return n}(ZR),cT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}return n}(ZR),dT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}return(0,c.default)(n,[{key:"_move",value:function(e,t,i,r){return(0,zi.default)((0,Wi.default)(n.prototype),"_move",this).call(this,(0,qR.getMapForWordSeparators)(sm.EditorOptions.wordSeparators.defaultValue),t,i,r)}}]),n}(ZR),hT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}return(0,c.default)(n,[{key:"_move",value:function(e,t,i,r){return(0,zi.default)((0,Wi.default)(n.prototype),"_move",this).call(this,(0,qR.getMapForWordSeparators)(sm.EditorOptions.wordSeparators.defaultValue),t,i,r)}}]),n}(ZR),fT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this,e))._whitespaceHeuristics=e.whitespaceHeuristics,i._wordNavigationType=e.wordNavigationType,i}return(0,c.default)(n,[{key:"runEditorCommand",value:function(e,t,n){var i=this;if(t.hasModel()){var r=(0,qR.getMapForWordSeparators)(t.getOption(116)),o=t.getModel(),a=t.getSelections(),s=t.getOption(5),l=t.getOption(8),u=sy.LanguageConfigurationRegistry.getAutoClosingPairs(o.getLanguageIdentifier().id),c=t._getViewModel(),d=a.map((function(e){var n=i._delete({wordSeparators:r,model:o,selection:e,whitespaceHeuristics:i._whitespaceHeuristics,autoClosingDelete:t.getOption(6),autoClosingBrackets:s,autoClosingQuotes:l,autoClosingPairs:u,autoClosedCharacters:c.getCursorAutoClosedCharacters()},i._wordNavigationType);return new(0,Nd.ReplaceCommand)(n,"")}));t.pushUndoStop(),t.executeCommands(this.id,d),t.pushUndoStop()}}}]),n}(qc.EditorCommand),pT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_delete",value:function(e,t){var n=KR.WordOperations.deleteWordLeft(e,t);return n||new(0,yd.Range)(1,1,1,1)}}]),n}(fT),gT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_delete",value:function(e,t){var n=KR.WordOperations.deleteWordRight(e,t);if(n)return n;var i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return new(0,yd.Range)(i,r,i,r)}}]),n}(fT),vT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:Xc.EditorContextKeys.writable})}return n}(pT),mT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:Xc.EditorContextKeys.writable})}return n}(pT),yT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}return n}(pT),bT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:Xc.EditorContextKeys.writable})}return n}(gT),_T=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:Xc.EditorContextKeys.writable})}return n}(gT),wT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}return n}(gT),kT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"deleteInsideWord",precondition:Xc.EditorContextKeys.writable,label:Jc.localize("deleteInsideWord","Delete Word"),alias:"Delete Word"})}return(0,c.default)(n,[{key:"run",value:function(e,t,n){if(t.hasModel()){var i=(0,qR.getMapForWordSeparators)(t.getOption(116)),r=t.getModel(),o=t.getSelections().map((function(e){var t=KR.WordOperations.deleteInsideWord(i,r,e);return new(0,Nd.ReplaceCommand)(t,"")}));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}}]),n}(qc.EditorAction);(0,qc.registerEditorCommand)(new $R),(0,qc.registerEditorCommand)(new YR),(0,qc.registerEditorCommand)(new QR),(0,qc.registerEditorCommand)(new eT),(0,qc.registerEditorCommand)(new tT),(0,qc.registerEditorCommand)(new nT),(0,qc.registerEditorCommand)(new oT),(0,qc.registerEditorCommand)(new aT),(0,qc.registerEditorCommand)(new sT),(0,qc.registerEditorCommand)(new lT),(0,qc.registerEditorCommand)(new uT),(0,qc.registerEditorCommand)(new cT),(0,qc.registerEditorCommand)(new iT),(0,qc.registerEditorCommand)(new rT),(0,qc.registerEditorCommand)(new dT),(0,qc.registerEditorCommand)(new hT),(0,qc.registerEditorCommand)(new vT),(0,qc.registerEditorCommand)(new mT),(0,qc.registerEditorCommand)(new yT),(0,qc.registerEditorCommand)(new bT),(0,qc.registerEditorCommand)(new _T),(0,qc.registerEditorCommand)(new wT),(0,qc.registerEditorAction)(kT);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),qc=o("THDAR"),KR=o("guGBL"),yd=o("5MJfC"),Xc=o("5cDyY"),vh=o("j9pk1");var CT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:769},weight:100}})}return(0,c.default)(n,[{key:"_delete",value:function(e,t){var n=KR.WordPartOperations.deleteWordPartLeft(e);return n||new(0,yd.Range)(1,1,1,1)}}]),n}(fT),xT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:Xc.EditorContextKeys.writable,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:788},weight:100}})}return(0,c.default)(n,[{key:"_delete",value:function(e,t){var n=KR.WordPartOperations.deleteWordPartRight(e);if(n)return n;var i=e.model.getLineCount(),r=e.model.getLineMaxColumn(i);return new(0,yd.Range)(i,r,i,r)}}]),n}(fT),ST=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_move",value:function(e,t,n,i){return KR.WordPartOperations.moveWordPartLeft(e,t,n)}}]),n}(XR),ET=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:783},weight:100}})}return n}(ST);vh.CommandsRegistry.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");var DT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}return n}(ST);vh.CommandsRegistry.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");var AT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,c.default)(n,[{key:"_move",value:function(e,t,n,i){return KR.WordPartOperations.moveWordPartRight(e,t,n)}}]),n}(XR),IT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:785},weight:100}})}return n}(AT),RT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}return n}(AT);(0,qc.registerEditorCommand)(new CT),(0,qc.registerEditorCommand)(new xT),(0,qc.registerEditorCommand)(new ET),(0,qc.registerEditorCommand)(new DT),(0,qc.registerEditorCommand)(new IT),(0,qc.registerEditorCommand)(new RT),o("kPmRS"),o("aGuK0");Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33");var TT=o("cL2uN"),LT=(Lv=o("jQtII"),od=o("3xPLG"),Sp=o("c9lKY"),vd=o("dXCvL"),Bd=o("5DBhW"),nh=o("gTzCU"),ah=o("iPPVB"),qc=o("THDAR"),Xc=o("5cDyY"),$c=o("efZ3W"),Oh=o("hm5an"),zh=o("5H40S"),Lp=o("j1CnT"),kd=o("ht8QC"),Cd=o("4ET02"),o("kPmRS")),MT=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},NT=function(e,t){return function(n,i){t(n,i,e)}},PT=new(0,$c.RawContextKey)("accessibilityHelpWidgetVisible",!1),OT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this))._editor=e,r._widget=r._register(i.createInstance(FT,r._editor)),r}return(0,c.default)(n,[{key:"show",value:function(){this._widget.show()}},{key:"hide",value:function(){this._widget.hide()}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);OT.ID="editor.contrib.accessibilityHelpController",OT=MT([NT(1,Oh.IInstantiationService)],OT);var FT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o){var a;return(0,u.default)(this,n),(a=t.call(this))._contextKeyService=i,a._keybindingService=r,a._openerService=o,a._editor=e,a._isVisibleKey=PT.bindTo(a._contextKeyService),a._domNode=(0,TT.createFastDomNode)(document.createElement("div")),a._domNode.setClassName("accessibilityHelpWidget"),a._domNode.setDisplay("none"),a._domNode.setAttribute("role","dialog"),a._domNode.setAttribute("aria-hidden","true"),a._contentDomNode=(0,TT.createFastDomNode)(document.createElement("div")),a._contentDomNode.setAttribute("role","document"),a._domNode.appendChild(a._contentDomNode),a._isVisible=!1,a._register(a._editor.onDidLayoutChange((function(){a._isVisible&&a._layout()}))),a._register(Bh.addStandardDisposableListener(a._contentDomNode.domNode,"keydown",(function(e){if(a._isVisible&&(e.equals(2083)&&((0,od.alert)(LT.AccessibilityHelpNLS.emergencyConfOn),a._editor.updateOptions({accessibilitySupport:"on"}),Bh.clearNode(a._contentDomNode.domNode),a._buildContent(),a._contentDomNode.domNode.focus(),e.preventDefault(),e.stopPropagation()),e.equals(2086))){(0,od.alert)(LT.AccessibilityHelpNLS.openingDocs);var t=a._editor.getRawOptions().accessibilityHelpUrl;void 0===t&&(t="https://go.microsoft.com/fwlink/?linkid=852450"),a._openerService.open(ah.URI.parse(t)),e.preventDefault(),e.stopPropagation()}}))),a.onblur(a._contentDomNode.domNode,(function(){a.hide()})),a._editor.addOverlayWidget((0,Hi.default)(a)),a}return(0,c.default)(n,[{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._domNode.domNode}},{key:"getPosition",value:function(){return{preference:null}}},{key:"show",value:function(){this._isVisible||(this._isVisible=!0,this._isVisibleKey.set(!0),this._layout(),this._domNode.setDisplay("block"),this._domNode.setAttribute("aria-hidden","false"),this._contentDomNode.domNode.tabIndex=0,this._buildContent(),this._contentDomNode.domNode.focus())}},{key:"_descriptionForCommand",value:function(e,t,n){var i=this._keybindingService.lookupKeybinding(e);return i?nh.format(t,i.getAriaLabel()):nh.format(n,e)}},{key:"_buildContent",value:function(){var e=this._editor.getOptions(),t=this._editor.getSelections(),n=0;if(t){var i=this._editor.getModel();i&&t.forEach((function(e){n+=i.getValueLengthInRange(e)}))}var r=function(e,t){return e&&0!==e.length?1===e.length?t?nh.format(LT.AccessibilityHelpNLS.singleSelectionRange,e[0].positionLineNumber,e[0].positionColumn,t):nh.format(LT.AccessibilityHelpNLS.singleSelection,e[0].positionLineNumber,e[0].positionColumn):t?nh.format(LT.AccessibilityHelpNLS.multiSelectionRange,e.length,t):e.length>0?nh.format(LT.AccessibilityHelpNLS.multiSelection,e.length):"":LT.AccessibilityHelpNLS.noSelection}(t,n);e.get(53)?e.get(80)?r+=LT.AccessibilityHelpNLS.readonlyDiffEditor:r+=LT.AccessibilityHelpNLS.editableDiffEditor:e.get(80)?r+=LT.AccessibilityHelpNLS.readonlyEditor:r+=LT.AccessibilityHelpNLS.editableEditor;var o=Bd.isMacintosh?LT.AccessibilityHelpNLS.changeConfigToOnMac:LT.AccessibilityHelpNLS.changeConfigToOnWinLinux;switch(e.get(2)){case 0:r+="\n\n - "+o;break;case 2:r+="\n\n - "+LT.AccessibilityHelpNLS.auto_on;break;case 1:r+="\n\n - "+LT.AccessibilityHelpNLS.auto_off,r+=" "+o}e.get(129)?r+="\n\n - "+this._descriptionForCommand(dR.ID,LT.AccessibilityHelpNLS.tabFocusModeOnMsg,LT.AccessibilityHelpNLS.tabFocusModeOnMsgNoKb):r+="\n\n - "+this._descriptionForCommand(dR.ID,LT.AccessibilityHelpNLS.tabFocusModeOffMsg,LT.AccessibilityHelpNLS.tabFocusModeOffMsgNoKb),r+="\n\n - "+(Bd.isMacintosh?LT.AccessibilityHelpNLS.openDocMac:LT.AccessibilityHelpNLS.openDocWinLinux),r+="\n\n"+LT.AccessibilityHelpNLS.outroMsg,this._contentDomNode.domNode.appendChild((0,Lv.renderFormattedText)(r)),this._contentDomNode.domNode.setAttribute("aria-label",r)}},{key:"hide",value:function(){this._isVisible&&(this._isVisible=!1,this._isVisibleKey.reset(),this._domNode.setDisplay("none"),this._domNode.setAttribute("aria-hidden","true"),this._contentDomNode.domNode.tabIndex=-1,Bh.clearNode(this._contentDomNode.domNode),this._editor.focus())}},{key:"_layout",value:function(){var e=this._editor.getLayoutInfo(),t=Math.max(5,Math.min(n.WIDTH,e.width-40)),i=Math.max(5,Math.min(n.HEIGHT,e.height-40));this._domNode.setWidth(t),this._domNode.setHeight(i);var r=Math.round((e.height-i)/2);this._domNode.setTop(r);var o=Math.round((e.width-t)/2);this._domNode.setLeft(o)}}]),n}(Sp.Widget);FT.ID="editor.contrib.accessibilityHelpWidget",FT.WIDTH=500,FT.HEIGHT=300,FT=MT([NT(1,$c.IContextKeyService),NT(2,zh.IKeybindingService),NT(3,Lp.IOpenerService)],FT);var BT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.showAccessibilityHelp",label:LT.AccessibilityHelpNLS.showAccessibilityHelpAction,alias:"Show Accessibility Help",precondition:void 0,kbOpts:{primary:571,weight:100,linux:{primary:1595,secondary:[571]}}})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=OT.get(t);n&&n.show()}}]),n}(qc.EditorAction);(0,qc.registerEditorContribution)(OT.ID,OT),(0,qc.registerEditorAction)(BT);var HT=qc.EditorCommand.bindToContribution(OT.get);(0,qc.registerEditorCommand)(new HT({id:"closeAccessibilityHelp",precondition:PT,handler:function(e){return e.hide()},kbOpts:{weight:200,kbExpr:Xc.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorWidgetBackground);n&&t.addRule(".monaco-editor .accessibilityHelpWidget { background-color: ".concat(n,"; }"));var i=e.getColor(kd.editorWidgetForeground);i&&t.addRule(".monaco-editor .accessibilityHelpWidget { color: ".concat(i,"; }"));var r=e.getColor(kd.widgetShadow);r&&t.addRule(".monaco-editor .accessibilityHelpWidget { box-shadow: 0 2px 8px ".concat(r,"; }"));var o=e.getColor(kd.contrastBorder);o&&t.addRule(".monaco-editor .accessibilityHelpWidget { border: 2px solid ".concat(o,"; }"))}));Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),vd=o("dXCvL"),qc=o("THDAR"),Bd=o("5DBhW");var jT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).editor=e,i.widget=null,Bd.isIOS&&(i._register(e.onDidChangeConfiguration((function(){return i.update()}))),i.update()),i}return(0,c.default)(n,[{key:"update",value:function(){var e=!this.editor.getOption(80);!this.widget&&e?this.widget=new zT(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}},{key:"dispose",value:function(){(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this),this.widget&&(this.widget.dispose(),this.widget=null)}}]),n}(vd.Disposable);jT.ID="editor.contrib.iPadShowKeyboard";var zT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).editor=e,i._domNode=document.createElement("textarea"),i._domNode.className="iPadShowKeyboard",i._register(Bh.addDisposableListener(i._domNode,"touchstart",(function(e){i.editor.focus()}))),i._register(Bh.addDisposableListener(i._domNode,"focus",(function(e){i.editor.focus()}))),i.editor.addOverlayWidget((0,Hi.default)(i)),i}return(0,c.default)(n,[{key:"dispose",value:function(){this.editor.removeOverlayWidget(this),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:1}}}]),n}(vd.Disposable);zT.ID="editor.contrib.ShowKeyboardWidget",(0,qc.registerEditorContribution)(jT.ID,jT);Hi=o("aPYZr"),u=o("4JAgF"),c=o("9HoHC"),zi=o("aPvD2"),Wi=o("aBvOn"),d=o("gNsil"),h=o("8rJSp"),Bh=o("fTm33"),pp=o("8ta7j"),vd=o("dXCvL"),qc=o("THDAR"),lh=o("chpjt");var WT=o("7tCB1"),UT=(kp=o("8Eens"),o("1CluA")),VT=(kd=o("ht8QC"),Cd=o("4ET02"),LT=o("kPmRS"),Rh=o("kXURg"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),KT=function(e,t){return function(n,i){t(n,i,e)}},qT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r){var o;return(0,u.default)(this,n),(o=t.call(this))._editor=e,o._modeService=r,o._widget=null,o._register(o._editor.onDidChangeModel((function(e){return o.stop()}))),o._register(o._editor.onDidChangeModelLanguage((function(e){return o.stop()}))),o._register(lh.TokenizationRegistry.onDidChange((function(e){return o.stop()}))),o._register(o._editor.onKeyUp((function(e){return 9===e.keyCode&&o.stop()}))),o}return(0,c.default)(n,[{key:"dispose",value:function(){this.stop(),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"launch",value:function(){this._widget||this._editor.hasModel()&&(this._widget=new XT(this._editor,this._modeService))}},{key:"stop",value:function(){this._widget&&(this._widget.dispose(),this._widget=null)}}],[{key:"get",value:function(e){return e.getContribution(n.ID)}}]),n}(vd.Disposable);qT.ID="editor.contrib.inspectTokens",qT=VT([KT(1,UT.IStandaloneThemeService),KT(2,kp.IModeService)],qT);var JT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.inspectTokens",label:LT.InspectTokensNLS.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=qT.get(t);n&&n.launch()}}]),n}(qc.EditorAction);var XT=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r,o;return(0,u.default)(this,n),(r=t.call(this)).allowEditorOverflow=!0,r._editor=e,r._modeService=i,r._model=r._editor.getModel(),r._domNode=document.createElement("div"),r._domNode.className="tokens-inspect-widget",r._tokenizationSupport=(o=r._model.getLanguageIdentifier(),lh.TokenizationRegistry.get(o.language)||{getInitialState:function(){return WT.NULL_STATE},tokenize:function(e,t,n,i){return(0,WT.nullTokenize)(o.language,e,n,i)},tokenize2:function(e,t,n,i){return(0,WT.nullTokenize2)(o.id,e,n,i)}}),r._compute(r._editor.getPosition()),r._register(r._editor.onDidChangeCursorPosition((function(e){return r._compute(r._editor.getPosition())}))),r._editor.addContentWidget((0,Hi.default)(r)),r}return(0,c.default)(n,[{key:"dispose",value:function(){this._editor.removeContentWidget(this),(0,zi.default)((0,Wi.default)(n.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return n._ID}},{key:"_compute",value:function(e){for(var t=this._getTokensAtLine(e.lineNumber),n=0,i=t.tokens1.length-1;i>=0;i--){var r=t.tokens1[i];if(e.column-1>=r.offset){n=i;break}}for(var o=0,a=t.tokens2.length>>>1;a>=0;a--)if(e.column-1>=t.tokens2[a<<1]){o=a;break}var s=this._model.getLineContent(e.lineNumber),l="";if(n<t.tokens1.length){var u=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:s.length;l=s.substring(u,c)}(0,Bh.reset)(this._domNode,(0,Bh.$)("h2.tm-token",void 0,function(e){for(var t="",n=0,i=e.length;n<i;n++){var r=e.charCodeAt(n);switch(r){case 9:t+="";break;case 32:t+="";break;default:t+=String.fromCharCode(r)}}return t}(l),(0,Bh.$)("span.tm-token-length",void 0,"".concat(l.length," ").concat(1===l.length?"char":"chars")))),(0,Bh.append)(this._domNode,(0,Bh.$)("hr.tokens-inspect-separator",{style:"clear:both"}));var d=1+(o<<1)<t.tokens2.length?this._decodeMetadata(t.tokens2[1+(o<<1)]):null;(0,Bh.append)(this._domNode,(0,Bh.$)("table.tm-metadata-table",void 0,(0,Bh.$)("tbody",void 0,(0,Bh.$)("tr",void 0,(0,Bh.$)("td.tm-metadata-key",void 0,"language"),(0,Bh.$)("td.tm-metadata-value",void 0,"".concat(d?d.languageIdentifier.language:"-?-"))),(0,Bh.$)("tr",void 0,(0,Bh.$)("td.tm-metadata-key",void 0,"token type"),(0,Bh.$)("td.tm-metadata-value",void 0,"".concat(d?this._tokenTypeToString(d.tokenType):"-?-"))),(0,Bh.$)("tr",void 0,(0,Bh.$)("td.tm-metadata-key",void 0,"font style"),(0,Bh.$)("td.tm-metadata-value",void 0,"".concat(d?this._fontStyleToString(d.fontStyle):"-?-"))),(0,Bh.$)("tr",void 0,(0,Bh.$)("td.tm-metadata-key",void 0,"foreground"),(0,Bh.$)("td.tm-metadata-value",void 0,"".concat(d?pp.Color.Format.CSS.formatHex(d.foreground):"-?-"))),(0,Bh.$)("tr",void 0,(0,Bh.$)("td.tm-metadata-key",void 0,"background"),(0,Bh.$)("td.tm-metadata-value",void 0,"".concat(d?pp.Color.Format.CSS.formatHex(d.background):"-?-")))))),(0,Bh.append)(this._domNode,(0,Bh.$)("hr.tokens-inspect-separator")),n<t.tokens1.length&&(0,Bh.append)(this._domNode,(0,Bh.$)("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}},{key:"_decodeMetadata",value:function(e){var t=lh.TokenizationRegistry.getColorMap(),n=lh.TokenMetadata.getLanguageId(e),i=lh.TokenMetadata.getTokenType(e),r=lh.TokenMetadata.getFontStyle(e),o=lh.TokenMetadata.getForeground(e),a=lh.TokenMetadata.getBackground(e);return{languageIdentifier:this._modeService.getLanguageIdentifier(n),tokenType:i,fontStyle:r,foreground:t[o],background:t[a]}}},{key:"_tokenTypeToString",value:function(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 4:return"RegEx";default:return"??"}}},{key:"_fontStyleToString",value:function(e){var t="";return 1&e&&(t+="italic "),2&e&&(t+="bold "),4&e&&(t+="underline "),0===t.length&&(t="---"),t}},{key:"_getTokensAtLine",value:function(e){var t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t,0),i=this._tokenizationSupport.tokenize2(this._model.getLineContent(e),!0,t,0);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}},{key:"_getStateBeforeLine",value:function(e){for(var t=this._tokenizationSupport.getInitialState(),n=1;n<e;n++){t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t,0).endState}return t}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{position:this._editor.getPosition(),preference:[2,1]}}}]),n}(vd.Disposable);XT._ID="editor.contrib.inspectTokensWidget",(0,qc.registerEditorContribution)(qT.ID,qT),(0,qc.registerEditorAction)(JT),(0,Cd.registerThemingParticipant)((function(e,t){var n=e.getColor(kd.editorHoverBorder);if(n){var i=e.type===Rh.ColorScheme.HIGH_CONTRAST?2:1;t.addRule(".monaco-editor .tokens-inspect-widget { border: ".concat(i,"px solid ").concat(n,"; }")),t.addRule(".monaco-editor .tokens-inspect-widget .tokens-inspect-separator { background-color: ".concat(n,"; }"))}var r=e.getColor(kd.editorHoverBackground);r&&t.addRule(".monaco-editor .tokens-inspect-widget { background-color: ".concat(r,"; }"));var o=e.getColor(kd.editorHoverForeground);o&&t.addRule(".monaco-editor .tokens-inspect-widget { color: ".concat(o,"; }"))}));VI=o("8r0dr");var GT=o("45ikp"),ZT=(LT=o("kPmRS"),{});e(ZT,"HelpQuickAccessProvider",(function(){return QT}),(function(e){return QT=e}));u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),qi=o("caN7I"),vd=o("dXCvL"),Jc=o("faA3E"),GT=o("45ikp"),sp=o("8l08w"),VI=o("8r0dr");var $T=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},YT=function(e,t){return function(n,i){t(n,i,e)}},QT=function(){"use strict";function e(t){(0,u.default)(this,e),this.quickInputService=t,this.registry=VI.Registry.as(GT.Extensions.Quickaccess)}return(0,c.default)(e,[{key:"provide",value:function(t){var n=this,i=new(0,vd.DisposableStore);i.add(t.onDidAccept((function(){var e=(0,Ki.default)(t.selectedItems,1)[0];e&&n.quickInputService.quickAccess.show(e.prefix,{preserveValue:!0})}))),i.add(t.onDidChangeValue((function(t){var i=n.registry.getQuickAccessProvider(t.substr(e.PREFIX.length));i&&i.prefix&&i.prefix!==e.PREFIX&&n.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})));var r=this.getQuickAccessProviders(),o=r.editorProviders,a=r.globalProviders;return t.items=0===o.length||0===a.length?(0,qi.default)(0===o.length?a:o):[{label:(0,Jc.localize)("globalCommands","global commands"),type:"separator"}].concat((0,qi.default)(a),[{label:(0,Jc.localize)("editorCommands","editor commands"),type:"separator"}],(0,qi.default)(o)),i}},{key:"getQuickAccessProviders",value:function(){var t=[],n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this.registry.getQuickAccessProviders().sort((function(e,t){return e.prefix.localeCompare(t.prefix)}))[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(l.prefix!==e.PREFIX){var u=!0,c=!1,d=void 0;try{for(var h,f=l.helpEntries[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var p=h.value,g=p.prefix||l.prefix,v=g||"";(p.needsEditor?n:t).push({prefix:g,label:v,ariaLabel:(0,Jc.localize)("helpPickAriaLabel","{0}, {1}",v,p.description),description:p.description})}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return{editorProviders:n,globalProviders:t}}}]),e}();QT.PREFIX="?",QT=$T([YT(0,sp.IQuickInputService)],QT),VI.Registry.as(GT.Extensions.Quickaccess).registerQuickAccessProvider({ctor:ZT.HelpQuickAccessProvider,prefix:"",helpEntries:[{description:LT.QuickHelpNLS.helpQuickAccessActionLabel,needsEditor:!0}]});u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),h=o("8rJSp"),Jc=o("faA3E"),vd=o("dXCvL"),u=o("4JAgF"),c=o("9HoHC"),Ki=o("dVhHy"),bd=o("7wGTu"),Cd=o("4ET02"),wd=o("a6Ojp"),vd=o("dXCvL"),Ck=o("iQI0Q"),zf=o("jW8FZ"),ep=o("c2GQh");var eL=function(){"use strict";function e(t){(0,u.default)(this,e),this.options=t,this.rangeHighlightDecorationId=void 0}return(0,c.default)(e,[{key:"provide",value:function(e,t){var n,i=this,r=new(0,vd.DisposableStore);e.canAcceptInBackground=!!(null===(n=this.options)||void 0===n?void 0:n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;var o=r.add(new(0,vd.MutableDisposable));return o.value=this.doProvide(e,t),r.add(this.onDidActiveTextEditorControlChange((function(){o.value=void 0,o.value=i.doProvide(e,t)}))),r}},{key:"doProvide",value:function(e,t){var n=this,i=new(0,vd.DisposableStore),r=this.activeTextEditorControl;if(r&&this.canProvideWithTextEditor(r)){var o={editor:r},a=(0,Ck.getCodeEditor)(r);if(a){var s=(0,zf.withNullAsUndefined)(r.saveViewState());i.add(a.onDidChangeCursorPosition((function(){s=(0,zf.withNullAsUndefined)(r.saveViewState())}))),o.restoreViewState=function(){s&&r===n.activeTextEditorControl&&r.restoreViewState(s)},i.add((0,ep.once)(t.onCancellationRequested)((function(){var e;return null===(e=o.restoreViewState)||void 0===e?void 0:e.call(o)})))}i.add((0,vd.toDisposable)((function(){return n.clearDecorations(r)}))),i.add(this.provideWithTextEditor(o,e,t))}else i.add(this.provideWithoutTextEditor(e,t));return i}},{key:"canProvideWithTextEditor",value:function(e){return!0}},{key:"gotoLocation",value:function(e,t){var n=e.editor;n.setSelection(t.range),n.revealRangeInCenter(t.range,0),t.preserveFocus||n.focus()}},{key:"getModel",value:function(e){var t;return(0,Ck.isDiffEditor)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}},{key:"addDecorations",value:function(e,t){var n=this;e.changeDecorations((function(e){var i=[];n.rangeHighlightDecorationId&&(i.push(n.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(n.rangeHighlightDecorationId.rangeHighlightId),n.rangeHighlightDecorationId=void 0);var r=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,Cd.themeColorFromId)(wd.overviewRulerRangeHighlight),position:bd.OverviewRulerLane.Full}}}],o=(0,Ki.default)(e.deltaDecorations(i,r),2),a=o[0],s=o[1];n.rangeHighlightDecorationId={rangeHighlightId:a,overviewRulerDecorationId:s}}))}},{key:"clearDecorations",value:function(e){var t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((function(e){e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}]),e}(),tL=(Ck=o("iQI0Q"),function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{canAcceptInBackground:!0})}return(0,c.default)(n,[{key:"provideWithoutTextEditor",value:function(e){var t=(0,Jc.localize)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,vd.Disposable.None}},{key:"provideWithTextEditor",value:function(e,t,i){var r=this,o=e.editor,a=new(0,vd.DisposableStore);a.add(t.onDidAccept((function(n){var i=(0,Ki.default)(t.selectedItems,1)[0];if(i){if(!r.isValidLineNumber(o,i.lineNumber))return;r.gotoLocation(e,{range:r.toRange(i.lineNumber,i.column),keyMods:t.keyMods,preserveFocus:n.inBackground}),n.inBackground||t.hide()}})));var s=function(){var e=r.parsePosition(o,t.value.trim().substr(n.PREFIX.length)),i=r.getPickLabel(o,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,r.isValidLineNumber(o,e.lineNumber)){var a=r.toRange(e.lineNumber,e.column);o.revealRangeInCenter(a,0),r.addDecorations(o,a)}else r.clearDecorations(o)};s(),a.add(t.onDidChangeValue((function(){return s()})));var l=(0,Ck.getCodeEditor)(o);l&&(2===l.getOptions().get(59).renderType&&(l.updateOptions({lineNumbers:"on"}),a.add((0,vd.toDisposable)((function(){return l.updateOptions({lineNumbers:"relative"})})))));return a}},{key:"toRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}},{key:"parsePosition",value:function(e,t){var n=t.split(/,|:|#/).map((function(e){return parseInt(e,10)})).filter((function(e){return!isNaN(e)})),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}},{key:"getPickLabel",value:function(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?(0,Jc.localize)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):(0,Jc.localize)("gotoLineLabel","Go to line {0}.",t);var i=e.getPosition()||{lineNumber:1,column:1},r=this.lineCount(e);return r>1?(0,Jc.localize)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,r):(0,Jc.localize)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}},{key:"isValidLineNumber",value:function(e,t){return!(!t||"number"!=typeof t)&&(t>0&&t<=this.lineCount(e))}},{key:"isValidColumn",value:function(e,t,n){if(!n||"number"!=typeof n)return!1;var i=this.getModel(e);if(!i)return!1;var r={lineNumber:t,column:n};return i.validatePosition(r).equals(r)}},{key:"lineCount",value:function(e){var t,n;return null!==(n=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==n?n:0}}]),n}(eL));tL.PREFIX=":";VI=o("8r0dr"),GT=o("45ikp"),jd=o("1NzEb"),zf=o("jW8FZ"),LT=o("kPmRS"),$h=o("neTVg"),qc=o("THDAR"),Xc=o("5cDyY"),sp=o("8l08w");var nL=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},iL=function(e,t){return function(n,i){t(n,i,e)}},rL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).editorService=e,i.onDidActiveTextEditorControlChange=$h.Event.None,i}return(0,c.default)(n,[{key:"activeTextEditorControl",get:function(){return(0,zf.withNullAsUndefined)(this.editorService.getFocusedCodeEditor())}}]),n}(tL);rL=nL([iL(0,jd.ICodeEditorService)],rL),VI.Registry.as(GT.Extensions.Quickaccess).registerQuickAccessProvider({ctor:rL,prefix:rL.PREFIX,helpEntries:[{description:LT.GoToLineNLS.gotoLineActionLabel,needsEditor:!0}]});var oL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.gotoLine",label:LT.GoToLineNLS.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:2085,mac:{primary:293},weight:100}})}return(0,c.default)(n,[{key:"run",value:function(e){e.get(sp.IQuickInputService).quickAccess.show(rL.PREFIX)}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(oL);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp");o("aGuK0");var aL={};e(aL,"AbstractGotoSymbolQuickAccessProvider",(function(){return yL}),(function(e){return yL=e}));u=o("4JAgF"),c=o("9HoHC"),f=o("8WkQI"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),Jc=o("faA3E"),eh=o("j6sHb"),vd=o("dXCvL"),yd=o("5MJfC"),lh=o("chpjt"),nh=o("gTzCU"),Ki=o("dVhHy"),qi=o("caN7I"),Ry=o("3cgwy"),ay=o("41U55"),Bd=o("5DBhW"),nh=o("gTzCU");var sL=[void 0,[]];function lL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t;return r.values&&r.values.length>1?uL(e,r.values,n,i):cL(e,t,n,i)}function uL(e,t,n,i){var r=0,o=[],a=!0,s=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d,h=u.value,f=(0,Ki.default)(cL(e,h,n,i),2),p=f[0],g=f[1];if("number"!=typeof p)return sL;r+=p,(d=o).push.apply(d,(0,qi.default)(g))}}catch(e){s=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(s)throw l}}return[r,dL(o)]}function cL(e,t,n,i){var r=(0,Ry.fuzzyScore)(t.original,t.originalLowercase,n,e,e.toLowerCase(),i,!0);return r?[r[0],(0,Ry.createMatches)(r)]:sL}function dL(e){var t=e.sort((function(e,t){return e.start-t.start})),n=[],i=void 0,r=!0,o=!1,a=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;i&&hL(i,u)?(i.start=Math.min(i.start,u.start),i.end=Math.max(i.end,u.end)):(i=u,n.push(u))}}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}function hL(e,t){return!(e.end<t.start)&&!(t.end<e.start)}function fL(e){return e.startsWith('"')&&e.endsWith('"')}function pL(e){"string"!=typeof e&&(e="");var t=e.toLowerCase(),n=gL(e),i=n.pathNormalized,r=n.normalized,o=n.normalizedLowercase,a=i.indexOf(ay.sep)>=0,s=fL(e),l=void 0,u=e.split(" "),c=!0,d=!1,h=void 0;if(u.length>1)try{for(var f,p=u[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var g=f.value,v=fL(g),m=gL(g),y=m.pathNormalized,b=m.normalized,_=m.normalizedLowercase;b&&(l||(l=[]),l.push({original:g,originalLowercase:g.toLowerCase(),pathNormalized:y,normalized:b,normalizedLowercase:_,expectContiguousMatch:v}))}}catch(e){d=!0,h=e}finally{try{c||null==p.return||p.return()}finally{if(d)throw h}}return{original:e,originalLowercase:t,pathNormalized:i,normalized:r,normalizedLowercase:o,values:l,containsPathSeparator:a,expectContiguousMatch:s}}function gL(e){var t;t=Bd.isWindows?e.replace(/\//g,ay.sep):e.replace(/\\/g,ay.sep);var n=(0,nh.stripWildcards)(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:n,normalizedLowercase:n.toLowerCase()}}function vL(e){return Array.isArray(e)?pL(e.map((function(e){return e.original})).join(" ")):pL(e.original)}Qh=o("8bO6F");var mL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},yL=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null);return(0,u.default)(this,i),(e=t.call(this,n)).options=n,e.options.canAcceptInBackground=!0,e}return(0,c.default)(i,[{key:"provideWithoutTextEditor",value:function(e){return this.provideLabelPick(e,(0,Jc.localize)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),vd.Disposable.None}},{key:"provideWithTextEditor",value:function(e,t,n){var i=e.editor,r=this.getModel(i);return r?lh.DocumentSymbolProviderRegistry.has(r)?this.doProvideWithEditorSymbols(e,r,t,n):this.doProvideWithoutEditorSymbols(e,r,t,n):vd.Disposable.None}},{key:"doProvideWithoutEditorSymbols",value:function(e,t,i,r){var o=this,a=new(0,vd.DisposableStore);return this.provideLabelPick(i,(0,Jc.localize)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),mL(o,void 0,void 0,n(l).mark((function o(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.waitForLanguageSymbolRegistry(t,a);case 2:if(n.sent&&!r.isCancellationRequested){n.next=5;break}return n.abrupt("return");case 5:a.add(this.doProvideWithEditorSymbols(e,t,i,r));case 6:case"end":return n.stop()}}),o,this)}))),a}},{key:"provideLabelPick",value:function(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}},{key:"waitForLanguageSymbolRegistry",value:function(e,t){return mL(this,void 0,void 0,n(l).mark((function i(){var r,o,a;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!lh.DocumentSymbolProviderRegistry.has(e)){n.next=2;break}return n.abrupt("return",!0);case 2:return o=new Promise((function(e){return r=e})),a=t.add(lh.DocumentSymbolProviderRegistry.onDidChange((function(){lh.DocumentSymbolProviderRegistry.has(e)&&(a.dispose(),r(!0))}))),t.add((0,vd.toDisposable)((function(){return r(!1)}))),n.abrupt("return",o);case 7:case"end":return n.stop()}}),i)})))}},{key:"doProvideWithEditorSymbols",value:function(e,t,r,o){var a=this,s=e.editor,u=new(0,vd.DisposableStore);u.add(r.onDidAccept((function(t){var n=(0,Ki.default)(r.selectedItems,1)[0];n&&n.range&&(a.gotoLocation(e,{range:n.range.selection,keyMods:r.keyMods,preserveFocus:t.inBackground}),t.inBackground||r.hide())}))),u.add(r.onDidTriggerItemButton((function(t){var n=t.item;n&&n.range&&(a.gotoLocation(e,{range:n.range.selection,keyMods:r.keyMods,forceSideBySide:!0}),r.hide())})));var c=this.getDocumentSymbols(t,o),d=void 0,h=function(){return mL(a,void 0,void 0,n(l).mark((function e(){var t,a;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==d||d.dispose(!0),r.busy=!1,d=new(0,eh.CancellationTokenSource)(o),r.busy=!0,e.prev=4,t=pL(r.value.substr(i.PREFIX.length).trim()),e.next=8,this.doGetSymbolPicks(c,t,void 0,d.token);case 8:if(a=e.sent,!o.isCancellationRequested){e.next=11;break}return e.abrupt("return");case 11:a.length>0?r.items=a:t.original.length>0?this.provideLabelPick(r,(0,Jc.localize)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(r,(0,Jc.localize)("noSymbolResults","No editor symbols"));case 12:return e.prev=12,o.isCancellationRequested||(r.busy=!1),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[4,,12,15]])})))};u.add(r.onDidChangeValue((function(){return h()}))),h();var f=!0;return u.add(r.onDidChangeActive((function(){var e=(0,Ki.default)(r.activeItems,1)[0];if(e&&e.range){if(f)return void(f=!1);s.revealRangeInCenter(e.range.selection,0),a.addDecorations(s,e.range.decoration)}}))),u}},{key:"doGetSymbolPicks",value:function(e,t,r,o){return mL(this,void 0,void 0,n(l).mark((function a(){var s,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x,S,E,D,A,I,R,T,L,M,N,P,O,F,B,H,j,z;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=this,n.next=3,e;case 3:if(u=n.sent,!o.isCancellationRequested){n.next=6;break}return n.abrupt("return",[]);case 6:c=0===t.original.indexOf(i.SCOPE_PREFIX),d=c?1:0,t.values&&t.values.length>1?(h=vL(t.values[0]),f=vL(t.values.slice(1))):h=t,p=[],g=0;case 13:if(!(g<u.length)){n.next=43;break}if(v=u[g],m=(0,nh.trim)(v.name),y="$(symbol-".concat(lh.SymbolKinds.toString(v.kind)||"property",") ").concat(m),b=y.length-m.length,_=v.containerName,(null==r?void 0:r.extraContainerLabel)&&(_=_?"".concat(r.extraContainerLabel,"  ").concat(_):r.extraContainerLabel),w=void 0,k=void 0,C=void 0,x=void 0,!(t.original.length>d)){n.next=38;break}if(S=!1,h!==t&&(E=(0,Ki.default)(lL(y,Object.assign(Object.assign({},t),{values:void 0}),d,b),2),w=E[0],k=E[1],"number"==typeof w&&(S=!0)),"number"==typeof w){n.next=32;break}if(D=(0,Ki.default)(lL(y,h,d,b),2),w=D[0],k=D[1],"number"==typeof w){n.next=32;break}return n.abrupt("continue",40);case 32:if(S||!f){n.next=38;break}if(_&&f.original.length>0&&(A=(0,Ki.default)(lL(_,f),2),C=A[0],x=A[1]),"number"==typeof C){n.next=37;break}return n.abrupt("continue",40);case 37:"number"==typeof w&&(w+=C);case 38:I=v.tags&&v.tags.indexOf(1)>=0,p.push({index:g,kind:v.kind,score:w,label:y,ariaLabel:m,description:_,highlights:I?void 0:{label:k,description:x},range:{selection:yd.Range.collapseToStart(v.selectionRange),decoration:v.range},strikethrough:I,buttons:function(){var e,t,n=(null===(e=s.options)||void 0===e?void 0:e.openSideBySideDirection)?null===(t=s.options)||void 0===t?void 0:t.openSideBySideDirection():void 0;if(n)return[{iconClass:"right"===n?Qh.Codicon.splitHorizontal.classNames:Qh.Codicon.splitVertical.classNames,tooltip:"right"===n?(0,Jc.localize)("openToSide","Open to the Side"):(0,Jc.localize)("openToBottom","Open to the Bottom")}]}()});case 40:g++,n.next=13;break;case 43:if(R=p.sort((function(e,t){return c?s.compareByKindAndScore(e,t):s.compareByScore(e,t)})),T=[],!c){n.next=70;break}for(L=function(){N&&"number"==typeof M&&P>0&&(N.label=(0,nh.format)(wL[M]||_L,P))},M=void 0,N=void 0,P=0,O=!0,F=!1,B=void 0,n.prev=51,H=R[Symbol.iterator]();!(O=(j=H.next()).done);O=!0)z=j.value,M!==z.kind?(L(),M=z.kind,P=1,N={type:"separator"},T.push(N)):P++,T.push(z);n.next=59;break;case 55:n.prev=55,n.t0=n.catch(51),F=!0,B=n.t0;case 59:n.prev=59,n.prev=60,O||null==H.return||H.return();case 62:if(n.prev=62,!F){n.next=65;break}throw B;case 65:return n.finish(62);case 66:return n.finish(59);case 67:L(),n.next=71;break;case 70:R.length>0&&(T=[{label:(0,Jc.localize)("symbols","symbols ({0})",p.length),type:"separator"}].concat((0,qi.default)(R)));case 71:return n.abrupt("return",T);case 72:case"end":return n.stop()}}),a,this,[[51,55,59,67],[60,,62,66]])})))}},{key:"compareByScore",value:function(e,t){if("number"!=typeof e.score&&"number"==typeof t.score)return 1;if("number"==typeof e.score&&"number"!=typeof t.score)return-1;if("number"==typeof e.score&&"number"==typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}},{key:"compareByKindAndScore",value:function(e,t){var n=wL[e.kind]||_L,i=wL[t.kind]||_L,r=n.localeCompare(i);return 0===r?this.compareByScore(e,t):r}},{key:"getDocumentSymbols",value:function(e,t){return mL(this,void 0,void 0,n(l).mark((function i(){var r;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yD.create(e,t);case 2:return r=n.sent,n.abrupt("return",t.isCancellationRequested?[]:r.asListOfDocumentSymbols());case 4:case"end":return n.stop()}}),i)})))}}]),i}(eL);yL.PREFIX="@",yL.SCOPE_PREFIX=":",yL.PREFIX_BY_CATEGORY="".concat(yL.PREFIX).concat(yL.SCOPE_PREFIX);var bL,_L=(0,Jc.localize)("property","properties ({0})"),wL=(bL={},(0,f.default)(bL,5,(0,Jc.localize)("method","methods ({0})")),(0,f.default)(bL,11,(0,Jc.localize)("function","functions ({0})")),(0,f.default)(bL,8,(0,Jc.localize)("_constructor","constructors ({0})")),(0,f.default)(bL,12,(0,Jc.localize)("variable","variables ({0})")),(0,f.default)(bL,4,(0,Jc.localize)("class","classes ({0})")),(0,f.default)(bL,22,(0,Jc.localize)("struct","structs ({0})")),(0,f.default)(bL,23,(0,Jc.localize)("event","events ({0})")),(0,f.default)(bL,24,(0,Jc.localize)("operator","operators ({0})")),(0,f.default)(bL,10,(0,Jc.localize)("interface","interfaces ({0})")),(0,f.default)(bL,2,(0,Jc.localize)("namespace","namespaces ({0})")),(0,f.default)(bL,3,(0,Jc.localize)("package","packages ({0})")),(0,f.default)(bL,25,(0,Jc.localize)("typeParameter","type parameters ({0})")),(0,f.default)(bL,1,(0,Jc.localize)("modules","modules ({0})")),(0,f.default)(bL,6,(0,Jc.localize)("property","properties ({0})")),(0,f.default)(bL,9,(0,Jc.localize)("enum","enumerations ({0})")),(0,f.default)(bL,21,(0,Jc.localize)("enumMember","enumeration members ({0})")),(0,f.default)(bL,14,(0,Jc.localize)("string","strings ({0})")),(0,f.default)(bL,0,(0,Jc.localize)("file","files ({0})")),(0,f.default)(bL,17,(0,Jc.localize)("array","arrays ({0})")),(0,f.default)(bL,15,(0,Jc.localize)("number","numbers ({0})")),(0,f.default)(bL,16,(0,Jc.localize)("boolean","booleans ({0})")),(0,f.default)(bL,18,(0,Jc.localize)("object","objects ({0})")),(0,f.default)(bL,19,(0,Jc.localize)("key","keys ({0})")),(0,f.default)(bL,7,(0,Jc.localize)("field","fields ({0})")),(0,f.default)(bL,13,(0,Jc.localize)("constant","constants ({0})")),bL),kL=(VI=o("8r0dr"),GT=o("45ikp"),jd=o("1NzEb"),zf=o("jW8FZ"),LT=o("kPmRS"),$h=o("neTVg"),qc=o("THDAR"),Xc=o("5cDyY"),sp=o("8l08w"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),CL=function(e,t){return function(n,i){t(n,i,e)}},xL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),(i=t.call(this)).editorService=e,i.onDidActiveTextEditorControlChange=$h.Event.None,i}return(0,c.default)(n,[{key:"activeTextEditorControl",get:function(){return(0,zf.withNullAsUndefined)(this.editorService.getFocusedCodeEditor())}}]),n}(aL.AbstractGotoSymbolQuickAccessProvider);xL=kL([CL(0,jd.ICodeEditorService)],xL),VI.Registry.as(GT.Extensions.Quickaccess).registerQuickAccessProvider({ctor:xL,prefix:aL.AbstractGotoSymbolQuickAccessProvider.PREFIX,helpEntries:[{description:LT.QuickOutlineNLS.quickOutlineActionLabel,prefix:aL.AbstractGotoSymbolQuickAccessProvider.PREFIX,needsEditor:!0},{description:LT.QuickOutlineNLS.quickOutlineByCategoryActionLabel,prefix:aL.AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY,needsEditor:!0}]});var SL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.quickOutline",label:LT.QuickOutlineNLS.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:Xc.EditorContextKeys.hasDocumentSymbolProvider,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}return(0,c.default)(n,[{key:"run",value:function(e){e.get(sp.IQuickInputService).quickAccess.show(aL.AbstractGotoSymbolQuickAccessProvider.PREFIX)}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(SL);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),VI=o("8r0dr"),GT=o("45ikp"),LT=o("kPmRS"),jd=o("1NzEb"),u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp");var EL={};e(EL,"AbstractCommandsQuickAccessProvider",(function(){return jL}),(function(e){return jL=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),oh=o("2ZBuK"),zf=o("jW8FZ"),Jc=o("faA3E");function DL(e,t){return t&&(e.stack||e.stacktrace)?Jc.localize("stackTrace.format","{0}: {1}",IL(e),AL(e.stack)||AL(e.stacktrace)):IL(e)}function AL(e){return Array.isArray(e)?e.join("\n"):e}function IL(e){return"string"==typeof e.code&&"number"==typeof e.errno&&"string"==typeof e.syscall?Jc.localize("nodeExceptionMessage","A system error occurred ({0})",e.message):e.message||Jc.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function RL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return Jc.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(e)){var n=oh.coalesce(e),i=RL(n[0],t);return n.length>1?Jc.localize("error.moreErrors","{0} ({1} errors in total)",i,n.length):i}if(zf.isString(e))return e;if(e.detail){var r=e.detail;if(r.error)return DL(r.error,t);if(r.exception)return DL(r.exception,t)}return e.stack?DL(e,t):e.message?e.message:Jc.localize("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}Yc=o("2NkmB"),Ry=o("3cgwy"),vd=o("dXCvL"),Yf=o("728Ww"),jg=o("kSEDy"),zf=o("jW8FZ"),Jc=o("faA3E"),vh=o("j9pk1"),mp=o("fnqF9"),hR=o("5xzYa"),Oh=o("hm5an"),zh=o("5H40S");var TL={};e(TL,"PickerQuickAccessProvider",(function(){return OL}),(function(e){return OL=e}));u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),Ki=o("dVhHy"),qi=o("caN7I"),h=o("8rJSp"),l=o("1JCPQ"),gd=o("hJucn"),eh=o("j6sHb"),vd=o("dXCvL");var LL,ML,NL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))};function PL(e){var t=e;return Array.isArray(t.items)}(ML=LL||(LL={}))[ML.NO_ACTION=0]="NO_ACTION",ML[ML.CLOSE_PICKER=1]="CLOSE_PICKER",ML[ML.REFRESH_PICKER=2]="REFRESH_PICKER",ML[ML.REMOVE_ITEM=3]="REMOVE_ITEM";var OL=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this)).prefix=e,r.options=n,r}return(0,c.default)(i,[{key:"provide",value:function(e,t){var r,o=this,a=new(0,vd.DisposableStore);e.canAcceptInBackground=!!(null===(r=this.options)||void 0===r?void 0:r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;var s=void 0,u=a.add(new(0,vd.MutableDisposable)),c=function(){return NL(o,void 0,void 0,n(l).mark((function r(){var o,a,c,d,h,f,p,g,v;return n(l).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=this,a=u.value=new(0,vd.DisposableStore),null==s||s.dispose(!0),e.busy=!1,s=new(0,eh.CancellationTokenSource)(t),c=s.token,d=e.value.substr(this.prefix.length).trim(),h=this._getPicks(d,a,c),f=function(t,n){var i,r,a=void 0;if(PL(t)?(r=t.items,a=t.active):r=t,0===r.length){if(n)return!1;d.length>0&&(null===(i=o.options)||void 0===i?void 0:i.noResultsPick)&&(r=[o.options.noResultsPick])}return e.items=r,a&&(e.activeItems=[a]),!0},null!==h){r.next=13;break}r.next=35;break;case 13:if(m=void 0,!((m=h).picks&&m.additionalPicks instanceof Promise)){r.next=20;break}return p=!1,g=!1,r.next=18,Promise.all([NL(o,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,gd.timeout)(i.FAST_PICKS_RACE_DELAY);case 2:if(!c.isCancellationRequested){e.next=4;break}return e.abrupt("return");case 4:g||(p=f(h.picks,!0));case 5:case"end":return e.stop()}}),e)}))),NL(o,void 0,void 0,n(l).mark((function t(){var i,r,o,a,s,u,d;return n(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.busy=!0,t.prev=1,t.next=4,h.additionalPicks;case 4:if(i=t.sent,!c.isCancellationRequested){t.next=7;break}return t.abrupt("return");case 7:o=void 0,PL(h.picks)?(r=h.picks.items,o=h.picks.active):r=h.picks,s=void 0,PL(i)?(a=i.items,s=i.active):a=i,(a.length>0||!p)&&(u=void 0,o||s||(d=e.activeItems[0])&&-1!==r.indexOf(d)&&(u=d),f({items:(0,qi.default)(r).concat((0,qi.default)(a)),active:o||s||u}));case 14:return t.prev=14,c.isCancellationRequested||(e.busy=!1),g=!0,t.finish(14);case 18:case"end":return t.stop()}}),t,null,[[1,,14,18]])})))]);case 18:r.next=35;break;case 20:if(h instanceof Promise){r.next=24;break}f(h),r.next=35;break;case 24:return e.busy=!0,r.prev=25,r.next=28,h;case 28:if(v=r.sent,!c.isCancellationRequested){r.next=31;break}return r.abrupt("return");case 31:f(v);case 32:return r.prev=32,c.isCancellationRequested||(e.busy=!1),r.finish(32);case 35:case"end":return r.stop()}var m}),r,this,[[25,,32,35]])})))};return a.add(e.onDidChangeValue((function(){return c()}))),c(),a.add(e.onDidAccept((function(t){var n=(0,Ki.default)(e.selectedItems,1)[0];"function"==typeof(null==n?void 0:n.accept)&&(t.inBackground||e.hide(),n.accept(e.keyMods,t))}))),a.add(e.onDidTriggerItemButton((function(i){var r=i.button,a=i.item;return NL(o,void 0,void 0,n(l).mark((function i(){var o,s,u,d,h,f,p;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("function"!=typeof a.trigger){n.next=26;break}if(!((u=null!==(s=null===(o=a.buttons)||void 0===o?void 0:o.indexOf(r))&&void 0!==s?s:-1)>=0)){n.next=26;break}if("number"!=typeof(d=a.trigger(u,e.keyMods))){n.next=9;break}n.t0=d,n.next=12;break;case 9:return n.next=11,d;case 11:n.t0=n.sent;case 12:if(h=n.t0,!t.isCancellationRequested){n.next=15;break}return n.abrupt("return");case 15:n.t1=h,n.next=n.t1===LL.NO_ACTION?18:n.t1===LL.CLOSE_PICKER?19:n.t1===LL.REFRESH_PICKER?21:n.t1===LL.REMOVE_ITEM?23:26;break;case 18:return n.abrupt("break",26);case 19:return e.hide(),n.abrupt("break",26);case 21:return c(),n.abrupt("break",26);case 23:return-1!==(f=e.items.indexOf(a))&&((p=e.items.slice()).splice(f,1),e.items=p),n.abrupt("break",26);case 26:case"end":return n.stop()}}),i)})))}))),a}}]),i}(vd.Disposable);OL.FAST_PICKS_RACE_DELAY=200;Qf=o("6TN8i"),ff=o("ckUVh");var FL=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},BL=function(e,t){return function(n,i){t(n,i,e)}},HL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},jL=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a,s){var l;return(0,u.default)(this,i),(l=t.call(this,i.PREFIX,e)).instantiationService=n,l.keybindingService=r,l.commandService=o,l.telemetryService=a,l.dialogService=s,l.commandsHistory=l._register(l.instantiationService.createInstance(zL)),l.options=e,l}return(0,c.default)(i,[{key:"_getPicks",value:function(e,t,r){return HL(this,void 0,void 0,n(l).mark((function o(){var a,s,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x,S,E,D,A,I,R,T;return n(l).wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=this,o.next=3,this.getCommandPicks(t,r);case 3:if(s=o.sent,!r.isCancellationRequested){o.next=6;break}return o.abrupt("return",[]);case 6:for(u=[],c=!0,d=!1,h=void 0,o.prev=8,f=s[Symbol.iterator]();!(c=(p=f.next()).done);c=!0)g=p.value,v=(0,zf.withNullAsUndefined)(i.WORD_FILTER(e,g.label)),m=g.commandAlias?(0,zf.withNullAsUndefined)(i.WORD_FILTER(e,g.commandAlias)):void 0,v||m?(g.highlights={label:v,detail:this.options.showAlias?m:void 0},u.push(g)):e===g.commandId&&u.push(g);o.next=16;break;case 12:o.prev=12,o.t0=o.catch(8),d=!0,h=o.t0;case 16:o.prev=16,o.prev=17,c||null==f.return||f.return();case 19:if(o.prev=19,!d){o.next=22;break}throw h;case 22:return o.finish(19);case 23:return o.finish(16);case 24:for(y=new Map,b=!0,_=!1,w=void 0,o.prev=26,k=u[Symbol.iterator]();!(b=(C=k.next()).done);b=!0)x=C.value,(S=y.get(x.label))?(x.description=x.commandId,S.description=S.commandId):y.set(x.label,x);o.next=34;break;case 30:o.prev=30,o.t1=o.catch(26),_=!0,w=o.t1;case 34:o.prev=34,o.prev=35,b||null==k.return||k.return();case 37:if(o.prev=37,!_){o.next=40;break}throw w;case 40:return o.finish(37);case 41:return o.finish(34);case 42:for(u.sort((function(e,t){var n=a.commandsHistory.peek(e.commandId),i=a.commandsHistory.peek(t.commandId);return n&&i?n>i?-1:1:n?-1:i?1:e.label.localeCompare(t.label)})),E=[],D=!1,A=0;A<u.length;A++)I=u[A],R=this.keybindingService.lookupKeybinding(I.commandId),T=R?(0,Jc.localize)("commandPickAriaLabelWithKeybinding","{0}, {1}",I.label,R.getAriaLabel()):I.label,0===A&&this.commandsHistory.peek(I.commandId)&&(E.push({type:"separator",label:(0,Jc.localize)("recentlyUsed","recently used")}),D=!0),0!==A&&D&&!this.commandsHistory.peek(I.commandId)&&(E.push({type:"separator",label:(0,Jc.localize)("morecCommands","other commands")}),D=!1),E.push(Object.assign(Object.assign({},I),{ariaLabel:T,detail:this.options.showAlias&&I.commandAlias!==I.label?I.commandAlias:void 0,keybinding:R,accept:function(){return HL(a,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.commandsHistory.push(I.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:I.commandId,from:"quick open"}),e.prev=2,e.next=5,this.commandService.executeCommand(I.commandId);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),(0,Yc.isPromiseCanceledError)(e.t0)||this.dialogService.show(jg.default.Error,(0,Jc.localize)("canNotRun","Command '{0}' resulted in an error ({1})",I.label,RL(e.t0)));case 10:case"end":return e.stop()}}),e,this,[[2,7]])})))}}));return o.abrupt("return",E);case 47:case"end":return o.stop()}}),o,this,[[8,12,16,24],[17,,19,23],[26,30,34,42],[35,,37,41]])})))}}]),i}(TL.PickerQuickAccessProvider);jL.PREFIX=">",jL.WORD_FILTER=(0,Ry.or)(Ry.matchesPrefix,Ry.matchesWords,Ry.matchesContiguousSubString),jL=FL([BL(1,Oh.IInstantiationService),BL(2,zh.IKeybindingService),BL(3,vh.ICommandService),BL(4,ff.ITelemetryService),BL(5,hR.IDialogService)],jL);var zL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i){var r;return(0,u.default)(this,n),(r=t.call(this)).storageService=e,r.configurationService=i,r.configuredCommandsHistoryLength=0,r.updateConfiguration(),r.load(),r.registerListeners(),r}return(0,c.default)(n,[{key:"registerListeners",value:function(){var e=this;this._register(this.configurationService.onDidChangeConfiguration((function(){return e.updateConfiguration()})))}},{key:"updateConfiguration",value:function(){this.configuredCommandsHistoryLength=n.getConfiguredCommandHistoryLength(this.configurationService),n.cache&&n.cache.limit!==this.configuredCommandsHistoryLength&&(n.cache.limit=this.configuredCommandsHistoryLength,n.saveState(this.storageService))}},{key:"load",value:function(){var e,t=this.storageService.get(n.PREF_KEY_CACHE,0);if(t)try{e=JSON.parse(t)}catch(e){}var i=n.cache=new(0,Yf.LRUCache)(this.configuredCommandsHistoryLength,1);e&&(e.usesLRU?e.entries:e.entries.sort((function(e,t){return e.value-t.value}))).forEach((function(e){return i.set(e.key,e.value)}));n.counter=this.storageService.getNumber(n.PREF_KEY_COUNTER,0,n.counter)}},{key:"push",value:function(e){n.cache&&(n.cache.set(e,n.counter++),n.saveState(this.storageService))}},{key:"peek",value:function(e){var t;return null===(t=n.cache)||void 0===t?void 0:t.peek(e)}}],[{key:"saveState",value:function(e){if(n.cache){var t={usesLRU:!0,entries:[]};n.cache.forEach((function(e,n){return t.entries.push({key:n,value:e})})),e.store(n.PREF_KEY_CACHE,JSON.stringify(t),0,0),e.store(n.PREF_KEY_COUNTER,n.counter,0,0)}}},{key:"getConfiguredCommandHistoryLength",value:function(e){var t,i,r=null===(i=null===(t=e.getValue().workbench)||void 0===t?void 0:t.commandPalette)||void 0===i?void 0:i.history;return"number"==typeof r?r:n.DEFAULT_COMMANDS_HISTORY_LENGTH}}]),n}(vd.Disposable);zL.DEFAULT_COMMANDS_HISTORY_LENGTH=50,zL.PREF_KEY_CACHE="commandPalette.mru.cache",zL.PREF_KEY_COUNTER="commandPalette.mru.counter",zL.counter=1,zL=FL([BL(0,Qf.IStorageService),BL(1,mp.IConfigurationService)],zL);Qc=o("1BIIJ");var WL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o,a,s){return(0,u.default)(this,n),t.call(this,e,i,r,o,a,s)}return(0,c.default)(n,[{key:"getCodeEditorCommandPicks",value:function(){var e=this.activeTextEditorControl;if(!e)return[];var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e.getSupportedActions()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.push({commandId:s.id,commandAlias:s.alias,label:(0,Qc.stripIcons)(s.label)||s.id})}}catch(e){i=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw r}}return t}}]),n}(EL.AbstractCommandsQuickAccessProvider),UL=(zf=o("jW8FZ"),Oh=o("hm5an"),zh=o("5H40S"),vh=o("j9pk1"),ff=o("ckUVh"),hR=o("5xzYa"),qc=o("THDAR"),Xc=o("5cDyY"),sp=o("8l08w"),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}),VL=function(e,t){return function(n,i){t(n,i,e)}},KL=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){var a=function(e){try{l(i.next(e))}catch(e){o(e)}},s=function(e){try{l(i.throw(e))}catch(e){o(e)}},l=function(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)};l((i=i.apply(e,t||[])).next())}))},qL=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n,r,o,a,s){var l;return(0,u.default)(this,i),(l=t.call(this,{showAlias:!1},e,r,o,a,s)).codeEditorService=n,l}return(0,c.default)(i,[{key:"activeTextEditorControl",get:function(){return(0,zf.withNullAsUndefined)(this.codeEditorService.getFocusedCodeEditor())}},{key:"getCommandPicks",value:function(){return KL(this,void 0,void 0,n(l).mark((function e(){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getCodeEditorCommandPicks());case 1:case"end":return e.stop()}}),e,this)})))}}]),i}(WL);qL=UL([VL(0,Oh.IInstantiationService),VL(1,jd.ICodeEditorService),VL(2,zh.IKeybindingService),VL(3,vh.ICommandService),VL(4,ff.ITelemetryService),VL(5,hR.IDialogService)],qL),VI.Registry.as(GT.Extensions.Quickaccess).registerQuickAccessProvider({ctor:qL,prefix:qL.PREFIX,helpEntries:[{description:LT.QuickCommandNLS.quickCommandHelp,needsEditor:!0}]});var JL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){return(0,u.default)(this,n),t.call(this,{id:"editor.action.quickCommand",label:LT.QuickCommandNLS.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:Xc.EditorContextKeys.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}return(0,c.default)(n,[{key:"run",value:function(e){e.get(sp.IQuickInputService).quickAccess.show(qL.PREFIX)}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)(JL);u=o("4JAgF"),d=o("gNsil"),h=o("8rJSp"),qc=o("THDAR"),jd=o("1NzEb"),mp=o("fnqF9"),$c=o("efZ3W"),Oh=o("hm5an"),hf=o("93Ice"),Qf=o("6TN8i");var XL=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},GL=function(e,t){return function(n,i){t(n,i,e)}},ZL=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e,i,r,o,a,s,l){return(0,u.default)(this,n),t.call(this,!0,e,i,r,o,a,s,l)}return n}(xk.ReferencesController);ZL=XL([GL(1,$c.IContextKeyService),GL(2,jd.ICodeEditorService),GL(3,hf.INotificationService),GL(4,Oh.IInstantiationService),GL(5,Qf.IStorageService),GL(6,mp.IConfigurationService)],ZL),(0,qc.registerEditorContribution)(xk.ReferencesController.ID,ZL);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),qc=o("THDAR"),UT=o("1CluA"),LT=o("kPmRS");var $L=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(){var e;return(0,u.default)(this,n),(e=t.call(this,{id:"editor.action.toggleHighContrast",label:LT.ToggleHighContrastNLS.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}))._originalThemeName=null,e}return(0,c.default)(n,[{key:"run",value:function(e,t){var n=e.get(UT.IStandaloneThemeService);this._originalThemeName?(n.setTheme(this._originalThemeName),this._originalThemeName=null):(this._originalThemeName=n.getColorTheme().themeName,n.setTheme("hc-black"))}}]),n}(qc.EditorAction);(0,qc.registerEditorAction)($L),o("iwZD2");vc=o("iwZD2");var YL=function e(t,n,i){"use strict";(0,u.default)(this,e),this.start=t,this.end=n,this.direction=i},QL=function(e,t,n){var i=e.getSelection();if(null!==i){var r=i.getStartPosition(),o=i.getEndPosition(),a=ss(n,t.getOffsetAt(r)),s=ss(n,t.getOffsetAt(o));return new YL(a,s,i.getDirection())}return null},eM=function(e,t,n,i){var r=ls(n.start,i),o=ls(n.end,i);if(null!==r&&null!==o&&r.type===t&&o.type===t){var a=e.getModel(),s=a.getPositionAt(r.index),l=a.getPositionAt(o.index);return vc.Selection.createWithDirection(s.lineNumber,s.column,l.lineNumber,l.column,n.direction)}return null},tM=function(){"use strict";function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this;(0,u.default)(this,e),this.doc=t.doc,this.ytext=t,this.monacoModel=n,this.editors=i,this.mux=Su(),this._savedSelections=new Map,this._beforeTransaction=function(){o.mux((function(){o._savedSelections=new Map,i.forEach((function(e){if(e.getModel()===n){var i=QL(e,n,t);null!==i&&o._savedSelections.set(e,i)}}))}))},this.doc.on("beforeAllTransactions",this._beforeTransaction),this._decorations=new Map,this._rerenderDecorations=function(){i.forEach((function(e){if(r&&e.getModel()===n){var i=o._decorations.get(e)||[],a=[];r.getStates().forEach((function(e,i){if(i!==o.doc.clientID&&null!=e.selection&&null!=e.selection.anchor&&null!=e.selection.head){var r,s,l,u,c=ls(e.selection.anchor,o.doc),d=ls(e.selection.head,o.doc);if(null!==c&&null!==d&&c.type===t&&d.type===t)c.index<d.index?(r=n.getPositionAt(c.index),s=n.getPositionAt(d.index),l="yRemoteSelectionHead yRemoteSelectionHead-"+i,u=null):(r=n.getPositionAt(d.index),s=n.getPositionAt(c.index),l=null,u="yRemoteSelectionHead yRemoteSelectionHead-"+i),a.push({range:new vc.Range(r.lineNumber,r.column,s.lineNumber,s.column),options:{className:"yRemoteSelection yRemoteSelection-"+i,afterContentClassName:l,beforeContentClassName:u}})}})),o._decorations.set(e,e.deltaDecorations(i,a))}else o._decorations.delete(e)}))},this._ytextObserver=function(e){o.mux((function(){var i=0;e.delta.forEach((function(e){if(void 0!==e.retain)i+=e.retain;else if(void 0!==e.insert){var t=n.getPositionAt(i),r=new vc.Selection(t.lineNumber,t.column,t.lineNumber,t.column),o=e.insert;n.applyEdits([{range:r,text:o}]),i+=o.length}else{if(void 0===e.delete)throw No();var a=n.getPositionAt(i),s=n.getPositionAt(i+e.delete),l=new vc.Selection(a.lineNumber,a.column,s.lineNumber,s.column);n.applyEdits([{range:l,text:""}])}})),o._savedSelections.forEach((function(e,n){var i=eM(n,t,e,o.doc);null!==i&&n.setSelection(i)}))})),o._rerenderDecorations()},t.observe(this._ytextObserver);var a=t.toString();n.getValue()!==a&&n.setValue(a),this._monacoChangeHandler=n.onDidChangeContent((function(e){o.mux((function(){o.doc.transact((function(){e.changes.sort((function(e,t){return t.rangeOffset-e.rangeOffset})).forEach((function(e){t.delete(e.rangeOffset,e.rangeLength),t.insert(e.rangeOffset,e.text)}))}),o)}))})),n.onWillDispose((function(){o.destroy()})),r&&(i.forEach((function(e){e.onDidChangeCursorSelection((function(){if(e.getModel()===n){var i=e.getSelection();if(null===i)return;var o=n.getOffsetAt(i.getStartPosition()),a=n.getOffsetAt(i.getEndPosition());if(i.getDirection()===vc.SelectionDirection.RTL){var s=o;o=a,a=s}r.setLocalStateField("selection",{anchor:ss(t,o),head:ss(t,a)})}})),r.on("change",o._rerenderDecorations)})),this.awareness=r)}return(0,c.default)(e,[{key:"destroy",value:function(){this._monacoChangeHandler.dispose(),this.ytext.unobserve(this._ytextObserver),this.doc.off("beforeAllTransactions",this._beforeTransaction),this.awareness&&this.awareness.off("change",this._rerenderDecorations)}}]),e}();vc=o("iwZD2");function nM(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",i=0;i<e;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function iM(e){return window.location.origin+window.location.pathname+"?/"+e.join("/")}var rM;rM=o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("3neMN");var oM;oM=o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("4DnVG");var aM;aM=o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("biOTi");var sM;sM=o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("d5ac6");var lM;lM=o("g8aXv").getBundleURL("3aPN1")+o("2XGuX").resolve("hcdJV");var uM,cM=[{documentation:"Add ASCII art drawings, sketches, or what ever you want, simply\nby enclosing it with at least four back tics (````).\n\nExamples:\n\n  `````````````````````````````````\n                           .---\x3e  F\n  A       B     C   D     /\n  *-------*-----*---*----*-----\x3e  E\n                       ^ v          /   '---\x3e  G\n             B --\x3e C -'\n  `````````````````````````````````",insertText:"``````````````````````````````````````````````````\n${1:                             .---\x3e  F\n    A       B     C   D     /\n    *-------*-----*---*----*-----\x3e  E\n                         ^ v          /   '---\x3e  G\n               B --\x3e C -'}\n``````````````````````````````````````````````````",label:"lia-ascii-example"},{documentation:"Add styling to your ASCII art drawings, sketches. Set the maximum\nsize or center it.\n\nExamples:\n\n  \x3c!-- style=\"display: block;\n              margin-left: auto;\n              margin-right: auto;\n              max-width: 315px;\" --\x3e\n  ``````````````````````````````````````````````````\n  ${1:                             .---\x3e  F\n      A       B     C   D     /\n      *-------*-----*---*----*-----\x3e  E\n                           ^ v          /   '---\x3e  G\n                 B --\x3e C -'}\n  ``````````````````````````````````````````````````",insertText:"\x3c!-- style=\"display: block; margin-left: auto; margin-right: auto; max-width: 315px;\" --\x3e\n``````````````````````````````````````````````````\n${1:                             .---\x3e  F\n    A       B     C   D     /\n    *-------*-----*---*----*-----\x3e  E\n                         ^ v          /   '---\x3e  G\n               B --\x3e C -'}\n``````````````````````````````````````````````````",label:"lia-ascii-example-css"},{documentation:"Inline `code` has `back-ticks around` it.",insertText:"`${1:code}`",label:"lia-code-inline"},{documentation:'To insert a code block with syntax highlight, enclose your code snippet with three back-ticks (```) that is followed by a language code. To search all language codes, visit the link below, but in most cases you can simply add either the name of the language or the typical file-ending.\n\nExamples:\n\n  ```javascript\n  var s = "JavaScript syntax highlighting";\n  alert(s);\n  s;\n  ```\n\n  ```python\n  s = "Python syntax highlighting"\n  print s\n  ```\n\n  ```\n  No language indicated, so no syntax highlighting.\n  But let\'s throw in a <b>tag</b>.\n  ```',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|}\n${2:var s = "JavaScript syntax highlighting";\nalert(s);}\n```',label:"lia-code-block"},{documentation:'To insert an executable and editable code block with syntax highlight, insert a common Markdown code block with a succeeding <script> tag. The macro @input is replaced with the current user input and gets evaluated in a try and catch block. Using JavaScript you can also insert interpreters to other languages or access them. In these cases you will have to change the content of the script tag. To get an impression about the possibilities, click on the link below.\nThe result of the script or the error are passed to a command-line like output beneath the code-block.\n\nExample:\n\n  ```javascript\n  var s = "JavaScript syntax highlighting";\n  alert(s);\n  ```\n  <script>@input<\/script>',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|}\n${2:var s = "JavaScript syntax highlighting";\nalert(s);\ns;}\n```\n<script>${3:@input}<\/script>',label:"lia-code-block-js"},{documentation:'You can name your snippets by adding just after the language code. At default, it will be visible, but by adding a plus (+) in front of your filename you can make this more expressible, whereby a minus (-) will hide it at first. In this way you can also group multiple files into a (executable) project.\n\nExamples:\n\n  ```javascript    Visible.js\n  alert("Visble JavaScript file";);\n  ```\n\n  ```javascript   +Visible.js\n  alert("Also visible JavaScript file");\n  ```\n\n  ```javascript   -Hidden.js\n  alert("Hidden JavaScript file on init");\n  ```',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|} ${2:title.js}\n${3:var s = "Named JavaScript syntax highlighting";\nalert(s);}\n```',label:"lia-code-block-name"},{documentation:'To insert a named and executable and code snippet. The macro @input is replaced with the current user input and gets evaluated in a try and catch block. Using JavaScript you can also insert interpreters to other languages or access them. In these cases you will have to change the content of the <script> tag. To get an impression about the possibilities, click on the link below.\nThe result of the script or the error are passed to a command-line like output beneath the code-block.\n\nExample:\n\n  ```javascript   +Tile.js\n  var s = "Visible JavaScript syntax highlighting";\n  ```\n  <script>@input<\/script>\n\n  ```javascript   +Title.js\n  var s = "Hidden JavaScript syntax highlighting";\n  ```\n  <script>@input<\/script>',insertText:'```${1|abap,abc,actionscript,ada,adoc,ahk,alda,angelscript,apache,apache_conf,apacheconf,apex,applescript,aql,arduino,arm,armasm,as,asc,asciidoc,asl,asm,aspectj,atom,autohotkey,avrasm,bash,basic,bat,batchfile,c,c#,c++,c9search,cc,cirru,cjs,clj,clojure,cmake,cmake.in,cmd,cobol,coffee,coffeescript,coldfusion,console,cpp,cr,craftcms,crm,crmsh,crystal,cs,csharp,cson,csound_document,csound_orchestra,csound_score,csp,css,curly,cxx,d,dart,delphi,dfm,diff,django,docker,dockerfile,dos,dot,dpr,drools,edifact,edn,eiffel,ejs,elixir,elm,erl,erlang,ex,exs,f#,f90,f95,feature,forth,fortran,fs,fsharp,fsl,ftl,gcode,gemspec,gherkin,gitignore,glsl,go,gobstones,golang,graphqlschema,groovy,gyp,h,h++,haml,handlebars,haskell,haskell_cabal,haxe,hbs,hh,hjson,hpp,hs,html,htmlbars,html_elixir,html.handlebars,html.hbs,html_ruby,hx,hxx,hy,hylang,iced,ini,ino,io,ipython,irb,jack,jade,java,javascript,jinja,js,json,json5,jsoniq,jsp,jssm,jsx,julia,kot,kotlin,kt,kts,latex,latte,less,liquid,lisp,livescript,logiql,logtalk,ls,lsl,lua,luapage,lucene,mak,make,makefile,markdown,mask,matlab,maze,md,mediawiki,mel,mips,mipsasm,mixal,mjs,mk,mkd,mkdown,ml,mm,mushcode,mysql,nc,nginx,nginxconf,nim,nix,nixos,nsis,nunjacks,obj-c,obj-c++,objc,objective-c++,objectivec,ocaml,openscad,osascript,pas,pascal,patch,pb,pbi,pcmk,pde,perl,pgsql,php,php_laravel_blade,pig,pl,plaintext,plist,pm,podspec,postgres,postgresql,powershell,pp,praat,prisma,processing,prolog,properties,protobuf,ps,ps1,puppet,purebasic,pwsh,py,python,qml,qt,r,raku,razor,rb,rdoc,red,redshift,rest,rhtml,rs,rss,rst,ruby,rust,sass,scad,scala,scheme,scss,sh,shell,shellsession,sjs,slim,smarty,smithy,soy,space,sparql,sql,sqlserver,styl,stylus,svg,swift,tcl,terraform,tex,text,textile,thor,tk,toml,ts,tsx,turtle,twig,txt,typescript,vala,vb,vbnet,vbs,vbscript,velocity,verilog,vhdl,visualforce,wollok,wsf,x86asm,xhtml,xjb,xml,xpath,xq,xquery,xsd,xsl,yaml,yml,zeek|}   ${2:Filename.js}\n${3:var s = "Named JavaScript syntax highlighting";\nalert(s);\ns;}\n```\n<script>${4:@input}<\/script>',label:"lia-code-block-name-js"},{documentation:'This is an extended executable version of a code block, it shows how errors can be extracted and fed back by using LiaError to show inline errors, warnings, or information.\nIf you are using a project and want to integrate more than one file into your execution, you will have to use the parameterized @input(int) macro, the integer is defined by the file order (@input defaults to 0).\n\nExample:\n\n  ```javascript\n  var s = "JavaScript syntax highlighting";\n  alert(s);\n  ```\n  <script>\n    try{\n      eval(`@input`);  // <== code to evaluate\n    } catch (e) {\n      var log = e.stack.match(/((.*?):(.*))\\n.*?(:(\\d+):(\\d+)\\)\\n)/);\n      var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n      err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n      throw err_msg;\n    }\n  <\/script>',insertText:'```${1:javascript}\n${2:var s = "JavaScript syntax highlighting";\nalert(s);}\n```\n<script>\n  try{\n    eval(`@input`);\n  } catch (e) {\n    var log = e.stack.match(/((.*?):(.*))\\\\n.*?(:(\\\\d+):(\\\\d+)\\\\)\\\\n)/);\n    var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n    err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n    throw err_msg;\n  }\n<\/script>',label:"lia-code-block-jsx"},{documentation:'This is an extended executable version of a code block, it shows how errors can be extracted and fed back by using LiaError to show inline errors, warnings, or information.\nIf you are using a project and want to integrate more than one file into your execution, you will have to use the parameterized @input(int) macro, the integer is defined by the file order (@input defaults to 0).\n\nExample:\n\n  <script>\n    try{\n      eval(`@input`); // code to be evaluated\n    } catch (e) {\n      // do some pattern matching to get the error string, the line number and column\n      var log = e.stack.match(/((.*?):(.*))\\n.*?(:(\\d+):(\\d+)\\)\\n)/);\n\n      // create a new LiaError object with\n      // param1: an error message string\n      // param2: add the number of files involved as int\n      var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n\n      // add as many information to your error message\n      // param1: file id\n      // param2: additional information string\n      // param3: type, either "error", "info", or "warning"\n      // param4: line number\n      // param5: column number\n      err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n\n      throw err_msg;   // finally just throw it away\n    }\n  <\/script>',insertText:'<script>\n  try{\n    eval(`@input`);\n  } catch (e) {\n    var log = e.stack.match(/((.*?):(.*))\\\\n.*?(:(\\\\d+):(\\\\d+)\\\\)\\\\n)/);\n    var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n    err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n    throw err_msg;\n  }\n<\/script>',label:"lia-code-js"},{documentation:'In contrast to the @input macro, there is also an @output macro, which can be used to define the initial output of and executable code-block. This block has to be the last and you can use a plus (+) or a minus (-) in front to indicate, whether this output is interpreted as normal stdout or stderr.\n\nExample:\n\n  ``` js     -EvalScript.js\n  let str = "hello world";\n\n  consolelog(str)\n  ```\n  ``` json    -@ouput\n  There is a error in line 3...\n  ```\n  <script>@input<\/script>',insertText:"``` ${1:text}     ${2:+@output}\n${3:Enter your default output}\n```",label:"lia-code-output"},{documentation:'If you want to create a project and thus separate data and code into multiple files, simply write multiple code blocks in a sequence. To make them executable as a whole, simply add a script tag to the end and use the parameterized @input(id) macro to compose your project properly. The file id is defined by the order of code blocks.\nSee the link below to see more examples.\n\nExample:\n\n  ``` js     -EvalScript.js\n  let who = data.first_name + " " + data.last_name;\n\n  if(data.online) { who + " is online"; }\n  else            { who + " is NOT online"; }\n  ```\n  ``` json    +Data.json\n  { "first_name" :  "Sammy",\n    "last_name"  :  "Shark",\n    "online"     :  true   }\n  ```\n  <script>\n    // insert the JSON dataset into the local variable data\n    let data = @input(1);\n\n    // eval the script that uses this dataset\n    eval(`@input(0)`);\n  <\/script>',insertText:'``` ${1:js}     ${2:-EvalScript.js}\n${3:let who = data.first_name + " " + data.last_name;\n\nif(data.online) {\n  who + " is online"; \\}\nelse {\n  who + " is NOT online"; \\}}\n```\n``` ${4:json}    ${5:+Data.json}\n${6:{\n  "first_name" :  "Sammy",\n  "last_name"  :  "Shark",\n  "online"     :  true\n\\}}\n```\n<script>\n  ${7:// insert the JSON dataset into the local variable data\n  let data = @input(1);\n\n  // eval the script that uses this dataset\n  eval(`@input(0)`);}\n<\/script>',label:"lia-code-project"},{documentation:'Comments are those elements that get read out aloud in slide and presentation mode and a printed out at the placed position in textbook mode. Only paragraphs are allowed as comments and Markdown can be applied for styling different elements.\nThe default voice is defined within the main header, if not english will be used. This main voice can be changed per section by adding a section comment.\n\nExample:\n  \x3c!--\n  author:   ...\n  email:    ...\n  ...\n  narrator: UK English Female\n  --\x3e\n\n  # Title\n\n               --{{0}}--\n  I will speak with a female *UK* accent.\n\n  ## Section\n  \x3c!-- narrator: US English Male --\x3e\n\n               --{{0}}--\n  This entire section will be spoken aloud american man.\n\n               --{{1}}--\n  But only this section...\n\nTo simplify the voice-search, simply start typing "voice" and fuzzy search all responsive voice or click on the link below.',insertText:"              --{{${1:number}}}--\n${2:Enter some **text** that gets read out aloud.\nOnly paragraphs are allowed!}'",label:"lia-comment"},{documentation:'You can change the voice also per comment by adding it directly after the number of appearance.\nType "voice" for fuzzy searching all responsive voices or click on the link below.\n\nExample:\n        --{{0 Australian Female}}--\n  I will speak with a female Australian accent,\n  no matter what the default language is.\n\n        --{{0 Deutsch Male}}--\n  Und hier uert sich gerade ein deutscher Mann.',insertText:"              --{{${1:number} ${2|UK English Female,UK English Male,US English Female,US English Male,Afrikaans Male,Albanian Male,Arabic Female,Arabic Male,Armenian Male,Australian Female,Australian Male,Bangla Bangladesh Female,Bangla Bangladesh Male,Bangla India Female,Bangla India Male,Bosnian Male,Brazilian Portuguese Female,Brazilian Portuguese Male,Catalan Male,Chinese Female,Chinese Male,Chinese (Hong Kong) Female,Chinese (Hong Kong) Male,Chinese Taiwan Female,Chinese Taiwan Male,Croatian Male,Czech Female,Czech Male,Danish Female,Danish Male,Deutsch Female,Deutsch Male,Dutch Female,Dutch Male,Esperanto Male,Estonian Male,Filipino Female,Finnish Female,Finnish Male,French Canadian Female,French Canadian Male,French Female,French Male,Greek Female,Greek Male,Hindi Female,Hindi Male,Hungarian Female,Hungarian Male,Icelandic Male,Indonesian Female,Indonesian Male,Italian Female,Italian Male,Japanese Female,Japanese Male,Korean Female,Korean Male,Latin Female,Latin Male,Latvian Male,Macedonian Male,Moldavian Female,Moldavian Male,Montenegrin Male,Nepali,Nepali,Norwegian Female,Norwegian Male,Polish Female,Polish Male,Portuguese Female,Portuguese Male,Romanian Female,Romanian Male,Russian Female,Russian Male,Serbian Male,Serbo-Croatian Male,Sinhala,Sinhala,Slovak Female,Slovak Male,Spanish Female,Spanish Male,Spanish Latin American Female,Spanish Latin American Male,Swahili Male,Swedish Female,Swedish Male,Tamil Female,Tamil Male,Thai Female,Thai Male,Turkish Female,Turkish Male,Ukrainian Female,Vietnamese Female,Vietnamese Male,Welsh Male|}}}--\n${3:Enter some **text** that gets read out aloud with another voice.\nOnly paragraphs are allowed!}'",label:"lia-comment-voice"},{documentation:"If you want to speak out some additional text that shall not appear in the textbook mode, then simply put your comment into a HTML comment tag.\n\nExample:\n  \x3c!-- --{{2}}--\n  I will speak with the default voice, but not appear\n  elsewhere within the document.\n  --\x3e",insertText:"\x3c!-- --{{${1:number}}}-- ${2:Enter some **text** that gets read out aloud!} --\x3e",label:"lia-comment-hidden"},{documentation:'If you want to speak out some additional text that shall not appear in the textbook mode and speak with another voice, then simply put your comment with a voice definition into a HTML comment tag.\n\nExample:\n  \x3c!-- --{{2 Deutsch Female}}--\n  I will speak with a German voice, but not appear\n  elsewhere within the document.\n  --\x3e\n\nType "voice" for fuzzy searching or click on the link below for more information.',insertText:"\x3c!-- --{{${1:number} ${2|UK English Female,UK English Male,US English Female,US English Male,Afrikaans Male,Albanian Male,Arabic Female,Arabic Male,Armenian Male,Australian Female,Australian Male,Bangla Bangladesh Female,Bangla Bangladesh Male,Bangla India Female,Bangla India Male,Bosnian Male,Brazilian Portuguese Female,Brazilian Portuguese Male,Catalan Male,Chinese Female,Chinese Male,Chinese (Hong Kong) Female,Chinese (Hong Kong) Male,Chinese Taiwan Female,Chinese Taiwan Male,Croatian Male,Czech Female,Czech Male,Danish Female,Danish Male,Deutsch Female,Deutsch Male,Dutch Female,Dutch Male,Esperanto Male,Estonian Male,Filipino Female,Finnish Female,Finnish Male,French Canadian Female,French Canadian Male,French Female,French Male,Greek Female,Greek Male,Hindi Female,Hindi Male,Hungarian Female,Hungarian Male,Icelandic Male,Indonesian Female,Indonesian Male,Italian Female,Italian Male,Japanese Female,Japanese Male,Korean Female,Korean Male,Latin Female,Latin Male,Latvian Male,Macedonian Male,Moldavian Female,Moldavian Male,Montenegrin Male,Nepali,Nepali,Norwegian Female,Norwegian Male,Polish Female,Polish Male,Portuguese Female,Portuguese Male,Romanian Female,Romanian Male,Russian Female,Russian Male,Serbian Male,Serbo-Croatian Male,Sinhala,Sinhala,Slovak Female,Slovak Male,Spanish Female,Spanish Male,Spanish Latin American Female,Spanish Latin American Male,Swahili Male,Swedish Female,Swedish Male,Tamil Female,Tamil Male,Thai Female,Thai Male,Turkish Female,Turkish Male,Ukrainian Female,Vietnamese Female,Vietnamese Male,Welsh Male|}}}-- ${3:Enter some **text** that gets read out aloud!} --\x3e",label:"lia-comment-voice-hidden"},{documentation:"The character is used as a color code, such as r stands for red, w for white, etc. Uppercase and lowercase characters define the size of the plotted dots. And if there is only one character, then it is plotted as a single dot only.\n\nExample:\n                  Colored - Dots\n     6 | A a B b C c\n       | D d E e F f G g H h I i\ny-axis | J j K k L l M m N n o O\n       | P p Q q R r S s T t U u\n       | V v W w X x Y y Z Z   *\n     1 +------------------------\n       0        x-axis        24\n\nThe definition of the title, x and y labels and their limits is optional, but the number of used pipes (|) and hyphens (-) define the resolution of the diagram.",insertText:"               Title - dots\n6 | A a B b C c\n  | D d E e F f G g H h I i\n  | J j K k L l M m N n o O\n  | P p Q q R r S s T t U u\n  | V v W w X x Y y Z Z   *\n1 +------------------------\n  0                      24",label:"lia-diagram-dots"},{documentation:"The character is used as a color code, such as r stands for red, B for blue, etc. Uppercase and lowercase characters define the size of the plotted dots. A sequence of equal characters gets interpreted as a poly-line, there are more than two characters and if there are no two characters at the same x position.\n\nExample:\n                                  Multiline\n  1.9 |\n      |                 ***\n    y |               *     *\n    - | r r r r r r r*r r r r*r r r r r r r\n    a |             *         *\n    x |            *           *\n    i | B B B B B * B B B B B B * B B B B B\n    s |         *                 *\n      | *  * *                       * *  *\n   -1 +------------------------------------\n      0            x-axis                 1\n\nThe definition of the title, x and y labels and their limits is optional, but the number of used pipes (|) and hyphens (-) define the resolution of the diagram.",insertText:"                                Multiline\n1.9 |\n    |                 ***\n  y |               *     *\n  - | r r r r r r r*r r r r*r r r r r r r\n  a |             *         *\n  x |            *           *\n  i | B B B B B * B B B B B B * B B B B B\n  s |         *                 *\n    | *  * *                       * *  *\n -1 +------------------------------------\n    0              x-axis               1",label:"lia-diagram-multiline"},{documentation:"Simple dots and poly-line representations can be applied together in one diagram, if they use different characters.\n\nExample:\n              Combining dots and poly-lines\n  1.9 |\n      |     DOTS\n    y |                                *\n    - |\n    a |                         *\n    x |                  *\n    i |         *\n    s |\n      | *\n   -1 +------------------------------------\n      0            x-axis                 1\n\nThe definition of the title, x and y labels and their limits is optional, but the number of used pipes (|) and hyphens (-) define the resolution of the diagram.",insertText:"             Combining dots and polylines\n1.9 |\n    |     DOTS\n  y |                                *\n  - |\n  a |                         *\n  x |                  *\n  i |         *\n  s |\n    | *\n -1 +------------------------------------\n    0            x-axis                 1",label:"lia-diagram-simple"},{documentation:'Use simple inline effects to highlight specific elements within a Markdown block. Simply enclose your elements within two subsequent braces ({}{}), whereby the first one is used to hold the number of appearance, while the will contain your text, image, video, what so ever ...\nYou can tweak your effects with additional animations and styling. Animate.css is included at default.\n\nExamples:\n  This block contains some {1}{inline __effects__} that will appear {2}{subsequently}.\n\n  Inline effects can also contain more effects {1}{I will appear first {2}{and I as a second}}.\n\n  With styling ++ {3}{bouncing red and delayed}\x3c!--\n        class = "animated infinite bounce"\n        style = "animation-delay: 3s; color: red;"\n      --\x3e',insertText:"{${1:number}}{${2:__element__}}",label:"lia-effect-inline"},{documentation:'Use simple inline effects to highlight specific elements within a Markdown block. Simply enclose your elements within two subsequent braces ({}{}), whereby the first one contains two numbers separated by (-) the first number defines the time of appearance and the second one the time of disappearance. The element contains the Markdown elements for highlighting (text, videos, images, etc.)\nYou can tweak your effects with additional animations and styling. Animate.css is included at default.\n\nExamples:\n  This block contains some {1-2}{I appear at fragment 1 and disapper at 2}.\n\n  Nesting is allowed but has to make sense {1-3}{I will rest from 1 to 3 {4}{I will not be visible}}.\n\n  With styling ++ {1-3}{bouncing red and delayed}\x3c!--\n        class = "animated infinite bounce"\n        style = "animation-delay: 3s; color: red;"\n      --\x3e',insertText:"{${1:from}-${2:to}}{${3:__element__}}",label:"lia-effect-inline2"},{documentation:'Use block effects to let entire Markdown blocks appear or disappear. It works exactly as simple inline effects. But the number of appearance has to be put in double braces.\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                    {{1}}\n  This entire block will appear with the first\n  fragment. And remain till the end of this slide.\n\n                    {{2}}\n  ```js\n  // this works with any markdown block\n  ```\n\n  \x3c!-- class = "animated rollIn" --\x3e\n       {{3}}\n  | Also | with  |\n  |------|-------|\n  | any  | table |',insertText:"    {${1:number}}\n$2",label:"lia-effect-block"},{documentation:'Use block effects to let entire Markdown blocks appear or disappear. It works exactly as simple inline effects. But the number of appearance has to be put in double braces, followed by a hyphen (-) and the number of disappearance.\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                   {{1-4}}\n  This entire block will appear with the first fragment.\n  And remain untill the fourth fragment of this slide.\n\n                   {{0-1}}\n  ```js\n  // I will be present emeadiately and disapper on the\n  // 1st fragment.\n  ```\n\n  \x3c!-- class = "animated rollIn" --\x3e\n       {{3-4}}\n  | Also | with  |\n  |------|-------|\n  | any  | table |',insertText:"    {${1:from}-${2:to}}\n$3",label:"lia-effect-block"},{documentation:"You can bundle multiple blocks to one effect block by enclosing them into two lines of stars (*). The rest works exactly as block effects...\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                    {{1}}\n  *************************************************\n\n  Both blocks will appear at once. Nesting of other\n  {2}{inline} and block effects is also allowed.\n\n\n  | Also | with  |\n  |------|-------|\n  | any  | table |\n\n  **************************************************",insertText:"                 {{${1:number}}}\n************************************************\n\n${2:Insert your Markdown blocks in here ...}\n\n************************************************",label:"lia-effect-multiblock"},{documentation:"You can bundle multiple blocks to one effect block by enclosing them into two lines of stars (*). The rest works exactly as block effects...\nThe entire block can also be styled and the animation tweaked, but the required comment tag has to be defined before the Markdown block. Animate.css is included at default.\n\nExamples:\n                    {{1-3}}\n  *************************************************\n\n  Both blocks will appear at once and disappear at\n  the third fragment. Nesting of other {2}{inline}\n  and block effects is also allowed.\n\n\n  | Also | with  |\n  |------|-------|\n  | any  | table |\n\n  **************************************************",insertText:"                 {{${1:from}-${2:to}}}\n************************************************\n\n${3:Insert your Markdown blocks in here ...}\n\n************************************************",label:"lia-effect-multiblock2"},{documentation:'This is only an example of how Animate.css can be used to tweak your effects. Additional CSS magic can be applied onto single elements or blocks by adding a comment tag either in front of the block or directly after the element.\n\nExample:\n\n  \x3c!-- class = "animated rollIn" style = "animation-delay: 3s; color: purple" --\x3e\n  The whole text-block should appear in purple color and with a wobbling effect.\n  Which is a **bad** example, please use it with caution ...\n  ~~ Jumping red ~~ \x3c!-- class = "animated infinite bounce" style = "color: red;" --\x3e\n\nFor more information how to change the animation styles, click on the link below.',insertText:'\x3c!-- class="animated rollIn" style="animation-delay: 3s;" --\x3e',label:"lia-effect-animate-example"},{documentation:"With this triangle notation it is possible to add a playback button, which will read out loud the text within the second braces. It is possible to add additional animation definitions and also to change the voice.\n\nStart typing voice, if you want to change the narrator and the language.\n\nExamples:\n  Within this block {|>}{this text will be spoken out loud}.\n\n  Nesting is allowed but has to make sense {1-3 |>}{I speak from 1 to 3 {4}{and nesting is also possible}}.\n\n  If you want to {|> Australian Female}{it is also possible to change the voice}.",insertText:"{|>}{${1:text to read}}",label:"lia-effect-inline-playback"},{documentation:'Use the `|>` or `!>` to indicate, that the entire block below should be read out loud in the default language. It is also possible to add effect-numbers to indicate the appearance and also to add another language. Start typing "voice" to select another narrator and language.\n\nExample:\n\n     {{|>}}\n  Read this block after the user has clicked the play button.\n\n     {{3 |>}}\n  This block will only appear at the 3rd animation step.\n\n     {{1-2 |> Australian Female}}\n  This will appear at step 1 and disappear at animation step 2, when the\n  users clicks on it, an Australian female voice is used as a narrator.',insertText:"{{|>}}",label:"lia-effect-block-playback"},{documentation:'Links can be added in many ways to a document (relative or absolute), either in common Markdown style by enclosed brackets ([]) and parentheses (()), or directly if it starts with http or www and matches the common url pattern.\nIf you want to navigate within the current document, use hash tag and the number of the slide.\nAnd you can add additional html and css options by adding a trailing comment.\n\nExamples:\n  [LiaScript](https://liascript.github.io)\n\n  Also an accepted link: https://liascript.github.io\n\n  Local navigation by slide number: [top](#1)\n\n  Local navigation by slide title: [top](#some-title)\n\n  With styling [LiaScript](https://liascript.github.io)\x3c!--\n    title = "click me"\n    style = "color: red;"\n  --\x3e',insertText:"[${1:name}](${2:url})",label:"lia-link"},{documentation:'An optional information can be attached to every link by adding double quotes after the link in the parentheses.\n\nExamples:\n  [LiaScript](https://liascript.github.io "click Me")\n\n  Local navigation:\n    [top](#1 "by slide number")\n    [top](#and-the-title-is "by slide title")',insertText:'[${1:name}](${2:url} "${3:info}")',label:"lia-link-info"},{documentation:'Include images via the common Markdown notation as depicted below, by using absolute or relative paths. In contrast to common Markdown you can add also styles, classes, or any other allowed image tag to it simply by appending a comment tag.\n\nExample:\n\n  ![image of a puppy](https://upload.wikimedia.org/wikipedia/commons/c/c7/Puppy_on_Halong_Bay.jpg)\n\n  ![relative](./img/puppy.jpg)\n\n  ![with styling](./img/puppy.jpg)\x3c!--\n      title = "a gray puppy"\n      width = "300px"\n      style = "border: 10px solid; filter: grayscale(100%);"\n    --\x3e',insertText:"![${1:alt-text}](${2:image-url})",label:"lia-image"},{documentation:'Optional information can be attached to every image by adding double quotes after the link in the parentheses. This will be attached as a subtitle to this element and can also include Markdown syntax.\n\nExample:\n\n  ![image of a puppy](https://upload.wikimedia.org/wikipedia/commons/c/c7/Puppy_on_Halong_Bay.jpg "This image is free __CC0__")\n\n  ![relative](./img/puppy.jpg "A cute image of a __puppy__")',insertText:'![${1:alt-text}](${2:image-url} "${3:info}")',label:"lia-image-info"},{documentation:"Including audio is done with a starting question mark (?) that is followed a common Markdown link. If you want to include soundcloud, then you only have to refer to the link and the player gets embedded into your course.\n\nExample:\n\n  ?[singing birds](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3)\n\n  ?[soundcloud](https://soundcloud.com/glennmorrison/beethoven-moonlight-sonata)",insertText:"?[${1:alt-text}](${2:audio-url})",label:"lia-audio"},{documentation:'An optional information can be attached to every audio file by adding double quotes after the link in the parentheses. This will be attached as a subtitle to this element and can also include Markdown syntax.\n\nExample:\n\n  ?[singing birds](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3 "optional infos")',insertText:'?[${1:alt-text}](${2:audio-url} "${3:info}")',label:"lia-audio-info"},{documentation:'Include movies is like combining images and sound by a starting exclamation mark followed by a question mark (!?) as depicted below. Paths can either be absolute or relative. You can add also styles, classes, or any other allowed options to it simply by appending a comment tag.\n\nTo simplify the usage, you can directly use the YouTube link, or Vimeo, or TeacherTube. Those resources are atomatically parsed and included appropriately into the document, without searching for an embed-code.\n\nExample:\n\n  !?[eLab](https://www.youtube.com/watch?v=bICfKRyKTwE)\n\n  !?[relative](./mov/video.mp4)\n\n  !?[eLab](https://www.youtube.com/watch?v=bICfKRyKTwE)\x3c!--\n      title = "the elab in gray"\n      width = "90%"\n      style = "border: 10px solid; filter: grayscale(100%);"\n    --\x3e\n\nBut it is still possible to use HTML to include Videos and other stuff ...\n\n  <iframe width="560" height="315" src="https://www.youtube.com/embed/bICfKRyKTwE" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>',insertText:"!?[${1:alt-text}](${2:movie-url})",label:"lia-movie"},{documentation:'Optional information can be attached to every video by adding double quotes after the link in the parentheses. This will be attached as a subtitle to this element and can also include Markdown syntax.\n\nExample:\n\n  !?[eLab](https://www.youtube.com/watch?v=bICfKRyKTwE "Some information about the previous __eLab__ project.")',insertText:'!?[${1:alt-text}](${2:movie-url} "${3:info}")',label:"lia-movie-info"},{documentation:"Embed anything by using two question marks. LiaScript will try to determine if it is possible to use oEmbed for this site, if not, the content will be embedded as an `<iframe>`.\n\nExample:\n\n  ??[circuit simulator](https://falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcDoBYDsAmdA2dBOdMMADhzEnxASQusmoFMBaYgKACcQBmTB7yKh58eCTFHCQ2Ac2H8xcniSEMpAJRCYEOTSRKbI+zHokNUDTNCSqoVtgHdF2cbwuYVDp+5CowOzN5Sjq7gxj5+ofrqimBhISQ2Zgx0iXYAxjFxIgEqtvCC+IVFxSU6+ND43CRiejjcOJUkEDBwYJzhOrH6vv6BkvCeIV2aWJFQg9nezpqBbADOI+LD0zkSEAAuHACujGwAZprauvohxlHgVnmYbAD2IPrDSfgPqrBw6E1aEuInbEA)\n\n  ??[Pottery Jar 3D model](https://sketchfab.com/3d-models/pottery-jar-0576d43d28924c948ed3bbae02e4e0cb)",insertText:"??[${1:alt-text}](${2:url})",label:"lia-embed"},{documentation:"If you group multimedia links within one line or within one block, they will appear as a gallery within LiaScript.\n\nExample:\n\n  ![image of a puppy](https://upload.wikimedia.org/wikipedia/commons/c/c7/Puppy_on_Halong_Bay.jpg)\n  ??[circuit simulator](https://falstad.com/circuit/circuitjs.html)\n  ??[Pottery Jar 3D model](https://sketchfab.com/3d-models/pottery-jar-0576d43d28924c948ed3bbae02e4e0cb)",insertText:"![${1:alt-text}](${2:url}) ![${3:alt-text}](${4:url})",label:"lia-gallery"},{documentation:"Inline Footnotes are composed of a reference in brackets with a starting caret. The following text has to be put into parentheses, only one line is allowed.\n\n   Example with [^1](inline _footnote_) and some more text.",insertText:"[^${1:ref}](${2:explanation})",label:"lia-footnote-inline"},{documentation:"Multiline footnotes have to be split into a reference and into a comment. Footnote references are defined by brackets with a starting caret and can appear everywhere within the text. Footnote texts have to be put into the end of each section.\n\nExample:\n\nHere is a footnote reference, [^1] and another.[^longnote]\n\n...\n\n[^1]: Here is the footnote text.\n\n[^longnote]: Here's one with multiple blocks.\n\n               Subsequent paragraphs are indented to show that they\n               belong to the previous footnote.",insertText:"[^${1:ref}]",label:"lia-footnote-reference"},{documentation:'Multiline footnotes have to be split into a reference and into a comment. Footnote texts start with a reference "tag", which is followed by a colon. They have to be put into the end of each section otherwise they are not interpreted as footnote texts and multi-block footnotes have to follow the previous indentation.\nExample:\n...\n\n[^1]: Here is the footnote text.\n\n[^longnote]: Here\'s one with multiple blocks.\n\n               Subsequent paragraphs are indented to show that they\n               belong to the previous footnote.',insertText:"[^${1:ref}]: ${2:some comments}",label:"lia-footnote-text"},{documentation:"Insert a mathematical formula (inline) within your text. It has to be enclosed with two single dollar signs, as shown in the example.\n\nExample: $ f(a,b,c) = (a^2+b^2+c^2)^3 $\n\nFormulas are rendered with KaTex, so click on the link below to get more information and examples on the applied notation.",insertText:"$ ${1:f(a,b,c) = (a^2+b^2+c^2)^3} $",label:"lia-formula-inline"},{documentation:"Insert a more multiline mathematical formula as a block, which is automatically centered within your document. It has to be enclosed with two dollar signs, as shown in the example.\n\nExample:\n\n$$\n   \\sum_{i=1}^\\infty\\frac{1}{n^2}\n        =\\frac{\\pi^2}{6}\n$$\n\nFormulas are rendered with KaTex, so click on the link below to get more information and examples on the applied notation.",insertText:"$$\n   ${1:\\\\sum_\\{i=1\\}^\\\\infty\\\\frac\\{1\\}\\{n^2\\}\n        =\\\\frac\\{\\\\pi^2\\}\\{6\\}}\n$$",label:"lia-formula-block"},{documentation:"  The main header is a comment of the following format. You can use it to define defaults, such as authors, emails, where to find translations, what JavaScript and styles should be loaded additionally, as well as the language of your course.\n  You can change some of these settings within a sub-header for each section individually.\n\n  Default:\n      language: (en) | de | ua | fa | hy | bg\n      narrator: US English Male\n\n  Example:\n\n      \x3c!--\n      author:   Your Name\n      email:    your@email.com\n      version:  0.1.0\n      language: en\n      narrator: US English Female\n\n      comment:  This simple description of your course.\n                Multiline is also okay.\n\n      link:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\n                https://...\n\n      script:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\n                https://...\n\n      translation: Franais translations/French.md\n      translation:     translations/Japanese.md\n      --\x3e\n\n      # Course ...\n\nAnd you can refer to these values via the system macros:\n\n    @author\n    @email\n    @version",insertText:"\x3c!--\nauthor:   ${1:Your Name}\nemail:    ${2:your@email.com}\nversion:  ${3:0.1.0}\nlanguage: ${4:en}\nnarrator: ${5:US English Female}\n\ncomment:  ${6:This simple description of your course.\n          Multiline is also okay.}\n\nlink:     ${7:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css}\n\nscript:   ${8:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js}\n\n${9:translation: Franais translations/French.md}\n--\x3e",label:"lia-header-main"},{documentation:"You can overwrite some main header settings as it is listed below. Just attach a comment to the section title and overwrite only those settings, that are relevant to you.\n\nExample:\n\n    ...\n    # Course\n    ...\n    ## Section\n    \x3c!--\n    narrator: Australian Female\n    --\x3e\n    ...\n    ### Sub Section\n    \x3c!--\n    author:   Section Author\n    email:    section.author@email.com\n    version:  0.1.0\n    narrator: Australian Female\n\n    link:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\n    script:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\n    --\x3e",insertText:"\x3c!--\nauthor:   ${1:Section Author}\nemail:    ${2:section.author@email.com}\nversion:  ${3:0.1.0}\nnarrator: ${4:UK English Female}\n\nlink:     ${5:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css}\n\nscript:   ${6:https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js}\n--\x3e",label:"lia-header-section"},{documentation:"",insertText:"actionscript",label:"hili-actionscript"},{documentation:"",insertText:"as",label:"hili-as"},{documentation:"",insertText:"apache",label:"hili-apache"},{documentation:"",insertText:"apacheconf",label:"hili-apacheconf"},{documentation:"",insertText:"asciidoc",label:"hili-asciidoc"},{documentation:"",insertText:"adoc",label:"hili-adoc"},{documentation:"",insertText:"x86asm",label:"hili-x86asm"},{documentation:"",insertText:"armasm",label:"hili-armasm"},{documentation:"",insertText:"arm",label:"hili-arm"},{documentation:"",insertText:"avrasm",label:"hili-avrasm"},{documentation:"",insertText:"asm",label:"hili-asm"},{documentation:"",insertText:"bash",label:"hili-bash"},{documentation:"",insertText:"sh",label:"hili-sh"},{documentation:"",insertText:"zsh",label:"hili-zsh"},{documentation:"",insertText:"c",label:"hili-c"},{documentation:"",insertText:"cc",label:"hili-cc"},{documentation:"",insertText:"cpp",label:"hili-cpp"},{documentation:"",insertText:"c++",label:"hili-c++"},{documentation:"",insertText:"h",label:"hili-h"},{documentation:"",insertText:"hpp",label:"hili-hpp"},{documentation:"",insertText:"h++",label:"hili-h++"},{documentation:"",insertText:"clojure",label:"hili-clojure"},{documentation:"",insertText:"clj",label:"hili-clj"},{documentation:"",insertText:"coffeescript",label:"hili-coffeescript"},{documentation:"",insertText:"coffee",label:"hili-coffee"},{documentation:"",insertText:"cson",label:"hili-cson"},{documentation:"",insertText:"iced",label:"hili-iced"},{documentation:"",insertText:"csharp",label:"hili-csharp"},{documentation:"",insertText:"cs",label:"hili-cs"},{documentation:"",insertText:"c#",label:"hili-c#"},{documentation:"",insertText:"diff",label:"hili-diff"},{documentation:"",insertText:"patch",label:"hili-patch"},{documentation:"",insertText:"django",label:"hili-django"},{documentation:"",insertText:"jinja",label:"hili-jinja"},{documentation:"",insertText:"dockerfile",label:"hili-dockerfile"},{documentation:"",insertText:"docker",label:"hili-docker"},{documentation:"",insertText:"elixir",label:"hili-elixir"},{documentation:"",insertText:"ex",label:"hili-ex"},{documentation:"",insertText:"exs",label:"hili-exs"},{documentation:"",insertText:"erlang",label:"hili-erlang"},{documentation:"",insertText:"erl",label:"hili-erl"},{documentation:"",insertText:"fsharp",label:"hili-fsharp"},{documentation:"",insertText:"fs",label:"hili-fs"},{documentation:"",insertText:"f#",label:"hili-f#"},{documentation:"",insertText:"fortran",label:"hili-fortran"},{documentation:"",insertText:"f90",label:"hili-f90"},{documentation:"",insertText:"f95",label:"hili-f95"},{documentation:"",insertText:"gcode",label:"hili-gcode"},{documentation:"",insertText:"nc",label:"hili-nc"},{documentation:"",insertText:"golang",label:"hili-golang"},{documentation:"",insertText:"go",label:"hili-go"},{documentation:"",insertText:"handlebars",label:"hili-handlebars"},{documentation:"",insertText:"hbs",label:"hili-hbs"},{documentation:"",insertText:"html.hbs",label:"hili-html.hbs"},{documentation:"",insertText:"html.handlebars",label:"hili-html.handlebars"},{documentation:"",insertText:"haskell",label:"hili-haskell"},{documentation:"",insertText:"hs",label:"hili-hs"},{documentation:"",insertText:"haxe",label:"hili-haxe"},{documentation:"",insertText:"hx",label:"hili-hx"},{documentation:"",insertText:"html",label:"hili-html"},{documentation:"",insertText:"xhtml",label:"hili-xhtml"},{documentation:"",insertText:"rss",label:"hili-rss"},{documentation:"",insertText:"atom",label:"hili-atom"},{documentation:"",insertText:"xjb",label:"hili-xjb"},{documentation:"",insertText:"xsd",label:"hili-xsd"},{documentation:"",insertText:"xsl",label:"hili-xsl"},{documentation:"",insertText:"plist",label:"hili-plist"},{documentation:"",insertText:"javascript",label:"hili-javascript"},{documentation:"",insertText:"js",label:"hili-js"},{documentation:"",insertText:"livescript",label:"hili-livescript"},{documentation:"",insertText:"ls",label:"hili-ls"},{documentation:"",insertText:"makefile",label:"hili-makefile"},{documentation:"",insertText:"mk",label:"hili-mk"},{documentation:"",insertText:"mak",label:"hili-mak"},{documentation:"",insertText:"markdown",label:"hili-markdown"},{documentation:"",insertText:"md",label:"hili-md"},{documentation:"",insertText:"mkdown",label:"hili-mkdown"},{documentation:"",insertText:"mkd",label:"hili-mkd"},{documentation:"",insertText:"ocaml",label:"hili-ocaml"},{documentation:"",insertText:"ml",label:"hili-ml"},{documentation:"",insertText:"objectivec",label:"hili-objectivec"},{documentation:"",insertText:"mm",label:"hili-mm"},{documentation:"",insertText:"objc",label:"hili-objc"},{documentation:"",insertText:"obj-c",label:"hili-obj-c"},{documentation:"",insertText:"delphi",label:"hili-delphi"},{documentation:"",insertText:"dpr",label:"hili-dpr"},{documentation:"",insertText:"dfm",label:"hili-dfm"},{documentation:"",insertText:"pas",label:"hili-pas"},{documentation:"",insertText:"pascal",label:"hili-pascal"},{documentation:"",insertText:"freepascal",label:"hili-freepascal"},{documentation:"",insertText:"lazarus",label:"hili-lazarus"},{documentation:"",insertText:"lpr",label:"hili-lpr"},{documentation:"",insertText:"lfm",label:"hili-lfm"},{documentation:"",insertText:"php",label:"hili-php"},{documentation:"",insertText:"php3",label:"hili-php3"},{documentation:"",insertText:"php4",label:"hili-php4"},{documentation:"",insertText:"php5",label:"hili-php5"},{documentation:"",insertText:"php6",label:"hili-php6"},{documentation:"",insertText:"perl",label:"hili-perl"},{documentation:"",insertText:"pl",label:"hili-pl"},{documentation:"",insertText:"pm",label:"hili-pm"},{documentation:"",insertText:"powershell",label:"hili-powershell"},{documentation:"",insertText:"ps",label:"hili-ps"},{documentation:"",insertText:"puppet",label:"hili-puppet"},{documentation:"",insertText:"pp",label:"hili-pp"},{documentation:"",insertText:"python",label:"hili-python"},{documentation:"",insertText:"py",label:"hili-py"},{documentation:"",insertText:"gyp",label:"hili-gyp"},{documentation:"",insertText:"ruby",label:"hili-ruby"},{documentation:"",insertText:"rb",label:"hili-rb"},{documentation:"",insertText:"gemspec",label:"hili-gemspec"},{documentation:"",insertText:"podspec",label:"hili-podspec"},{documentation:"",insertText:"thor",label:"hili-thor"},{documentation:"",insertText:"irb",label:"hili-irb"},{documentation:"",insertText:"rust",label:"hili-rust"},{documentation:"",insertText:"rs",label:"hili-rs"},{documentation:"",insertText:"scad",label:"hili-scad"},{documentation:"",insertText:"openscad",label:"hili-openscad"},{documentation:"",insertText:"shell",label:"hili-shell"},{documentation:"",insertText:"console",label:"hili-console"},{documentation:"",insertText:"stylus",label:"hili-stylus"},{documentation:"",insertText:"styl",label:"hili-styl"},{documentation:"",insertText:"tcl",label:"hili-tcl"},{documentation:"",insertText:"tk",label:"hili-tk"},{documentation:"",insertText:"twig",label:"hili-twig"},{documentation:"",insertText:"craftcms",label:"hili-craftcms"},{documentation:"",insertText:"typescript",label:"hili-typescript"},{documentation:"",insertText:"ts",label:"hili-ts"},{documentation:"",insertText:"vbscript",label:"hili-vbscript"},{documentation:"",insertText:"vbs",label:"hili-vbs"},{documentation:"",insertText:"verilog",label:"hili-verilog"},{documentation:"",insertText:"v",label:"hili-v"},{documentation:"",insertText:"xpath",label:"hili-xpath"},{documentation:"",insertText:"xq",label:"hili-xq"},{documentation:"Initialize your file with a complete dummy course with a header and body, which can be used as a bootstrap for your course.\n\nExample:\n\n    \x3c!--\n    author:   Your Name\n\n    email:    your@mail.org\n\n    version:  0.0.1\n\n    language: en\n\n    narrator: US English Female\n\n    ...\n    --\x3e\n\n    # Course Main Title\n\n    This is your **course** initialization stub...",insertText:'\x3c!--\nauthor:   Your Name\n\nemail:    your@mail.org\n\nversion:  0.0.1\n\nlanguage: en\n\nnarrator: US English Female\n\ncomment:  Try to write a short comment about\n          your course, multiline is also okay.\n\nlink:     https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css\n\nscript:   https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js\n\n--\x3e\n\n# Course Main Title\n\nThis is your **course** initialization stub.\n\nPlease see the [Docs](https://liascript.github.io/course/?https://raw.githubusercontent.com/liaScript/docs/master/README.md)\nto find out what is possible in [LiaScript](https://liascript.github.io).\n\nIf you want to use instant help in your Atom IDE, please type **lia** to see all available shortcuts.\n\n## Markdown\n\nYou can use common [Markdown](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet) syntax to create your course, such as:\n\n1. Lists\n2. ordered or\n\n   * unordered\n   * ones ...\n\n\n| Header 1   | Header 2   |\n| :--------- | :--------- |\n| Item 1     | Item 2     |\n\n\nImages:\n\n![images](https://farm2.static.flickr.com/1618/26701766821_7bea494826.jpg)\n\n\n### Extensions\n\n     --{{0}}--\nBut you can also include other features such as spoken text.\n\n      --{{1}}--\nInsert any kind of audio file:\n\n       {{1}}\n?[audio](https://bigsoundbank.com/UPLOAD/mp3/1068.mp3)\n\n\n     --{{2}}--\nEven videos or change the language completely.\n\n       {{2-3}}\n!?[video](https://www.youtube.com/watch?v=bICfKRyKTwE)\n\n\n      --{{3 Russian Female}}--\n      .\n\n\n    {{3}}\nType "voice" to see a list of all available languages.\n\n\n### Styling\n\n\x3c!-- class = "animated rollIn" style = "animation-delay: 2s; color: purple" --\x3e\nThe whole text-block should appear in purple color and with a wobbling effect.\nWhich is a **bad** example, please use it with caution ...\n~~ only this is red ;-) ~~ \x3c!-- class = "animated infinite bounce" style = "color: red;" --\x3e\n\n## Charts\n\nUse ASCII-Art to draw diagrams:\n\n                                    Multiline\n    1.9 |    DOTS\n        |                 ***\n      y |               *     *\n      - | r r r r r r r*r r r r*r r r r r r r\n      a |             *         *\n      x |            *           *\n      i | B B B B B * B B B B B B * B B B B B\n      s |         *                 *\n        | *  * *                       * *  *\n     -1 +------------------------------------\n        0              x-axis               1\n\n## Quizzes\n\n### A Textquiz\n\nWhat did the **fish** say when he hit a **concrete wall**?\n\n    [[dam]]\n\n### Multiple Choice\n\nJust add as many points as you wish:\n\n    [[X]] Only the **X** marks the correct point.\n    [[ ]] Empty ones are wrong.\n    [[X]] ...\n\n### Single Choice\n\nJust add as many points as you wish:\n\n    [( )] ...\n    [(X)] <-- Only the **X** is allowed.\n    [( )] ...\n\n## Executable Code\n\nA drawing example, for demonstrating that any JavaScript library can be used, also for drawing.\n\n```javascript\n// Initialize a Line chart in the container with the ID chart1\nnew Chartist.Line(\'#chart1\', {\n  labels: [1, 2, 3, 4],\n  series: [[100, 120, 180, 200]]\n});\n\n// Initialize a Line chart in the container with the ID chart2\nnew Chartist.Bar(\'#chart2\', {\n  labels: [1, 2, 3, 4],\n  series: [[5, 2, 8, 3]]\n});\n```\n<script>@input<\/script>\n\n<div class="ct-chart ct-golden-section" id="chart1"></div>\n<div class="ct-chart ct-golden-section" id="chart2"></div>\n\n\n### Projects\n\nYou can make your code executable and define projects:\n\n``` js     -EvalScript.js\nlet who = data.first_name + " " + data.last_name;\n\nif(data.online) {\n  who + " is online"; }\nelse {\n  who + " is NOT online"; }\n```\n``` json    +Data.json\n{\n  "first_name" :  "Sammy",\n  "last_name"  :  "Shark",\n  "online"     :  true\n}\n```\n<script>\n  // insert the JSON dataset into the local variable data\n  let data = @input(1);\n\n  // eval the script that uses this dataset\n  eval(`@input(0)`);\n<\/script>\n\n## More\n\nFind out what you can even do more with quizzes:\n\nhttps://liascript.github.io/course/?https://raw.githubusercontent.com/liaScript/docs/master/README.md',label:"lia-init"},{documentation:"Insert a Markdown ordered list, as depicted below. Indentation is important in this case.\n\nExample:\n  1. first point\n  2. second point\n  3. some text\n\n     and some image ![image](img/point.jpg)",insertText:"1. ${1:block}\n2. ${2:block}\n3. ${3:block}",label:"lia-list-ordered"},{documentation:"Insert a Markdown unordered list, as depicted below. You can use (*+-) to begin every point. Indentation is important in this case.\n\nExample:\n  * first point\n  + second point\n  - some text\n\n    and some image ![image](img/point.jpg)",insertText:"+ ${1:block}\n+ ${2:block}\n+ ${3:block}",label:"lia-list-unordered"},{documentation:"Gets replaced by the author defined in the header.",insertText:"@author",label:"lia-macro-author"},{documentation:"Gets replaced by the date defined in the header.",insertText:"@date",label:"lia-macro-date"},{documentation:"Gets replaced by the email defined in the header.",insertText:"@email",label:"lia-macro-email"},{documentation:"Use this only in conjunction with executable code and projects or with quizzes. This macro can only be used in a script tag and gets replaced by the current user input.\nTo refer to the inputs in a project, use the parameterized macro:\n\n  @input(0)   <== equal to @input\n  @input(1)",insertText:"@input",label:"lia-macro-input"},{documentation:"Gets replaced by the current section number.",insertText:"@section",label:"lia-macro-section"},{documentation:"Generates a UID that can be used to name tags uniquely.",insertText:"@uid",label:"lia-macro-uid"},{documentation:"Gets replaced by the version defined in the header.",insertText:"@version",label:"lia-macro-version"},{documentation:"If you do not want to store the course state wihin indexeddb and also not within the local course index, you can use this macro within the header, which means that no trace of this course will be stored locally.\n\nExample:\n  \x3c!--\n  persistent: false\n  --\x3e",insertText:"persistent: ${1|false,true|}",label:"lia-macro-persistent"},{documentation:'You can import the main macros of other courses, simply by using the import command, which is followed by the raw url of the foreign course.\n\nExample:\n\n  ## section\n  \x3c!--\n  import: https://raw.githubusercontent.com/liaTemplates/rextester_template/master/README.md\n  --\x3e\n\n  ``` python\n  print("Hello World")\n  ```\n  @Rextester.eval(@Python)',insertText:"import: ${1:url}",label:"lia-macro-import"},{documentation:"Attribution is an important issue. With the attribute command, you can define the attribution that is showed within the info field within the navigation pannel. These elements get also imported if you import the functionality from another course.\n\nA good attribution might look like the follwing ones...\n\nExample:\n  \x3c!--\n  attribute: [AlaSQL](https://alasql.org)\n             by [Andrey Gershun](agershun@gmail.com)\n             & [Mathias Rangel Wulff](m@rawu.dk)\n             is licensed under [MIT](https://opensource.org/licenses/MIT)\n\n  attribute: [PapaParse](https://www.papaparse.com)\n             by [Matthew Holt](https://twitter.com/mholt6)\n             is licensed under [MIT](https://opensource.org/licenses/MIT)\n  --\x3e\n",insertText:"attribute: ${1:thx}",label:"lia-macro-attribute"},{documentation:"You can change the default appearance of your document, either if you prefer dark mode or light mode. This will not change the user preferences. The default mode is defined by the user settings.\n\nExample:\n  \x3c!--\n  dark: true\n\n  dark: false\n  --\x3e\n",insertText:"dark: ${1|true,false|}",label:"lia-macro-dark"},{documentation:"You can change the default style of your document, either if you do not have any effects you can set mode to Textbook or start with and interactive Presentation. The three modes a the same as defined within the document at the upper right button. The default mode is defined by the user settings.\n\nExample:\n  \x3c!--\n  mode: Presentation\n\n  mode: Slides\n\n  mode: Textbook\n  --\x3e\n",insertText:"mode: ${1|Presentation,Slides,Textbook|}",label:"lia-macro-mode"},{documentation:"Disable or enable the classroom feature for your course, by using this macro within the header of your course. You can use words like `false`, `disabled`, `0`, `OFF` ... LiaScript will recognize them as negative. All other words like wouldLoveToSeeThisFeature are treated as positive. __But better stick with `false`/`true`, `on`/`off`, `disable`/`enable`__\n\nExample:\n  \x3c!--\n  classroom: false\n  --\x3e\n",insertText:"classroom: ${1|disable,enable|}",label:"lia-macro-classroom"},{documentation:"Disable or enable the experimental google translation for your course, by using this macro within the header of your course. You can use words like `false`, `disabled`, `0`, `OFF` ... LiaScript will recognize them as negative. All other words like wouldLoveToSeeThisFeature are treated as positive. __But better stick with `false`/`true`, `on`/`off`, `disable`/`enable`__\n\nExample:\n  \x3c!--\n  translateWithGoogle: false\n  --\x3e\n",insertText:"translateWithGoogle: ${1|disable,enable|}",label:"lia-macro-translateWithGoogle"},{documentation:"Disable or enable sharing for your course, by using this macro within the header (no share-icon and button will be displayed). You can use words like `false`, `disabled`, `0`, `OFF` ... LiaScript will recognize them as negative. All other words like wouldLoveToSeeThisFeature are treated as positive. __But better stick with `false`/`true`, `on`/`off`, `disable`/`enable`__\n\nExample:\n  \x3c!--\n  sharing: false\n  --\x3e\n",insertText:"sharing: ${1|disable,enable|}",label:"lia-macro-sharing"},{documentation:"Use this macro to redefine the respository information of your project, by default the course will display the GitHub, GitLab, or Dropbox origin. By adding this information to the head, you can define a static root for your project, which will also be visible on all exports.\n\nExample:\n  \x3c!--\n  repository: https://github.com/andre-dietrich/liascript-snippets\n  --\x3e\n",insertText:"repository: ${1:url}",label:"lia-macro-repository"},{documentation:'Use macros to deal with repetitive task and to make the document more readable. You can define your own macros within the main and section headers. Start your macro with an (@) sign and give it a name. Separate the name from the body with a colon (:). If you want to parameterize your macro, use @0, @1, ... for the parameter id. It is a simple string substitution mechanism, and the parameters are separated by a comma (,). If you have commas in your parameters, then use back-tics (`) to enclose this parameter. And triple back-tics (```) to enclose multi-line parameters.\n\nExample:\n\n  ## section\n  \x3c!--\n  @red: \x3c!-- style="color: red;" --\x3e\n\n  @bold_italic: __@0__ _@1_\n  --\x3e\n\n  @red\n  This whole paragraph will be read and this will be:\n  @bold_italic(I am Bold,`I am Italic,, I am too`).',insertText:"@${1:name}: ${2:line}",label:"lia-macro-definition-line"},{documentation:'Use macros to deal with repetitive task and to make the document more readable. Multi-line macros start with an (@your_name) and end with (@end). Parameters can also be passed as to single line macros.\n\nExample:\n\n  ## section\n  \x3c!--\n  @evalJS\n  <script>\n    try{\n      eval(`@input`);\n    } catch (e) {\n      var log = e.stack.match(/((.*?):(.*))\n.*?(:(d+):(d+))\n)/);\n      var err_msg = new LiaError(log[1] + " =>  (" + log[4], 1);\n      err_msg.add_detail(0, log[3], "error", log[5]-1, log[6]);\n      throw err_msg;\n    }\n  <\/script>\n  @end\n  --\x3e\n\n  eval this code with erros:\n\n  ```js\n  let x = 12;\n  x * c;\n  ```\n  @evalJS',insertText:"@${1:name}\n${2:param1 -> __@0__}\n@end",label:"lia-macro-definition-block"},{documentation:'This type of macro-call comes handy, if you want to refere to a certain URL and want other Markdown readers to show this information as a link. It is also possible to add additional parameters within parentheses, whereby the URL is always used as the last parameter.\n\nExample:\n\n  @[doSomethingWith](URL)\n\n  @[doSomethingWith(1,2,3)](URL "this will be ignored by now")',insertText:"@[${1:macro}](${2:url-param})",label:"lia-macro-call-link"},{documentation:'If you have a more complex multi-line macro definition, you can also use the following style so that it gets rendered at least in a readable manner by Github for example. Thus, you can place your macro call into into the code-block header, the first (optional) language parameter gets ignored and, whereby the following elements within the block are passed as the last multi-line parameter to that call.\n\nExample:\n\n    ## Macro\n    \x3c!--\n    link:   https://pannellum.org/css/style.css\n            https://cdn.pannellum.org/2.4/pannellum.css\n\n    script: https://cdn.pannellum.org/2.4/pannellum.js\n\n    @panorama\n    <div id="panorama_@0" style="width: 100%; height: 400px;"></div>\n    <script>\n    pannellum.viewer(\'panorama_@0\', {\n        "type": "equirectangular",\n        "panorama": "@1",\n        "autoLoad": false,\n        "hotSpots": [@2]\n    });\n    <\/script>\n    @end\n    --\x3e\n\n    ```json @panorama("0",https://pannellum.org/images/cerro-toco-0.jpg)\n    {\n        "pitch": 14.1,\n        "yaw": 1.5,\n        "type": "info",\n        "text": "Baltimore Museum of Art",\n        "URL": "https://artbma.org/"\n    },\n    {\n        "pitch": -0.9,\n        "yaw": 144.4,\n        "type": "info",\n        "text": "North Charles Street"\n    }\n    ```',insertText:"```${1:lang} @${2:macro}\n${3:a multiline\nparameter}\n```",label:"lia-macro-call-block"},{documentation:"Horizontal lines are realized by adding at least 3 hyphens in a row (---), but more hyphens look a little bit nicer ;)\n\nExample:\n  This is a horizontal line:\n\n    ---\n\n  And this also:\n\n  ---------------------------------------------",insertText:"----------------------\n",label:"lia-horizontal-line"},{documentation:"Insert single line quotes or quote blocks just with the help of a starting (>).\n\nExample:\n  > Block-quotes are very handy in email to emulate reply text.\n  > This line is part of the same quote.\n\n  Quote break.\n\n  > This is a very long line that will still be quoted properly when it wraps. Oh boy let's keep writing to make sure this is long enough to actually wrap for everyone. Oh, you can *put* **Markdown** into a block-quote.",insertText:"> ${1:your quote}",label:"lia-quote"},{documentation:"Insert single line quotes or quote blocks just with the help of a starting (>) and let the final paragraph start with -- to indicate an blockquote citation.\n\nExample:\n  > Live as if you were to die tomorrow.\n  > Learn as if you were to live forever.\n  >\n  > -- Mahatma Gandhi",insertText:"> ${1:your quote}\n>\n> -- ${2:your citation}",label:"lia-quote-citation"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"# ${1:Main Title}\n",label:"lia-title-1"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"## ${1:Chapter Title}\n",label:"lia-title-2"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"### ${1:Section Title}\n",label:"lia-title-3"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"#### ${1:SubSection Title}\n",label:"lia-title-4"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"##### ${1:Paragraph Title}\n",label:"lia-title-5"},{documentation:'As in common Markdown, a document is segregated into different parts by its titles. A title starts with hash-tag (#) that is followed by an head-line. The number of subsequent hash-tags defines the order. It is furthermore possible to overwrite some of the definitions from the main header, see more information on this by typing "liaheadersection" ...\n\nExample:\n  # Main Title\n\n  ...\n\n  ## Chapter Title\n  \x3c!--\n  comment: This comment is only for demonstrating purposes\n           and will be overwritten within the next slide...\n\n  author:  New Author\n  email:   notmain@email.com\n  --\x3e\n\n  ...\n\n  ### Section __Title__\n\n  ...\n\nIt is possible to add styling elements to the titles, but this should be used only in some rare cases.',insertText:"##### ${1:SubParagraph Title}\n",label:"lia-title-6"},{documentation:"The details and summary tags are standard HTML tags and GitHub also supports their usage with Markdown. These tags offer a neat way to define something what is nowadays called accordion. Thus, your user can click on the summary text to make the body of the details-tag appear.\n\nExample:\n  <details>\n\n  <summary>**Honest Textbook ads (click to enlarge)**</summary>\n\n  !?[If High School and College Textbooks Were Honest - Honest Ads](https://www.youtube.com/watch?v=lhSjYT7pWkw)\n\n  </details>",insertText:"<details>\n\n<summary>${1:title}</summary>\n\n${2:body}\n\n</details>",label:"lia-details"},{documentation:"",insertText:"UK English Female",label:"voice-uk-english-female"},{documentation:"",insertText:"UK English Male",label:"voice-uk-english-male"},{documentation:"",insertText:"US English Female",label:"voice-us-english-female"},{documentation:"",insertText:"US English Male",label:"voice-us-english-male"},{documentation:"",insertText:"Arabic Female",label:"voice-arabic-female"},{documentation:"",insertText:"Arabic Male",label:"voice-arabic-male"},{documentation:"",insertText:"Armenian Male",label:"voice-armenian-male"},{documentation:"",insertText:"Australian Female",label:"voice-australian-english-female"},{documentation:"",insertText:"Australian Male",label:"voice-australian-english-male"},{documentation:"",insertText:"Bangla Bangladesh Female",label:"voice-bangla-bangladesh-female"},{documentation:"",insertText:"Bangla Bangladesh Male",label:"voice-bangla-bangladesh-male"},{documentation:"",insertText:"Bangla India Female",label:"voice-bangla-india-female"},{documentation:"",insertText:"Bangla India Male",label:"voice-bangla-india-male"},{documentation:"",insertText:"Brazilian Portuguese Female",label:"voice-brazilian-portuguese-female"},{documentation:"",insertText:"Brazilian Portuguese Male",label:"voice-brazilian-portuguese-male"},{documentation:"",insertText:"Chinese Female",label:"voice-chinese-female"},{documentation:"",insertText:"Chinese Male",label:"voice-chinese-male"},{documentation:"",insertText:"Chinese (Hong Kong) Female",label:"voice-chinese-hong-kong-female"},{documentation:"",insertText:"Chinese (Hong Kong) Male",label:"voice-chinese-hong-kong-male"},{documentation:"",insertText:"Chinese Taiwan Female",label:"voice-chinese-taiwan-female"},{documentation:"",insertText:"Chinese Taiwan Male",label:"voice-chinese-taiwan-male"},{documentation:"",insertText:"Czech Female",label:"voice-czech-female"},{documentation:"",insertText:"Czech Male",label:"voice-czech-male"},{documentation:"",insertText:"Danish Female",label:"voice-danish-female"},{documentation:"",insertText:"Danish Male",label:"voice-danish-male"},{documentation:"",insertText:"Deutsch Female",label:"voice-deutsch-female"},{documentation:"",insertText:"Deutsch Male",label:"voice-deutsch-male"},{documentation:"",insertText:"Deutsch Female",label:"voice-german-female"},{documentation:"",insertText:"Deutsch Male",label:"voice-german-male"},{documentation:"",insertText:"Dutch Female",label:"voice-dutch-female"},{documentation:"",insertText:"Dutch Male",label:"voice-dutch-male"},{documentation:"",insertText:"Filipino Female",label:"voice-filipino-female"},{documentation:"",insertText:"Filipino Male",label:"voice-filipino-male"},{documentation:"",insertText:"Finnish Female",label:"voice-finnish-female"},{documentation:"",insertText:"Finnish Male",label:"voice-finnisch-male"},{documentation:"",insertText:"French Canadian Female",label:"voice-french-vanadian-female"},{documentation:"",insertText:"French Male",label:"voice-french-canadian-male"},{documentation:"",insertText:"French Female",label:"voice-french-female"},{documentation:"",insertText:"French Male",label:"voice-french-male"},{documentation:"",insertText:"Greek Female",label:"voice-greek-female"},{documentation:"",insertText:"Greek Male",label:"voice-greek-male"},{documentation:"",insertText:"Hindi Female",label:"voice-hindi-female"},{documentation:"",insertText:"Hindi Male",label:"voice-hindi-male"},{documentation:"",insertText:"Hungarian Female",label:"voice-hungarian-female"},{documentation:"",insertText:"Hungarian Male",label:"voice-hungarian-male"},{documentation:"",insertText:"Indonesian Female",label:"voice-indonesian-female"},{documentation:"",insertText:"Indonesian Male",label:"voice-indonesian-male"},{documentation:"",insertText:"Italian Female",label:"voice-italian-female"},{documentation:"",insertText:"Italian Male",label:"voice-italian-male"},{documentation:"",insertText:"Japanese Female",label:"voice-japanese-female"},{documentation:"",insertText:"Japanese Male",label:"voice-japanese-male"},{documentation:"",insertText:"Korean Female",label:"voice-korean-female"},{documentation:"",insertText:"Korean Male",label:"voice-korean-male"},{documentation:"",insertText:"Latin Female",label:"voice-latin-female"},{documentation:"",insertText:"Latin Male",label:"voice-latin-male"},{documentation:"",insertText:"Norwegian Female",label:"voice-norwegian-female"},{documentation:"",insertText:"Norwegian Male",label:"voice-norwegian-male"},{documentation:"",insertText:"Polish Female",label:"voice-polish-female"},{documentation:"",insertText:"Polish Male",label:"voice-polish-male"},{documentation:"",insertText:"Portuguese Female",label:"voice-portuguese-female"},{documentation:"",insertText:"Portuguese Male",label:"voice-portuguese-male"},{documentation:"",insertText:"Romanian Female",label:"voice-romanian-female"},{documentation:"",insertText:"Romanian Male",label:"voice-romanian-male"},{documentation:"",insertText:"Russian Female",label:"voice-russian-female"},{documentation:"",insertText:"Russian Male",label:"voice-russian-male"},{documentation:"",insertText:"Slovak Female",label:"voice-slovak-female"},{documentation:"",insertText:"Slovak Male",label:"voice-slovak-male"},{documentation:"",insertText:"Spanish Female",label:"voice-spanish-female"},{documentation:"",insertText:"Spanish Male",label:"voice-spanish-male"},{documentation:"",insertText:"Spanish Latin American Female",label:"voice-spanish-latin-america-female"},{documentation:"",insertText:"Spanish Latin American Male",label:"voice-spanish-latin-america-male"},{documentation:"",insertText:"Swedish Female",label:"voice-swedish-female"},{documentation:"",insertText:"Swedish Male",label:"voice-swedish-male"},{documentation:"",insertText:"Tamil Male",label:"voice-tamil-male"},{documentation:"",insertText:"Thai Female",label:"voice-tamil-female"},{documentation:"",insertText:"Thai Male",label:"voice-thai-male"},{documentation:"",insertText:"Turkish Female",label:"voice-turkish-female"},{documentation:"",insertText:"Turkish Male",label:"voice-turkish-male"},{documentation:"",insertText:"Vietnamese Female",label:"voice-vietnamese-female"},{documentation:"",insertText:"Vietnamese Male",label:"voice-vietnamese-male"},{documentation:"",insertText:"Afrikaans Male",label:"voice-afrikaans-male"},{documentation:"",insertText:"Albanian Male",label:"voice-albanian-male"},{documentation:"",insertText:"Bosnian Male",label:"voice-bosnian-male"},{documentation:"",insertText:"Catalan Male",label:"voice-catalan-male"},{documentation:"",insertText:"Croatian Male",label:"voice-croatian-male"},{documentation:"",insertText:"Esperanto Male",label:"voice-esperanto-male"},{documentation:"",insertText:"Estonian Male",label:"voice-estonian-male"},{documentation:"",insertText:"Icelandic Male",label:"voice-icelandic-male"},{documentation:"",insertText:"Latvian Male",label:"voice-latvian-male"},{documentation:"",insertText:"Macedonian Male",label:"voice-macedonian-male"},{documentation:"",insertText:"Moldavian Female",label:"voice-moldavian-female"},{documentation:"",insertText:"Moldavian Male",label:"voice-moldavian-male"},{documentation:"",insertText:"Montenegrin Male",label:"voice-montenegrin-male"},{documentation:"",insertText:"Nepali",label:"voice-nepali"},{documentation:"",insertText:"Sinhala",label:"voice-sinhala"},{documentation:"",insertText:"Serbian Male",label:"voice-serbian-male"},{documentation:"",insertText:"Serbo-Croatian Male",label:"voice-serbo-croatian-male"},{documentation:"",insertText:"Swahili Male",label:"voice-swahili-male"},{documentation:"",insertText:"Ukrainian Female",label:"voice-ukrainian-female"},{documentation:"",insertText:"Welsh Male",label:"voice-welsh-male"},{documentation:"Surveys are defined similarly to quizzes by using brackets ([]). A text survey is defined by a multiple number three subsequent underscores (___) that are enclosed by double brackets. The number of underscores defines the number of lines a user has to fill out.\n\nExample:\n\n  A single line text survey:\n\n    [[___]]\n\n  A two line text survey:\n\n    [[___ ___]]\n\n  And a six liner:\n\n    [[___ ___ ___ ___ ___ ___ ]]",insertText:"[[___ ___]]",label:"lia-survey-text"},{documentation:"The definition is similar to a single choice quiz, but instead of an X, either numbers have to be put into parentheses or variable names. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Choose between different options:\n\n    [(1)] option 1\n    [(2)] option 2\n    [(0)] option 3\n\n  What is your favorite color:\n\n    [(red)]   red?\n    [(blue)]  blue?\n    [(green)] green?",insertText:"[(${1:1})] ${2:option 1}\n[(${3:2})] ${4:option 2}\n[(${5:3})] ${6:option 3}",label:"lia-survey-single-choice"},{documentation:"The definition is similar to a multiple choice quiz, but instead of an X, either numbers have to be put into parentheses or variable names. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Choose as many options as your want:\n\n    [[1]] option 1\n    [[2]] option 2\n    [[0]] option 0\n\n  Mark all colors you like:\n\n    [[red]]   red?\n    [[blue]]  blue?\n    [[green]] green?\n    [[none]]  None of these ...",insertText:"[[${1:1}]] ${2:option 1}\n[[${3:2}]] ${4:option 2}\n[[${5:3}]] ${6:option 3}",label:"lia-survey-multiple-choice"},{documentation:"A list of single choice surveys can be defined as depicted below. Either numbers have to be put into parentheses or variable. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Give marks:\n\n      [(-1)(0)(1)]\n      [          ] LiaScript is great?\n      [          ] I would use it to make online **courses**?\n      [          ] I would use it for online **surveys**?\n\n  What is your opinion:\n\n      [(agree)(unsure)(maybe not so)]\n      [                             ] LiaScript is great?\n      [                             ] I would use it to make online **courses**?\n      [                             ] I would use it for online **surveys**?",insertText:"[(${1:0})(${2:1})(${3:2})]\n[         ] ${4:text}\n[         ] ${5:text}\n[         ] ${6:text}",label:"lia-survey-single-choice-matrix"},{documentation:"A list of multiple choice surveys can be defined as depicted below. Either numbers have to be put into parentheses or variable names. They do not have to be ordered and the number is also variable.\n\nExample:\n\n  Give marks:\n\n      [[-1][0][1]]\n      [          ] LiaScript is great?\n      [          ] I would use it to make online **courses**?\n      [          ] I would use it for online **surveys**?\n\n  What is your opinion:\n\n      [[agree][unsure][maybe not so]]\n      [                             ] LiaScript is great?\n      [                             ] I would use it to make online **courses**?\n      [                             ] I would use it for online **surveys**?",insertText:"[[${1:0}][${2:1}][${3:2}]]\n[         ] ${4:text}\n[         ] ${5:text}\n[         ] ${6:text}",label:"lia-survey-multiple-choice-matrix"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| ${1:Header}     |\n| :--------- |\n| ${2:Item}       |",label:"lia-table-1"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   |\n| :--------- | :--------- |\n| Item 1     | Item 2     |",label:"lia-table-2"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   |\n| :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     |",label:"lia-table-3"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   |\n| :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     |",label:"lia-table-4"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   |\n| :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     |",label:"lia-table-5"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     |",label:"lia-table-6"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   | Header 7   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     | Item 7     |",label:"lia-table-7"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   | Header 7   | Header 8   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     | Item 7     | Item 8     |",label:"lia-table-8"},{documentation:"There must be at least 3 dashes separating each header cell. Cells are separated by pipes (|), and you don't need to make the raw Markdown line up prettily. Hyphens (-) are used to separate the table header from the body, whereby the colons are used to align the columns.\n\nExample:\n\n| Tables        | Are           | Cool  |\n| ------------- |:-------------:| -----:|\n| col 3 is      | right-aligned | $1600 |\n| col 2 is      | centered      |   $12 |\n| zebra stripes | are neat      |    $1 |",insertText:"| Header 1   | Header 2   | Header 3   | Header 4   | Header 5   | Header 6   | Header 7   | Header 8   | Header 9   |\n| :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| Item 1     | Item 2     | Item 3     | Item 4     | Item 5     | Item 6     | Item 7     | Item 8     | Item 9     |",label:"lia-table-9"},{documentation:'You can set the diagram title for your plotted document via the data-title parameter, this is only visible if you switch to the diagram mode.\n\nExample:\n  \x3c!--\n  data-title="Government expenditure on education"\n  data-xlabel="year"\n  data-ylabel="% of GDP"\n  --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-title="${1:title}" --\x3e',label:"lia-table-diagram-title"},{documentation:'You can overwrite the diagram x-label for your plotted document via the data-xlabel parameter, this is only visible if you switch to the diagram mode.\n\nExample:\n  \x3c!--\n  data-title="Government expenditure on education"\n  data-xlabel="year"\n  data-ylabel="% of GDP"\n  --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-xlabel="${1:title}" --\x3e',label:"lia-table-diagram-xlabel"},{documentation:'You can overwrite the diagram y-label for your plotted document via the data-ylabel parameter, this is only visible if you switch to the diagram mode.\n\nExample:\n  \x3c!--\n  data-title="Government expenditure on education"\n  data-xlabel="year"\n  data-ylabel="% of GDP"\n  --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-ylabel="${1:title}" --\x3e',label:"lia-table-diagram-ylabel"},{documentation:'You can enforce the visualization of a certain type, even if the sturcture of your table might look different.\nCurrently available data-types are: lineplot, scatterplot, boxplot, barchart, radar, piechart, map, heatmap, parallel, graph, sankey, and none\nIf you do not want to show tables as diagrams, you can also use data-type="None" and only the table will be visible.\n\nExample:\n  \x3c!-- data-type="pie" --\x3e\n  | Year | Finland | USA | Germany |   China |\n  | ---- | -------:| ---:| -------:| -------:|\n  | 1995 | 6.80942 |     | 4.42079 | 1.84192 |\n  | 1996 | 6.86052 |     | 4.48319 | 1.85338 |\n  | ...  |     ... | ... |     ... |     ... |',insertText:'\x3c!-- data-type="${1:type}" --\x3e',label:"lia-table-diagram-type"},{documentation:"If the first column contains (not repeating) numbers as well as the other columns, lineplots are used as the default representation, a special tag is not required. If this isn't the case, then you can apply this tag to enforce the visualization as a scatterplot.\n\nExample:\n  \x3c!-- data-type=\"lineplot\" --\x3e\n  | x's |  some y's  |    dist |\n  | --- |:----------:| -------:|\n  | 1   |    1 $    | 16 $km$ |\n  | 2.2 |    2 $    | 12 $km$ |\n  | 3.3 |    5 $    |  1 $km$ |\n  | 4   | -12.333 $ |         |",insertText:'\x3c!-- data-type="lineplot" --\x3e',label:"lia-table-diagram-lineplot"},{documentation:"If the first column contains repetitive numbers, scatterplots are used as the default representation if further numbers are determine, a special tag is not required.\n\nExample:\n  \x3c!-- data-type=\"scatterplot\" --\x3e\n  | x's |  some y's  |                              dist |\n  | --- |:----------:| ---------------------------------:|\n  | 1   |    1 $    |                           16 $km$ |\n  | 2.2 |    2 $    |                           12 $km$ |\n  | 3.3 |    5 $    |                            1 $km$ |\n  | 4   | -12.333 $ | -555$km$ <-- this will be ignored |\n  | 4   |            |                                 1 |",insertText:'\x3c!-- data-type="scatterplot" --\x3e',label:"lia-table-diagram-scatterplot"},{documentation:'In contrast to a line or a scatter plot, if the first colum contains at least one entry thant cannot be parsed as a number, this might be represented also as BarChart. Which works perfectly with the following example. If the maximum values of the columns do not differ to much, then this dataset it represented as a BarChart, otherwise you might end up seeing only one huge bar, while the other bars are indistiguishable from each other. In this case other visualization are chosen.\n\nExample:\n  \x3c!-- data-type="barchart" --\x3e\n  | Animal          | weight in kg | Lifespan years | Mitogen |\n  | --------------- | ------------:| --------------:| -------:|\n  | Mouse           |        0.028 |              2 |      95 |\n  | Flying squirrel |        0.085 |             15 |      50 |\n  | Brown bat       |        0.020 |             30 |      10 |\n  | Sheep           |           90 |             12 |      95 |\n  | Human           |           68 |             70 |      10 |',insertText:'\x3c!-- data-type="barchart" --\x3e',label:"lia-table-diagram-barchart"},{documentation:'If you have a ScatterPlot like representation, but actually want to use this data as primary data for your BoxPlot, you can manually change the type of visualization to BoxPlot, simply by adding the follwing attribute to the head of your table, as it is shown in the snippet below. Columns are then treated as datasets and get visualized accordingly.\n\nExample:\n  \x3c!-- data-type="boxplot" --\x3e\n  | Random |    I |  II |\n  | ------:| ----:| ---:|\n  |    5.0 |  1.0 |   5 |\n  |    6.0 |  1.0 |   4 |\n  |    7.0 |  1.0 |   5 |\n  |    8.0 |  1.0 |   5 |\n  |    9.0 |  1.0 |   4 |\n  |   10.0 |  1.0 |   5 |\n  |    5.0 | 10.0 |   7 |\n  |    6.0 | 10.0 |   8 |\n  |    7.0 | 10.0 |   7 |\n  |    8.0 | 10.0 |   7 |\n  |    9.0 | 10.0 |   8 |',insertText:'\x3c!-- data-type="boxplot" --\x3e',label:"lia-table-diagram-boxplot"},{documentation:'If for example humans and sheeps are removed from the dataset, then wheight in kg would not be visible in a BarChart at all. In this case a Radar is selected, that allows to analyze data visually with different "y"-axis.\n\nExample:\n  \x3c!-- data-type="radar" --\x3e\n  | Animal          | weight in kg | Lifespan years | Mitogen |\n  | --------------- | ------------:| --------------:| -------:|\n  | Mouse           |        0.028 |             02 |      95 |\n  | Flying squirrel |        0.085 |             15 |      50 |\n  | Brown bat       |        0.020 |             30 |      10 |',insertText:'\x3c!-- data-type="radar" --\x3e',label:"lia-table-diagram-radar"},{documentation:'If you have a table with only one row full of numbers, this will be automatically presented as an pie chart. The head represents the categories and the body the quatities.\n\nExample:\n  | Classic | Country | Reggae | Hip-Hop | Hard-Rock | Samba |\n  | -------:| -------:| ------:| -------:| ---------:| -----:|\n  |      50 |      50 |    100 |     200 |       350 |   250 |\n\n  \x3c!-- data-type="PieChart" --\x3e\n  | Music-Style | Classic | Country | Reggae | Hip-Hop | Hard-Rock | Samba |\n  |:----------- | -------:| -------:| ------:| -------:| ---------:| -----:|\n  | 1994        |      50 |      50 |    100 |     200 |       350 |   250 |\n  | 2014        |      20 |      30 |    100 |     220 |       400 |   230 |\n  | demo 2034   |       5 |      12 |     98 |     293 |       345 |    32 |',insertText:'\x3c!-- data-type="piechart" --\x3e',label:"lia-table-diagram-piechart"},{documentation:'A map is similar to a BarChart from the table structure, but if you want to depict your data on a real map, you will have to add a geojson-file, that contains all relevant data about the form of your countries, states, cities, etc. The first column has to match the names of your objects in your geojson data, that is attached to your table in the following way:\n\nExample:\n  \x3c!-- data-type="map" data-src="https://code.highcharts.com/mapdata/custom/europe.geo.json" --\x3e\n  | Country                | percent |\n  | ---------------------- | ------- |\n  | Albania                | 73.5    |\n  | Andorra                | 98.9    |\n  | Armenia                | 72.4    |\n  | ...                    |         |',insertText:'\x3c!-- data-type="map" --\x3e',label:"lia-table-diagram-map"},{documentation:'Another type of visualization is a HeatMap, which is used, if the table head and the first column do only contain numbers, in other words coordinates. If you want to use categories instead of coordinate numbers, you can enforce the usage of a heatmap, with the comment shown below:\n\nExample:\n  \x3c!--\n  data-type="heatmap"\n  data-title="Seattle mean temperature in Fahrenheit"\n  data-show\n  --\x3e\n    | Seattle |  Jan |  Feb |  Mar |  Apr |  May |  ... |\n    | -------:| ----:| ----:| ----:| ----:| ----:| ----:|\n    |       0 | 40.7 | 41.5 | 43.6 | 46.6 | 51.4 |  ... |\n    |       2 |  ... |  ... |  ... |  ... |  ... |  ... |',insertText:'\x3c!-- data-type="heatmap" --\x3e',label:"lia-table-diagram-heatmap"},{documentation:'A Parallel representation jumps in, if there are simply too many categories, so that your BarChart would contain only thin lines.\n\nExample:\n  \x3c!-- data-type="parallel" --\x3e\n  | Country                | GDP growth (%) | Births per woman | Life expectancy ...\n  | ---------------------- | --------------:| ----------------:| -------------------\n  | Albania                |            7.5 |            1.858 |               76.63\n  | Andorra                |          3.570 |            1.260 |                 NaN\n  | Austria                |          2.178 |            1.414 |               80.44\n  | ...                    |            ... |              ... |                 ...',insertText:'\x3c!-- data-type="parallel" --\x3e',label:"lia-table-diagram-parallel"},{documentation:'If the first column and the head of the table are equal, then the interpreter tries to interpret the content of the table as an adjacency matrix, which defines a graph. If those values are symetrical according to the diagonal, then the matrix defines an "undirected graph".\nIn contrast to this, if those values differ, then the result is simply an an "directed graph", whereby the values define the strength of the line.\n\nExample:\n  \x3c!-- data-title="Undirected Graph" --\x3e\n  | Graph |  A  |  B  |  C  |  D  |  E  |\n  |:----- |:---:|:---:|:---:|:---:|:---:|\n  | A     |  0  |  1  |  0  |  1  |  0  |\n  | B     |  1  |  0  |  0  |  1  |  0  |\n  | C     |  0  |  0  |  0  |  0  |  0  |\n  | D     |  1  |  1  |  0  |  0  |  1  |\n  | E     |  0  |  0  |  0  |  1  |  0  |\n\n  \x3c!-- data-title="Directed Graph" --\x3e\n  | Graph |  A  |  B  |  C  |  D  |  E  |\n  |:----- |:---:|:---:|:---:|:---:|:---:|\n  | A     |  0  | 12  |  0  |  1  |  0  |\n  | B     | -22 |  0  |  0  | 0.4 |  0  |\n  | C     |  0  |  0  |  0  |  0  |  0  |\n  | D     |  2  | 12  |  0  |  0  |  1  |\n  | E     |  0  |  0  |  0  |  2  |  0  |',insertText:'\x3c!-- data-type="graph" --\x3e',label:"lia-table-diagram-graph"},{documentation:'A Sankey diagram is a special type of directed graph that can be used to streams or the flow of something, such as engergy, money, etc.\n\nExample:\n  \x3c!-- data-type="sankey" --\x3e\n  | Sankey |  A  |  B  |  C  |  D  |  E  |\n  |:------ |:---:|:---:|:---:|:---:|:---:|\n  | A      |     |  2  |     |     |     |\n  | B      |  3  |     |     |     |     |\n  | C      |  1  |  1  |     |     |     |\n  | D      |     |  1  |  1  |     |     |\n  | E      |  2  |  1  |  1  |  1  |     |',insertText:'\x3c!-- data-type="sankey" --\x3e',label:"lia-table-diagram-sankey"},{documentation:'Simply data-type="none" to prevent any kind of visualization.\n\nExample:\n  \x3c!-- data-type="none" --\x3e\n  | Sankey |  A  |  B  |  C  |  D  |  E  |\n  |:------ |:---:|:---:|:---:|:---:|:---:|\n  | A      |     |  2  |     |     |     |\n  | B      |  3  |     |     |     |     |\n  | C      |  1  |  1  |     |     |     |\n  | D      |     |  1  |  1  |     |     |\n  | E      |  2  |  1  |  1  |  1  |     |',insertText:'\x3c!-- data-type="none" --\x3e',label:"lia-table-diagram-none"},{documentation:'Simply add this attribute or set it to true (data-show="true"), if you want to visualize your data immediately, without the need to click in the switch-button. It is still possible for your users to switch to the table representation.\n\nExample:\n  \x3c!-- data-show --\x3e\n  | Sankey |  A  |  B  |  C  |  D  |  E  |\n  |:------ |:---:|:---:|:---:|:---:|:---:|\n  | A      |     |  2  |     |     |     |\n  | B      |  3  |     |     |     |     |\n  | C      |  1  |  1  |     |     |     |\n  | D      |     |  1  |  1  |     |     |\n  | E      |  2  |  1  |  1  |  1  |     |',insertText:"\x3c!-- data-show --\x3e",label:"lia-table-diagram-show"},{documentation:'Like in the mathematical sense, set this attribute or set it to true (data-transpose="true"), if you want to switch rows and columns. One benefit is, that you can for example use PieChart and let your table grow vertically instead of using a horizontal monster.\n\nExample:\n  \x3c!-- data-transpose --\x3e\n  | Music-Style {0-1}{1994} {1}{2014} |      Student rating |\n  |:--------------------------------- | -------------------:|\n  | Classic                           |   {0-1}{50} {1}{20} |\n  | Country                           |   {0-1}{50} {1}{30} |\n  | Reggae                            |                 100 |\n  | Hip-Hop                           | {0-1}{200} {1}{220} |\n  | Hard-Rock                         | {0-1}{350} {1}{400} |\n  | Samba                             | {0-1}{250} {1}{230} |',insertText:"\x3c!-- data-transpose --\x3e",label:"lia-table-diagram-transpose"},{documentation:'Currently this attribute is used to refere to your geojson data, if you use the `data-type="Map"` representation, but this might change in the future to load and visualize data directly, such as csv.\nIf you are using geojson files from external websites such as: https://code.highcharts.com/mapdata/\nIt can be usefull to use anycors, if the data cannot be visualized due to CORS restrictions:\n\ndata-src="https://cors-anywhere.herokuapp.com/https://code.highcharts.com/mapdata/custom/europe.geo.json"\n\nExample:\n  \x3c!-- data-type="map" data-src="https://code.highcharts.com/mapdata/custom/europe.geo.json" --\x3e\n  | Country                | percent |\n  | ---------------------- | ------- |\n  | Albania                | 73.5    |\n  | Andorra                | 98.9    |\n  | Armenia                | 72.4    |\n  | ...                    |         |',insertText:'\x3c!-- data-src="${1:url}" --\x3e',label:"lia-table-diagram-source"},{documentation:"Use the GitHub-flavoured Markdown syntax for tasks. If the version of the course is larger than 1, the task-states will be stored persistently.\n\nYou can define as much tasks as you want\n\nExample:\n\n  -[ ] This is not checked by default\n  -[X] This one is checked by default",insertText:"-[${1:X}] ${2:line with Markdown}",label:"lia-task"},{documentation:'Use the GitHub-flavoured Markdown syntax for tasks in association with JavaScript-code that is executed on every input.\n\nYou can define as much tasks as you want.\n\nExample:\n\n  - [X] Biology\n  - [ ] Chemistry\n  <script output="tasks">"@input"<\/script>\n\n  <script style="width: 100%">\n  try {\n    let task = @input(`tasks`) // interpret the output="tasks"\n\n    if(task[0]) {\n      send.liascript(`## Biology\n\n  Hey, great, you want to learn something about Biology.\n\n  * resource 1\n  * resource 2\n\n  The input from the tasks above was: `[${task}]``)\n    } else send.clear()\n  } catch(e) { }\n  <\/script>',insertText:"-[${1:X}] ${2:task-definition}\n-[${3:X}] ${4:task-definition}\n<script>\n  ${5:js-code}\n<\/script>",label:"lia-task-js"},{documentation:"",insertText:"_${1:italic}_",label:"lia-text-italic"},{documentation:"",insertText:"*${1:italic}*",label:"lia-text-italic2"},{documentation:"",insertText:"__${1:bold}__",label:"lia-text-bold"},{documentation:"",insertText:"**${1:bold}**",label:"lia-text-bold2"},{documentation:"",insertText:"___${1:italic bold}___",label:"lia-text-italic-bold"},{documentation:"",insertText:"***${1:italic bold}***",label:"lia-text-italic-bold2"},{documentation:"",insertText:"~${1:strike}~",label:"lia-text-strike"},{documentation:"",insertText:"~~${1:underline}~~",label:"lia-text-underline"},{documentation:"",insertText:"~~~${1:strike underline}~~~",label:"lia-text-strike-underline"},{documentation:"",insertText:"^${1:superscript}^",label:"lia-text-superscript"},{documentation:"Simply encompass your solution word into double brackets and you will get a nicely rendered text quiz.\n\nExample:\n  What is the color of the sky?\n\n  [[blue]]",insertText:"[[${1:solution}]]",label:"lia-quiz-text"},{documentation:'If different inputs are possible, you can add a script tag to your quiz-field. The reference @input will be replaced by the current user input string, and the result of the script has to be true or false.\n\nExample:\n  What is the color of the sky?\n\n  [[blue]]\n  <script>\n    let input_string = "@input";\n    "BLUE" == input_string.trim().toUpperCase();\n  <\/script>',insertText:'[[${1:solution}]]\n<script>\n  ${2:// @input will be replace by the user input\n  let input_string = "@input";\n  "solution" == input_string.trim().toLowerCase();}\n<\/script>',label:"lia-quiz-text-js"},{documentation:"Create a selection field, that contains various different solutions, separated by `|`. Images, formulas everything is allowed, only the correct solution has to be put into parentheses and there can be multiple correct solutions.\n\nExample:\n  What is the color of the sky?\n\n  [[ red | (__blue__) | green | (black at night)]]",insertText:"[[${1:option}|${2:option}]]",label:"lia-quiz-select"},{documentation:"Compose your single choice quizzes out of many lines in the following format:\n\nExample:\n  This is a single choice quiz with three options:\n\n    [( )] Add as many lines as you want?\n    [(X)] The X marks the only correct answer!\n    [( )] ... And only one X is allowed.\n\n(If you want, you can also have multiple correct options.)",insertText:"[(${1: })] ${2:enter your text}",label:"lia-quiz-single-choice"},{documentation:"Compose your multiple choice quizzes out of many lines in the following format:\n\nExample:\n  This is a multiple choice quiz with four options:\n\n    [[ ]] Add as many lines as you want?\n    [[X]] The X marks the correct lines that have to be selected!\n    [[X]] This can offer multiple options that have to be clicked.\n    [[ ]] But it can also consist of empty brackets either.",insertText:"[[${1: }]] ${2:enter your text}",label:"lia-quiz-multiple-choice"},{documentation:"Compose a matrix of quizzes with multiple SingleChoice and MultipleChoice quizzes per row. The column headers have to be put into brackets or parentheses, depending on your passed Markdown content. It is allowed to have different numbers of options per row.\n\nExample:\n  This is a multiple choice quiz with four options:\n    [[:-)] (:-]) (_bold_)]\n    [ [ ]   [ ]     [X]  ] Only the X marks the correct solution!\n    [ [X]   [ ]     [ ]  ] Multiple- and SingleChoice quizzes in a matrix,\n    [ ( )   ( )     (X)  ] but you have to be consitent per row.\n    [ ( )   ( )     ( )   ( ) ] More or less options than defined in the header are also allowed.",insertText:"[[${1: }] [${2: }] [${3: }]]\n[[${4: }] [${5: }] [${6: }]] ${7: add a line}\n[(${8: }) (${9: }) (${10: })] ${11: add a line}",label:"lia-quiz-matrix-choice"},{documentation:"If a quiz might be a bit tricky, you can add hints directly after any type of quiz and as many hints as you want. The user can decide whether he or she wants to use it, simply by clicking on the additional question mark, that appears after the check button.\n\nExample:\n  This is a text quiz with two hints:\n\n    [[solution]]\n    [[?]] This is the first hint\n    [[?]] This is a second hint\n\n  And a multiple choice quiz with one hint:\n\n    [[X]] This is correct!\n    [[ ]] This is wrong!\n    [[?]] Click on the first option!",insertText:"[[?]] ${1:enter your hint}",label:"lia-quiz-hint"},{documentation:"If the user solved a quiz or clicked onto resolve, the correct answer gets automatically revealed, but you can add additional information to your solution by adding two lines to the end of your quiz that can contain multiple Markdown blocks as explanation.\n\nExample:\n  What is the color of the sky?\n\n    [[blue]]\n    [[?]] Enter blue!\n    *************************************\n\n    During the day the color is blue, if\n    it is not cloudy. See the following\n    picture ...\n\n    ![blue sky](./img/sunny.jpg)\n\n    *************************************",insertText:"****************************************\n\n${1:Add a solution explanation __Markdown__!}\n\n****************************************",label:"lia-quiz-solution"},{documentation:"In some rare cases you might want to change the correct solution, or add a counter, that reveals the correct answer after some predefined number of trials. Then simply add a script tag to the quiz. The @input string gets replaced by an integer representing the current user input:\n\n-1 -> no selection\n0  -> the first\n1  -> the second\n\nExample:\n\n    [( )] Check this ...\n    [(X)] ... and not this\n    <script>\n      // @input gets replaced by a single number\n      // -1 if no selection otherwise it starts\n      // with 0.\n      let input_number = @input;\n\n      ${7:if(input_number == 0)\n        true;\n      else\n        false;}\n    <\/script>",insertText:"<script>\n  // @input gets replaced by a single number\n  // -1 if no selection otherwise it starts\n  // with 0.\n  let input_number = @input;\n\n  ${1:if(input_number == 1)\n    true;\n  else\n    false;}\n<\/script>",label:"lia-quiz-single-js"},{documentation:'In some rare cases you might want to change the correct solution, add a counter, or let some correct answers pass. Then simply add a script tag to the quiz. The @input string here gets replaced by an by an array of integers ([0,1,1,0]) that represent the current user input:\n\n0 -> stands for checked\n1 -> represents an unchecked field\n\nExample:\n\n  Get at least one right ...\n\n  [[ ]] Wrong.\n  [[X]] Right.\n  [[ ]] Wrong.\n  [[X]] Right.\n  <script>\n    // @input gets replaced by an array in the\n    // form of [0,0,0,1], whereby 0 and 1\n    // define whether a checkbox is checked\n    // or not...\n    let input_array = @input;\n    input_array = JSON.stringify(input_array);\n\n    if      (input_array == "[0,1,0,1]")  true;\n    else if (input_array == "[0,1,0,0]")  true;\n    else if (input_array == "[0,0,0,1]")  true;\n    else                                 false;\n  <\/script>',insertText:'<script>\n  // @input gets replaced by an array in the\n  // form of [0,0,0,1], whereby 0 and 1\n  // define whether a checkbox is checked\n  // or not...\n  let input_array = @input;\n  ${1:input_array = JSON.stringify(input_array);\n\n  if      (input_array == "[0,1,0,1]")  true;\n  else if (input_array == "[0,1,0,0]")  true;\n  else if (input_array == "[0,0,0,1]")  true;\n  else                                 false;}\n<\/script>',label:"lia-quiz-multiple-js"},{documentation:'This will insert a generic script tag in the following form, the @input will be replaced according the current context:\n\n<script>\n  // @input gets replaced by the current quiz input.\n  // In case of a:\n  // * text input -> string, that has to be encapsulated with (")\n  // * single choice -> int (-1, if nothing is selected)\n  // * multiple choice -> array int (0 unchecked, 1 checked)\n  let input = @input;\n\n  true; // if solved otherwise return false\n<\/script>',insertText:'<script>\n  ${1:// @input gets replaced by the current quiz input.\n  // In case of a:\n  // * text input -> string, that has to be encapsulated with (")\n  // * single choice -> int (-1, if nothing is selected)\n  // * multiple choice -> array int (0 unchecked, 1 checked)\n  let input = @input;\n\n  true; // if solved otherwise return false}\n<\/script>',label:"lia-quiz-js"},{documentation:"Insert a the following quiz dummy:\n\n  [( )] This is wrong.\n  [(X)] The only correct option.\n  [( )] Still not right.",insertText:"[(${1: })] ${2:This is wrong.}\n[(${3:X})] ${4:The only correct option.}\n[(${5: })] ${6:Still not right.}",label:"lia-quiz-single-choice-3"},{documentation:"Insert a the following quiz dummy:\n\n[[ ]] Add as many elements as you want?\n[[X]] The X marks the correct answer!\n[[ ]] ... this is wrong ...\n[[X]] ... this has to be selected too ...",insertText:"[[${1: }]] ${2:Add as many elements as you want?}\n[[${3:X}]] ${4:The X marks the correct answer!}\n[[${5: }]] ${6:... this is wrong ...}\n[[${7:X}]] ${8:... this has to be selected too ...}",label:"lia-quiz-multiple-choice-4"},{documentation:"In some rarely rarely rare cases, you might want to have something completely different and analyze some other HTML or code inputs (unit testing). In this case you can apply this generic tag and do in JavaScript whatever you want. The this quiz is solved if the script gets evaluated to true, not solved by resulting in false (everything else is ignored).\n\n*Click Me!*\x3c!-- onclick=\"window['rand'] = Math.random();\" --\x3e\n\n[[!]]\n<script>\n  alert(\"your value random value is:\", window['rand']);\n  if(window['rand'] > 0.8)\n    true;\n  else\n    false\n<\/script>",insertText:"[[!]]\n<script>\n  ${1:// you are free to check anything you want\n  true;}\n<\/script>",label:"lia-quiz-generic-js"}],dM=(l=o("1JCPQ"),{}),hM=(l=o("1JCPQ"),{}),fM=(kr=o("d2KzW"),(Zr=o("dwjmx")).Buffer);uM=gM;var pM=o("ftI7v").EventEmitter;function gM(){pM.call(this)}o("hUsYa")(gM,pM),gM.Readable=o("lxR10"),gM.Writable=o("elmi8"),gM.Duplex=o("4W48e"),gM.Transform=o("9zyIf"),gM.PassThrough=o("6TTNj"),gM.finished=o("1GeXN"),gM.pipeline=o("EeWXC"),gM.Stream=gM,gM.prototype.pipe=function(e,t){var n=function(t){e.writable&&!1===e.write(t)&&s.pause&&s.pause()},i=function(){s.readable&&s.resume&&s.resume()},r=function(){l||(l=!0,e.end())},o=function(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())},a=function(e){if(u(),0===pM.listenerCount(this,"error"))throw e},s=this;s.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(s.on("end",r),s.on("close",o));var l=!1;function u(){s.removeListener("data",n),e.removeListener("drain",i),s.removeListener("end",r),s.removeListener("close",o),s.removeListener("error",a),e.removeListener("error",a),s.removeListener("end",u),s.removeListener("close",u),e.removeListener("close",u)}return s.on("error",a),e.on("error",a),s.on("end",u),s.on("close",u),e.on("close",u),e.emit("pipe",s),e};var vM,mM,yM,bM,_M,wM=uM.Transform,kM={},CM=(kr=o("d2KzW"),(Zr=o("dwjmx")).Buffer),xM=o("eY08H"),SM={};SM=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};var EM={},DM="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function AM(e,t){return Object.prototype.hasOwnProperty.call(e,t)}EM.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)AM(n,i)&&(e[i]=n[i])}}return e},EM.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var IM,RM,TM,LM,MM,NM={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),r);else for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,a;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)o=e[t],a.set(o,r),r+=o.length;return a}},PM={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};EM.setTyped=function(e){e?(EM.Buf8=Uint8Array,EM.Buf16=Uint16Array,EM.Buf32=Int32Array,EM.assign(EM,NM)):(EM.Buf8=Array,EM.Buf16=Array,EM.Buf32=Array,EM.assign(EM,PM))},EM.setTyped(DM);function OM(e){for(var t=e.length;--t>=0;)e[t]=0}var FM=256,BM=286,HM=30,jM=15,zM=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],WM=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],UM=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],VM=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],KM=new Array(576);OM(KM);var qM=new Array(60);OM(qM);var JM=new Array(512);OM(JM);var XM=new Array(256);OM(XM);var GM=new Array(29);OM(GM);var ZM,$M,YM,QM=new Array(HM);function eN(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}function tN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function nN(e){return e<256?JM[e]:JM[256+(e>>>7)]}function iN(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function rN(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,iN(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function oN(e,t,n){rN(e,n[2*t],n[2*t+1])}function aN(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function sN(e,t,n){var i,r,o=new Array(16),a=0;for(i=1;i<=jM;i++)o[i]=a=a+n[i-1]<<1;for(r=0;r<=t;r++){var s=e[2*r+1];0!==s&&(e[2*r]=aN(o[s]++,s))}}function lN(e){var t;for(t=0;t<BM;t++)e.dyn_ltree[2*t]=0;for(t=0;t<HM;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function uN(e){e.bi_valid>8?iN(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function cN(e,t,n,i){var r=2*t,o=2*n;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function dN(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&cN(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!cN(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function hN(e,t,n){var i,r,o,a,s=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],r=e.pending_buf[e.l_buf+s],s++,0===i?oN(e,r,t):(oN(e,(o=XM[r])+FM+1,t),0!==(a=zM[o])&&rN(e,r-=GM[o],a),oN(e,o=nN(--i),n),0!==(a=WM[o])&&rN(e,i-=QM[o],a))}while(s<e.last_lit);oN(e,256,t)}function fN(e,t){var n,i,r,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(r=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[r]=0,e.opt_len--,s&&(e.static_len-=a[2*r+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)dN(e,o,n);r=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],dN(e,o,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,o[2*r]=o[2*n]+o[2*i],e.depth[r]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,o[2*n+1]=o[2*i+1]=r,e.heap[1]=r++,dN(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,r,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=jM;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)(o=l[2*l[2*(i=e.heap[n])+1]+1]+1)>p&&(o=p,g++),l[2*i+1]=o,i>u||(e.bl_count[o]++,a=0,i>=f&&(a=h[i-f]),s=l[2*i],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*i+1]+a)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(i=e.bl_count[o];0!==i;)(r=e.heap[--n])>u||(l[2*r+1]!==o&&(e.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(e,t),sN(o,u,e.bl_count)}function pN(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=t[2*(i+1)+1],++s<l&&r===a||(s<u?e.bl_tree[2*r]+=s:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,o=r,0===a?(l=138,u=3):r===a?(l=6,u=3):(l=7,u=4))}function gN(e,t,n){var i,r,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),i=0;i<=n;i++)if(r=a,a=t[2*(i+1)+1],!(++s<l&&r===a)){if(s<u)do{oN(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==o&&(oN(e,r,e.bl_tree),s--),oN(e,16,e.bl_tree),rN(e,s-3,2)):s<=10?(oN(e,17,e.bl_tree),rN(e,s-3,3)):(oN(e,18,e.bl_tree),rN(e,s-11,7));s=0,o=r,0===a?(l=138,u=3):r===a?(l=6,u=3):(l=7,u=4)}}OM(QM);var vN=!1;function mN(e,t,n,i){rN(e,0+(i?1:0),3),function(e,t,n,i){uN(e),i&&(iN(e,n),iN(e,~n)),EM.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}IM=function(e){vN||(!function(){var e,t,n,i,r,o=new Array(16);for(n=0,i=0;i<28;i++)for(GM[i]=n,e=0;e<1<<zM[i];e++)XM[n++]=i;for(XM[n-1]=i,r=0,i=0;i<16;i++)for(QM[i]=r,e=0;e<1<<WM[i];e++)JM[r++]=i;for(r>>=7;i<HM;i++)for(QM[i]=r<<7,e=0;e<1<<WM[i]-7;e++)JM[256+r++]=i;for(t=0;t<=jM;t++)o[t]=0;for(e=0;e<=143;)KM[2*e+1]=8,e++,o[8]++;for(;e<=255;)KM[2*e+1]=9,e++,o[9]++;for(;e<=279;)KM[2*e+1]=7,e++,o[7]++;for(;e<=287;)KM[2*e+1]=8,e++,o[8]++;for(sN(KM,287,o),e=0;e<HM;e++)qM[2*e+1]=5,qM[2*e]=aN(e,5);ZM=new eN(KM,zM,257,BM,jM),$M=new eN(qM,WM,0,HM,jM),YM=new eN(new Array(0),UM,0,19,7)}(),vN=!0),e.l_desc=new tN(e.dyn_ltree,ZM),e.d_desc=new tN(e.dyn_dtree,$M),e.bl_desc=new tN(e.bl_tree,YM),e.bi_buf=0,e.bi_valid=0,lN(e)},RM=mN,TM=function(e,t,n,i){var r,o,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<FM;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),fN(e,e.l_desc),fN(e,e.d_desc),a=function(e){var t;for(pN(e,e.dyn_ltree,e.l_desc.max_code),pN(e,e.dyn_dtree,e.d_desc.max_code),fN(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*VM[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),r=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==t?mN(e,t,n,i):4===e.strategy||o===r?(rN(e,2+(i?1:0),3),hN(e,KM,qM)):(rN(e,4+(i?1:0),3),function(e,t,n,i){var r;for(rN(e,t-257,5),rN(e,n-1,5),rN(e,i-4,4),r=0;r<i;r++)rN(e,e.bl_tree[2*VM[r]+1],3);gN(e,e.dyn_ltree,t-1),gN(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),hN(e,e.dyn_ltree,e.dyn_dtree)),lN(e),i&&uN(e)},LM=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(XM[n]+FM+1)]++,e.dyn_dtree[2*nN(t)]++),e.last_lit===e.lit_bufsize-1},MM=function(e){rN(e,2,3),oN(e,256,KM),function(e){16===e.bi_valid?(iN(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)};var yN={};yN=function(e,t,n,i){for(var r=65535&e|0,o=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+(r=r+t[i++]|0)|0}while(--a);r%=65521,o%=65521}return r|o<<16|0};var bN={};var _N=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();bN=function(e,t,n,i){var r=_N,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^r[255&(e^t[a])];return-1^e};var wN;wN={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};var kN,CN,xN,SN,EN,DN,AN=-2,IN=258,RN=262,TN=103,LN=113,MN=666;function NN(e,t){return e.msg=wN[t],t}function PN(e){return(e<<1)-(e>4?9:0)}function ON(e){for(var t=e.length;--t>=0;)e[t]=0}function FN(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(EM.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function BN(e,t){TM(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,FN(e.strm)}function HN(e,t){e.pending_buf[e.pending++]=t}function jN(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function zN(e,t){var n,i,r=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-RN?e.strstart-(e.w_size-RN):0,u=e.window,c=e.w_mask,d=e.prev,h=e.strstart+IN,f=u[o+a-1],p=u[o+a];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===p&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<h);if(i=IN-(h-o),o=h-IN,i>a){if(e.match_start=t,a=i,i>=s)break;f=u[o+a-1],p=u[o+a]}}}while((t=d[t&c])>l&&0!=--r);return a<=e.lookahead?a:e.lookahead}function WN(e){var t,n,i,r,o,a,s,l,u,c,d=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=d+(d-RN)){EM.arraySet(e.window,e.window,d,d,0),e.match_start-=d,e.strstart-=d,e.block_start-=d,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=d?i-d:0}while(--n);t=n=d;do{i=e.prev[--t],e.prev[t]=i>=d?i-d:0}while(--n);r+=d}if(0===e.strm.avail_in)break;if(a=e.strm,s=e.window,l=e.strstart+e.lookahead,u=r,c=void 0,(c=a.avail_in)>u&&(c=u),n=0===c?0:(a.avail_in-=c,EM.arraySet(s,a.input,a.next_in,c,l),1===a.state.wrap?a.adler=yN(a.adler,s,c,l):2===a.state.wrap&&(a.adler=bN(a.adler,s,c,l)),a.next_in+=c,a.total_in+=c,c),e.lookahead+=n,e.lookahead+e.insert>=3)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+3-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<RN&&0!==e.strm.avail_in)}function UN(e,t){for(var n,i;;){if(e.lookahead<RN){if(WN(e),e.lookahead<RN&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-RN&&(e.match_length=zN(e,n)),e.match_length>=3)if(i=LM(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=LM(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(BN(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(BN(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(BN(e,!1),0===e.strm.avail_out)?1:2}function VN(e,t){for(var n,i,r;;){if(e.lookahead<RN){if(WN(e),e.lookahead<RN&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-RN&&(e.match_length=zN(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=LM(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(BN(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=LM(e,0,e.window[e.strstart-1]))&&BN(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=LM(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(BN(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(BN(e,!1),0===e.strm.avail_out)?1:2}function KN(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}function qN(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new EM.Buf16(1146),this.dyn_dtree=new EM.Buf16(122),this.bl_tree=new EM.Buf16(78),ON(this.dyn_ltree),ON(this.dyn_dtree),ON(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new EM.Buf16(16),this.heap=new EM.Buf16(573),ON(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new EM.Buf16(573),ON(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function JN(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:LN,e.adler=2===t.wrap?0:1,t.last_flush=0,IM(t),0):NN(e,AN)}function XN(e){var t,n=JN(e);return 0===n&&((t=e.state).window_size=2*t.w_size,ON(t.head),t.max_lazy_match=kN[t.level].max_lazy,t.good_match=kN[t.level].good_length,t.nice_match=kN[t.level].nice_length,t.max_chain_length=kN[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n}function GN(e,t,n,i,r,o){if(!e)return AN;var a=1;if(-1===t&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),r<1||r>9||8!==n||i<8||i>15||t<0||t>9||o<0||o>4)return NN(e,AN);8===i&&(i=9);var s=new qN;return e.state=s,s.strm=e,s.wrap=a,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new EM.Buf8(2*s.w_size),s.head=new EM.Buf16(s.hash_size),s.prev=new EM.Buf16(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new EM.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=t,s.strategy=o,s.method=n,XN(e)}kN=[new KN(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(WN(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,BN(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-RN&&(BN(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(BN(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(BN(e,!1),e.strm.avail_out),1)})),new KN(4,4,8,4,UN),new KN(4,5,16,8,UN),new KN(4,6,32,32,UN),new KN(4,4,16,16,VN),new KN(8,16,32,32,VN),new KN(8,16,128,128,VN),new KN(8,32,128,256,VN),new KN(32,128,258,1024,VN),new KN(32,258,258,4096,VN)],vM=GN,mM=XN,yM=function(e,t){var n,i,r,o;if(!e||!e.state||t>5||t<0)return e?NN(e,AN):AN;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||i.status===MN&&4!==t)return NN(e,0===e.avail_out?-5:AN);if(i.strm=e,n=i.last_flush,i.last_flush=t,42===i.status)if(2===i.wrap)e.adler=0,HN(i,31),HN(i,139),HN(i,8),i.gzhead?(HN(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),HN(i,255&i.gzhead.time),HN(i,i.gzhead.time>>8&255),HN(i,i.gzhead.time>>16&255),HN(i,i.gzhead.time>>24&255),HN(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),HN(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(HN(i,255&i.gzhead.extra.length),HN(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=bN(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(HN(i,0),HN(i,0),HN(i,0),HN(i,0),HN(i,0),HN(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),HN(i,3),i.status=LN);else{var a=8+(i.w_bits-8<<4)<<8;a|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(a|=32),a+=31-a%31,i.status=LN,jN(i,a),0!==i.strstart&&(jN(i,e.adler>>>16),jN(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>r&&(e.adler=bN(e.adler,i.pending_buf,i.pending-r,r)),FN(e),r=i.pending,i.pending!==i.pending_buf_size));)HN(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=bN(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=bN(e.adler,i.pending_buf,i.pending-r,r)),FN(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,HN(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(e.adler=bN(e.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=bN(e.adler,i.pending_buf,i.pending-r,r)),FN(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}o=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,HN(i,o)}while(0!==o);i.gzhead.hcrc&&i.pending>r&&(e.adler=bN(e.adler,i.pending_buf,i.pending-r,r)),0===o&&(i.status=TN)}else i.status=TN;if(i.status===TN&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&FN(e),i.pending+2<=i.pending_buf_size&&(HN(i,255&e.adler),HN(i,e.adler>>8&255),e.adler=0,i.status=LN)):i.status=LN),0!==i.pending){if(FN(e),0===e.avail_out)return i.last_flush=-1,0}else if(0===e.avail_in&&PN(t)<=PN(n)&&4!==t)return NN(e,-5);if(i.status===MN&&0!==e.avail_in)return NN(e,-5);if(0!==e.avail_in||0!==i.lookahead||0!==t&&i.status!==MN){var s=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(WN(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=LM(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(BN(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(BN(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(BN(e,!1),0===e.strm.avail_out)?1:2}(i,t):3===i.strategy?function(e,t){for(var n,i,r,o,a=e.window;;){if(e.lookahead<=IN){if(WN(e),e.lookahead<=IN&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=a[r=e.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){o=e.strstart+IN;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);e.match_length=IN-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=LM(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=LM(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(BN(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(BN(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(BN(e,!1),0===e.strm.avail_out)?1:2}(i,t):kN[i.level].func(i,t);if(3!==s&&4!==s||(i.status=MN),1===s||3===s)return 0===e.avail_out&&(i.last_flush=-1),0;if(2===s&&(1===t?MM(i):5!==t&&(RM(i,0,0,!1),3===t&&(ON(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),FN(e),0===e.avail_out))return i.last_flush=-1,0}return 4!==t?0:i.wrap<=0?1:(2===i.wrap?(HN(i,255&e.adler),HN(i,e.adler>>8&255),HN(i,e.adler>>16&255),HN(i,e.adler>>24&255),HN(i,255&e.total_in),HN(i,e.total_in>>8&255),HN(i,e.total_in>>16&255),HN(i,e.total_in>>24&255)):(jN(i,e.adler>>>16),jN(i,65535&e.adler)),FN(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},bM=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==TN&&t!==LN&&t!==MN?NN(e,AN):(e.state=null,t===LN?NN(e,-3):0):AN},_M=function(e,t){var n,i,r,o,a,s,l,u,c=t.length;if(!e||!e.state)return AN;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return AN;for(1===o&&(e.adler=yN(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(ON(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new EM.Buf8(n.w_size),EM.arraySet(u,t,c-n.w_size,n.w_size,0),t=u,c=n.w_size),a=e.avail_in,s=e.next_in,l=e.input,e.avail_in=c,e.next_in=0,e.input=t,WN(n);n.lookahead>=3;){i=n.strstart,r=n.lookahead-2;do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=2,WN(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=l,e.avail_in=a,n.wrap=o,0};var ZN;ZN=function(e,t){var n,i,r,o,a,s,l,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x,S,E;n=e.state,i=e.next_in,S=e.input,r=i+(e.avail_in-5),o=e.next_out,E=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{p<15&&(f+=S[i++]<<p,p+=8,f+=S[i++]<<p,p+=8),b=g[f&m];t:for(;;){if(f>>>=_=b>>>24,p-=_,0===(_=b>>>16&255))E[o++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=g[(65535&b)+(f&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(_&=15)&&(p<_&&(f+=S[i++]<<p,p+=8),w+=f&(1<<_)-1,f>>>=_,p-=_),p<15&&(f+=S[i++]<<p,p+=8,f+=S[i++]<<p,p+=8),b=v[f&y];n:for(;;){if(f>>>=_=b>>>24,p-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=v[(65535&b)+(f&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(k=65535&b,p<(_&=15)&&(f+=S[i++]<<p,(p+=8)<_&&(f+=S[i++]<<p,p+=8)),(k+=f&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=_,p-=_,k>(_=o-a)){if((_=k-_)>c&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(C=0,x=h,0===d){if(C+=u-_,_<w){w-=_;do{E[o++]=h[C++]}while(--_);C=o-k,x=E}}else if(d<_){if(C+=u+d-_,(_-=d)<w){w-=_;do{E[o++]=h[C++]}while(--_);if(C=0,d<w){w-=_=d;do{E[o++]=h[C++]}while(--_);C=o-k,x=E}}}else if(C+=d-_,_<w){w-=_;do{E[o++]=h[C++]}while(--_);C=o-k,x=E}for(;w>2;)E[o++]=x[C++],E[o++]=x[C++],E[o++]=x[C++],w-=3;w&&(E[o++]=x[C++],w>1&&(E[o++]=x[C++]))}else{C=o-k;do{E[o++]=E[C++],E[o++]=E[C++],E[o++]=E[C++],w-=3}while(w>2);w&&(E[o++]=E[C++],w>1&&(E[o++]=E[C++]))}break}}break}}while(i<r&&o<s);i-=w=p>>3,f&=(1<<(p-=w<<3))-1,e.next_in=i,e.next_out=o,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p};var $N,YN=15,QN=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],eP=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],tP=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],nP=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];$N=function(e,t,n,i,r,o,a,s){var l,u,c,d,h,f,p,g,v,m=s.bits,y=0,b=0,_=0,w=0,k=0,C=0,x=0,S=0,E=0,D=0,A=null,I=0,R=new EM.Buf16(16),T=new EM.Buf16(16),L=null,M=0;for(y=0;y<=YN;y++)R[y]=0;for(b=0;b<i;b++)R[t[n+b]]++;for(k=m,w=YN;w>=1&&0===R[w];w--);if(k>w&&(k=w),0===w)return r[o++]=20971520,r[o++]=20971520,s.bits=1,0;for(_=1;_<w&&0===R[_];_++);for(k<_&&(k=_),S=1,y=1;y<=YN;y++)if(S<<=1,(S-=R[y])<0)return-1;if(S>0&&(0===e||1!==w))return-1;for(T[1]=0,y=1;y<YN;y++)T[y+1]=T[y]+R[y];for(b=0;b<i;b++)0!==t[n+b]&&(a[T[t[n+b]]++]=b);if(0===e?(A=L=a,f=19):1===e?(A=QN,I-=257,L=eP,M-=257,f=256):(A=tP,L=nP,f=-1),D=0,b=0,y=_,h=o,C=k,x=0,c=-1,d=(E=1<<k)-1,1===e&&E>852||2===e&&E>592)return 1;for(;;){p=y-x,a[b]<f?(g=0,v=a[b]):a[b]>f?(g=L[M+a[b]],v=A[I+a[b]]):(g=96,v=0),l=1<<y-x,_=u=1<<C;do{r[h+(D>>x)+(u-=l)]=p<<24|g<<16|v|0}while(0!==u);for(l=1<<y-1;D&l;)l>>=1;if(0!==l?(D&=l-1,D+=l):D=0,b++,0==--R[y]){if(y===w)break;y=t[n+a[b]]}if(y>k&&(D&d)!==c){for(0===x&&(x=k),h+=_,S=1<<(C=y-x);C+x<w&&!((S-=R[C+x])<=0);)C++,S<<=1;if(E+=1<<C,1===e&&E>852||2===e&&E>592)return 1;r[c=D&d]=k<<24|C<<16|h-o|0}}return 0!==D&&(r[h+D]=y-x<<24|4194304),s.bits=k,0};var iP=-2,rP=12,oP=30;function aP(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function sP(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new EM.Buf16(320),this.work=new EM.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function lP(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new EM.Buf32(852),t.distcode=t.distdyn=new EM.Buf32(592),t.sane=1,t.back=-1,0):iP}function uP(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,lP(e)):iP}function cP(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?iP:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,uP(e))):iP}function dP(e,t){var n,i;return e?(i=new sP,e.state=i,i.window=null,0!==(n=cP(e,t))&&(e.state=null),n):iP}var hP,fP,pP=!0;function gP(e){if(pP){var t;for(hP=new EM.Buf32(512),fP=new EM.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for($N(1,e.lens,0,288,hP,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;$N(2,e.lens,0,32,fP,0,e.work,{bits:5}),pP=!1}e.lencode=hP,e.lenbits=9,e.distcode=fP,e.distbits=5}function vP(e,t,n,i){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new EM.Buf8(o.wsize)),i>=o.wsize?(EM.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),EM.arraySet(o.window,t,n-i,r,o.wnext),(i-=r)?(EM.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}CN=uP,xN=dP,SN=function(e,t){var n,i,r,o,a,s,l,u,c,d,h,f,p,g,v,m,y,b,_,w,k,C,x,S,E=0,D=new EM.Buf8(4),A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return iP;(n=e.state).mode===rP&&(n.mode=13),a=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,u=n.hold,c=n.bits,d=s,h=l,C=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(2&n.wrap&&35615===u){n.check=0,D[0]=255&u,D[1]=u>>>8&255,n.check=bN(n.check,D,2,0),u=0,c=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=oP;break}if(8!=(15&u)){e.msg="unknown compression method",n.mode=oP;break}if(c-=4,k=8+(15&(u>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=oP;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&u?10:rP,u=0,c=0;break;case 2:for(;c<16;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(n.flags=u,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=oP;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=oP;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(D[0]=255&u,D[1]=u>>>8&255,n.check=bN(n.check,D,2,0)),u=0,c=0,n.mode=3;case 3:for(;c<32;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(D[0]=255&u,D[1]=u>>>8&255,D[2]=u>>>16&255,D[3]=u>>>24&255,n.check=bN(n.check,D,4,0)),u=0,c=0,n.mode=4;case 4:for(;c<16;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(D[0]=255&u,D[1]=u>>>8&255,n.check=bN(n.check,D,2,0)),u=0,c=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(D[0]=255&u,D[1]=u>>>8&255,n.check=bN(n.check,D,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((f=n.length)>s&&(f=s),f&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),EM.arraySet(n.head.extra,i,o,f,k)),512&n.flags&&(n.check=bN(n.check,i,f,o)),s-=f,o+=f,n.length-=f),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break e;f=0;do{k=i[o+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&f<s);if(512&n.flags&&(n.check=bN(n.check,i,f,o)),s-=f,o+=f,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break e;f=0;do{k=i[o+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&f<s);if(512&n.flags&&(n.check=bN(n.check,i,f,o)),s-=f,o+=f,k)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=oP;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=rP;break;case 10:for(;c<32;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}e.adler=n.check=aP(u),u=0,c=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,2;e.adler=n.check=1,n.mode=rP;case rP:if(5===t||6===t)break e;case 13:if(n.last){u>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}switch(n.last=1&u,c-=1,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(gP(n),n.mode=20,6===t){u>>>=2,c-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=oP}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=oP;break}if(n.length=65535&u,u=0,c=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(f=n.length){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;EM.arraySet(r,i,o,f,a),s-=f,o+=f,l-=f,a+=f,n.length-=f;break}n.mode=rP;break;case 17:for(;c<14;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=oP;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}n.lens[A[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[A[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},C=$N(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,C){e.msg="invalid code lengths set",n.mode=oP;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;m=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&E,!((v=E>>>24)<=c);){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(y<16)u>>>=v,c-=v,n.lens[n.have++]=y;else{if(16===y){for(S=v+2;c<S;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(u>>>=v,c-=v,0===n.have){e.msg="invalid bit length repeat",n.mode=oP;break}k=n.lens[n.have-1],f=3+(3&u),u>>>=2,c-=2}else if(17===y){for(S=v+3;c<S;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}c-=v,k=0,f=3+(7&(u>>>=v)),u>>>=3,c-=3}else{for(S=v+7;c<S;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}c-=v,k=0,f=11+(127&(u>>>=v)),u>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=oP;break}for(;f--;)n.lens[n.have++]=k}}if(n.mode===oP)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=oP;break}if(n.lenbits=9,x={bits:n.lenbits},C=$N(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,C){e.msg="invalid literal/lengths set",n.mode=oP;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},C=$N(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,C){e.msg="invalid distances set",n.mode=oP;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(s>=6&&l>=258){e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,ZN(e,h),a=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,s=e.avail_in,u=n.hold,c=n.bits,n.mode===rP&&(n.back=-1);break}for(n.back=0;m=(E=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,y=65535&E,!((v=E>>>24)<=c);){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(m&&0==(240&m)){for(b=v,_=m,w=y;m=(E=n.lencode[w+((u&(1<<b+_)-1)>>b)])>>>16&255,y=65535&E,!(b+(v=E>>>24)<=c);){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=v,c-=v,n.back+=v,n.length=y,0===m){n.mode=26;break}if(32&m){n.back=-1,n.mode=rP;break}if(64&m){e.msg="invalid literal/length code",n.mode=oP;break}n.extra=15&m,n.mode=22;case 22:if(n.extra){for(S=n.extra;c<S;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;m=(E=n.distcode[u&(1<<n.distbits)-1])>>>16&255,y=65535&E,!((v=E>>>24)<=c);){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(0==(240&m)){for(b=v,_=m,w=y;m=(E=n.distcode[w+((u&(1<<b+_)-1)>>b)])>>>16&255,y=65535&E,!(b+(v=E>>>24)<=c);){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}u>>>=b,c-=b,n.back+=b}if(u>>>=v,c-=v,n.back+=v,64&m){e.msg="invalid distance code",n.mode=oP;break}n.offset=y,n.extra=15&m,n.mode=24;case 24:if(n.extra){for(S=n.extra;c<S;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=oP;break}n.mode=25;case 25:if(0===l)break e;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=oP;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=r,p=a-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[a++]=g[p++]}while(--f);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;r[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break e;s--,u|=i[o++]<<c,c+=8}if(h-=l,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?bN(n.check,r,h,a-h):yN(n.check,r,h,a-h)),h=l,(n.flags?u:aP(u))!==n.check){e.msg="incorrect data check",n.mode=oP;break}u=0,c=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break e;s--,u+=i[o++]<<c,c+=8}if(u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=oP;break}u=0,c=0}n.mode=29;case 29:C=1;break e;case oP:C=-3;break e;case 31:return-4;default:return iP}return e.next_out=a,e.avail_out=l,e.next_in=o,e.avail_in=s,n.hold=u,n.bits=c,(n.wsize||h!==e.avail_out&&n.mode<oP&&(n.mode<27||4!==t))&&vP(e,e.output,e.next_out,h-e.avail_out)?(n.mode=31,-4):(d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?bN(n.check,r,h,e.next_out-h):yN(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===rP?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===h||4===t)&&0===C&&(C=-5),C)},EN=function(e){if(!e||!e.state)return iP;var t=e.state;return t.window&&(t.window=null),e.state=null,0},DN=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?iP:11===n.mode&&yN(1,t,i,0)!==n.check?-3:vP(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,0):iP};var mP;for(var yP in mP={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8})kM[yP]=mP[yP];kM.NONE=0,kM.DEFLATE=1,kM.INFLATE=2,kM.GZIP=3,kM.GUNZIP=4,kM.DEFLATERAW=5,kM.INFLATERAW=6,kM.UNZIP=7;function bP(e){if("number"!=typeof e||e<kM.DEFLATE||e>kM.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}bP.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,xM(this.init_done,"close before init"),xM(this.mode<=kM.UNZIP),this.mode===kM.DEFLATE||this.mode===kM.GZIP||this.mode===kM.DEFLATERAW?bM(this.strm):this.mode!==kM.INFLATE&&this.mode!==kM.GUNZIP&&this.mode!==kM.INFLATERAW&&this.mode!==kM.UNZIP||EN(this.strm),this.mode=kM.NONE,this.dictionary=null)},bP.prototype.write=function(e,t,n,i,r,o,a){return this._write(!0,e,t,n,i,r,o,a)},bP.prototype.writeSync=function(e,t,n,i,r,o,a){return this._write(!1,e,t,n,i,r,o,a)},bP.prototype._write=function(e,t,n,i,r,o,a,s){if(xM.equal(arguments.length,8),xM(this.init_done,"write before init"),xM(this.mode!==kM.NONE,"already finalized"),xM.equal(!1,this.write_in_progress,"write already in progress"),xM.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,xM.equal(!1,void 0===t,"must provide flush value"),this.write_in_progress=!0,t!==kM.Z_NO_FLUSH&&t!==kM.Z_PARTIAL_FLUSH&&t!==kM.Z_SYNC_FLUSH&&t!==kM.Z_FULL_FLUSH&&t!==kM.Z_FINISH&&t!==kM.Z_BLOCK)throw new Error("Invalid flush value");if(null==n&&(n=CM.alloc(0),r=0,i=0),this.strm.avail_in=r,this.strm.input=n,this.strm.next_in=i,this.strm.avail_out=s,this.strm.output=o,this.strm.next_out=a,this.flush=t,!e)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return kr.nextTick((function(){l._process(),l._after()})),this},bP.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},bP.prototype._process=function(){var e=null;switch(this.mode){case kM.DEFLATE:case kM.GZIP:case kM.DEFLATERAW:this.err=yM(this.strm,this.flush);break;case kM.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=kM.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=kM.GUNZIP):this.mode=kM.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case kM.INFLATE:case kM.GUNZIP:case kM.INFLATERAW:for(this.err=SN(this.strm,this.flush),this.err===kM.Z_NEED_DICT&&this.dictionary&&(this.err=DN(this.strm,this.dictionary),this.err===kM.Z_OK?this.err=SN(this.strm,this.flush):this.err===kM.Z_DATA_ERROR&&(this.err=kM.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===kM.GUNZIP&&this.err===kM.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=SN(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},bP.prototype._checkError=function(){switch(this.err){case kM.Z_OK:case kM.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===kM.Z_FINISH)return this._error("unexpected end of file"),!1;break;case kM.Z_STREAM_END:break;case kM.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},bP.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},bP.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},bP.prototype.init=function(e,t,n,i,r){xM(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),xM(e>=8&&e<=15,"invalid windowBits"),xM(t>=-1&&t<=9,"invalid compression level"),xM(n>=1&&n<=9,"invalid memlevel"),xM(i===kM.Z_FILTERED||i===kM.Z_HUFFMAN_ONLY||i===kM.Z_RLE||i===kM.Z_FIXED||i===kM.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(t,e,n,i,r),this._setDictionary()},bP.prototype.params=function(){throw new Error("deflateParams Not supported")},bP.prototype.reset=function(){this._reset(),this._setDictionary()},bP.prototype._init=function(e,t,n,i,r){switch(this.level=e,this.windowBits=t,this.memLevel=n,this.strategy=i,this.flush=kM.Z_NO_FLUSH,this.err=kM.Z_OK,this.mode!==kM.GZIP&&this.mode!==kM.GUNZIP||(this.windowBits+=16),this.mode===kM.UNZIP&&(this.windowBits+=32),this.mode!==kM.DEFLATERAW&&this.mode!==kM.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new SM,this.mode){case kM.DEFLATE:case kM.GZIP:case kM.DEFLATERAW:this.err=vM(this.strm,this.level,kM.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case kM.INFLATE:case kM.GUNZIP:case kM.INFLATERAW:case kM.UNZIP:this.err=xN(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==kM.Z_OK&&this._error("Init error"),this.dictionary=r,this.write_in_progress=!1,this.init_done=!0},bP.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=kM.Z_OK,this.mode){case kM.DEFLATE:case kM.DEFLATERAW:this.err=_M(this.strm,this.dictionary)}this.err!==kM.Z_OK&&this._error("Failed to set dictionary")}},bP.prototype._reset=function(){switch(this.err=kM.Z_OK,this.mode){case kM.DEFLATE:case kM.DEFLATERAW:case kM.GZIP:this.err=mM(this.strm);break;case kM.INFLATE:case kM.INFLATERAW:case kM.GUNZIP:this.err=CN(this.strm)}this.err!==kM.Z_OK&&this._error("Failed to reset stream")},kM.Zlib=bP;var _P=o("drhEA"),wP=(xM=o("eY08H")).ok,kP=(Zr=o("dwjmx")).kMaxLength,CP="Cannot create final Buffer. It would be larger than 0x"+kP.toString(16)+" bytes";kM.Z_MIN_WINDOWBITS=8,kM.Z_MAX_WINDOWBITS=15,kM.Z_DEFAULT_WINDOWBITS=15,kM.Z_MIN_CHUNK=64,kM.Z_MAX_CHUNK=1/0,kM.Z_DEFAULT_CHUNK=16384,kM.Z_MIN_MEMLEVEL=1,kM.Z_MAX_MEMLEVEL=9,kM.Z_DEFAULT_MEMLEVEL=8,kM.Z_MIN_LEVEL=-1,kM.Z_MAX_LEVEL=9,kM.Z_DEFAULT_LEVEL=kM.Z_DEFAULT_COMPRESSION;for(var xP=Object.keys(kM),SP=0;SP<xP.length;SP++){var EP=xP[SP];EP.match(/^Z/)&&Object.defineProperty(hM,EP,{enumerable:!0,value:kM[EP],writable:!1})}for(var DP={Z_OK:kM.Z_OK,Z_STREAM_END:kM.Z_STREAM_END,Z_NEED_DICT:kM.Z_NEED_DICT,Z_ERRNO:kM.Z_ERRNO,Z_STREAM_ERROR:kM.Z_STREAM_ERROR,Z_DATA_ERROR:kM.Z_DATA_ERROR,Z_MEM_ERROR:kM.Z_MEM_ERROR,Z_BUF_ERROR:kM.Z_BUF_ERROR,Z_VERSION_ERROR:kM.Z_VERSION_ERROR},AP=Object.keys(DP),IP=0;IP<AP.length;IP++){var RP=AP[IP];DP[DP[RP]]=RP}function TP(e,t,n){var i=function(){var t,i=null;o>=kP?i=new RangeError(CP):t=fM.concat(r,o),r=[],e.close(),n(i,t)},r=[],o=0;function a(){for(var t;null!==(t=e.read());)r.push(t),o+=t.length;e.once("readable",a)}e.on("error",(function(t){e.removeListener("end",i),e.removeListener("readable",a),n(t)})),e.on("end",i),e.end(t),a()}function LP(e,t){if("string"==typeof t&&(t=fM.from(t)),!fM.isBuffer(t))throw new TypeError("Not a string or buffer");var n=e._finishFlushFlag;return e._processChunk(t,n)}function MP(e){if(!(this instanceof MP))return new MP(e);zP.call(this,e,kM.DEFLATE)}function NP(e){if(!(this instanceof NP))return new NP(e);zP.call(this,e,kM.INFLATE)}function PP(e){if(!(this instanceof PP))return new PP(e);zP.call(this,e,kM.GZIP)}function OP(e){if(!(this instanceof OP))return new OP(e);zP.call(this,e,kM.GUNZIP)}function FP(e){if(!(this instanceof FP))return new FP(e);zP.call(this,e,kM.DEFLATERAW)}function BP(e){if(!(this instanceof BP))return new BP(e);zP.call(this,e,kM.INFLATERAW)}function HP(e){if(!(this instanceof HP))return new HP(e);zP.call(this,e,kM.UNZIP)}function jP(e){return e===kM.Z_NO_FLUSH||e===kM.Z_PARTIAL_FLUSH||e===kM.Z_SYNC_FLUSH||e===kM.Z_FULL_FLUSH||e===kM.Z_FINISH||e===kM.Z_BLOCK}function zP(e,t){var n=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||hM.Z_DEFAULT_CHUNK,wM.call(this,e),e.flush&&!jP(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!jP(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||kM.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:kM.Z_FINISH,e.chunkSize&&(e.chunkSize<hM.Z_MIN_CHUNK||e.chunkSize>hM.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<hM.Z_MIN_WINDOWBITS||e.windowBits>hM.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<hM.Z_MIN_LEVEL||e.level>hM.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<hM.Z_MIN_MEMLEVEL||e.memLevel>hM.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=hM.Z_FILTERED&&e.strategy!=hM.Z_HUFFMAN_ONLY&&e.strategy!=hM.Z_RLE&&e.strategy!=hM.Z_FIXED&&e.strategy!=hM.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!fM.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new kM.Zlib(t);var i=this;this._hadError=!1,this._handle.onerror=function(e,t){WP(i),i._hadError=!0;var n=new Error(e);n.errno=t,n.code=hM.codes[t],i.emit("error",n)};var r=hM.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(r=e.level);var o=hM.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(o=e.strategy),this._handle.init(e.windowBits||hM.Z_DEFAULT_WINDOWBITS,r,e.memLevel||hM.Z_DEFAULT_MEMLEVEL,o,e.dictionary),this._buffer=fM.allocUnsafe(this._chunkSize),this._offset=0,this._level=r,this._strategy=o,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function WP(e,t){t&&kr.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function UP(e){e.emit("close")}Object.defineProperty(hM,"codes",{enumerable:!0,value:Object.freeze(DP),writable:!1}),hM.Deflate=MP,hM.Inflate=NP,hM.Gzip=PP,hM.Gunzip=OP,hM.DeflateRaw=FP,hM.InflateRaw=BP,hM.Unzip=HP,hM.createDeflate=function(e){return new MP(e)},hM.createInflate=function(e){return new NP(e)},hM.createDeflateRaw=function(e){return new FP(e)},hM.createInflateRaw=function(e){return new BP(e)},hM.createGzip=function(e){return new PP(e)},hM.createGunzip=function(e){return new OP(e)},hM.createUnzip=function(e){return new HP(e)},hM.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new MP(t),e,n)},hM.deflateSync=function(e,t){return LP(new MP(t),e)},hM.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new PP(t),e,n)},hM.gzipSync=function(e,t){return LP(new PP(t),e)},hM.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new FP(t),e,n)},hM.deflateRawSync=function(e,t){return LP(new FP(t),e)},hM.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new HP(t),e,n)},hM.unzipSync=function(e,t){return LP(new HP(t),e)},hM.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new NP(t),e,n)},hM.inflateSync=function(e,t){return LP(new NP(t),e)},hM.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new OP(t),e,n)},hM.gunzipSync=function(e,t){return LP(new OP(t),e)},hM.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),TP(new BP(t),e,n)},hM.inflateRawSync=function(e,t){return LP(new BP(t),e)},_P.inherits(zP,wM),zP.prototype.params=function(e,t,n){if(e<hM.Z_MIN_LEVEL||e>hM.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(t!=hM.Z_FILTERED&&t!=hM.Z_HUFFMAN_ONLY&&t!=hM.Z_RLE&&t!=hM.Z_FIXED&&t!=hM.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+t);if(this._level!==e||this._strategy!==t){var i=this;this.flush(kM.Z_SYNC_FLUSH,(function(){wP(i._handle,"zlib binding closed"),i._handle.params(e,t),i._hadError||(i._level=e,i._strategy=t,n&&n())}))}else kr.nextTick(n)},zP.prototype.reset=function(){return wP(this._handle,"zlib binding closed"),this._handle.reset()},zP.prototype._flush=function(e){this._transform(fM.alloc(0),"",e)},zP.prototype.flush=function(e,t){var n=this,i=this._writableState;("function"==typeof e||void 0===e&&!t)&&(t=e,e=kM.Z_FULL_FLUSH),i.ended?t&&kr.nextTick(t):i.ending?t&&this.once("end",t):i.needDrain?t&&this.once("drain",(function(){return n.flush(e,t)})):(this._flushFlag=e,this.write(fM.alloc(0),"",t))},zP.prototype.close=function(e){WP(this,e),kr.nextTick(UP,this)},zP.prototype._transform=function(e,t,n){var i,r=this._writableState,o=(r.ending||r.ended)&&(!e||r.length===e.length);return null===e||fM.isBuffer(e)?this._handle?(o?i=this._finishFlushFlag:(i=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||kM.Z_NO_FLUSH)),void this._processChunk(e,i,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},zP.prototype._processChunk=function(e,t,n){var i=e&&e.length,r=this._chunkSize-this._offset,o=0,a=this,s="function"==typeof n;if(!s){var l,u=[],c=0;this.on("error",(function(e){l=e})),wP(this._handle,"zlib binding closed");do{var d=this._handle.writeSync(t,e,o,i,this._buffer,this._offset,r)}while(!this._hadError&&p(d[0],d[1]));if(this._hadError)throw l;if(c>=kP)throw WP(this),new RangeError(CP);var h=fM.concat(u,c);return WP(this),h}wP(this._handle,"zlib binding closed");var f=this._handle.write(t,e,o,i,this._buffer,this._offset,r);function p(l,d){if(this&&(this.buffer=null,this.callback=null),!a._hadError){var h=r-d;if(wP(h>=0,"have should not go down"),h>0){var f=a._buffer.slice(a._offset,a._offset+h);a._offset+=h,s?a.push(f):(u.push(f),c+=f.length)}if((0===d||a._offset>=a._chunkSize)&&(r=a._chunkSize,a._offset=0,a._buffer=fM.allocUnsafe(a._chunkSize)),0===d){if(o+=i-l,i=l,!s)return!0;var g=a._handle.write(t,e,o,i,a._buffer,a._offset,a._chunkSize);return g.callback=p,void(g.buffer=e)}if(!s)return!1;n()}}f.buffer=e,f.callback=p},_P.inherits(MP,zP),_P.inherits(NP,zP),_P.inherits(PP,zP),_P.inherits(OP,zP),_P.inherits(FP,zP),_P.inherits(BP,zP),_P.inherits(HP,zP);var VP,KP=hM.gzip,qP=hM.gunzip,JP=(_P=o("drhEA")).promisify,XP=(Zr=o("dwjmx")).Buffer,GP=JP(KP),ZP=JP(qP),$P=(VP=s(n(l).mark((function e(){var t,i,r=arguments;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,GP(t);case 3:return i=e.sent,e.abrupt("return",XP.from(i).toString("base64"));case 5:case"end":return e.stop()}}),e)}))),function(){return VP.apply(this,arguments)}),YP=function(){var e=s(n(l).mark((function e(){var t,i,r=arguments;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,ZP(XP.from(XP.from(t,"base64")));case 3:return i=e.sent,e.abrupt("return",i.toString());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();dM={compress:$P,decompress:YP};var QP="liascript-editor-container",eO="liascript-preview-container",tO="collaboration-link",nO="online-users-overview",iO="preview-overlay",rO=function(e,t){var n="modal-container",i=document.getElementById(n);i||((i=document.createElement("div")).id=n,document.body.append(i)),i.innerHTML='\x3c!-- Modal --\x3e\n    <div class="modal fade" id="modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">\n      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalLabel">'.concat(e,'</h5>\n            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n          </div>\n          <div class="modal-body">\n            ').concat(t,'\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>\n            \x3c!--button type="button" class="btn btn-primary">Save changes</button--\x3e\n          </div>\n        </div>\n      </div>\n    </div>'),new bootstrap.Modal(document.getElementById("modal"),{"data-bs-toggle":"modal"}).show()};function oO(e){return aO.apply(this,arguments)}function aO(){return(aO=s(n(l).mark((function e(t){var i,r;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="url"===e.t0?3:"zip"===e.t0?5:"file"===e.t0?10:14;break;case 3:return rO("Collaboration link",'\n        If you share the link below, the editor will be in collaborative mode.\n        Working should also be possible offline, but all connected users will work on the same course.\n        If you did receive this via a collaboration link and want to make a complete new course by yourself, then you will have to click onto the "Fork" button, which will create a complete new version.\n        \n        <hr>\n\n        <a href="'.concat(window.location.toString(),'">\n          ').concat(window.location.toString(),"\n        </a>")),e.abrupt("break",14);case 5:return e.next=7,dM.compress(window.LIA.editor.getValue());case 7:return i=e.sent,rO("Snapshot url",'\n        Snapshots are URLs that contain the entire course defintion.\n        However, this works only for short courses, the longer the course the longer the URL.\n        Sharing your editor via a messenger for example, you will have to check first if no parts are truncated!\n        Additionally different browser support different lengths of URLs...\n                    \n        <hr>\n        \n        <a style="word-break: break-all" href="'.concat(iM(["show","code",i]),'">\n          ').concat(iM(["show","code",i]),"\n        </a>")),e.abrupt("break",14);case 10:if(r=prompt("please insert the URL of a Markdown file you want to share","")){e.next=13;break}return e.abrupt("return");case 13:rO("External resource",'\n        Use this URL to predefine the content for your share link.\n        In this case the editor will at first try to load the Markdown file and insert its content into the editor.\n        This link will only work if your Markdown file is accessible via the internet.\n                    \n        <hr>\n        \n        <a style="word-break: break-all" href="'.concat(iM(["show","file",r]),'">\n          ').concat(iM(["show","file",r]),"\n        </a>"));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sO(e){var t=document.getElementById(QP),n=document.getElementById(eO);if(t&&n)switch(e){case 0:t.hidden=!1,n.hidden=!0,t.classList.replace("w-50","w-100");break;case 1:t.hidden=!0,n.hidden=!1,n.classList.replace("w-50","w-100");break;case 2:t.hidden=!1,n.hidden=!1,t.classList.replace("w-100","w-50"),n.classList.replace("w-100","w-50")}}function lO(e){!e&&window.LIA.editor&&(e=window.LIA.editor.getValue()),window.LIA.init(e||"")}function uO(){if(window.LIA.editor){var e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(window.LIA.editor.getValue())),e.setAttribute("download","README.md"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}else console.warn("No editor defined ...")}function cO(e){setTimeout((function(){var e=document.getElementById(iO);e&&e.remove()}),e)}function dO(){window.LIA.preview.lineGoto=function(e){var t,n,i;null===(t=window.LIA.editor)||void 0===t||t.setPosition({lineNumber:e+1,column:0}),null===(n=window.LIA.editor)||void 0===n||n.revealLineNearTop(e+1),null===(i=window.LIA.editor)||void 0===i||i.focus()},cO(1e3)}self.MonacoEnvironment={getWorkerUrl:function(e,t){return n("json"===t?rM:"css"===t||"scss"===t||"less"===t?oM:"html"===t||"handlebars"===t||"razor"===t?aM:"typescript"===t||"javascript"===t?sM:lM)}},window.LIA||(window.LIA={isCtrlPressed:!1,preview:void 0,editor:void 0,isReady:!1,onReady:function(e){console.warn("You need to overwrite window.LIA.onReady")},init:function(e,t){if(window.LIA.preview&&window.LIA.preview.jit)window.LIA.preview.focusOnMain=!1,window.LIA.preview.scrollUpOnMain=!1,t&&t(),e&&e.trim()?window.LIA.preview.jit(e):(console.warn("Empty Document, generating help"),window.LIA.preview.jit('\x3c!--\nauthor: Andr Dietrich\nemail:  LiaScript@web.de\ncomment: This is a short introduction to the LiaScript live editor.\n\nclassroom: disable\n--\x3e\n\n# Welcome to LiaScript\n\nIf you are new to LiaScript and this editor then please read this short introduction ...\notherwise we are sorry for interrupting, please go on and create a beautiful course ;-)\n\n> __Note:__\n> \n> This is a new editor based on [Yjs](https://docs.yjs.dev) for collaborative.\n> We are still in the development phase and some feature like directly sharing courses from this editor and uploading multimedia content does will not work.\n> This editor is entirely browser-based, thus there is no backend involved which stores your content.\n> Everything will be stored within your local browser and you should also be able to edit content offline.\n\n\n<article>\n\n---\n\n### 1. Editing\n\nIf you are new to\n[Markdown](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet),\ncheck out some or our [resources](#resources), otherwise start typing ...\n__WAIT__ ... the preview does not update, right?\nThis is not a bug!\nThe live update is deactivated to minimize computational costs and to stop errors from being show, when HTML, JavaScript is not fully written down.\nYou have to update the preview by your own, simply by clicking onto the compilation button at the top or, to speed up things, by pressing <kbd>Ctrl</kbd> + <kbd>S</kbd> on your keyboard.\n\n\n| Shortcut                       | Action                   |\n|--------------------------------|--------------------------|\n| <kbd>Ctrl</kbd> + <kbd>S</kbd> | Update the preview       |\n| <kbd>Ctrl</kbd> + <kbd>F</kbd> | Open document search     |\n| <kbd>Ctrl</kbd> + <kbd>A</kbd> | Select all               |\n| <kbd>F1</kbd>                  | Open command line pallet |\n\n---\n\n### 2. Snippets\n\nWe added 3 types of snippets, that are indicated by `lia`, `hili`, and `voice`.\nThis way you do not have to remember all details but can simply search through the different options.\nOne way to start a document is by typing `liainit` and then hitting <kbd>Enter</kbd>.\nThis will generate a document stub for you, which you can use as a starting point.\n_When you update the preview, this help will be gone._\n\nYou have to extend the snippets-view by clicking onto the arrow on the right.\nThis way, more information will be presented and you can start your experiments.\n\n1. Start typing `lia` in your markdown document to see the extended help, that can be explored via fuzzy-searching.\n   Hit <kbd>Tab</kbd> or <kbd>Enter</kbd> for inserting your selected snippet.\n\n2. To ease the `voice` selection for different narrators, start typing voice and search through all possible voice settings.\n\n3. Syntax highlighting help is offered if you start typing `hili` followed by your language of choice.\n   Since LiaScript applies the ace-editor, there is a matching done between highlight.js and ace.\n   You can select your language from highlight.js, but it will be translated into the text in parentheses.\n\n---\n\n### 3. Navigating\n\nYou can use the mouse to navigate between the editor and the preview.\n\n1. __Preview --\x3e Editor__:\n   If you double-click on an element within the preview pane the cursor within the editor will automatically jump to the corresponding line.  \n\n2. __Editor --\x3e Preview__:\n   Press <kbd>Ctrl</kbd> and double-click on a word with the editor, which will open the corresponding page within the preview.\n\n</article>\n\n## Collaborative editing\n\nWhen you create a new document and share its URL this "shall" enable collaborative editing with all users that that have opened this URL are online at the same time.\nYou can also edit your content when you are offline, all states will be stored in your browser and all synchronizing will happen between the browsers (using [WebRTC](https://en.wikipedia.org/wiki/WebRTC)).\nThus, if you want a course where no external user can change the content, you will have to keep the URL private or you can create a new private copy by clicking on "Fork" at the menu.\nA "fork" will create a new starting point for your document that begins with the last state of your current doc.\n\n## Sharing\n\n### Snapshots\n\nWithin the "Menu" you have to possibility to share a "Snapshot-URL" of your document.\nThis means, the content of your current document will be zipped, encoded as [base64](https://en.wikipedia.org/wiki/Base64), and the resulting code will be attached to the URL.\nThe longer your document, the longer the resulting URL.\nHowever, this is intended to share short examples, thus, you should check at first if the course can be displayed properly and if your messenger does not truncate some of the content.\n\nThe resulting document can be opened, edited, and also the new content can be shared, but it will not be stored permanently within your browser nor is collaborative editing possible.\nYou will have to fork the document at first, then your changes will be stored persistently and you can work on it with other creators. \n\n### Files\n\nYou can predefine an external resource as a starting point for sharing.\nInsert the URL of the raw Markdown as if you would share a course and this file will be added as a URL-parameter to your share link.\n\n\n## Multimedia\n\nCurrently it is not possible to store multimedia-content within this editor, we are working on it ;-)\n\nThus your will have to relay on external resources (URLs) and link to them.\nBut, if you need for example simple diagrams, you can use also the LiaScript ASCII-art features.\n\nYou can copy and paste the following example into your document:\n\n``` markdown\n                                    Multiline\n      1.9 |\n          |                 ***\n        y |               *     *\n        - | r r r r r r r*r r r r*r r r r r r r\n        a |             *         *\n        x |            *           *\n        i | B B B B B * B B B B B B * B B B B B\n        s |         *                 *\n          | *  * *                       * *  *\n       -1 +------------------------------------\n          0              x-axis               1\n```\n\n\nor ...\n\n````\n``` ascii\n+------+   +-----+   +-----+   +-----+\n|      |   |     |   |     |   |     |\n| Foo  +--\x3e| Bar +---+ Baz |<--+ Moo |\n|      |   |     |   |     |   |     |\n+------+   +-----+   +--+--+   +-----+\n              ^         |\n              |         V\n.-------------+-----------------------.\n| Hello here and there and everywhere |\n\'-------------------------------------\'\n```\n````\n\n## Resources\n\n\n* Project-Website: https://LiaScript.github.io\n\n* Open-Source: https://github.com/liascript\n\n* YouTube: https://www.youtube.com/channel/UCyiTe2GkW_u05HSdvUblGYg\n\n* Additional resources:\n  \n  - Documentation: https://github.com/LiaScript/docs\n  - Free books: https://github.com/LiaBooks\n  - Templates: https://github.com/topics/liascript-template\n  - Courses & ...: https://github.com/topics/liascript-course\n  - Blog: https://aizac.herokuapp.com\n\n* Editor:\n\n  - VSCode: https://code.visualstudio.com/Download\n\n    - HowTo: https://aizac.herokuapp.com/install-visual-studio-code-with-liascript/\n    - Liascript-Preview: https://marketplace.visualstudio.com/items?itemName=LiaScript.liascript-preview\n    - Liascript-Snippets: https://marketplace.visualstudio.com/items?itemName=LiaScript.liascript-snippets\n\n  - Atom: https://aizac.herokuapp.com/install-atom-with-liascript/\n\n* Development-Server: https://www.npmjs.com/package/@liascript/devserver\n\n* Exporter: https://www.npmjs.com/package/@liascript/exporter\n\n\n## Get Help\n\nHow to contact us:\n\n* by eMail: LiaScript@web.de\n* via Twitter: https://twitter.com/LiaScript\n* or via chat: https://gitter.im/LiaScript/community\n'));else{var n,i=document.getElementById("liascript-preview");i&&(window.LIA.preview=null===(n=i.contentWindow)||void 0===n?void 0:n.LIA),setTimeout((function(){window.LIA.init(e,t)}),100)}},compile:lO,showMode:sO,share:oO,download:uO,delete:function(){var e=s(n(l).mark((function e(t){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("todo");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fork:function(){var e=s(n(l).mark((function e(t){return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.warn("todo");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),exporter:{github:function(e){return"https://github.com/login/oauth/authorize/?client_id=".concat(Fi.github.clientId,"&redirect_uri=").concat(iM(["export","github"]),"/&state=").concat(e)}}}),window.liaReady=function(e){var t,n=document.getElementById("liascript-preview");if(n&&(null===(t=n.contentWindow)||void 0===t?void 0:t.LIA)&&(n.contentWindow.LIA.onReady=window.LIA.onReady,Fi.responsiveVoiceKey&&n.contentWindow.LIA.injectResposivevoice(Fi.responsiveVoiceKey)),!window.LIA.isReady){var i;window.LIA.isReady=!0;var r=null===(i=window.LIA.editor)||void 0===i?void 0:i.getValue();window.LIA.init(r,dO),cO(1e3)}},window.LIA.fork=function(){var e=nM(24),t=new Da;t.getText(e).insert(0,window.LIA.editor.getValue());new Iu(e,t);setTimeout((function(){window.location.search="/edit/"+e}),500)};var hO=function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),r=t.call(this,e),(0,f.default)((0,Hi.default)(r),"title","Lia[Edit]"),(0,f.default)((0,Hi.default)(r),"config",{lights:!1,mode:2,user:{name:nM(),color:"#"+nM(6,"0123456789ABCDEF")}}),r.setTitle("Lia[Edit]"),e.id?(r.index.maybeInit(e.id),r.loadConfig(),r.initPreview(),r):(window.location.search="/edit/"+nM(24),(0,ji.default)(r))}return(0,c.default)(i,[{key:"loadConfig",value:function(){var e=localStorage.getItem("config");e?this.config=JSON.parse(e):localStorage.setItem("config",JSON.stringify(this.config))}},{key:"initPreview",value:function(){var e,t=(null===(e=this.params.id)||void 0===e?void 0:e.length)>8?this.params.id:null,n=this.index;window.LIA.onReady=function(e){if(t){var i,r=null===(i=window.LIA.editor)||void 0===i?void 0:i.getValue().match(/^# (.+)/m);r&&(e.title=r[1]),n.put(t,e)}}}},{key:"initEditor",value:function(e){var t,n;window.LIA.editor=vc.editor.create(document.getElementById("liascript-editor"),{value:e,language:"markdown",theme:this.config.lights?"vs-light":"vs-dark",automaticLayout:!0}),window.LIA.editor.addAction({id:"compile",label:"LiaScript compile",keybindings:[vc.KeyMod.CtrlCmd|vc.KeyCode.KEY_S],precondition:null,keybindingContext:null,contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(e){window.LIA.compile()}}),vc.languages.registerCompletionItemProvider("markdown",{provideCompletionItems:function(e,t,n){var i=e.getWordAtPosition(t),r=e.getValueInRange({startLineNumber:t.lineNumber,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column}),o={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn},a=[],s=!0,l=!1,u=void 0;if(r.match(/(lia|hili|voice).*$/m))try{for(var c,d=cM[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var h=c.value;a.push({label:h.label,kind:vc.languages.CompletionItemKind.Text,documentation:h.documentation,insertText:h.insertText,range:o,command:{id:"editor.action.insertLineAfter"}})}}catch(e){l=!0,u=e}finally{try{s||null==d.return||d.return()}finally{if(l)throw u}}return{suggestions:a}}}),vc.languages.registerCodeActionProvider("markdown",{provideCodeActions:function(e,t,n){var i,r;window.LIA.isCtrlPressed&&(window.LIA.isCtrlPressed=!1,null===(i=window.LIA)||void 0===i||null===(r=i.preview)||void 0===r||r.gotoLine(t.startLineNumber-1))}}),null===(t=window.LIA.editor)||void 0===t||t.onKeyDown((function(e){5==e.keyCode&&(window.LIA.isCtrlPressed=!0)})),null===(n=window.LIA.editor)||void 0===n||n.onKeyUp((function(e){5==e.keyCode&&(window.LIA.isCtrlPressed=!1)}))}},{key:"init",value:function(){this.initEditor("");var e=new Da;this.provider=new pc(this.params.id,e,{url:"https//signaling.simplewebrtc.com:443/"}),this.indexeddbProvider=new Iu(this.params.id,e);var t=this.provider.awareness;t.setLocalStateField("user",this.config.user),this.provider.on("status",(function(e){console.log("-----------------------------",e.status),e.status,e.status})),t.on("change",(function(e){var n=document.getElementById("number_of_users");n&&(n.innerText=""+Array.from(t.getStates().values()).length)}));new tM(e.getText(this.params.id),window.LIA.editor.getModel(),new Set([window.LIA.editor]),t)}},{key:"navigation",value:function(){return'\n      <nav class="navbar navbar-expand-lg bg-light">\n        <div class="container-fluid">\n          <a class="navbar-brand" href="./">'.concat(this.title,'</a>\n\n          <div class="btn-toolbar btn-group-sm" role="toolbar" aria-label="Toolbar with button groups">\n            <div class="btn-group btn-outline-secondary me-2" role="group" aria-label="Basic radio toggle button group">\n              <input \n                type="radio"\n                class="btn-check"\n                name="btnradio"\n                id="btnradio1"\n                autocomplete="off"\n            \n                onclick="window.LIA.showMode(0)"\n              >\n              <label\n                class="btn btn-outline-secondary"\n                for="btnradio1"\n                title="Editor only"\n              >\n                <i class="bi bi-pencil"></i>\n              </label>\n      \n              <input\n                type="radio"\n                class="btn-check"\n                name="btnradio"\n                id="btnradio2"\n                autocomplete="off"\n                checked\n            \n                onclick="window.LIA.showMode(2)"\n              >\n              <label\n                class="btn btn-outline-secondary"\n                for="btnradio2"\n                title="Split view"\n              >\n                <i class="bi bi-layout-split"></i>\n              </label>\n      \n              <input\n                type="radio"\n                class="btn-check"\n                name="btnradio"\n                id="btnradio3"\n                autocomplete="off"\n                onclick="window.LIA.showMode(1)"\n              >\n              <label\n                class="btn btn-outline-secondary"\n                for="btnradio3"\n                title="Preview only"\n              >\n                <i class="bi bi-eye"></i>\n              </label>\n            </div>\n\n            <button\n              type="button"\n              class="btn btn-outline-secondary me-2 px-3"\n              onclick="window.LIA.compile()"\n\n              title="Compile (Ctrl+S)"\n            >\n              <i class="bi bi-arrow-counterclockwise"></i>\n            </button>\n\n            \x3c!--button \n              type="button" \n              class="btn btn-outline-secondary px-3"\n              onclick="compile()"\n\n              title="Show help"\n            >\n              <i class="bi bi-question-circle"></i>\n            </button--\x3e\n          </div>\n\n          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">\n            <span class="navbar-toggler-icon"></span>\n          </button>\n          \n          <div class="collapse navbar-collapse" id="navbarSupportedContent">\n            <ul class="navbar-nav me-auto mb-lg-0">\n              \n            </ul>\n            \n            \x3c!--div class="container-fluid"--\x3e\n              \n                <div class="navbar-nav mb-2 mb-lg-0">\n\n                  <div class="nav-item nav-item-sm ml-4 me-4">\n                    <a class="nav-link" aria-current="page" href="./?/edit" title="Create a new and empty document">\n                      <i class="bi bi-plus"></i>\n                      New\n                    </a>\n                  </div>\n\n                <div class="nav-item me-4">\n                  <button type="button" class="btn nav-link btn-link" onclick="window.LIA.fork()" title="Create a copy of this document">\n                    <i class="bi bi-bezier2"></i> Fork\n                  </button>\n                </div>\n\n                  <div class="nav-item dropdown me-4" >\n                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">\n                      Menu\n                    </a>\n              \n                    <ul class="dropdown-menu">\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Share editor ...\n                        </h6>\n                      </li>\n                      <li>\n                        <button id="').concat(tO,'" class="btn dropdown-item btn-link" onclick="window.LIA.share(\'url\')">\n                          collaboration link\n                        </button>\n                      </li>\n                      <li>\n                        <button class="btn dropdown-item btn-link" onclick="window.LIA.share(\'zip\')">\n                          snapshot url\n                        </button>\n                      </li>\n                      <li>\n                        <button class="btn dropdown-item btn-link" onclick="window.LIA.share(\'file\')">\n                          external resource\n                        </button>\n                      </li>\n                      <li><hr class="dropdown-divider"></li>\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Share course via ...\n                        </h6>\n                      </li>\n                      <li><a class="dropdown-item" href="#">direct link</a></li>\n                      <li><hr class="dropdown-divider"></li>\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Download ...\n                        </h6>\n                      </li>\n                      <li>\n                        <button class="btn dropdown-item btn-link" onclick="window.LIA.download()">\n                          README.md\n                        </button>\n                      </li>\n                      <li><hr class="dropdown-divider"></li>\n                      <li>\n                        <h6 class="dropdown-header fw-light">\n                          Export to...\n                        </h6>\n                      </li>\n                      <li>\n                        <a class="nav-link" aria-current="page" href="').concat(window.LIA.exporter.github(this.params.id),'" title="Create a new and empty document">\n                          GitHub gist\n                        </a>\n                      </li>\n                    </ul>\n                  </div>\n                \n                \n                  \n                    <span class="btn btn-primary" id="').concat(nO,'">\n                      <i class="bi bi-people-fill"></i>\n                      <span id="number_of_users">1</span>\n                        ONLINE\n                      </span>\n                    </span>\n                  \n                </div>    \n        \n              \n\n\n            \x3c!--/div--\x3e\n          </div>\n        </nav>')}},{key:"body",value:function(){return'\n    <div class="container p-0" style="max-width:100%">\n      <div id="liascript-ide" class="row align-items-start p-0 m-0 flex-nowrap" style="height: calc(100vh - 56px);">\n        <div class="col-6 w-50 p-0 h-100" id="'.concat(QP,'">\n          <div class="col w-100 p-0 h-100" id="liascript-editor"></div>\n        </div>\n\n        <div class="col-6 w-50 h-100 p-0" id="').concat(eO,'">\n          <div id="').concat(iO,'" style="position: absolute; background-color: white; width:50%; height: 100%">\n            <div class="spinner-grow" style="width: 5rem; height: 5rem; margin-top: 50%; margin-left: 45%; margin-right: 45%;" role="status">\n              <span class="visually-hidden">Loading...</span>\n            </div>\n          </div>\n          <iframe style="height: 100%; width:100%" id="liascript-preview" src="./liascript/index.html?"></iframe>\n        </div>\n      </div>\n    </div>\n    ')}},{key:"getHtml",value:function(e){var t=this;return s(n(l).mark((function i(){return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.innerHTML=t.navigation()+t.body(),t.init();case 2:case"end":return n.stop()}}),i)})))()}}]),i}(Li);u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp");var fO=function(e){"use strict";(0,d.default)(n,e);var t=(0,h.default)(n);function n(e){var i;return(0,u.default)(this,n),e.id="1",(i=t.call(this,e)).setTitle("Show"),i.title="Lia[Share]",i}return(0,c.default)(n,[{key:"init",value:function(){var e=this;if(this.params.code)dM.decompress(this.params.code).then((function(t){e.showEditor(t)}));else if(this.params.file){var t=this.params.file.replace(/\/[^\/]*$/,"/");fetch(this.params.file).then((function(e){return e.text()})).then((function(n){var i;e.showEditor((i=t,n.replace(/(\[[^\]]*\]\()(?!(http:|https:|ipfs:|#|\/\/))\.?\/?([^\)]+)/g,"$1".concat(i,"$3"))))}))}}},{key:"showEditor",value:function(e){var t,n;this.initEditor(e),t=tO,(n=document.getElementById(t))&&(n.disabled=!0);var i=document.getElementById(nO);i&&i.classList.replace("btn-primary","btn-secondary")}}]),n}(hO),pO=(u=o("4JAgF"),c=o("9HoHC"),d=o("gNsil"),h=o("8rJSp"),l=o("1JCPQ"),function(e){"use strict";(0,d.default)(i,e);var t=(0,h.default)(i);function i(e,n){var r;return(0,u.default)(this,i),(r=t.call(this,e)).type=n,r.setTitle("Lia[Export]"),r}return(0,c.default)(i,[{key:"getHtml",value:function(e){var t=this;return s(n(l).mark((function i(){var r,o;return n(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.type,n.next="github"===n.t0?3:12;break;case 3:return n.next=5,fetch("https://github.com/login/oauth/access_token?client_id=".concat(Fi.github.clientId,"&client_secret=").concat(Fi.github.clientSecret,"&code=").concat(t.params.code,"&state=").concat(t.params.state,"&redirect_uri=").concat(iM(["export","github"]),"/"),{method:"post"});case 5:return r=n.sent,n.next=8,r.json();case 8:return o=n.sent,console.warn("access_token",r,o),e&&(e.innerHTML="---"+JSON.stringify(t.params)),n.abrupt("break",13);case 12:console.warn("unknown service: ",t.params.type);case 13:case"end":return n.stop()}}),i)})))()}}]),i}(Li)),gO=function(e){var t=e.result.slice(1),n=Array.from(e.route.path.matchAll(/:(\w+)/g)).map((function(e){return e[1]}));return Object.fromEntries(n.map((function(e,n){return[e,t[n]]})))},vO=function(){var e=s(n(l).mark((function e(){var t,i,r;return n(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!location.pathname.startsWith("liascript")){e.next=2;break}return e.abrupt("return");case 2:i=(t=[{path:"/",view:Bi},{path:"/edit",view:hO},{path:"/edit/:id",view:hO},{path:"/show/code/:code",view:fO},{path:"/show/file/:file",view:fO},{path:"/export/github/&code=:code&state=:state",view:pO,init:"github"}]).map((function(e){return{route:e,result:location.search.slice(1).match((t=e.path,new RegExp("^"+t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var t})),(r=i.find((function(e){return null!==e.result})))||(r={route:t[0],result:[location.search]}),new r.route.view(gO(r),r.route.init).getHtml(document.body);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.addEventListener("popstate",vO),document.addEventListener("DOMContentLoaded",(function(){document.body.addEventListener("click",(function(e){var t;e.target.matches("[data-link]")&&(e.preventDefault(),t=e.target.href,history.pushState(null,null,t),vO())})),vO()}))}();